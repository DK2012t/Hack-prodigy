
	exports = {};window.hack=Object.create(null);hack.variables=Object.create(null);
	
    /*! For license information please see game.min.js.LICENSE */
    !function(t,i){for(var n in i)t[n]=i[n]}(window,function(t){var i={};hack.modules=i;function n(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=i,n.d=function(t,i,e){n.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,i){if(1&i&&(t=n(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)n.d(e,s,function(i){return t[i]}.bind(null,s));return e},n.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="",n(n.s=482)}([function(t,i,n){"use strict";n.r(i),n.d(i,"__extends",(function(){return s})),n.d(i,"__assign",(function(){return r})),n.d(i,"__rest",(function(){return h})),n.d(i,"__decorate",(function(){return o})),n.d(i,"__param",(function(){return u})),n.d(i,"__metadata",(function(){return a})),n.d(i,"__awaiter",(function(){return c})),n.d(i,"__generator",(function(){return l})),n.d(i,"__exportStar",(function(){return f})),n.d(i,"__values",(function(){return b})),n.d(i,"__read",(function(){return v})),n.d(i,"__spread",(function(){return d})),n.d(i,"__spreadArrays",(function(){return O})),n.d(i,"__await",(function(){return m})),n.d(i,"__asyncGenerator",(function(){return p})),n.d(i,"__asyncDelegator",(function(){return g})),n.d(i,"__asyncValues",(function(){return y})),n.d(i,"__makeTemplateObject",(function(){return j})),n.d(i,"__importStar",(function(){return _})),n.d(i,"__importDefault",(function(){return w}));var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)};function s(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var r=function(){return(r=Object.assign||function(t){for(var i,n=1,e=arguments.length;n<e;n++)for(var s in i=arguments[n])Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);return t}).apply(this,arguments)};function h(t,i){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.indexOf(e)<0&&(n[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(e=Object.getOwnPropertySymbols(t);s<e.length;s++)i.indexOf(e[s])<0&&Object.prototype.propertyIsEnumerable.call(t,e[s])&&(n[e[s]]=t[e[s]])}return n}function o(t,i,n,e){var s,r=arguments.length,h=r<3?i:null===e?e=Object.getOwnPropertyDescriptor(i,n):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,e);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(h=(r<3?s(h):r>3?s(i,n,h):s(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h}function u(t,i){return function(n,e){i(n,e,t)}}function a(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)}function c(t,i,n,e){return new(n||(n=Promise))((function(s,r){function h(t){try{u(e.next(t))}catch(i){r(i)}}function o(t){try{u(e.throw(t))}catch(i){r(i)}}function u(t){t.done?s(t.value):new n((function(i){i(t.value)})).then(h,o)}u((e=e.apply(t,i||[])).next())}))}function l(t,i){var n,e,s,r,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,e&&(s=2&r[0]?e.return:r[0]?e.throw||((s=e.return)&&s.call(e),0):e.next)&&!(s=s.call(e,r[1])).done)return s;switch(e=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return h.label++,{value:r[1],done:!1};case 5:h.label++,e=r[1],r=[0];continue;case 7:r=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){h=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){h.label=r[1];break}if(6===r[0]&&h.label<s[1]){h.label=s[1],s=r;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(r);break}s[2]&&h.ops.pop(),h.trys.pop();continue}r=i.call(t,h)}catch(o){r=[6,o],e=0}finally{n=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}}function f(t,i){for(var n in t)i.hasOwnProperty(n)||(i[n]=t[n])}function b(t){var i="function"==typeof Symbol&&t[Symbol.iterator],n=0;return i?i.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function v(t,i){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var e,s,r=n.call(t),h=[];try{for(;(void 0===i||i-- >0)&&!(e=r.next()).done;)h.push(e.value)}catch(o){s={error:o}}finally{try{e&&!e.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return h}function d(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(v(arguments[i]));return t}function O(){for(var t=0,i=0,n=arguments.length;i<n;i++)t+=arguments[i].length;var e=Array(t),s=0;for(i=0;i<n;i++)for(var r=arguments[i],h=0,o=r.length;h<o;h++,s++)e[s]=r[h];return e}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function p(t,i,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,s=n.apply(t,i||[]),r=[];return e={},h("next"),h("throw"),h("return"),e[Symbol.asyncIterator]=function(){return this},e;function h(t){s[t]&&(e[t]=function(i){return new Promise((function(n,e){r.push([t,i,n,e])>1||o(t,i)}))})}function o(t,i){try{(n=s[t](i)).value instanceof m?Promise.resolve(n.value.v).then(u,a):c(r[0][2],n)}catch(e){c(r[0][3],e)}var n}function u(t){o("next",t)}function a(t){o("throw",t)}function c(t,i){t(i),r.shift(),r.length&&o(r[0][0],r[0][1])}}function g(t){var i,n;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,s){i[e]=t[e]?function(i){return(n=!n)?{value:m(t[e](i)),done:"return"===e}:s?s(i):i}:s}}function y(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t[Symbol.asyncIterator];return n?n.call(t):(t=b(t),i={},e("next"),e("throw"),e("return"),i[Symbol.asyncIterator]=function(){return this},i);function e(n){i[n]=t[n]&&function(i){return new Promise((function(e,s){(function(t,i,n,e){Promise.resolve(e).then((function(i){t({value:i,done:n})}),i)})(e,s,(i=t[n](i)).done,i.value)}))}}}function j(t,i){return Object.defineProperty?Object.defineProperty(t,"raw",{value:i}):t.raw=i,t}function _(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i.default=t,i}function w(t){return t&&t.__esModule?t:{default:t}}},function(t,i,n){"use strict";var e,s,r;n.r(i),n.d(i,"EInjectionIdentifiers",(function(){return e})),n.d(i,"GameIdentifiers",(function(){return s})),n.d(i,"EAssetType",(function(){return r})),n.d(i,"BaseLocalizer",(function(){return a})),n.d(i,"DebugLocalizer",(function(){return v})),n.d(i,"Localizer",(function(){return b})),n.d(i,"LocalLanguageDataCollection",(function(){return d})),n.d(i,"VerboseLocalizer",(function(){return O})),n.d(i,"Logger",(function(){return c})),n.d(i,"LogLevel",(function(){return h})),n.d(i,"RemoteLogger",(function(){return y})),n.d(i,"ConsoleLogger",(function(){return j})),n.d(i,"DrawDebugUtils",(function(){return tt})),n.d(i,"BitFieldBitComponent",(function(){return jt})),n.d(i,"BitFieldSaveDataComponent",(function(){return yt})),n.d(i,"SaveDataComponent",(function(){return _t})),n.d(i,"SaveDatastoreComponent",(function(){return pt})),n.d(i,"LargeBitField",(function(){return mt})),n.d(i,"Action",(function(){return Et})),n.d(i,"actionable",(function(){return At})),n.d(i,"Actions",(function(){return It})),n.d(i,"FSMService",(function(){return Lt})),n.d(i,"AddVariableAction",(function(){return Pt})),n.d(i,"EnableInputAction",(function(){return kt})),n.d(i,"ExecuteFunctionAction",(function(){return Bt})),n.d(i,"ExecuteStateMachineAction",(function(){return Ut})),n.d(i,"SetAlphaAction",(function(){return Gt})),n.d(i,"SetVariableAction",(function(){return Ft})),n.d(i,"SetVariablesAction",(function(){return Ht})),n.d(i,"SetVisibleAction",(function(){return Kt})),n.d(i,"TweenAction",(function(){return zt})),n.d(i,"WaitAction",(function(){return Wt})),n.d(i,"WaitForEventAction",(function(){return Yt})),n.d(i,"StateMachineDataFactories",(function(){return Mt})),n.d(i,"ActionData",(function(){return St})),n.d(i,"StateMachineData",(function(){return xt})),n.d(i,"FSMController",(function(){return Zt})),n.d(i,"FSMFactories",(function(){return Jt})),n.d(i,"LogFSMController",(function(){return $t})),n.d(i,"SocketIOWebSocket",(function(){return g})),n.d(i,"FetchHttpClient",(function(){return ni})),n.d(i,"EWebRequestMethod",(function(){return qt})),n.d(i,"JsonResponseInterceptor",(function(){return ei})),n.d(i,"JsonWebRequestBody",(function(){return si})),n.d(i,"WebRequest",(function(){return ri})),n.d(i,"WebResponse",(function(){return ii})),n.d(i,"ProtobufResponseInterceptor",(function(){return hi})),n.d(i,"ProtobufWebRequestBody",(function(){return oi})),n.d(i,"TextSource",(function(){return ui})),n.d(i,"StringTextSource",(function(){return ai})),n.d(i,"Text",(function(){return Oi})),n.d(i,"Primitive",(function(){return mi})),n.d(i,"RectanglePrimitive",(function(){return pi})),n.d(i,"PolygonPrimitive",(function(){return gi})),n.d(i,"CirclePrimitive",(function(){return yi})),n.d(i,"DebugBounds",(function(){return ji})),n.d(i,"Graphic",(function(){return Ei})),n.d(i,"SlicedElementRotation",(function(){return ti})),n.d(i,"SlicedGraphic",(function(){return Ai})),n.d(i,"RenderComponent",(function(){return di})),n.d(i,"SignalLegacy",(function(){return A})),n.d(i,"BitField",(function(){return Ti})),n.d(i,"Utils",(function(){return f})),n.d(i,"Sorting",(function(){return it})),n.d(i,"GeneratorUtils",(function(){return Di})),n.d(i,"DeviceUtils",(function(){return Si})),n.d(i,"CancelablePromise",(function(){return Ci})),n.d(i,"PromiseUtil",(function(){return Ni})),n.d(i,"ResolvablePromise",(function(){return xi})),n.d(i,"ResolvablePromiseQueue",(function(){return Ri})),n.d(i,"FrameworkApp",(function(){return X})),n.d(i,"Components",(function(){return D})),n.d(i,"componentable",(function(){return Q})),n.d(i,"Component",(function(){return T})),n.d(i,"GameObject",(function(){return ot})),n.d(i,"objectSerializable",(function(){return ut})),n.d(i,"serializable",(function(){return rt})),n.d(i,"IGNORE_IN_EDITOR_METADATA_KEY",(function(){return at})),n.d(i,"ignoreInEditor",(function(){return ct})),n.d(i,"LegacyTransform",(function(){return ht})),n.d(i,"EDITOR_FUNCTION_METADATA_KEY",(function(){return lt})),n.d(i,"editorFunction",(function(){return ft})),n.d(i,"FrameWorkManager",(function(){return bt})),n.d(i,"Transform",(function(){return J})),n.d(i,"RectTransform",(function(){return $})),n.d(i,"prefabConstructable",(function(){return dt})),n.d(i,"PrefabConstructableMetadata",(function(){return vt})),n.d(i,"Camera",(function(){return Z})),n.d(i,"Shader",(function(){return Ot})),n.d(i,"InversifyBindingAs",(function(){return ci})),n.d(i,"InversifyBindingTo",(function(){return li})),n.d(i,"InversifyContainer",(function(){return fi})),n.d(i,"INJECTION_PARAMETER_METADATA_KEY",(function(){return Mi})),n.d(i,"ContextBinding",(function(){return Pi})),n.d(i,"GameObjectContext",(function(){return Li})),n.d(i,"injectFunction",(function(){return ki})),n.d(i,"injectParameter",(function(){return Bi})),n.d(i,"injectComponentProperty",(function(){return Ui})),n.d(i,"injectProperty",(function(){return Gi})),n.d(i,"Installer",(function(){return Fi})),n.d(i,"InjectableComponent",(function(){return Hi})),n.d(i,"InjectableClass",(function(){return Ki})),n.d(i,"SceneContainerInstaller",(function(){return zi})),n.d(i,"SceneContextBinding",(function(){return Wi})),n.d(i,"PrefabLoader",(function(){return an})),n.d(i,"PrefabService",(function(){return un})),n.d(i,"PrefabDataFactories",(function(){return on})),n.d(i,"assetTag",(function(){return wi})),n.d(i,"Button",(function(){return vn})),n.d(i,"ButtonBase",(function(){return bn})),n.d(i,"EButtonBaseState",(function(){return Ii})),n.d(i,"GameObjectTransition",(function(){return dn})),n.d(i,"Interactable",(function(){return ln})),n.d(i,"SelectedGameObjectTransition",(function(){return On})),n.d(i,"Toggle",(function(){return mn})),n.d(i,"ToggleGroup",(function(){return pn})),n.d(i,"Transition",(function(){return fn})),n.d(i,"EDirection",(function(){return cn})),n.d(i,"ScrollView",(function(){return jn})),n.d(i,"ScrollBar",(function(){return gn})),n.d(i,"CollectionScrollView",(function(){return _n})),n.d(i,"ScrollViewCell",(function(){return yn})),n.d(i,"ScrollViewSection",(function(){return wn})),n.d(i,"ScrollViewDataSource",(function(){return En})),n.d(i,"KeyListener",(function(){return In})),n.d(i,"Sound",(function(){return An})),n.d(i,"MainThreadWorker",(function(){return Tn})),n.d(i,"ComlinkWebWorker",(function(){return Sn})),n.d(i,"FunctionWebWorker",(function(){return Nn})),n.d(i,"WebWorkerFactory",(function(){return Cn})),n.d(i,"NavMeshPolygon",(function(){return xn})),n.d(i,"ColliderPolygon",(function(){return Rn})),n.d(i,"EPropertyType",(function(){return l})),n.d(i,"SERIALIZABLE_PROPERTIES_METADATA_KEY",(function(){return N})),n.d(i,"PROPERTY_INFORMATION_METADATA_KEY",(function(){return x})),n.d(i,"PropertyTypeMetadata",(function(){return R})),n.d(i,"serializeString",(function(){return M})),n.d(i,"serializeNumber",(function(){return L})),n.d(i,"serializeBoolean",(function(){return P})),n.d(i,"serializeJSON",(function(){return k})),n.d(i,"serializeColor",(function(){return B})),n.d(i,"serializeVector",(function(){return U})),n.d(i,"serializeSize",(function(){return G})),n.d(i,"serializeGameObject",(function(){return F})),n.d(i,"serializeArray",(function(){return H})),n.d(i,"serializeComponent",(function(){return K})),n.d(i,"serializeSceneComponent",(function(){return z})),n.d(i,"serializeSignal",(function(){return W})),n.d(i,"serializeUnknown",(function(){return Y})),n.d(i,"serializeUnknownObject",(function(){return V})),n.d(i,"serializePrefabConstructable",(function(){return q})),n.d(i,"UID_CLASS_METADATA_KEY",(function(){return Yi})),n.d(i,"UIDMetadata",(function(){return Vi})),n.d(i,"serializeMapID",(function(){return qi})),n.d(i,"REQUIRE_COMPONENT_CLASS_METADATA_KEY",(function(){return Qi})),n.d(i,"REQUIRE_COMPONENT_INFORMATION_METADATA_KEY",(function(){return Xi})),n.d(i,"RequireComponentMetadata",(function(){return Ji})),n.d(i,"requireComponent",(function(){return Zi})),n.d(i,"Layer",(function(){return et})),n.d(i,"LayerSorting",(function(){return nt})),n.d(i,"Scene",(function(){return bi})),n.d(i,"SceneComponent",(function(){return $i})),n.d(i,"SceneManager",(function(){return vi})),n.d(i,"MathUtils",(function(){return _})),n.d(i,"Matrix3x3",(function(){return E})),n.d(i,"Rectangle",(function(){return Mn})),n.d(i,"Size",(function(){return I})),n.d(i,"Vector2",(function(){return w})),function(t){t.PrefabService="PrefabService",t.PrefabDataProvider="PrefabDataProvider",t.AssetLoader="AssetLoader",t.FrameWorkManager="FrameWorkManager"}(e||(e={})),function(t){t.IFSMController="IFSMController",t.FSMFactories="FSMFactories",t.FSMDataProvider="FSMDataProvider",t.FSMService="FSMService",t.LocalizationData="LocalizationData",t.LocalizationService="LocalizationService",t.LoggerService="LoggerService"}(s||(s={})),function(t){t[t.JSON=0]="JSON",t[t.Image=1]="Image",t[t.Atlas=2]="Atlas",t[t.Music=3]="Music",t[t.Sound=4]="Sound",t[t.Spine=5]="Spine",t[t.Binary=6]="Binary"}(r||(r={}));var h,o=n(0),u=n(9),a=function(){function t(){this.dataSource=null}return t.prototype.setDataSource=function(t){this.dataSource=t},t=Object(o.__decorate)([Object(u.injectable)()],t)}(),c=function(){function t(){}return t.addLogger=function(t){this._loggers.push(t)},t.removeLogger=function(t){this._loggers=this._loggers.filter((function(i){return i!==t}))},t.log=function(t,i){this._loggers.forEach((function(n){n.log(t,i)}))},t.setLogLevel=function(t){this._loggers.forEach((function(i){i.setLogLevel(t)}))},t._loggers=[],t}();!function(t){t[t.Verbose=0]="Verbose",t[t.Warning=1]="Warning",t[t.Error=2]="Error",t[t.Info=3]="Info"}(h||(h={}));var l,f=function(){function t(){}return t.isDefined=function(t){return null!=t},t.generateGUID=function(){var t=Date.now();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(i){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===i?n:3&n|8).toString(16)}))},t.cacheAsBitmap=function(i){if(i&&(i.cacheAsBitmap=!1,i.cacheAsBitmap=!0,i instanceof PIXILegacy.DisplayObjectContainer))for(var n=0;n<i.children.length;++n)t.toggleDisplayObjSettings(i.children[n],!1)},t.toggleDisplayObjSettings=function(i,n){if(i&&(i.visible=n,i.renderable=n,i.active=n,i instanceof Phaser.Sprite||i instanceof Phaser.Image||i instanceof Phaser.TileSprite?(i.exists=n,!n&&i.inputEnabled&&(i.inputEnabled=!1)):i instanceof Phaser.Group&&(i.exists=n,!n&&i.inputEnableChildren&&(i.inputEnableChildren=!1)),i instanceof PIXILegacy.DisplayObjectContainer))for(var e=0;e<i.children.length;++e)t.toggleDisplayObjSettings(i.children[e],n)},t.bufferToUtf8String=function(t){for(var i=0,n=[];i<t.length;){var e=t[i++];if(e>127)if(e>191&&e<224){if(i>=t.length)return c.log("JsonResponseInterceptor - Incomplete 2 byte sequence",h.Error),null;e=(31&e)<<6|63&t[i++]}else if(e>223&&e<240){if(i+1>=t.length)return c.log("JsonResponseInterceptor - Incomplete 3 byte sequence",h.Error),null;e=(15&e)<<12|(63&t[i++])<<6|63&t[i++]}else{if(!(e>239&&e<248))return c.log("JsonResponseInterceptor - Invalid multi-byte start 0x"+e.toString(16),h.Error),null;if(i+2>=t.length&&i+1>=t.length)return c.log("JsonResponseInterceptor - Incomplete 4 byte sequence",h.Error),null;e=(7&e)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++]}if(e<=65535)n.push(String.fromCharCode(e));else{if(!(e<=1114111))return c.log("JSON conversion code 0x"+e.toString(16)+" could not be decoded",h.Error),null;e-=65536,n.push(String.fromCharCode(e>>10|55296)),n.push(String.fromCharCode(1023&e|56320))}}return n.join("")},t.utf8StringToBuffer=function(t){for(var i=0,n=new Uint8Array(4*t.length),e=0;e!==t.length;++e){var s=t.charCodeAt(e);if(s<128)n[i++]=s;else{if(s<2048)n[i++]=s>>6|192;else{if(s>55295&&s<56320){if(++e>=t.length)return c.log("UTF-8 encode: incomplete surrogate pair",h.Error),null;var r=t.charCodeAt(e);if(r<56320||r>57343)return c.log("UTF-8 encode: second surrogate character 0x"+r.toString(16)+" at index "+e+" out of range",h.Error),null;s=((1023&s)<<10)+(1023&r)+65536,n[i++]=s>>18|240,n[i++]=s>>12&63|128}else n[i++]=s>>12|224;n[i++]=s>>6&63|128}n[i++]=63&s|128}}return new Uint8Array(n.buffer.slice(0,i))},t.toggleDisplayObjSmooth=function(i,n){if(i&&((i instanceof Phaser.Sprite||i instanceof Phaser.Image||i instanceof Phaser.TileSprite)&&(i.smoothed=n),i instanceof PIXILegacy.DisplayObjectContainer))for(var e=0;e<i.children.length;++e)t.toggleDisplayObjSmooth(i.children[e],n)},t}(),b=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.getText=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(f.isDefined(this.dataSource)){var e=this.dataSource.getValue(t);if(f.isDefined(e)){for(var s=0;s<i.length;s++)e=e.split("{"+s+"}").join(i[s].toString());return e}}return c.log("Localized value was not found in language data for key ["+t+"].",h.Error),t},i=Object(o.__decorate)([Object(u.injectable)()],i)}(a),v=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.replacementCharacter="w",i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"ReplacementCharacter",{get:function(){return this.replacementCharacter},enumerable:!0,configurable:!0}),i.prototype.getText=function(i){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var s=t.prototype.getText.apply(this,Object(o.__spread)([i],n));return s===i?s:s.replace(/[a-zA-Z0-9]/g,this.ReplacementCharacter)},i}(b),d=function(){function t(t){this.languageData=null,this.setData(t)}return t.prototype.setData=function(t){this.languageData=t},t.prototype.getValue=function(t){return this.languageData.hasOwnProperty(t)?this.languageData[t]:null},t}(),O=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.getText=function(i){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var s=t.prototype.getText.apply(this,Object(o.__spread)([i],n));return c.log("Resovled "+i+" to "+s,h.Verbose),s},i}(b),m=n(5),p=n(476),g=function(){function t(){}return Object.defineProperty(t.prototype,"id",{get:function(){return this.socket?this.socket.id:null},enumerable:!0,configurable:!0}),t.prototype.connect=function(t,i,n){if(void 0===i&&(i=null),void 0===n&&(n={}),!f.isDefined(this.socket)){var e=t;null!==i&&(e=e+":"+i),this.socket=p(e,Object(m.merge)({forceNew:!0,transports:["websocket","xhr-polling","jsonp-polling","htmlfile"]},n))}},t.prototype.disconnect=function(){f.isDefined(this.socket)&&(!this.socket.connected&&this.socket.disconnected||this.socket.disconnect(),this.socket=null)},t.prototype.addListener=function(t,i){f.isDefined(this.socket)&&this.socket.on(t,i)},t.prototype.removeListener=function(t,i){f.isDefined(this.socket)&&this.socket.off(t,i)},t.prototype.emitEvent=function(t,i){f.isDefined(this.socket)&&this.socket.emit(t,i)},t.prototype.setQuery=function(t){f.isDefined(this.socket)&&(this.socket.io.opts.query=t)},t.prototype.isConnected=function(){return f.isDefined(this.socket)&&this.socket.connected},t=Object(o.__decorate)([Object(u.injectable)()],t)}(),y=function(){function t(t,i,n){var e=this;this._messageQueue=[],this._address=t,this._port=i,this._minimumLogLevel=n,this._socket=new g,this._socket.addListener("connect",(function(t){e.flushQueue()}))}return t.prototype.connect=function(){this._socket.connect(this._address,this._port)},t.prototype.disconnect=function(){this._socket.disconnect()},t.prototype.flushQueue=function(){if(this._socket.isConnected())for(;this._messageQueue.length>0;){var t=this._messageQueue.shift();this._socket.emitEvent("log",{message:t[0],logLevel:t[1]})}},t.prototype.log=function(i,n){n<this._minimumLogLevel||(this._messageQueue.length>=t.MAX_QUEUE_SIZE&&this._messageQueue.shift(),this._messageQueue.push([i,n]),this.flushQueue())},t.prototype.setLogLevel=function(t){this._minimumLogLevel=t},t.MAX_QUEUE_SIZE=50,t}(),j=function(){function t(){this._minimumLogLevel=h.Verbose,this._shouldColorCodeLogs=!1,this._minimumStackTraceLogLevel=h.Error}return t.prototype.log=function(t,i){i>=this._minimumLogLevel&&(this._shouldColorCodeLogs?console.log("%c["+h[i].toUpperCase()+"]%c "+t,this.getLogStyle(i),this.getTextSytle()):console.log("["+h[i].toUpperCase()+"] "+t),i>=this._minimumStackTraceLogLevel&&console.trace())},t.prototype.setLogLevel=function(t){this._minimumLogLevel=t},t.prototype.setColoredLogsEnabled=function(t){this._shouldColorCodeLogs=t},t.prototype.getLogStyle=function(t){switch(t){case h.Verbose:return"background: #009688; color: #EEEEEE; padding: 2px";case h.Warning:return"background: #FEEFB3; color: #9F6000; padding: 2px";case h.Error:return"background: #FFD2D2; color: #D8000C; padding: 2px";default:return""}},t.prototype.getTextSytle=function(){return"color: #000; background-color: #FFF; padding: 0"},t}(),_=function(){function t(){}return t.degreesToRadians=function(i){return i*t.DEGREES_TO_RAD},t.radiansToDegrees=function(i){return i*t.RAD_TO_DEGREES},t.isNearlyEqual=function(t,i,n){return void 0===n&&(n=1e-5),Math.abs(t-i)<n},t.clamp=function(t,i,n){return Math.max(Math.min(t,n),i)},t.DEGREES_TO_RAD=Math.PI/180,t.RAD_TO_DEGREES=180/Math.PI,t}(),w=function(){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this._x=0,this._y=0,this._magnitude=0,this._magnitudeSq=0,this._recalculateMagnitude=!1,this._recalculateMagnitudeSq=!1,this.x=t,this.y=i}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._recalculateMagnitudeSq=!0,this._recalculateMagnitude=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._recalculateMagnitudeSq=!0,this._recalculateMagnitude=!0},enumerable:!0,configurable:!0}),t.prototype.getMagnitude=function(){return this.recalculateMagnitude(),this._magnitude},t.prototype.getMagnitudeSq=function(){return this.recalculateMagnitudeSq(),this._magnitudeSq},t.prototype.isNearlyEqual=function(t,i){return this.isNearlyEqualToValues(t.x,t.y,i)},t.prototype.isNearlyEqualToValues=function(t,i,n){return _.isNearlyEqual(this.x,t,n)&&_.isNearlyEqual(this.y,i,n)},t.prototype.normalize=function(){var t=this.getMagnitude();t>0&&(this._x/=t,this._y/=t,this._magnitude=1,this._magnitudeSq=1,this._recalculateMagnitude=!1,this._recalculateMagnitudeSq=!1)},t.prototype.setTo=function(t,i){this.x=t,this.y=i},t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},t.prototype.getDistanceSq=function(t){return Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)},t.prototype.getDistance=function(t){return Math.sqrt(this.getDistanceSq(t))},t.prototype.add=function(t){this._x+=t.x,this._y+=t.y},t.prototype.subtract=function(t){this._x-=t.x,this._y-=t.y},t.prototype.angle=function(t){return Math.atan2(t.y-this._y,t.x-this._x)},t.prototype.recalculateMagnitudeSq=function(){this._recalculateMagnitudeSq&&(this._magnitudeSq=Math.pow(this._x,2)+Math.pow(this._y,2),this._recalculateMagnitudeSq=!1)},t.prototype.recalculateMagnitude=function(){this.recalculateMagnitudeSq(),this._recalculateMagnitude&&(this._magnitude=Math.sqrt(this._magnitudeSq),this._recalculateMagnitude=!1)},t.ZERO=new t(0,0),t}(),E=function(){function t(t,i,n,e,s,r){void 0===t&&(t=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===e&&(e=1),void 0===s&&(s=0),void 0===r&&(r=0),this.a=0,this.b=0,this.c=0,this.d=0,this._translation=new w,this.setTo(t,i,n,e,s,r)}return Object.defineProperty(t.prototype,"tx",{get:function(){return this._translation.x},set:function(t){this._translation.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ty",{get:function(){return this._translation.y},set:function(t){this._translation.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"translation",{get:function(){return this._translation},enumerable:!0,configurable:!0}),t.prototype.setTo=function(t,i,n,e,s,r){this.a=t,this.b=i,this.c=n,this.d=e,this.tx=s,this.ty=r},t.prototype.setToIdentity=function(){this.setTo(1,0,0,1,0,0)},t.prototype.isIdentityMatrix=function(){return 1===this.a&&0===this.b&&0===this.tx&&0===this.c&&1===this.d&&0===this.ty},t.prototype.isTranslateOnly=function(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d},t.prototype.translate=function(t,i){this.tx+=t,this.ty+=i},t.prototype.rotate=function(t){var i=Math.sin(_.degreesToRadians(t)),n=Math.cos(_.degreesToRadians(t)),e=this.a,s=this.b,r=this.tx;this.a=e*n-this.c*i,this.b=s*n-this.d*i,this.c=e*i+this.c*n,this.d=s*i+this.d*n,this.tx=r*n-this.ty*i,this.ty=r*i+this.ty*n},t.prototype.scale=function(t,i){void 0===i&&(i=t),this.a*=t,this.b*=t,this.c*=i,this.d*=i,this.tx*=t,this.ty*=i},t.prototype.multiply=function(i){t.multiply(this,i,this)},t.prototype.premultiply=function(i){t.multiply(i,this,this)},t.prototype.isEqual=function(t,i){return _.isNearlyEqual(this.a,t.a,i)&&_.isNearlyEqual(this.b,t.b,i)&&_.isNearlyEqual(this.c,t.c,i)&&_.isNearlyEqual(this.d,t.d,i)&&_.isNearlyEqual(this.tx,t.tx,i)&&_.isNearlyEqual(this.ty,t.ty,i)},t.prototype.clone=function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty},t.prototype.transformVector=function(t){t.setTo(this.a*t.x+this.b*t.y+this.tx,this.c*t.x+this.d*t.y+this.ty)},t.prototype.transformXY=function(t,i){var n=new w(t,i);return this.transformVector(n),n},t.prototype.createTransformedVector=function(t){var i=new w(t.x,t.y);return this.transformVector(i),i},t.prototype.inverseTransformVector=function(t){var i=1/(this.a*this.d-this.b*this.c);t.setTo(this.d*i*t.x+-this.b*i*t.y+(this.ty*this.b-this.tx*this.d)*i,this.a*i*t.y+-this.c*i*t.x+(-this.ty*this.a+this.tx*this.c)*i)},t.prototype.createInverseTransformedVector=function(t){var i=new w(t.x,t.y);return this.inverseTransformVector(i),i},t.prototype.inverseTransformXY=function(t,i){var n=new w(t,i);return this.inverseTransformVector(n),n},t.makeScale=function(i,n){return void 0===n&&(n=i),new t(i,0,0,n,0,0)},t.makeTranslation=function(i,n){return new t(1,0,0,1,i,n)},t.makeRotation=function(i){var n=Math.cos(_.degreesToRadians(i)),e=Math.sin(_.degreesToRadians(i));return new t(n,-e,e,n,0,0)},t.multiply=function(i,n,e){return void 0===e&&(e=new t),e.setTo(i.a*n.a+i.b*n.c,i.a*n.b+i.b*n.d,i.c*n.a+i.d*n.c,i.c*n.b+i.d*n.d,i.a*n.tx+i.b*n.ty+i.tx,i.c*n.tx+i.d*n.ty+i.ty),e},t.IDENTITY=new t(1,0,0,1,0,0),t}(),I=function(){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this._width=0,this._halfWidth=0,this._height=0,this._halfHeight=0,this.width=t,this.height=i}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._halfWidth=.5*t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._halfHeight=.5*t},enumerable:!0,configurable:!0}),t.prototype.getHalfWidth=function(){return this._halfWidth},t.prototype.getHalfHeight=function(){return this._halfHeight},t.prototype.isNearlyEqual=function(t,i){return this.isNearlyEqualToValues(t.width,t.height,i)},t.prototype.isNearlyEqualToValues=function(t,i,n){return _.isNearlyEqual(this.width,t,n)&&_.isNearlyEqual(this.height,i,n)},t.prototype.setTo=function(t,i){this.width=t,this.height=i},t.prototype.copyFrom=function(t){this.width=t.width,this.height=t.height},t.ZERO=new t(0,0),t}(),A=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.add=function(i,n,e){for(var s=[],r=3;r<arguments.length;r++)s[r-3]=arguments[r];return t.prototype.add.apply(this,Object(o.__spread)([i,n,e],s))},i.prototype.addOnce=function(i,n,e){for(var s=[],r=3;r<arguments.length;r++)s[r-3]=arguments[r];return t.prototype.addOnce.apply(this,Object(o.__spread)([i,n,e],s))},i.prototype.dispatch=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t.prototype.dispatch.apply(this,Object(o.__spread)(i))},i.prototype.has=function(i,n){return t.prototype.has.call(this,i,n)},i.prototype.remove=function(i,n){return t.prototype.remove.call(this,i,n)},i}(Phaser.Signal),T=function(){function t(){this.gameObject=null,this.onActiveChanged=new Phaser.Signal,this.onDestroy=new A,this.isActive=!0,this._isCreated=!1}return Object.defineProperty(t.prototype,"GameObject",{get:function(){return this.gameObject},set:function(t){!f.isDefined(this.gameObject)&&f.isDefined(t)&&(this.gameObject=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OnActiveChanged",{get:function(){return this.onActiveChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsActiveInHierarchy",{get:function(){return this.Active&&Boolean(this.GameObject)&&this.GameObject.activeInHierarchy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OnDestroy",{get:function(){return this.onDestroy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Active",{get:function(){return this.isActive},set:function(t){this.isActive!==t&&(this.isActive=t,t?this.onEnable():this.onDisable(),this.onActiveChanged.dispatch())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCreated",{get:function(){return this._isCreated},enumerable:!0,configurable:!0}),t.prototype.create=function(){this._isCreated=!0},t.prototype.postCreate=function(){},t.prototype.update=function(){},t.prototype.onEnable=function(){},t.prototype.onDisable=function(){},t.customSerialize=function(t,i,n){},t.prototype.customDeserialize=function(t){},t.prototype.postDeserialize=function(){},t.prototype.destroy=function(){this.isActive&&this.onDisable(),this.onDestroy.dispatch(this),this.onDestroy.dispose(),this.gameObject=null},t=Object(o.__decorate)([Object(u.injectable)()],t)}(),D={},S=function(){function t(){}return t.addProperty=function(t,i,n){var e=Reflect.getMetadata(t,i);Reflect.defineMetadata(t,e?Object(o.__spread)(e,[n]):[n],i)},t}();!function(t){t.String="string",t.Number="number",t.JSON="json",t.Boolean="boolean",t.Color="color",t.Vector="vector",t.Size="size",t.ObjectReference="objectReference",t.SceneObjectReference="sceneObjectReference",t.PrefabConstructable="prefabConstructable",t.Signal="signal",t.Unknown="unknown"}(l||(l={}));var C,N="custom:annotations:serializableProperties",x="custom:annotations:propertyInfo",R=function(){function t(){}return t.getPropertyTypeInfo=function(t,i){if(Reflect.hasMetadata(x,t.constructor,i))return Reflect.getMetadata(x,t.constructor,i);S.addProperty(N,t.constructor,i);var n={property:i,type:l.Unknown,isArray:!1};return Reflect.defineMetadata(x,n,t.constructor,i),n},t.addTypeMetadata=function(i,n,e,s,r){void 0===s&&(s=0);var h=t.getPropertyTypeInfo(i,n),o=n;return f.isDefined(r)?o=r:"_"===n[0]&&(o=n.substr(1)),h.type=e,h.priority=s,o!==n&&(h.alias=o),h},t.setTypeMetadataIsArray=function(i,n,e){var s=t.getPropertyTypeInfo(i,n);return s.isArray=e,s},t}(),M=function(t,i){return function(n,e){R.addTypeMetadata(n,e,l.String,t,i)}},L=function(t,i){return function(n,e){R.addTypeMetadata(n,e,l.Number,t,i)}},P=function(t,i){return function(n,e){R.addTypeMetadata(n,e,l.Boolean,t,i)}},k=function(t,i){return function(n,e){R.addTypeMetadata(n,e,l.JSON,t,i)}},B=function(t,i){return function(n,e){R.addTypeMetadata(n,e,l.Color,t,i)}},U=function(t,i){return function(n,e){R.addTypeMetadata(n,e,l.Vector,t,i)}},G=function(t,i){return function(n,e){R.addTypeMetadata(n,e,l.Size,t,i)}},F=function(t,i){return function(n,e){R.addTypeMetadata(n,e,l.ObjectReference,t,i).referenceType="GameObject"}},H=function(){return function(t,i){R.setTypeMetadataIsArray(t,i,!0)}},K=function(t,i,n){return function(e,s){R.addTypeMetadata(e,s,l.ObjectReference,i,n).referenceType=t===T?"Component":Object.keys(D).find((function(i){return D[i]===t}))}},z=function(t,i,n){return function(e,s){var r;R.addTypeMetadata(e,s,l.SceneObjectReference,i,n).referenceType=null!==(r=Object.keys(D).find((function(i){return D[i]===t})))&&void 0!==r?r:"SceneComponent"}},W=function(t,i){return function(n,e){R.addTypeMetadata(n,e,l.Signal,t,i)}},Y=function(t,i){return function(n,e){R.addTypeMetadata(n,e,l.Unknown,t,i)}},V=function(t,i){return function(n,e){R.addTypeMetadata(n,e,l.ObjectReference,t,i)}},q=function(t,i,n){return function(e,s){R.addTypeMetadata(e,s,l.PrefabConstructable,i,n).referenceType=t}},Q=function(t){return function(i){D[t]=i}},X=function(){function t(i){t._instance||(t._instance=this,this._game=i)}return Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"game",{get:function(){return this._game},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){t._instance=null,this._game=null},t}(),J=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.onWorldMatrixChanged=new Phaser.Signal,i._localPosition=new w(0,0),i._localScale=new w(1,1),i._localRotation=0,i._localTransformMatrix=new E,i._worldTransformMatrix=new E,i._positionDirty=!1,i._scaleDirty=!1,i._rotationDirty=!1,i._isWorldMatrixDirty=!1,i._worldScale=new w(1,1),i._isWorldScaleDirty=!1,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"localPosition",{get:function(){return this._localPosition},set:function(t){this.setPosition(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"localScale",{get:function(){return this._localScale},set:function(t){this.setScale(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"localRotation",{get:function(){return this._localRotation},set:function(t){this.setRotation(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"localMatrix",{get:function(){return this.recalculateTransform(),this._localTransformMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"worldMatrix",{get:function(){return this.recalculateWorldTransform(),this._worldTransformMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"worldPosition",{get:function(){return this.recalculateWorldTransform(),this._worldTransformMatrix.translation},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"worldScale",{get:function(){if(this._isWorldScaleDirty){this._isWorldScaleDirty=!1;var t=this.GameObject.parent,i=t?t.transform:null;this._worldScale.setTo(this.localScale.x,this.localScale.y),i&&(this._worldScale.x*=i.worldScale.x,this._worldScale.y*=i.worldScale.y)}return this._worldScale},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.prototype.create.call(this);var i=this.GameObject.parent;if(i&&i.transform){var n=i.transform.worldScale;this._worldScale.setTo(n.x,n.y),this.GameObject.parent.transform.worldMatrix.isEqual(E.IDENTITY)||this.markWorldMatrixDirty()}this.GameObject.onHierarchyChanged.add(this.markWorldMatrixDirty,this)},i.prototype.destroy=function(){this.GameObject.onHierarchyChanged.remove(this.markWorldMatrixDirty,this),this.onWorldMatrixChanged.dispose(),t.prototype.destroy.call(this)},i.prototype.addTransformUpdatedCallback=function(t,i){this.onWorldMatrixChanged.add(t,i),this._isWorldMatrixDirty&&t.call(i)},i.prototype.setPosition=function(t,i){this._localPosition.x===t&&this._localPosition.y===i||(this._localPosition.x=t,this._localPosition.y=i,this._positionDirty=!0,this.markWorldMatrixDirty())},i.prototype.setScale=function(t,i){void 0===i&&(i=t),this._localScale.x===t&&this._localScale.y===i||(this._localScale.x=t,this._localScale.y=i,this._scaleDirty=!0,this.markWorldMatrixDirty(),this.markWorldScaleDirty())},i.prototype.setRotation=function(t){this._localRotation!==t&&(this._localRotation=t,this._rotationDirty=!0,this.markWorldMatrixDirty())},i.prototype.postDeserialize=function(){this._positionDirty=!this._localPosition.isNearlyEqual(w.ZERO),this._scaleDirty=!this._localScale.isNearlyEqual(w.ZERO),this._isWorldMatrixDirty=this._positionDirty||this._scaleDirty||this._rotationDirty},i.prototype.recalculateWorldTransform=function(){if(this._isWorldMatrixDirty){var t=this.GameObject.parent?this.GameObject.parent.transform:null;t?(this._worldTransformMatrix.clone(t.worldMatrix),this._worldTransformMatrix.multiply(this.localMatrix)):this._worldTransformMatrix.clone(this.localMatrix),this._isWorldMatrixDirty=!1}},i.prototype.recalculateTransform=function(){(this._positionDirty||this._rotationDirty||this._scaleDirty)&&(this._rotationDirty||this._scaleDirty?(this._localTransformMatrix.setToIdentity(),this._localTransformMatrix.scale(this._localScale.x,this._localScale.y),0!==this._localRotation&&this._localTransformMatrix.rotate(this._localRotation),this._localTransformMatrix.translate(this._localPosition.x,this._localPosition.y)):(this._localTransformMatrix.tx=this._localPosition.x,this._localTransformMatrix.ty=this._localPosition.y)),this._positionDirty=!1,this._scaleDirty=!1,this._rotationDirty=!1},i.prototype.markWorldMatrixDirty=function(){if(!this._isWorldMatrixDirty){this._isWorldMatrixDirty=!0,this.onWorldMatrixChanged.dispatch();for(var t=this.GameObject.children,i=t.length,n=0;n<i;++n){var e=t[n].transform;e&&e.markWorldMatrixDirty()}}},i.prototype.markWorldScaleDirty=function(){if(!this._isWorldScaleDirty){this._isWorldScaleDirty=!0;for(var t=this.GameObject.children,i=t.length,n=0;n<i;++n){var e=t[n].transform;e&&e.markWorldScaleDirty()}}},Object(o.__decorate)([U(),Object(o.__metadata)("design:type",Object),Object(o.__metadata)("design:paramtypes",[Object])],i.prototype,"localPosition",null),Object(o.__decorate)([U(),Object(o.__metadata)("design:type",Object),Object(o.__metadata)("design:paramtypes",[Object])],i.prototype,"localScale",null),Object(o.__decorate)([L(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"localRotation",null),i=Object(o.__decorate)([Q("Transform")],i)}(T),Z=function(t){function i(){var i=t.call(this)||this;return i._viewMatrixDirty=!1,i._viewportSize=new I(X.instance.game.world.width,X.instance.game.world.height),i._transformationMatrix=new E,i._attachedTransform=null,null===n._main&&(n._main=i),i}var n;return Object(o.__extends)(i,t),n=i,Object.defineProperty(i,"main",{get:function(){return n._main},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewportSize",{get:function(){return this._viewportSize},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewMatrix",{get:function(){if(this._viewMatrixDirty){var t=this.GameObject.transform,i=t.worldMatrix,n=i.a/t.worldScale.x,e=i.b/t.worldScale.y;this._transformationMatrix.setTo(n,-e,e,n,-i.tx*n- -i.ty*e+this._viewportSize.getHalfWidth(),-i.tx*e+-i.ty*n+this._viewportSize.getHalfHeight()),this._viewMatrixDirty=!1}return this._transformationMatrix},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.prototype.create.call(this),this.GameObject.transform?this.attachToTransform():this.GameObject.onComponentAdded.add(this.componentWasAdded,this)},i.prototype.destroy=function(){n._main===this&&(n._main=null),this.GameObject.transform&&(this.GameObject.transform.OnDestroy.remove(this.transformDestroyed,this),this.GameObject.transform.onWorldMatrixChanged.remove(this.transformDirty,this)),this.GameObject.onComponentAdded.remove(this.componentWasAdded,this),t.prototype.destroy.call(this)},i.prototype.attachToTransform=function(){null===this._attachedTransform&&(this.transformDirty(),this._attachedTransform=this.GameObject.transform,this._attachedTransform.addTransformUpdatedCallback(this.transformDirty,this),this._attachedTransform.OnDestroy.add(this.transformDestroyed,this))},i.prototype.transformDestroyed=function(){this._transformationMatrix.setToIdentity(),this._viewMatrixDirty=!1,this._attachedTransform=null},i.prototype.transformDirty=function(){this._viewMatrixDirty=!0},i.prototype.componentWasAdded=function(t){t instanceof J&&(this.GameObject.onComponentAdded.remove(this.componentWasAdded,this),this.attachToTransform())},i._main=null,Object(o.__decorate)([G(),Object(o.__metadata)("design:type",I)],i.prototype,"_viewportSize",void 0),i=n=Object(o.__decorate)([Q("Camera"),Object(o.__metadata)("design:paramtypes",[])],i)}(T),$=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._anchorMin=new w(.5,.5),i._anchorMax=new w(.5,.5),i._anchoredPivotOffset=new w,i._sizeDelta=new I,i._pivot=new w(.5,.5),i._rectTransformDimensions=new I,i._isTransformRectDirty=!1,i._previousParent=null,i}var n;return Object(o.__extends)(i,t),n=i,Object.defineProperty(i.prototype,"anchorMin",{get:function(){return this._anchorMin},set:function(t){this.setAnchorMin(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorMax",{get:function(){return this._anchorMax},set:function(t){this.setAnchorMax(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"localPosition",{get:function(){return this.recalculateRectTransform(),this._localPosition},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){return-this._sizeDelta.width*this._pivot.x+this._anchoredPivotOffset.x},set:function(t){this.setSizeDelta(-this.right-t,this._sizeDelta.height),this.setAnchoredPivotOffset(this._sizeDelta.width*this._pivot.x+t,this._anchoredPivotOffset.y)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return-(this._sizeDelta.width*(1-this._pivot.x)+this._anchoredPivotOffset.x)},set:function(t){this.setSizeDelta(-this.left-t,this._sizeDelta.height),this.setAnchoredPivotOffset(-(this._sizeDelta.width*(1-this._pivot.x)+t),this._anchoredPivotOffset.y)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return-this._sizeDelta.height*this._pivot.y+this._anchoredPivotOffset.y},set:function(t){this.setSizeDelta(this._sizeDelta.width,-this.bottom-t),this.setAnchoredPivotOffset(this._anchoredPivotOffset.x,this._sizeDelta.height*this._pivot.y+t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return-(this._sizeDelta.height*(1-this._pivot.y)+this._anchoredPivotOffset.y)},set:function(t){this.setSizeDelta(this._sizeDelta.width,-this.top-t),this.setAnchoredPivotOffset(this._anchoredPivotOffset.x,-(this._sizeDelta.height*(1-this._pivot.y)+t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"posX",{get:function(){return this._anchoredPivotOffset.x},set:function(t){this.setAnchoredPivotOffset(t,this._anchoredPivotOffset.y)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"posY",{get:function(){return this._anchoredPivotOffset.y},set:function(t){this.setAnchoredPivotOffset(this._anchoredPivotOffset.x,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"widthDelta",{get:function(){return this._sizeDelta.width},set:function(t){this.setSizeDelta(t,this._sizeDelta.height)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"heightDelta",{get:function(){return this._sizeDelta.height},set:function(t){this.setSizeDelta(this._sizeDelta.width,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rectTransformDimensions",{get:function(){return this.recalculateRectTransform(),this._rectTransformDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pivot",{get:function(){return this._pivot},set:function(t){this.setPivot(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchoredPivotOffset",{get:function(){return this._anchoredPivotOffset},set:function(t){this.setAnchoredPivotOffset(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sizeDelta",{get:function(){return this._sizeDelta},set:function(t){this.setSizeDelta(t.width,t.height)},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.prototype.create.call(this),this.GameObject.onHierarchyChanged.add(this.hierarchyUpdated,this),this._previousParent=this.GameObject.parent,this._previousParent&&(this._previousParent.onComponentAdded.add(this.parentComponentAddedOrRemoved,this),this._previousParent.onComponentRemoved.add(this.parentComponentAddedOrRemoved,this))},i.prototype.destroy=function(){this.GameObject.onHierarchyChanged.remove(this.hierarchyUpdated,this),this._previousParent&&(this._previousParent.onComponentAdded.remove(this.parentComponentAddedOrRemoved,this),this._previousParent.onComponentRemoved.remove(this.parentComponentAddedOrRemoved,this)),t.prototype.destroy.call(this)},i.prototype.setAnchorMin=function(t,i){_.isNearlyEqual(this._anchorMin.x,t)&&_.isNearlyEqual(this._anchorMin.y,i)||(this._anchorMin.x=t,this._anchorMin.y=i,this.markRectTransformDirty())},i.prototype.setAnchorMax=function(t,i){_.isNearlyEqual(this._anchorMax.x,t)&&_.isNearlyEqual(this._anchorMax.y,i)||(this._anchorMax.x=t,this._anchorMax.y=i,this.markRectTransformDirty())},i.prototype.setAnchoredPivotOffset=function(t,i){this._anchoredPivotOffset.isNearlyEqualToValues(t,i)||(this._anchoredPivotOffset.x=t,this._anchoredPivotOffset.y=i,this.markRectTransformDirty())},i.prototype.setSizeDelta=function(t,i){this._sizeDelta.isNearlyEqualToValues(t,i)||(this._sizeDelta.width=t,this._sizeDelta.height=i,this.markRectTransformDirty())},i.prototype.setPivot=function(t,i){this._pivot.isNearlyEqualToValues(t,i)||(this._pivot.x=t,this._pivot.y=i,this.markRectTransformDirty())},i.prototype.postDeserialize=function(){t.prototype.postDeserialize.call(this),this._isTransformRectDirty=!this._sizeDelta.isNearlyEqual(I.ZERO),this._isTransformRectDirty=this._isTransformRectDirty||!this._pivot.isNearlyEqualToValues(.5,.5),this._isTransformRectDirty=this._isTransformRectDirty||!this._anchorMin.isNearlyEqualToValues(.5,.5),this._isTransformRectDirty=this._isTransformRectDirty||!this._anchorMax.isNearlyEqualToValues(.5,.5),this._isTransformRectDirty=this._isTransformRectDirty||!this._anchoredPivotOffset.isNearlyEqual(w.ZERO),this._isTransformRectDirty&&this.markWorldMatrixDirty()},i.prototype.recalculateTransform=function(){this.recalculateRectTransform(),t.prototype.recalculateTransform.call(this)},i.prototype.recalculateWorldTransform=function(){this.recalculateRectTransform(),t.prototype.recalculateWorldTransform.call(this)},i.prototype.parentComponentAddedOrRemoved=function(t){t instanceof J&&this.markRectTransformDirty()},i.prototype.hierarchyUpdated=function(){this.GameObject.parent!==this._previousParent&&(this._previousParent&&(this._previousParent.onComponentAdded.remove(this.parentComponentAddedOrRemoved,this),this._previousParent.onComponentRemoved.remove(this.parentComponentAddedOrRemoved,this)),this._previousParent=this.GameObject.parent,this._previousParent.onComponentAdded.add(this.parentComponentAddedOrRemoved,this),this._previousParent.onComponentRemoved.add(this.parentComponentAddedOrRemoved,this),this.markRectTransformDirty())},i.prototype.recalculateRectTransform=function(){if(this._isTransformRectDirty){var t=this.GameObject.parent,i=t?t.findComponent(n):null,e=i?i.rectTransformDimensions:I.ZERO,s=new w(this._anchorMin.x*e.width,this._anchorMin.y*e.height),r=new w(this._anchorMax.x*e.width,this._anchorMax.y*e.height),h=new I(r.x-s.x,r.y-s.y),o=new w(0,0);i&&(o.x=e.width*i.pivot.x,o.y=e.height*i.pivot.y),this._rectTransformDimensions.width=h.width+this._sizeDelta.width,this._rectTransformDimensions.height=h.height+this._sizeDelta.height,this.setPosition(s.x+h.width*this._pivot.x+this._anchoredPivotOffset.x-o.x,s.y+h.height*this._pivot.y+this._anchoredPivotOffset.y-o.y),this._isTransformRectDirty=!1}},i.prototype.markRectTransformDirty=function(){if(!this._isTransformRectDirty){this._isTransformRectDirty=!0;for(var t=this.GameObject.children,i=t.length,e=0;e<i;++e){var s=t[e].transform;s instanceof n&&s.markRectTransformDirty()}this.markWorldMatrixDirty()}},i.prototype.getBounds=function(){this.recalculateRectTransform();var t=this._localPosition.x-this.pivot.x*this.rectTransformDimensions.width,i=t+this.rectTransformDimensions.width,n=this._localPosition.y-this.pivot.y*this.rectTransformDimensions.height;return{left:t,right:i,top:n,bottom:n+this.rectTransformDimensions.height}},Object(o.__decorate)([U(),Object(o.__metadata)("design:type",w)],i.prototype,"_anchorMin",void 0),Object(o.__decorate)([U(),Object(o.__metadata)("design:type",w)],i.prototype,"_anchorMax",void 0),Object(o.__decorate)([U(),Object(o.__metadata)("design:type",w)],i.prototype,"_anchoredPivotOffset",void 0),Object(o.__decorate)([G(),Object(o.__metadata)("design:type",I)],i.prototype,"_sizeDelta",void 0),Object(o.__decorate)([U(),Object(o.__metadata)("design:type",w)],i.prototype,"_pivot",void 0),i=n=Object(o.__decorate)([Q("RectTransform")],i)}(J),tt=function(){function t(){}return t.drawTransformDirectionVectors=function(i,n,e){void 0===e&&(e={});var s=m.merge(t.DEFAULT_TRANSFORM_DIRECTION_VECTOR_STYLE,e),r=new E;if(r.clone(i.worldMatrix),s.drawRightVector){var h=new w(r.a,r.c);h.normalize(),t.drawDirectionVector(r.translation,h,n,s.rightVectorStyle)}if(s.drawUpVector){var o=new w(r.b,r.d);o.normalize(),t.drawDirectionVector(r.translation,o,n,s.upVectorStyle)}},t.drawDirectionVector=function(i,n,e,s){void 0===s&&(s={});var r=m.merge(t.DEFAULT_DIRECTION_VECTOR_STYLE,s);t.drawArrow(new w(i.x+n.x*(s.arrowHeightPx+s.bodyHeightPx),i.y+n.y*(s.arrowHeightPx+s.bodyHeightPx)),_.radiansToDegrees(Math.atan2(n.y,n.x)),e,r)},t.drawTransformAnchor=function(i,n,e){void 0===e&&(e={});var s=m.merge(t.DEFAULT_TRANSFORM_ANCHOR_STYLE,e),r=this.calculateTransformPosition(i);"square"===s.shapeType&&(r.x-=.5*s.shape.sizePx,r.y-=.5*s.shape.sizePx),n.beginFill(s.shape.fill.color,s.shape.fill.alpha),"circle"===s.shapeType?n.drawCircle(r.x,r.y,s.shape.sizePx):n.drawRect(r.x,r.y,s.shape.sizePx,s.shape.sizePx),n.endFill(),s.shape.outline&&s.shape.outline.thicknessPx>0&&(n.lineStyle(s.shape.outline.thicknessPx,s.shape.outline.color,s.shape.outline.alpha),"circle"===s.shapeType?n.drawCircle(r.x,r.y,s.shape.sizePx):n.drawRect(r.x,r.y,s.shape.sizePx,s.shape.sizePx),n.lineStyle(0))},t.calculateTransformPosition=function(t){var i=new E;return i.clone(t.worldMatrix),Z.main&&i.premultiply(Z.main.viewMatrix),new w(i.tx,i.ty)},t.drawRectTransformOutline=function(i,n,e){void 0===e&&(e={});var s=m.merge(t.DEFAULT_RECT_TRANSFORM_OUTLINE_STYLE,e),r=this.calculateRectTransformCorners(i);n.lineStyle(s.thicknessPx,s.color,s.alpha),n.moveTo(r[0].x,r[0].y),n.lineTo(r[1].x,r[1].y),n.lineTo(r[2].x,r[2].y),n.lineTo(r[3].x,r[3].y),n.lineTo(r[0].x,r[0].y),n.lineStyle(0)},t.calculateRectTransformCorners=function(t){var i=t.rectTransformDimensions,n=[new w(-i.width*t.pivot.x,-i.height*t.pivot.y),new w(i.width*(1-t.pivot.x),-i.height*t.pivot.y),new w(i.width*(1-t.pivot.x),i.height*(1-t.pivot.y)),new w(-i.width*t.pivot.x,i.height*(1-t.pivot.y))],e=new E;e.clone(t.worldMatrix),Z.main&&e.premultiply(Z.main.viewMatrix);for(var s=0;s<4;++s)n[s]=e.createTransformedVector(n[s]);return n},t.drawRectTransformAnchors=function(i,n,e){void 0===e&&(e={});var s=m.merge(t.DEFAULT_TRIANGLE_STYLE,{widthPx:8,heightPx:18},e),r=I.ZERO,h=0,o=new E;i.GameObject.parent&&i.GameObject.parent.transform&&(i.GameObject.parent.transform instanceof $&&(r=i.GameObject.parent.transform.rectTransformDimensions),h=Math.atan2(i.GameObject.parent.transform.worldMatrix.c,i.GameObject.parent.transform.worldMatrix.d)*(180/Math.PI),o.clone(i.GameObject.parent.transform.worldMatrix));var u=new I(r.width*(i.anchorMax.x-i.anchorMin.x),r.height*(i.anchorMax.y-i.anchorMin.y)),a=new w(i.localPosition.x-u.width*i.pivot.x,i.localPosition.y-u.height*i.pivot.y),c=new w(i.localPosition.x+u.width*(1-i.pivot.x),i.localPosition.y+u.height*(1-i.pivot.y));t.drawTriangle(o.createTransformedVector(new w(c.x,c.y)),h-50,n,s),t.drawTriangle(o.createTransformedVector(new w(a.x,c.y)),h+50,n,s),t.drawTriangle(o.createTransformedVector(new w(c.x,a.y)),h-130,n,s),t.drawTriangle(o.createTransformedVector(new w(a.x,a.y)),h+130,n,s)},t.drawArrow=function(i,n,e,s){void 0===s&&(s={});var r=m.merge(t.DEFAULT_ARROW_STYLE,s),h=[new w(0,0),new w(-r.arrowHeightPx,.5*r.arrowWidthPx),new w(-r.arrowHeightPx,-.5*r.arrowWidthPx),new w(-r.arrowHeightPx,-.5*r.bodyWidthPx),new w(-r.arrowHeightPx,.5*r.bodyWidthPx),new w(-r.arrowHeightPx-r.bodyHeightPx,-.5*r.bodyWidthPx),new w(-r.arrowHeightPx-r.bodyHeightPx,.5*r.bodyWidthPx)],o=new E;o.rotate(n),o.translate(i.x,i.y),Z.main&&o.premultiply(Z.main.viewMatrix);for(var u=h.length,a=0;a<u;++a)h[a]=o.createTransformedVector(h[a]);var c=h.map((function(t){return new Phaser.Point(t.x,t.y)}));e.beginFill(r.fill.color,r.fill.alpha),e.drawPolygon([c[3],c[4],c[6],c[5]]),e.drawTriangle([c[0],c[1],c[2]]),e.endFill()},t.drawTriangle=function(i,n,e,s){void 0===s&&(s={});var r=m.merge(t.DEFAULT_TRIANGLE_STYLE,s),h=new w(i.x,i.y);Z.main&&(h=Z.main.viewMatrix.createTransformedVector(i));var u=[new Phaser.Point(h.x,h.y),new Phaser.Point(Math.cos(_.degreesToRadians(n))*(-.5*r.widthPx)-Math.sin(_.degreesToRadians(n))*(.5*r.heightPx)+h.x,Math.sin(_.degreesToRadians(n))*(-.5*r.widthPx)+Math.cos(_.degreesToRadians(n))*(.5*r.heightPx)+h.y),new Phaser.Point(Math.cos(_.degreesToRadians(n))*(.5*r.widthPx)-Math.sin(_.degreesToRadians(n))*(.5*r.heightPx)+h.x,Math.sin(_.degreesToRadians(n))*(.5*r.widthPx)+Math.cos(_.degreesToRadians(n))*(.5*r.heightPx)+h.y)];e.beginFill(r.fill.color,r.fill.alpha),e.drawTriangle(u),e.endFill(),s.outline&&s.outline.thicknessPx>0&&(e.lineStyle(s.outline.thicknessPx,s.outline.color,s.outline.alpha),e.drawPolygon(Object(o.__spread)(u,[new Phaser.Point(h.x,h.y)])),e.lineStyle(0))},t.DEFAULT_TRANSFORM_ANCHOR_STYLE={shapeType:"circle",shape:{sizePx:20,fill:{color:16777215,alpha:.4},outline:{color:16777215,alpha:1,thicknessPx:2}}},t.DEFAULT_ARROW_STYLE={fill:{color:16777215,alpha:1},arrowWidthPx:20,arrowHeightPx:10,bodyHeightPx:30,bodyWidthPx:5},t.DEFAULT_TRANSFORM_DIRECTION_VECTOR_STYLE={drawRightVector:!0,rightVectorStyle:{fill:{color:16711680,alpha:1},arrowWidthPx:15,arrowHeightPx:10,bodyWidthPx:5,bodyHeightPx:30},drawUpVector:!0,upVectorStyle:{fill:{color:65280,alpha:1},arrowWidthPx:15,arrowHeightPx:10,bodyWidthPx:5,bodyHeightPx:30}},t.DEFAULT_DIRECTION_VECTOR_STYLE={arrowWidthPx:15,arrowHeightPx:10,bodyWidthPx:5,bodyHeightPx:30,fill:{color:16777215,alpha:1}},t.DEFAULT_RECT_TRANSFORM_OUTLINE_STYLE={thicknessPx:2,color:16777215,alpha:1},t.DEFAULT_TRIANGLE_STYLE={fill:{color:16777215,alpha:1},outline:null,widthPx:15,heightPx:20},t}(),it=function(){function t(){}return t.insertion=function(t,i){for(var n=t.length,e=0;e<n;++e){for(var s=t[e],r=e;r>0&&i(s,t[r-1]);)t[r]=t[r-1],--r;t[r]=s}},t}(),nt={Y_SORT:function(t,i){return t.worldPosition.y<i.worldPosition.y},NONE:null},et=function(){function t(t){this._displayContainer=null,this._sortFunctor=nt.NONE,this._displayContainer=t}return Object.defineProperty(t.prototype,"container",{get:function(){return this._displayContainer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortFunctor",{get:function(){return this._sortFunctor},set:function(t){this._sortFunctor=t},enumerable:!0,configurable:!0}),t.prototype.addDisplayObject=function(t){if(this._sortFunctor){for(var i=this._displayContainer.children.length,n=0;n<i;++n)if(!this._sortFunctor(t,this._displayContainer.children[n])){this._displayContainer.addChildAt(t,n);break}i===this._displayContainer.children.length&&this._displayContainer.addChild(t)}else this._displayContainer.addChild(t)},t.prototype.removeDisplayObject=function(t){this._displayContainer.children.indexOf(t)>-1?this._displayContainer.removeChild(t):c.log("Display object was not found",h.Warning)},t.prototype.update=function(){this._sortFunctor&&it.insertion(this._displayContainer.children,this._sortFunctor)},t.prototype.destroy=function(){this._displayContainer.destroy(),this._displayContainer=null},t.DEFAULT_NAME="default",t.DEFAULT_DEPTH=0,t}(),st=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.placeholderBounds=new PIXILegacy.Rectangle(0,0,0,0),i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"width",{get:function(){return this.placeholderBounds.width},set:function(t){this.placeholderBounds.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.placeholderBounds.height},set:function(t){this.placeholderBounds.height=t},enumerable:!0,configurable:!0}),i.prototype.getBounds=function(t){return this.placeholderBounds},i}(Phaser.Group),rt=function(t,i){return function(n,e){Y(i,t)(n,e)}},ht=function(t){function i(){var i=t.call(this)||this;return i.roundRelativeValues=!0,i.cachedRelativeX=null,i.cachedRelativeY=null,i.cachedRelativeWidth=null,i.cachedRelativeHeight=null,i.anchor=new Phaser.Point(0,0),i.dimensionPlaceholder=null,i._group=null,i._group=X.instance.game.add.group(),i}var n;return Object(o.__extends)(i,t),n=i,Object.defineProperty(i.prototype,"group",{get:function(){return this._group},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"RoundRelativeValues",{get:function(){return this.roundRelativeValues},set:function(t){this.roundRelativeValues=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"GameObject",{get:function(){return this.gameObject},set:function(t){!f.isDefined(this.GameObject)&&f.isDefined(t)&&(this.gameObject=t,t.parent&&t.parent.legacyTransform&&t.parent.legacyTransform.group.add(this._group))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this._group.x},set:function(t){this.cachedRelativeX=null,this._group.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._group.y},set:function(t){this.cachedRelativeY=null,this._group.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"relativeX",{get:function(){var t=0;return f.isDefined(this.cachedRelativeX)?t=this.cachedRelativeX:this.GameObject.parent&&this.GameObject.parent.legacyTransform&&(t=n.determineScaleValue(this._group.x,this.GameObject.parent.legacyTransform.width,this.roundRelativeValues)),t},set:function(t){var i=this.GameObject.parent&&this.GameObject.parent.legacyTransform?this.GameObject.parent.legacyTransform.width:0;this.x=n.applyScaleValue(i,t,this.roundRelativeValues),this.cachedRelativeX=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"relativeY",{get:function(){var t=0;return f.isDefined(this.cachedRelativeY)?t=this.cachedRelativeY:this.GameObject.parent&&this.GameObject.parent.legacyTransform&&(t=n.determineScaleValue(this._group.y,this.GameObject.parent.legacyTransform.height,this.roundRelativeValues)),t},set:function(t){var i=this.GameObject.parent&&this.GameObject.parent.legacyTransform?this.GameObject.parent.legacyTransform.height:0;this.y=n.applyScaleValue(i,t,this.roundRelativeValues),this.cachedRelativeY=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"roundedX",{get:function(){return Math.round(this.x)},set:function(t){this.x=Math.round(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"roundedY",{get:function(){return Math.round(this.y)},set:function(t){this.y=Math.round(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._group.width},set:function(t){this.cachedRelativeWidth=null,this.dimensionPlaceholder&&(this.dimensionPlaceholder.width=t),this._group.width=t,this.updatePivotXFromAnchorX(),this.reapplyChildRelativeValues()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._group.height},set:function(t){this.cachedRelativeHeight=null,this.dimensionPlaceholder&&(this.dimensionPlaceholder.height=t),this._group.height=t,this.updatePivotYFromAnchorY(),this.reapplyChildRelativeValues()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"relativeWidth",{get:function(){var t=0;return f.isDefined(this.cachedRelativeWidth)?t=this.cachedRelativeWidth:this.GameObject.parent&&this.GameObject.parent.legacyTransform&&(t=n.determineScaleValue(this.width,this.GameObject.parent.legacyTransform.width,!1)),t},set:function(t){var i=this.GameObject.parent&&this.GameObject.parent.legacyTransform?this.GameObject.parent.legacyTransform.width:0;this.width=n.applyScaleValue(i,t,this.roundRelativeValues),this.cachedRelativeWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"relativeHeight",{get:function(){var t=0;return f.isDefined(this.cachedRelativeHeight)?t=this.cachedRelativeHeight:this.GameObject.parent&&this.GameObject.parent.legacyTransform&&(t=n.determineScaleValue(this.height,this.GameObject.parent.legacyTransform.height,!1)),t},set:function(t){var i=this.GameObject.parent&&this.GameObject.parent.legacyTransform?this.GameObject.parent.legacyTransform.height:0;this.height=n.applyScaleValue(i,t,this.roundRelativeValues),this.cachedRelativeHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"roundedWidth",{get:function(){return Math.round(this.width)},set:function(t){this.width=Math.round(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"roundedHeight",{get:function(){return Math.round(this.height)},set:function(t){this.height=Math.round(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorX",{get:function(){return this.anchor.x},set:function(t){this.anchor.x=t,this.updatePivotXFromAnchorX()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorY",{get:function(){return this.anchor.y},set:function(t){this.anchor.y=t,this.updatePivotYFromAnchorY()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaleX",{get:function(){return this._group.scale.x},set:function(t){this._group.scale.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaleY",{get:function(){return this._group.scale.y},set:function(t){this._group.scale.y=t},enumerable:!0,configurable:!0}),i.prototype.customDeserialize=function(t){this.dimensionPlaceholder||(this.dimensionPlaceholder=this._group.add(new st(X.instance.game,null)),this.dimensionPlaceholder.name=this.GameObject.name);var i=t.width;f.isDefined(i)&&(this.width=i);var e=t.height;if(f.isDefined(e)&&(this.height=e),f.isDefined(this.GameObject.parent)){var s=this.GameObject.parent.legacyTransform,r=t.relativeWidth;f.isDefined(r)&&(this.dimensionPlaceholder.width=n.applyScaleValue(s?s.width:0,r,this.roundRelativeValues),this.cachedRelativeWidth=r);var h=t.relativeHeight;f.isDefined(h)&&(this.dimensionPlaceholder.height=n.applyScaleValue(s?s.height:0,h,this.roundRelativeValues),this.cachedRelativeHeight=h)}var o=t.anchorX;f.isDefined(o)&&(this.anchorX=o);var u=t.anchorY;f.isDefined(u)&&(this.anchorY=u);var a=t.scaleX;f.isDefined(a)&&(this.scaleX=a);var c=t.scaleY;f.isDefined(c)&&(this.scaleY=c)},i.prototype.reapplyChildRelativeValues=function(){for(var t=this.GameObject.children,i=0;i<t.length;++i){var n=t[i].legacyTransform;f.isDefined(n)&&(f.isDefined(n.cachedRelativeHeight)&&(n.relativeHeight=n.cachedRelativeHeight),f.isDefined(n.cachedRelativeWidth)&&(n.relativeWidth=n.cachedRelativeWidth),f.isDefined(n.cachedRelativeX)&&(n.relativeX=n.cachedRelativeX),f.isDefined(n.cachedRelativeY)&&(n.relativeY=n.cachedRelativeY))}},i.prototype.updatePivotXFromAnchorX=function(){this._group.pivot.x=n.applyScaleValue(this.width,this.anchor.x,this.roundRelativeValues),f.isDefined(this.GameObject.parent)&&this._group.updateTransform()},i.prototype.updatePivotYFromAnchorY=function(){this._group.pivot.y=n.applyScaleValue(this.height,this.anchor.y,this.roundRelativeValues),f.isDefined(this.GameObject.parent)&&this._group.updateTransform()},i.prototype.create=function(){var i=this;t.prototype.create.call(this),this._group.gameObjectRef=this.GameObject,this._group.name=this.GameObject.name,this.GameObject.onActiveInHierarchyChanged.add(this.updateGroupVisibility,this),this.GameObject.onHierarchyChanged.add(this.updateParentGroup,this);var n=this._group.update.bind(this._group);this._group.update=function(){n(),i.GameObject.parent||i.GameObject.update()},this.group.visible=this.GameObject.activeInHierarchy},i.prototype.destroy=function(){this.GameObject.onActiveInHierarchyChanged.remove(this.updateGroupVisibility,this),this.GameObject.onHierarchyChanged.remove(this.updateParentGroup,this),t.prototype.destroy.call(this),this._group.destroy()},i.prototype.updateGroupVisibility=function(){this._group.visible=this.GameObject.activeInHierarchy},i.prototype.updateParentGroup=function(){this.GameObject.parent&&this.GameObject.parent.legacyTransform?this.GameObject.parent.legacyTransform.group.addChild(this._group):X.instance.game.world.add(this._group)},i.applyScaleValue=function(t,i,e){var s=t*i;return n.roundIfNeeded(s,e)},i.determineScaleValue=function(t,i,e){var s=t/i;return n.roundIfNeeded(s,e)},i.roundIfNeeded=function(t,i){return i?Math.round(t):t},Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Boolean)],i.prototype,"roundRelativeValues",void 0),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"x",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"y",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"relativeX",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"relativeY",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"scaleX",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"scaleY",null),i=n=Object(o.__decorate)([Q("LegacyTransform"),Object(o.__metadata)("design:paramtypes",[])],i)}(T),ot=function(){function t(t){void 0===t&&(t=null),this.onActiveChanged=new Phaser.Signal,this.onActiveInHierarchyChanged=new Phaser.Signal,this.onHierarchyChanged=new Phaser.Signal,this.onLayerChanged=new Phaser.Signal,this.onComponentAdded=new A,this.onComponentRemoved=new A,this.onComponentAddedToHierarchy=new A,this.onDestroy=new Phaser.Signal,this._parent=null,this._isActive=!0,this._layer=et.DEFAULT_NAME,this._components=[],this._children=[],this._isActiveInHierarchy=!0,this._legacyTransform=null,this._transform=null,this._name="",this.setParent(t),t&&t.layer&&(this._layer=t.layer)}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"components",{get:function(){return this._components},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layer",{get:function(){return this._layer},set:function(t){this.setLayer(t,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(t){this.removeFromParent(),this.setParent(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._isActive},set:function(t){this._isActive!==t&&(this._isActive=t,this.onActiveChanged.dispatch(),this.activeInHierarchyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeInHierarchy",{get:function(){return this._isActiveInHierarchy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"legacyTransform",{get:function(){return null===this._legacyTransform&&(this._legacyTransform=this.findComponent(ht)),this._legacyTransform},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transform",{get:function(){return null===this._transform&&(this._transform=this.findComponent(J)),this._transform},enumerable:!0,configurable:!0}),t.prototype.addChild=function(t){t.removeFromParent(),t.setParent(this)},t.prototype.addChildAt=function(t,i){t.removeFromParent(),t.setParent(this,i)},t.prototype.getRenderOrder=function(){return this._parent._children.indexOf(this)},t.prototype.isInFront=function(){var t=this._parent._children;return t[t.length-1]===this},t.prototype.isInBack=function(){return this._parent._children[0]===this},t.prototype.bringToFront=function(){var t=this._parent._children.indexOf(this);-1!==t?(this._parent._children.splice(t,1),this._parent._children.push(this),this._parent.onHierarchyChanged.dispatch()):c.log("Parent did not have this game object in its list of children!",h.Error)},t.prototype.sendToBack=function(){var t=this._parent._children.indexOf(this);-1!==t?(this._parent._children.splice(t,1),this._parent._children.unshift(this),this._parent.onHierarchyChanged.dispatch()):c.log("Parent did not have this game object in its list of children!",h.Error)},t.prototype.setRenderOrder=function(t){var i=this._parent._children.indexOf(this);-1!==i?(this._parent._children.splice(i,1),this._parent._children.splice(t,0,this),this._parent.onHierarchyChanged.dispatch()):c.log("Parent did not have this game object in its list of children!",h.Error)},t.prototype.update=function(){if(this.activeInHierarchy){for(var t=this._components.length-1;t>=0;--t){var i=this._components[t];i.Active&&i.update()}for(t=this._children.length-1;t>=0;--t)this._children[t].update()}},t.prototype.addComponent=function(t,i){void 0===i&&(i=!0);var n=new t;this._components.push(n),n.GameObject=this,n.OnDestroy.addOnce(this.removeComponent.bind(this)),i&&(n.create(),n.Active&&n.onEnable(),n.postCreate()),this.onComponentAdded.dispatch(n);for(var e=this._children.length,s=0;s<e;++s)this._children[s].dispatchComponentAddedInHierarchy(this,n);return n},t.prototype.findComponent=function(t){var i=this._components.find((function(i){return i instanceof t}));return f.isDefined(i)?i:null},t.prototype.hasComponent=function(t){return f.isDefined(this.findComponent(t))},t.prototype.destroy=function(){this.onDestroy.dispatch();for(var t=this._children.length-1;t>=0;--t)this._children[t].destroy();for(t=this._components.length-1;t>=0;--t)this._components[t].destroy();this.removeFromParent(),this.onComponentAdded.dispose(),this.onComponentRemoved.dispose(),this.onComponentAddedToHierarchy.dispose()},t.prototype.setLayer=function(t,i){if(void 0===i&&(i=!1),this._layer=t,this.onLayerChanged.dispatch(),i)for(var n=this._children,e=n.length,s=0;s<e;++s)n[s].setLayer(t,!0)},t.prototype.removeComponent=function(t){for(var i=0;i<this._components.length;i++)if(this._components[i]===t){this._components.splice(i,1),t===this._transform?this._transform=null:t===this._legacyTransform&&(this._legacyTransform=null),this.onComponentRemoved.dispatch(t);break}},t.prototype.findComponentInParent=function(t,i){void 0===i&&(i=!0);var n=i?this.findComponent(t):null;return null===n&&null!==this._parent?this._parent.findComponentInParent(t):n},t.prototype.findComponentsInChildren=function(t,i){void 0===i&&(i=!0);var n=[];if(i){var e=this.findComponent(t);e&&n.push(e)}for(var s=this._children.length,r=0;r<s;++r)n=m.concat(n,this._children[r].findComponentsInChildren(t));return n},t.prototype.findComponentInChildren=function(t,i){void 0===i&&(i=!0);for(var n=i?this.findComponent(t):null,e=this._children.length,s=0;null===n&&s<e;)n=this._children[s].findComponentInChildren(t),++s;return n},t.prototype.removeFromParent=function(){if(this._parent){var t=this._parent._children.indexOf(this);if(-1===t)return void c.log("Parent did not have this game object in its list of children!",h.Error);this._parent.onActiveInHierarchyChanged.remove(this.activeInHierarchyChanged,this),this._parent.onHierarchyChanged.remove(this.onHierarchyChanged.dispatch,this.onHierarchyChanged),this._parent._children.splice(t,1),this._parent=null}},t.prototype.setParent=function(t,i){if(t){if(f.isDefined(i)){if(!(i<=t._children.length&&i>=0))return void c.log("index "+i+" out-of-bounds of child array length "+t._children.length,h.Error);t._children.splice(i,0,this)}else t._children.push(this);this._parent=t,this._parent.onActiveInHierarchyChanged.add(this.activeInHierarchyChanged,this),this._parent.onHierarchyChanged.add(this.onHierarchyChanged.dispatch,this.onHierarchyChanged)}this.onHierarchyChanged.dispatch();var n=this.isActiveInHierarchy();n!==this._isActiveInHierarchy&&(this._isActiveInHierarchy=n,this.onActiveInHierarchyChanged.dispatch())},t.prototype.activeInHierarchyChanged=function(){this._isActiveInHierarchy=this.isActiveInHierarchy(),this.onActiveInHierarchyChanged.dispatch();for(var t=this._components.length,i=0;i<t;++i)this._components[i].Active&&(this._isActiveInHierarchy?this._components[i].onEnable():this._components[i].onDisable())},t.prototype.isActiveInHierarchy=function(){return this._isActive&&(null===this._parent||this._parent.isActiveInHierarchy())},t.prototype.dispatchComponentAddedInHierarchy=function(t,i){this.onComponentAddedToHierarchy.dispatch(t,i);for(var n=this._children.length,e=0;e<n;++e)this._children[e].dispatchComponentAddedInHierarchy(t,i)},t}(),ut=function(t,i){return function(n,e){V(i,t)(n,e)}},at="custom:annotations:ignoreInEditor",ct=function(){return function(t,i){var n="function"==typeof t?t:t.constructor;S.addProperty(at,n,i)}},lt="custom:annotations:editorFunctions",ft=function(){return function(t,i){var n=[i];if(Reflect.hasMetadata(lt,t.constructor)){var e=Reflect.getMetadata(lt,t.constructor);if(e.indexOf(i)>=0)return;n=e.concat(n)}Reflect.defineMetadata(lt,n,t.constructor)}},bt=function(){function t(t){this._frameStartTime=0,this._frameWorkDone=!1,this._workPromises=[],this.frameBudget=t,"undefined"!=typeof performance&&"function"==typeof performance.now?this._now=performance.now.bind(performance):"function"==typeof Date.now?this._now=Date.now.bind(Date):"function"==typeof Date.prototype.getTime?this._now=function(){return(new Date).getTime()}:(this._now=function(){return 0},c.log("FrameWorkManager: None of the expected timing functions are available",h.Error))}return Object.defineProperty(t.prototype,"frameTimeElapsed",{get:function(){return this._now()-this._frameStartTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frameBudgetRemaining",{get:function(){return this.frameBudget-this.frameTimeElapsed},enumerable:!0,configurable:!0}),t.prototype.markFrameStart=function(){this._frameStartTime=this._now(),this._frameWorkDone=!1},t.prototype.markFrameEnd=function(){for(;this._workPromises.length>0&&(this.frameBudgetRemaining>0||!this._frameWorkDone);)this._frameWorkDone=!0,this._workPromises[0][0]()&&this._workPromises.shift()},t.prototype.flushWorkQueue=function(){for(;this._workPromises.length>0;)this._frameWorkDone=!0,this._workPromises[0][0]()&&this._workPromises.shift()},t.prototype.cancelWork=function(){var t,i,n;try{for(var e=Object(o.__values)(this._workPromises),s=e.next();!s.done;s=e.next()){var r=s.value;null===(n=r[1])||void 0===n||n.call(r)}}catch(h){t={error:h}}finally{try{s&&!s.done&&(i=e.return)&&i.call(e)}finally{if(t)throw t.error}}this._workPromises=[]},t.prototype.awaitFreeTime=function(t,i){this._workPromises.push([t,i]),this.markFrameEnd()},t=Object(o.__decorate)([Object(u.injectable)(),Object(o.__metadata)("design:paramtypes",[Number])],t)}(),vt={},dt=function(t,i){return function(n){var e={ctor:n};i&&(e.category=i),vt[t]=e}},Ot=function(){function t(t){this._gl=t}return t.prototype.destroy=function(){this._gl.deleteProgram(this._program)},t.prototype.useProgram=function(){this._gl.useProgram(this._program)},t.prototype.compileProgram=function(t,i){var n=this._gl,e=this.compileFragmentShader(n,i),s=this.compileVertexShader(n,t);if(!e||!s)return null;var r=n.createProgram();return n.attachShader(r,s),n.attachShader(r,e),n.linkProgram(r),n.getProgramParameter(r,n.LINK_STATUS)?this._program=r:(c.log("Could not initialize shaders:\n"+n.getProgramInfoLog(r),h.Error),null)},t.prototype.compileVertexShader=function(t,i){return this.compileShader(t,i,t.VERTEX_SHADER)},t.prototype.compileFragmentShader=function(t,i){return this.compileShader(t,i,t.FRAGMENT_SHADER)},t.prototype.compileShader=function(t,i,n){var e=t.createShader(n);return t.shaderSource(e,i),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)?e:(c.log("Could not compile shader of type "+n+":\n"+t.getShaderInfoLog(e),h.Error),null)},t}(),mt=function(){function t(){this._bitFieldArray=[],this._bitLength=0}return t.fromBase64=function(i){var n=i.length,e=new t;e.reserveSize(n*t.BITS_PER_BASE64_CHAR);for(var s=0,r=0;r<n;++r){var o=t.BASE64_CHARS.indexOf(i.charAt(r));if(o<0)return c.log("Cannot convert from base64: "+i,h.Error),null;for(var u=0;u<t.BITS_PER_BASE64_CHAR;++u)e.setUnchecked(s++,0!=(o&1<<u))}return e},t.prototype.toBase64=function(){for(var i="",n=0,e=Math.ceil(this._bitLength/t.BITS_PER_BASE64_CHAR),s=0;s<e;++s){for(var r=0,h=0;h<t.BITS_PER_BASE64_CHAR;++h)r|=(this.getUnchecked(n++)?1:0)<<h;i+=t.BASE64_CHARS.charAt(r)}return m.trimEnd(i,t.BASE64_CHARS.charAt(0))},t.prototype.get=function(t){return!(t<0||t>=this._bitLength)&&this.getUnchecked(t)},t.prototype.set=function(t,i){this.reserveSize(t+1),this.setUnchecked(t,i)},t.prototype.getUnchecked=function(i){var n=Math.floor(i/t.BITS_PER_FIELD),e=1<<i-n*t.BITS_PER_FIELD;return 0!=(this._bitFieldArray[n]&e)},t.prototype.setUnchecked=function(i,n){var e=Math.floor(i/t.BITS_PER_FIELD),s=1<<i-e*t.BITS_PER_FIELD,r=this._bitFieldArray[e];n?r|=s:r&=~s,this._bitFieldArray[e]=r},t.prototype.reserveSize=function(i){if(!(i<=this._bitLength)){var n=Math.ceil(i/t.BITS_PER_FIELD),e=n-this._bitFieldArray.length;this._bitFieldArray.length=n,this._bitFieldArray.fill(0,-e),this._bitLength=this._bitFieldArray.length*t.BITS_PER_FIELD}},t.BITS_PER_FIELD=32,t.BASE64_CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t.BITS_PER_BASE64_CHAR=6,t}(),pt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i}(T),gt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.baseSetData=function(t){this._datastore.setData(this._saveKey,t)},i.prototype.baseGetData=function(){return this._datastore.getData(this._saveKey)},i.customSerialize=function(i,n,e){t.customSerialize.call(this,i,n,e),i.properties.saveKey||(i.properties.saveKey=i.guid)},Object(o.__decorate)([ct(),M(),Object(o.__metadata)("design:type",String)],i.prototype,"_saveKey",void 0),Object(o.__decorate)([K(pt),Object(o.__metadata)("design:type",pt)],i.prototype,"_datastore",void 0),i}(T),yt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._registeredComponents=[],i}return Object(o.__extends)(i,t),i.prototype.setBit=function(t,i){this.getBitField().set(t,i),this.baseSetData(this._bitField.toBase64())},i.prototype.getBit=function(t){return this.getBitField().get(t)},i.prototype.setBitForComponent=function(t,i){this.setBit(this.getBitIndex(t),i)},i.prototype.getBitForComponent=function(t){return this.getBit(this.getBitIndex(t))},i.registerComponent=function(t,i){var n,e=null!==(n=t.properties.registeredComponents)&&void 0!==n?n:t.properties.registeredComponents=[],s=e.indexOf(i);return s>=0?s:e.push(i)-1},i.prototype.getBitField=function(){var t,i;return null!==(t=this._bitField)&&void 0!==t?t:this._bitField=mt.fromBase64(null!==(i=this.baseGetData())&&void 0!==i?i:"")},i.prototype.getBitIndex=function(t){var i=this._registeredComponents.indexOf(t);return i<0&&c.log("No component is registered for guid "+t+". Re-saving the prefab may fix this problem.",h.Error),i},Object(o.__decorate)([ct(),H(),M(),Object(o.__metadata)("design:type",Array)],i.prototype,"_registeredComponents",void 0),i=Object(o.__decorate)([Q("BitFieldSaveData")],i)}(gt),jt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.setBit=function(t){this._bitFieldSaveDataComponent.setBit(this._index,t)},i.prototype.getBit=function(){return this._bitFieldSaveDataComponent.getBit(this._index)},i.customSerialize=function(i,n,e){t.customSerialize.call(this,i,n,e),i.properties.index=yt.registerComponent(e(i.properties.bitFieldSaveDataComponent),i.guid)},Object(o.__decorate)([K(yt),Object(o.__metadata)("design:type",yt)],i.prototype,"_bitFieldSaveDataComponent",void 0),Object(o.__decorate)([ct(),L(),Object(o.__metadata)("design:type",Number)],i.prototype,"_index",void 0),i=Object(o.__decorate)([Q("BitFieldBit")],i)}(T),_t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.setData=function(t){this.baseSetData(t)},i.prototype.getData=function(){return this.baseGetData()},i=Object(o.__decorate)([Q("SaveData")],i)}(gt),wt=function(){function t(){this.fsmFactories=null,this.data=null,this.variables=null,this.currentState=null,this.onComplete=new A}return Object.defineProperty(t.prototype,"OnComplete",{get:function(){return this.onComplete},enumerable:!0,configurable:!0}),t.prototype.init=function(t,i,n){this.fsmFactories=t,this.data=i,this.variables=n},t.prototype.execute=function(t){void 0===t&&(t=!1),this.currentState||this.executeNext(t)},t.prototype.executeWithData=function(t,i){var n=this;this.currentState=t;var e=this.fsmFactories.createState(t,this.variables);e.OnComplete.addOnce((function(){n.onStateCompleted(i)}),this),e.execute(i)},t.prototype.executeWithName=function(t,i){for(var n=0;n<this.data.States.length;n++){var e=this.data.States[n];if(e.Name===t){this.executeWithData(e,i);break}}},t.prototype.executeNext=function(t){var i=this.data.States.indexOf(this.currentState)+1;i<this.data.States.length?this.executeWithData(this.data.States[i],t):(this.currentState=null,this.OnComplete.dispatch())},t.prototype.onStateCompleted=function(t){if(this.currentState.Transitions.length>0){for(var i=0;i<this.currentState.Transitions.length;i++){var n=this.currentState.Transitions[i];if(n.Conditions.length>0){for(var e=!0,s=0;s<n.Conditions.length;s++){var r=n.Conditions[s];if(!this.fsmFactories.createCondition(r,this.variables).test()){e=!1;break}}if(!e)continue}return void this.executeWithName(n.State,t)}this.executeNext(t)}else this.executeNext(t)},t.parseVariable=function(t,i){if(f.isDefined(t)){if("string"==typeof t){var n=t;return t.length>1&&"$"===t.charAt(0)&&(n=this.findVariable(t.substr(1),i)),n}if(t.constructor===Array){n=[];for(var e=0;e<t.length;e++)n.push(this.parseVariable(t[e],i));return n}if("object"==typeof t&&t.constructor===Object){n={};for(var s in t)n[s]=this.parseVariable(t[s],i);return n}return t}return null},t.findVariable=function(t,i){return i.hasOwnProperty(t)?i[t]:null},t=Object(o.__decorate)([Object(u.injectable)()],t)}(),Et=function(){function t(){this.data=null,this.parameters={},this.variables=null,this.onComplete=new A}return Object.defineProperty(t.prototype,"Parameters",{get:function(){return this.parameters},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Variables",{get:function(){return this.variables},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OnComplete",{get:function(){return this.onComplete},enumerable:!0,configurable:!0}),t.prototype.init=function(t,i){this.data=t,this.variables=i},t.prototype.setEnableLog=function(t){this.enableLog=t},t.prototype.validate=function(){return!0},t.prototype.execute=function(){this.enableLog&&this.logAction()},t.prototype.logAction=function(){c.log("Executing ACTION "+this.data.Type,h.Verbose)},t.prototype.finish=function(t){if(void 0===t&&(t=null),t)for(var i in t){var n=this.findResult(i);null!==n&&(this.variables[n]=t[i])}this.OnComplete.dispatch()},t.prototype.findParameter=function(t){return this.parameters.hasOwnProperty(t)?wt.parseVariable(this.parameters[t],this.variables):this.variables.hasOwnProperty(t)?wt.parseVariable("$"+t,this.variables):(c.log("Action ["+this.constructor.name+"] could not find parameter with name ["+t+"].",h.Error),null)},t.prototype.validateParameters=function(t,i){void 0===i&&(i=null);for(var n=0;n<t.length;n++){var e=t[n];if(this.data.Parameters.hasOwnProperty(e))this.parameters[e]=this.data.Parameters[e];else if(!this.variables.hasOwnProperty(e))return c.log("Parameter validation failed for action ["+this.constructor.name+"]. Missing parameter ["+e+"].",h.Error),!1}if(i)for(var s in i)this.data.Parameters.hasOwnProperty(s)?this.parameters[s]=this.data.Parameters[s]:this.parameters[s]=i[s];return!0},t.prototype.findResult=function(t){return this.data.Results.hasOwnProperty(t)?this.data.Results[t]:null},t=Object(o.__decorate)([Object(u.injectable)()],t)}(),It={},At=function(t){return function(i){It[t]=i}},Tt=function(){function t(){}var i;return i=t,t.prototype.deserializeCollection=function(t){return i.deserializeCollection(t,this.deserialize)},t.prototype.serializeCollection=function(t){return i.serializeCollection(t,this.serialize)},t.deserializeCollection=function(t,i){var n=[];if(t)for(var e=0;e<t.length;e++)n.push(i(t[e]));return n},t.serializeCollection=function(t,i){var n=[];if(t)for(var e=0;e<t.length;e++)n.push(i(t[e]));return n},t=i=Object(o.__decorate)([Object(u.injectable)()],t)}(),Dt=function(){},St=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=null,i.parameters={},i.results={},i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"Type",{get:function(){return this.type},set:function(t){this.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Parameters",{get:function(){return this.parameters},set:function(t){this.parameters=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Results",{get:function(){return this.results},set:function(t){this.results=t},enumerable:!0,configurable:!0}),i}(Dt),Ct=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=null,i.value={},i.test={},i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"Type",{get:function(){return this.type},set:function(t){this.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Value",{get:function(){return this.value},set:function(t){this.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Test",{get:function(){return this.test},set:function(t){this.test=t},enumerable:!0,configurable:!0}),i}(Dt),Nt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.name=null,i.actions=[],i.transitions=[],i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"Name",{get:function(){return this.name},set:function(t){this.name=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Actions",{get:function(){return this.actions},set:function(t){this.actions=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Transitions",{get:function(){return this.transitions},set:function(t){this.transitions=t},enumerable:!0,configurable:!0}),i}(Dt),xt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.states=[],i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"States",{get:function(){return this.states},set:function(t){this.states=t},enumerable:!0,configurable:!0}),i}(function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.version=null,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"Version",{get:function(){return this.version},set:function(t){this.version=t},enumerable:!0,configurable:!0}),i}(Dt)),Rt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.state=null,i.conditions=[],i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"State",{get:function(){return this.state},set:function(t){this.state=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Conditions",{get:function(){return this.conditions},set:function(t){this.conditions=t},enumerable:!0,configurable:!0}),i}(Dt),Mt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}var n;return Object(o.__extends)(i,t),n=i,i.prototype.deserialize=function(t){var i=new xt;return i.Version=t.version,i.States=Tt.deserializeCollection(t.states,n.deserializeState),i},i.prototype.serialize=function(t){return{version:1,states:Tt.serializeCollection(t.States,n.serializeState)}},i.deserializeState=function(t){var i=new Nt;return i.Name=t.name,i.Actions=Tt.deserializeCollection(t.actions,n.deserializeAction),i.Transitions=Tt.deserializeCollection(t.transitions,n.deserializeTransition),i},i.serializeState=function(t){return{name:t.Name,actions:Tt.serializeCollection(t.Actions,n.serializeAction),transitions:Tt.serializeCollection(t.Transitions,n.serializeTransition)}},i.deserializeAction=function(t){var i=new St;return i.Type=t.type,i.Parameters=t.parameters,i.Results=t.results,i},i.serializeAction=function(t){return{type:t.Type,parameters:t.Parameters,results:t.Results}},i.deserializeTransition=function(t){var i=new Rt;return i.State=t.state,i.Conditions=Tt.deserializeCollection(t.conditions,n.deserializeCondition),i},i.serializeTransition=function(t){return{state:t.State,conditions:Tt.serializeCollection(t.Conditions,n.serializeCondition)}},i.deserializeCondition=function(t){var i=new Ct;return i.Type=t.type,i.Value=t.value,i.Test=t.test,i},i.serializeCondition=function(t){return{type:t.Type,value:t.Value,test:t.Test}},i=n=Object(o.__decorate)([Object(u.injectable)()],i)}(Tt),Lt=function(){function t(t){this.fsmDataProvider=null,this.container=null,this.fsmDataProvider=t,this.container=new u.Container,this.container.bind("v1").to(Mt)}return t.prototype.getStateMachine=function(t){var i=this.fsmDataProvider.getStateMachine(t);return this.container.get("v"+i.version).deserialize(i)},t=Object(o.__decorate)([Object(u.injectable)(),Object(o.__param)(0,Object(u.inject)(s.FSMDataProvider)),Object(o.__metadata)("design:paramtypes",[Object])],t)}(),Pt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.validate=function(){return t.prototype.validate.call(this)&&this.validateParameters(["name","value"])},i.prototype.execute=function(){t.prototype.execute.call(this);var i=this.findParameter("name"),n=this.findParameter("value");this.Variables.hasOwnProperty(i)?this.Variables[i]+=n:this.Variables[i]=n,this.finish()},i=Object(o.__decorate)([At("AddVariable")],i)}(Et),kt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.validate=function(){return t.prototype.validate.call(this)&&this.validateParameters(["enable","game"])},i.prototype.execute=function(){t.prototype.execute.call(this);var i=this.findParameter("game"),n=this.findParameter("enable");if(i.input.enabled=n,!n){i.input.reset();for(var e=0;e<i.input.pointers.length;e++)i.input.pointers[e].active=!1,i.input.pointers[e].isDown=!1}this.finish()},i=Object(o.__decorate)([At("EnableInput")],i)}(Et),Bt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.functionResults=null,i}return Object(o.__extends)(i,t),i.prototype.validate=function(){return t.prototype.validate.call(this)&&this.validateParameters(["context","function"],{arguments:[],wait:!1})},i.prototype.execute=function(){t.prototype.execute.call(this);var i=this.findParameter("context");if(i){var n=this.findParameter("function"),e=this.findParameter("arguments");this.findParameter("wait")?(e.push(this.handleCallback.bind(this)),this.functionResults=i[n].apply(i,e)):(this.functionResults=i[n].apply(i,e),this.finish({functionResult:this.functionResults}))}},i.prototype.handleCallback=function(){this.finish({functionResult:this.functionResults})},i=Object(o.__decorate)([At("ExecuteFunction")],i)}(Et),Ut=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.validate=function(){return t.prototype.validate.call(this)&&this.validateParameters(["controller","service","ID"],{variables:{},wait:!0})},i.prototype.execute=function(){t.prototype.execute.call(this);var i=this.findParameter("controller"),n=this.findParameter("service"),e=this.findParameter("ID"),s=this.findParameter("variables");this.findParameter("wait")?i.execute(n.getStateMachine(e),s,this.finish.bind(this)):(i.execute(n.getStateMachine(e),s),this.finish())},i=Object(o.__decorate)([At("ExecuteStateMachine")],i)}(Et),Gt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.validate=function(){return t.prototype.validate.call(this)&&this.validateParameters(["target","alpha"])},i.prototype.execute=function(){t.prototype.execute.call(this);var i=this.findParameter("target"),n=this.findParameter("alpha");i&&"alpha"in i?i.alpha=n:c.log('Missing target or missing property "alpha"',h.Error),this.finish()},i=Object(o.__decorate)([At("SetAlpha")],i)}(Et),Ft=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.validate=function(){return t.prototype.validate.call(this)&&this.validateParameters(["name","value"])},i.prototype.execute=function(){t.prototype.execute.call(this);var i=this.findParameter("name");this.Variables[i]=this.findParameter("value"),this.finish()},i=Object(o.__decorate)([At("SetVariable")],i)}(Et),Ht=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.validate=function(){var i=[];for(var n in this.data.Parameters)i.push(n);return t.prototype.validate.call(this)&&this.validateParameters(i)},i.prototype.execute=function(){for(var i in t.prototype.execute.call(this),this.Parameters)this.Variables[i]=this.findParameter(i);this.finish()},i=Object(o.__decorate)([At("SetVariables")],i)}(Et),Kt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.validate=function(){return t.prototype.validate.call(this)&&this.validateParameters(["target","visible"])},i.prototype.execute=function(){t.prototype.execute.call(this);var i=this.findParameter("target"),n=this.findParameter("visible");i&&"visible"in i?i.visible=n:c.log('Missing target or missing property "visible"',h.Error),this.finish()},i=Object(o.__decorate)([At("SetVisible")],i)}(Et),zt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.validate=function(){return t.prototype.validate.call(this)&&this.validateParameters(["game","target","to"],{loop:!1,wait:!1})},i.prototype.execute=function(){t.prototype.execute.call(this);var i=this.findParameter("target");if(i){for(var n=this.findParameter("game"),e=this.findParameter("to"),s=this.findParameter("loop"),r=this.findParameter("wait"),h=n.add.tween(i),o=0;o<e.length;o++){var u=e[o];h.to(u.properties,1e3*u.duration,u.ease,!1,u.delay,u.repeat,u.yoyo)}s&&h.loop(),r?(h.onComplete.add(this.finish.bind(this)),h.start()):(h.start(),this.finish())}else this.finish()},i=Object(o.__decorate)([At("Tween")],i)}(Et),Wt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.validate=function(){return t.prototype.validate.call(this)&&this.validateParameters(["game","time"])},i.prototype.execute=function(){t.prototype.execute.call(this);var i=this.findParameter("game"),n=this.findParameter("time");i.time.events.add(1e3*n,this.finish,this)},i.prototype.logAction=function(){t.prototype.logAction.call(this),c.log("Wait for "+this.findParameter("time"),h.Verbose)},i=Object(o.__decorate)([At("Wait")],i)}(Et),Yt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.validate=function(){return t.prototype.validate.call(this)&&this.validateParameters(["target","event"])},i.prototype.execute=function(){t.prototype.execute.call(this);var i=this.findParameter("target");if(i&&i.hasOwnProperty("events")){var n=i.events[this.findParameter("event")];if(n)return void n.addOnce(this.finish,this)}this.finish()},i=Object(o.__decorate)([At("WaitForEvent")],i)}(Et),Vt=function(){function t(){}return t.prototype.init=function(t){this.container=t},t.prototype.create=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return this.container.get(t+".Factory").apply(null,i)},t.prototype.add=function(t,i){this.container.bind(t+".Factory").toFactory(i)},t=Object(o.__decorate)([Object(u.injectable)()],t)}();!function(t){t.Equals="equals",t.NotEquals="notEquals",t.GreaterThan="greaterThan",t.LessThan="lessThan"}(C||(C={}));var qt,Qt=function(){function t(){this.data=null,this.variables=null}return t.prototype.init=function(t,i){this.data=t,this.variables=i},t.prototype.test=function(){var t=wt.parseVariable(this.data.Test,this.variables),i=wt.parseVariable(this.data.Value,this.variables);switch(this.data.Type){case C.Equals:return t===i;case C.NotEquals:return t!==i;case C.GreaterThan:return t<i;case C.LessThan:return t>i;default:return!1}},t=Object(o.__decorate)([Object(u.injectable)()],t)}(),Xt=function(){function t(){this.fsmFactories=null,this.data=null,this.variables=null,this.actions=[],this.actionsCompleted=0,this.onComplete=new A}return Object.defineProperty(t.prototype,"OnComplete",{get:function(){return this.onComplete},enumerable:!0,configurable:!0}),t.prototype.init=function(t,i,n){this.fsmFactories=t,this.data=i,this.variables=n},t.prototype.execute=function(t){if(void 0===t&&(t=!1),t&&c.log("Executing STATE "+this.data.Name,h.Verbose),this.data.Actions.length>0){for(var i=0;i<this.data.Actions.length;i++){var n=this.data.Actions[i],e=this.fsmFactories.createAction(n,this.variables);e?(e.setEnableLog(t),e.OnComplete.addOnce(this.onActionComplete,this),e.validate()&&this.actions.push(e)):c.log("Action of type "+n.Type+" could not be created.",h.Error)}if(0===this.actions.length)this.OnComplete.dispatch();else for(i=0;i<this.actions.length;i++)this.actions[i].execute()}else this.OnComplete.dispatch()},t.prototype.onActionComplete=function(){this.actionsCompleted++,this.actions.length===this.actionsCompleted&&(this.actions=[],this.actionsCompleted=0,this.OnComplete.dispatch())},t=Object(o.__decorate)([Object(u.injectable)()],t)}(),Jt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.init=function(i){var n=this;t.prototype.init.call(this,i),this.add(wt,(function(t){return function(i,e){var s=t.container.resolve(wt);return s.init(n,i,e),s}})),this.add(Xt,(function(t){return function(i,e){var s=t.container.resolve(Xt);return s.init(n,i,e),s}})),this.add(Et,(function(t){return function(i,n){var e=""+i.Type;if(It.hasOwnProperty(e)){var s=t.container.resolve(It[e]);return s.init(i,n),s}return null}})),this.add(Qt,(function(t){return function(i,n){var e=t.container.resolve(Qt);return e.init(i,n),e}}))},i.prototype.createStateMachine=function(t,i){return this.create(wt,t,i)},i.prototype.createState=function(t,i){return this.create(Xt,t,i)},i.prototype.createAction=function(t,i){return this.create(Et,t,i)},i.prototype.createCondition=function(t,i){return this.create(Qt,t,i)},i=Object(o.__decorate)([Object(u.injectable)()],i)}(Vt),Zt=function(){function t(t){this.fsmFactories=null,this.fsmFactories=t}return t.prototype.execute=function(t,i,n){void 0===n&&(n=null),this.createStateMachine(t,i,n).execute()},t.prototype.createStateMachine=function(t,i,n){var e=this.fsmFactories.createStateMachine(t,i);return n&&e.OnComplete.addOnce(n),e},t=Object(o.__decorate)([Object(u.injectable)(),Object(o.__param)(0,Object(u.inject)(s.FSMFactories)),Object(o.__metadata)("design:paramtypes",[Jt])],t)}(),$t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.execute=function(t,i,n){void 0===n&&(n=null),this.createStateMachine(t,i,n).execute(!0)},i=Object(o.__decorate)([Object(u.injectable)()],i)}(Zt);!function(t){t.Get="GET",t.Post="POST",t.Put="PUT",t.Patch="PATCH",t.Delete="DELETE",t.Head="HEAD"}(qt||(qt={}));var ti,ii=function(){function t(){this._httpStatusCode=0,this._headers=new Map,this._body=null,this._data=null,this._errorMessage=null}return t.prototype.setHttpStatusCode=function(t){return this._httpStatusCode=t,this},t.prototype.getHttpStatusCode=function(){return this._httpStatusCode},t.prototype.setHeader=function(t,i,n){void 0===n&&(n=!0);var e=t.toLowerCase();return!n&&this._headers.has(e)?c.log("Could not set response header "+t+" because it was already set",h.Warning):this._headers.set(e,i),this},t.prototype.getHeader=function(t){var i=t.toLowerCase();return this._headers.has(i)?this._headers.get(i):null},t.prototype.setBody=function(t){return this._body=t,this},t.prototype.getBody=function(){return this._body},t.prototype.setErrorMessage=function(t){return this._errorMessage=t,this},t.prototype.getErrorMessage=function(){return this._errorMessage},t.prototype.wasSuccessful=function(){return this._httpStatusCode>=200&&this._httpStatusCode<=299&&null===this._errorMessage},t.prototype.setData=function(t){return this._data=t,this},t.prototype.getData=function(){return this._data},t}(),ni=function(){function t(){this._baseURI=null,this._defaultHeaders=new Map,this._defaultResponseHandler=new Map}return t.prototype.setDefaultHeader=function(t,i,n){void 0===n&&(n=!0),!n&&this._defaultHeaders.has(t)?c.log("Could not set header "+t+" as it already has a value",h.Warning):this._defaultHeaders.set(t,i)},t.prototype.getDefaultHeaders=function(){return this._defaultHeaders},t.prototype.setBaseURI=function(t){this._baseURI=t},t.prototype.getBaseURI=function(){return this._baseURI},t.prototype.setDefaultResponseHandler=function(t,i,n){void 0===n&&(n=null);var e=""+t;this._defaultResponseHandler.has(e)?c.log("Could not set default handler for "+e+" responses as one already exists",h.Warning):this._defaultResponseHandler.set(e,{context:n,func:i})},t.prototype.clearDefaultResponseHandler=function(t){var i=""+t;this._defaultResponseHandler.has(i)&&this._defaultResponseHandler.delete(i)},t.prototype.sendRequest=function(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var i,n=this;return Object(o.__generator)(this,(function(e){return t.getRequestInterceptors().forEach((function(i){i.func.call(i.context,t)})),t.getBaseURI()||t.setBaseURI(this._baseURI),i=t.getHeaders(),this._defaultHeaders.forEach((function(n,e){i.has(e)||t.setHeader(e,n)})),[2,new Promise((function(i){n.sendFetchRequest(t,n.getRequestInitData(t),i)}))]}))}))},t.prototype.getRequestInitData=function(t){var i={method:t.getMethod(),headers:{}},n=t.getHeaders();n.size>0&&n.forEach((function(t,n){i.headers[n]=t}));var e=t.getBody();return e&&(t.getMethod()!==qt.Get&&t.getMethod()!==qt.Head?(i.headers["Content-Type"]=e.getContentType(),i.body=e.getData()):c.log("Cannot send a body for "+t.getMethod()+" "+t.getFullURI(),h.Warning)),i},t.prototype.sendFetchRequest=function(t,i,n,e){return void 0===e&&(e=1),Object(o.__awaiter)(this,void 0,void 0,(function(){var s,r,h,u,a,c,l,f,b,v,d=this;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:s=!1,r=window.setTimeout((function(){s=!0,e<=t.getRetryCount()?d.sendFetchRequest(t,i,n,e+1):n((new ii).setHttpStatusCode(408).setErrorMessage("The request has timed out."))}),t.getTimeout()),h=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(t.getFullURI(),i)];case 2:return h=o.sent(),[3,4];case 3:return u=o.sent(),n((new ii).setHttpStatusCode(0).setErrorMessage("Request could not be sent - "+u.message)),[3,4];case 4:return window.clearTimeout(r),!h||s?[3,6]:((a=new ii).setHttpStatusCode(h.status),h.headers.forEach((function(t,i){a.setHeader(i,t,!0)})),l=(c=a).setBody,[4,h.arrayBuffer()]);case 5:if(l.apply(c,[o.sent()]),t.getResponseInterceptors().forEach((function(t){t.func.call(t.context,a)})),t.shouldUseDefaultResponseHandlers()&&this._defaultResponseHandler.size>0)for(f=a.getHttpStatusCode().toString(),b=f.length-1;b>=0;--b){if(this._defaultResponseHandler.has(f)){(v=this._defaultResponseHandler.get(f)).func.call(v.context,a);break}f=f.substr(0,b)+"*"+f.substr(b+1)}n(a),o.label=6;case 6:return[2]}}))}))},t=Object(o.__decorate)([Object(u.injectable)()],t)}(),ei=function(){function t(){}return t.convertToJson=function(t){var i=new Uint8Array(t.getBody());if(i.length>0){var n=f.bufferToUtf8String(i);try{t.setData(JSON.parse(n))}catch(e){c.log("Malformed JSON in response: "+n,h.Error),t.setErrorMessage("No JSON body due to malformed payload")}}},t}(),si=function(){function t(t){void 0===t&&(t=null),this._jsonObject=null,this.setJson(t)}return t.prototype.setJson=function(t){this._jsonObject=t},t.prototype.getJson=function(){return this._jsonObject},t.prototype.getData=function(){return this._jsonObject?JSON.stringify(this._jsonObject):null},t.prototype.getContentType=function(){return"application/json"},t}(),ri=function(){function t(){this._baseURI=null,this._requestURI=null,this._method=qt.Get,this._headers=new Map,this._queryParameters=new Map,this._shouldUseDefaultResponseHandlers=!0,this._requestInterceptors=[],this._responseInterceptors=[],this._body=null,this._retryCount=0,this._timeout=1e4}return t.prototype.setHeader=function(t,i,n){return void 0===n&&(n=!0),!n&&this._headers.has(t)?c.log("Could not set header "+t+" because an existing value for it already exists.",h.Warning):this._headers.set(t,i),this},t.prototype.getHeaders=function(){return this._headers},t.prototype.setUseDefaultResponseHandlers=function(t){return this._shouldUseDefaultResponseHandlers=t,this},t.prototype.shouldUseDefaultResponseHandlers=function(){return this._shouldUseDefaultResponseHandlers},t.prototype.setBaseURI=function(t){return this._baseURI=t,this},t.prototype.getBaseURI=function(){return this._baseURI},t.prototype.setRequestURI=function(t){return this._requestURI=t,this},t.prototype.getRequestURI=function(){return this._requestURI},t.prototype.setQueryParameter=function(t,i,n){return void 0===n&&(n=!0),!n&&this._queryParameters.has(t)?c.log("Could not set query parameter '"+t+"' as it already has a value",h.Warning):this._queryParameters.set(t,i),this},t.prototype.getQueryParameters=function(){return this._queryParameters},t.prototype.getFullURI=function(){var t=null;if(f.isDefined(this._requestURI)?t=f.isDefined(this._baseURI)?this._baseURI+"/"+this._requestURI:this._requestURI:f.isDefined(this._baseURI)&&(t=this._baseURI),null!==t&&this._queryParameters.size>0){var i="";this._queryParameters.forEach((function(t,n){i+=encodeURIComponent(n)+"="+encodeURIComponent(t)+"&"})),t=t+"?"+i.substr(0,i.length-1)}return t},t.prototype.setMethod=function(t){return this._method=t,this},t.prototype.getMethod=function(){return this._method},t.prototype.addRequestInterceptor=function(t,i){return void 0===i&&(i=null),this._requestInterceptors.push({context:i,func:t}),this},t.prototype.removeRequestInterceptor=function(t,i){void 0===i&&(i=null);var n=this._requestInterceptors.findIndex((function(n){return n.func===t&&n.context===i}));return n>-1&&this._requestInterceptors.splice(n,1),this},t.prototype.getRequestInterceptors=function(){return this._requestInterceptors},t.prototype.addResponseInterceptor=function(t,i){return void 0===i&&(i=null),this._responseInterceptors.push({func:t,context:i}),this},t.prototype.removeResponseInterceptor=function(t,i){void 0===i&&(i=null);var n=this._responseInterceptors.findIndex((function(n){return n.func===t&&n.context===i}));return n>-1&&this._responseInterceptors.splice(n,1),this},t.prototype.getResponseInterceptors=function(){return this._responseInterceptors},t.prototype.setRetryCount=function(t){return this._retryCount=t,this},t.prototype.getRetryCount=function(){return this._retryCount},t.prototype.setTimeout=function(t){return this._timeout=t,this},t.prototype.getTimeout=function(){return this._timeout},t.prototype.setBody=function(t){return this._body=t,this},t.prototype.getBody=function(){return this._body},t}(),hi=function(){function t(){}return t.convertToProtobuf=function(t){return function(i){var n=i.getBody();if(n){var e=new Uint8Array(n);try{i.setData(t.decode(e))}catch(s){c.log("Could not decode protobuf: "+s.message,h.Error),i.setErrorMessage("Could not decode protobuf")}}}},t}(),oi=function(){function t(t,i){void 0===t&&(t=null),void 0===i&&(i=null),this._protobufConstructor=null,this._protobufInstance=null,this.setProtobuf(t,i)}return t.prototype.setProtobuf=function(t,i){this._protobufConstructor=t,this._protobufInstance=i},t.prototype.getProtobuf=function(){return this._protobufInstance},t.prototype.getContentType=function(){return"application/octet-stream"},t.prototype.getData=function(){return this._protobufConstructor.encode(this._protobufInstance).finish()},t}(),ui=function(){function t(){this.onTextChanged=new Phaser.Signal}return Object.defineProperty(t.prototype,"OnTextChanged",{get:function(){return this.onTextChanged},enumerable:!0,configurable:!0}),t}(),ai=function(t){function i(i){var n=t.call(this)||this;return n.source=null,n.setText(i),n}return Object(o.__extends)(i,t),i.prototype.getText=function(){return this.source},i.prototype.setText=function(t){this.source=t,this.OnTextChanged.dispatch(this,t)},i}(ui),ci=function(){function t(t){this.inversifyInterface=null,this.inversifyInterface=t}return t.prototype.asSingleton=function(){this.inversifyInterface.inSingletonScope()},t}(),li=function(){function t(t){this.inversifyBindingTo=null,this.inversifyBindingTo=t}return t.prototype.to=function(t){return new ci(this.inversifyBindingTo.to(t))},t.prototype.toConstantValue=function(t){this.inversifyBindingTo.toConstantValue(t)},t}(),fi=function(){function t(){this.inversifyContainer=new u.Container}return Object.defineProperty(t.prototype,"SourceContainer",{get:function(){return this.inversifyContainer},enumerable:!0,configurable:!0}),t.prototype.bind=function(t){return new li(this.inversifyContainer.bind(t))},t.prototype.unbind=function(t){this.hasBinding(t)&&this.inversifyContainer.unbind(t)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.get=function(t){return this.hasBinding(t)?this.inversifyContainer.get(t):null},t.prototype.hasBinding=function(t){return this.inversifyContainer.isBound(t)},t.prototype.resolve=function(t){return this.inversifyContainer.resolve(t)},t.prototype.unbindAll=function(){this.inversifyContainer.unbindAll()},t}(),bi=function(){function t(){this._layers={},this._gameObjects=[],this._container=new fi}return Object.defineProperty(t.prototype,"gameObjects",{get:function(){return this._gameObjects},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),t.prototype.addGameObject=function(t){t.parent?c.log("Could not add game object to scene as it is parented to something already",h.Warning):this._gameObjects.push(t)},t.prototype.removeGameObject=function(t){var i=this._gameObjects.indexOf(t);i>-1?this._gameObjects.splice(i,1):c.log("Could not remove game object from the scene",h.Warning)},t.prototype.addLayer=function(t,i){return void 0===t&&(t=et.DEFAULT_NAME),void 0===i&&(i=et.DEFAULT_DEPTH),this._layers[t]?(c.log("A layer with the name '"+t+"' already exists. It will not be added.",h.Warning),this._layers[t].layer):this.createLayer(t,i)},t.prototype.getLayer=function(t){return this._layers[t]?this._layers[t].layer:this.createLayer(t,et.DEFAULT_DEPTH)},t.prototype.hasLayer=function(t){return Boolean(this._layers[t])},t.prototype.setLayerDepth=function(t,i){var n=this._layers[t];if(!n)return null;n.depth=i;var e=X.instance.game;return e.world.removeChild(n.layer.container),this.addContainerToWorld(e,n.layer.container,i),n.layer},t.prototype.addContainerToWorld=function(t,i,n){for(var e=t.world.children,s=e.length,r=0;r<s;++r){var h=this.findLayerDataForObject(e[r]);if(h&&n<h.depth)return void t.world.addChildAt(i,r)}t.world.addChild(i)},t.prototype.destroyLayer=function(t){this._layers[t]&&(this._layers[t].layer.destroy(),delete this._layers[t])},t.prototype.update=function(){for(var t in this._layers)this._layers[t].layer.update();for(var i=this._gameObjects.length,n=0;n<i;++n)this._gameObjects[n].update()},t.prototype.destroy=function(){for(var t=this._gameObjects.length-1;t>-1;--t)this._gameObjects[t].destroy();for(var i in this._gameObjects=null,this._layers)this.destroyLayer(i);this._layers=null},t.prototype.findLayerDataForObject=function(t){var i=t.name;return i&&this._layers[i]?this._layers[i]:null},t.prototype.createLayer=function(t,i){var n=X.instance.game.add.group(null,t);n.name=t,this.addContainerToWorld(X.instance.game,n,i);var e=new et(n);return this._layers[t]={layer:e,depth:i},e},t}(),vi=function(){function t(){}return t.getActiveScene=function(){return null===this._currentScene&&(this._currentScene=new bi),this._currentScene},t.destroyActiveScene=function(){this._currentScene&&(this._currentScene.destroy(),this._currentScene=null)},t._currentScene=null,t}(),di=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.onRootContainerSet=new Phaser.Signal,i._attachToCamera=!1,i._rootContainer=null,i._parentRenderComponent=null,i._previousContainerUpdateTransformFunction=null,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"attachToCamera",{get:function(){return this._attachToCamera},set:function(t){this._attachToCamera=t},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.prototype.create.call(this),this.GameObject.onDestroy.add(this.clearListeners,this)},i.prototype.destroy=function(){this.clearParentRenderComponent(),this.clearListeners(),this.onRootContainerSet.dispose(),t.prototype.destroy.call(this)},i.prototype.getRootContainer=function(){return this._rootContainer},i.prototype.getDimensions=function(){return c.log("Render component getDimensions not overridden. This is likely a mistake.",h.Warning),I.ZERO},i.prototype.setRootContainer=function(t){this._rootContainer?c.log("Root container can only be set once",h.Warning):t?(this._rootContainer=t,this._rootContainer.visible=this.GameObject.activeInHierarchy,this.GameObject.onActiveInHierarchyChanged.add(this.updateVisibility,this),this.GameObject.onHierarchyChanged.add(this.gameObjectHierarchyChanged,this),this.onRootContainerSet.dispatch(),this.attachRootContainer()):c.log("Root container must be a valid value",h.Warning)},i.prototype.updateTransformValues=function(){this.applyWorldMatrix(),this.applyRectTransformScaling(),this.applyCameraMatrix(),this.applyWorldProperties()},i.prototype.applyWorldMatrix=function(){var t=this.GameObject.transform.worldMatrix,i=this._rootContainer.worldTransform;i.a=t.a,i.b=t.c,i.c=t.b,i.d=t.d,i.tx=t.tx,i.ty=t.ty},i.prototype.applyRectTransformScaling=function(){if(this.GameObject.transform instanceof $){var t=this.GameObject.transform,i=this.getDimensions(),n=t.rectTransformDimensions.width/i.width,e=t.rectTransformDimensions.height/i.height,s=-i.width*t.pivot.x*n,r=-i.height*t.pivot.y*e,h=this._rootContainer.worldTransform;h.a*=n,h.b*=n,h.c*=e,h.d*=e,h.tx+=s*t.worldMatrix.a+r*t.worldMatrix.b,h.ty+=s*t.worldMatrix.c+r*t.worldMatrix.d}},i.prototype.applyCameraMatrix=function(){if(Z.main&&!this._attachToCamera){var t=this._rootContainer.worldTransform,i=new E(t.a,t.c,t.b,t.d,t.tx,t.ty),n=Z.main.viewMatrix;n.isTranslateOnly()&&i.isTranslateOnly()?(t.tx+=n.tx,t.ty+=n.ty):(E.multiply(Z.main.viewMatrix,i,i),t.a=i.a,t.b=i.c,t.c=i.b,t.d=i.d,t.tx=i.tx,t.ty=i.ty)}},i.prototype.applyWorldProperties=function(){var t=this.GameObject.transform;this._rootContainer.worldPosition.set(this._rootContainer.worldTransform.tx,this._rootContainer.worldTransform.ty),this._rootContainer.worldAlpha=this._rootContainer.parent?this._rootContainer.parent.worldAlpha*this._rootContainer.alpha:this._rootContainer.alpha,this._rootContainer.worldScale.set(t.worldScale.x,t.worldScale.y);var i=t.worldMatrix.a/t.worldScale.x;this._rootContainer.worldRotation=t.worldMatrix.c>0?Math.acos(i):-Math.acos(i)},i.prototype.attachRootContainer=function(){if(this.GameObject.legacyTransform)this.GameObject.legacyTransform.group.addChild(this._rootContainer),this.GameObject.legacyTransform.OnDestroy.add(this.onLegacyTransformDestroyed,this);else{this.GameObject.transform?this.overridePIXIUpdateFunction():this.GameObject.onComponentAdded.add(this.trackTransformAddingToOverride,this),this.GameObject.onComponentAddedToHierarchy.add(this.componentAddedToHierarchy,this);var t=this.GameObject.findComponentInParent(i,!1);t?(this._parentRenderComponent=t,this._parentRenderComponent.OnDestroy.add(this.onParentRenderComponentDestroyed,this),t.getRootContainer()?(this._parentRenderComponent.GameObject.onLayerChanged.add(this.attachRootToRenderComponentParent,this),this.GameObject.onLayerChanged.add(this.attachRootToRenderComponentParent,this)):(t.onRootContainerSet.add(this.onRenderComponentContainerWasSet,this),this.GameObject.onLayerChanged.add(this.attachRootToCurrentLayer,this)),this.attachRootToRenderComponentParent()):(this.attachRootToCurrentLayer(),this.GameObject.onLayerChanged.add(this.attachRootToCurrentLayer,this))}},i.prototype.gameObjectHierarchyChanged=function(){this.clearParentRenderComponent(),this.GameObject.onLayerChanged.remove(this.attachRootToCurrentLayer,this),this.attachRootContainer()},i.prototype.componentAddedToHierarchy=function(t,n){if(n instanceof i)if(null===this._parentRenderComponent)this.attachRootContainer();else{var e=this.GameObject.findComponentInParent(i,!1);this._parentRenderComponent!==e&&(this.clearParentRenderComponent(),this.attachRootContainer())}},i.prototype.clearParentRenderComponent=function(){var t;this._parentRenderComponent&&(this._parentRenderComponent.onRootContainerSet.remove(this.onRenderComponentContainerWasSet,this),this._parentRenderComponent.GameObject.onLayerChanged.remove(this.attachRootToRenderComponentParent,this),this._parentRenderComponent.OnDestroy.remove(this.onParentRenderComponentDestroyed,this),this.GameObject.onLayerChanged.remove(this.attachRootToRenderComponentParent,this),null===(t=this._parentRenderComponent.getRootContainer())||void 0===t||t.removeChild(this._rootContainer),this._parentRenderComponent=null)},i.prototype.attachRootToRenderComponentParent=function(){var t,i=null===(t=this._parentRenderComponent)||void 0===t?void 0:t.getRootContainer();if(i&&this._parentRenderComponent.GameObject.layer===this.GameObject.layer)if(0===i.children.length)i.addChild(this._rootContainer);else{var n=this.findChildIndex();i.addChildAt(this._rootContainer,n)}else this.attachRootToCurrentLayer()},i.prototype.findChildIndex=function(){var t=this,n=new Set,e=!1,s=function(r){var h,u;try{for(var a=Object(o.__values)(r.children),c=a.next();!c.done;c=a.next()){var l=c.value;if(e)return;var f=l.findComponent(i);if(f&&l.layer===t._parentRenderComponent.gameObject.layer){if(f===t)return void(e=!0);n.add(f.getRootContainer())}else s(l)}}catch(b){h={error:b}}finally{try{c&&!c.done&&(u=a.return)&&u.call(a)}finally{if(h)throw h.error}}};s(this._parentRenderComponent.gameObject);var r=this._parentRenderComponent.getRootContainer().children,h=r.findIndex((function(t){return!n.has(t)}));return-1!==h?h:r.length},i.prototype.attachRootToCurrentLayer=function(){vi.getActiveScene().getLayer(this.GameObject.layer).container.addChild(this._rootContainer)},i.prototype.onRenderComponentContainerWasSet=function(){this._parentRenderComponent.onRootContainerSet.remove(this.onRenderComponentContainerWasSet,this),this._parentRenderComponent.GameObject.onLayerChanged.add(this.attachRootToRenderComponentParent,this),this.GameObject.onLayerChanged.remove(this.attachRootToCurrentLayer,this),this.GameObject.onLayerChanged.add(this.attachRootToRenderComponentParent,this),this.attachRootToRenderComponentParent()},i.prototype.updateVisibility=function(){this._rootContainer.visible=this.GameObject.activeInHierarchy},i.prototype.trackTransformAddingToOverride=function(t){t instanceof J?(this.overridePIXIUpdateFunction(),this.GameObject.onComponentAdded.remove(this.trackTransformAddingToOverride,this)):t instanceof ht&&(this.attachRootContainer(),this.GameObject.onComponentAdded.remove(this.trackTransformAddingToOverride,this))},i.prototype.onOverrideTransformDestroyed=function(){this.resetPIXIUpdateFunction(),this.GameObject.onComponentAdded.add(this.trackTransformAddingToOverride,this)},i.prototype.onLegacyTransformDestroyed=function(){this.attachRootContainer(),this.GameObject.onComponentAdded.add(this.trackTransformAddingToOverride,this)},i.prototype.onParentRenderComponentDestroyed=function(){this._parentRenderComponent.GameObject.onLayerChanged.remove(this.attachRootToRenderComponentParent,this),this.GameObject.onLayerChanged.add(this.attachRootToCurrentLayer,this),this.GameObject.onLayerChanged.remove(this.attachRootToRenderComponentParent,this),this.attachRootToCurrentLayer()},i.prototype.overridePIXIUpdateFunction=function(){this.GameObject.transform.OnDestroy.add(this.onOverrideTransformDestroyed,this),this._previousContainerUpdateTransformFunction=this._rootContainer.displayObjectUpdateTransform,this._rootContainer.displayObjectUpdateTransform=this.updateTransformValues.bind(this)},i.prototype.resetPIXIUpdateFunction=function(){this._rootContainer.displayObjectUpdateTransform=this._previousContainerUpdateTransformFunction,this._previousContainerUpdateTransformFunction=null},i.prototype.clearListeners=function(){this.GameObject.onActiveInHierarchyChanged.remove(this.updateVisibility,this),this.GameObject.onHierarchyChanged.remove(this.gameObjectHierarchyChanged,this),this.GameObject.onLayerChanged.remove(this.attachRootToCurrentLayer,this),this.GameObject.onComponentAddedToHierarchy.remove(this.componentAddedToHierarchy,this),this.GameObject.onDestroy.remove(this.clearListeners,this),this.GameObject.legacyTransform?this.GameObject.legacyTransform.OnDestroy.remove(this.onLegacyTransformDestroyed,this):this.GameObject.transform?this.GameObject.transform.OnDestroy.remove(this.onOverrideTransformDestroyed,this):this.GameObject.onComponentAdded.remove(this.trackTransformAddingToOverride,this)},Object(o.__decorate)([P(),Object(o.__metadata)("design:type",Boolean)],i.prototype,"_attachToCamera",void 0),i}(T),Oi=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.textSource=null,i.cachedTextConfig={},i._underlines=[],i.textObject=null,i._underline=!1,i._underlineStartIndex=null,i._underlineEndIndex=null,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"TextObject",{get:function(){return this.textObject},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Source",{get:function(){return this.textSource},set:function(t){null!==this.textSource&&this.textSource.OnTextChanged.removeAll(this),this.textSource=t,this.textSource.OnTextChanged.add(this.updateText,this),this.updateText()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.textObject.text},set:function(t){this.createTextObject(),this.Source instanceof ai&&this.Source.getText()===t||(this.Source=new ai(t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"font",{get:function(){return this.textObject.font},set:function(t){this.cachedTextConfig.font=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontStyle",{get:function(){return this.textObject.fontStyle},set:function(t){switch(t){case"normal":case"italic":case"oblique":this.cachedTextConfig.fontStyle=t;break;default:c.log("Font style does not match 'normal', 'italic', 'oblique'.",h.Warning)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontWeight",{get:function(){return this.textObject.fontWeight},set:function(t){switch(t){case"normal":case"lighter":case"bold":case"bolder":this.cachedTextConfig.fontWeight=t;break;default:c.log("Font style does not match 'normal', 'lighter', 'bold', 'bolder'.",h.Warning)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this.textObject.fontSize},set:function(t){this.cachedTextConfig.fontSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this.textObject.fill},set:function(t){this.isValidColor(t)?this.cachedTextConfig.fill=t:c.log("Fill color provided was not a valid color "+t+".",h.Warning)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this.textObject.align},set:function(t){this.cachedTextConfig.align=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"boundsAlignH",{get:function(){return this.textObject.boundsAlignH},set:function(t){this.cachedTextConfig.boundsAlignH=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"boundsAlignV",{get:function(){return this.textObject.boundsAlignV},set:function(t){this.cachedTextConfig.boundsAlignV=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this.textObject.stroke},set:function(t){this.isValidColor(t)?this.cachedTextConfig.stroke=t:c.log("Stroke color provided was not a valid color "+t+".",h.Warning)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"strokeThickness",{get:function(){return this.textObject.strokeThickness},set:function(t){this.cachedTextConfig.strokeThickness=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wordWrap",{get:function(){return this.textObject.wordWrap},set:function(t){this.cachedTextConfig.wordWrap=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wordWrapWidth",{get:function(){return this.textObject.wordWrapWidth},set:function(t){this.cachedTextConfig.wordWrapWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.textObject.blendMode},set:function(t){this.createTextObject(),this.textObject.blendMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineSpacing",{get:function(){return this.textObject.lineSpacing},set:function(t){this.createTextObject(),this.textObject.lineSpacing=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingX",{get:function(){return this.textObject.padding.x},set:function(t){this.createTextObject(),f.isDefined(this.textObject.padding)?this.textObject.padding.x=t:this.textObject.padding=new Phaser.Point(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingY",{get:function(){return this.textObject.padding.y},set:function(t){this.createTextObject(),f.isDefined(this.textObject.padding)?this.textObject.padding.y=t:this.textObject.padding=new Phaser.Point(0,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shadowOffsetX",{get:function(){return this.textObject.shadowOffsetX},set:function(t){this.createTextObject(),this.TextObject.shadowOffsetX=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shadowOffsetY",{get:function(){return this.textObject.shadowOffsetY},set:function(t){this.createTextObject(),this.TextObject.shadowOffsetY=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shadowColor",{get:function(){return this.textObject.shadowColor},set:function(t){this.isValidColor(t)?(this.createTextObject(),this.TextObject.shadowColor=t):c.log("Shadow color provided was not a valid color "+t+".",h.Warning)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shadowBlur",{get:function(){return this.textObject.shadowBlur},set:function(t){this._cachedShadowConfig.shadowBlur=t,this.createTextObject(),this.TextObject.shadowBlur=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shadowStroke",{get:function(){return this.textObject.shadowStroke},set:function(t){this.createTextObject(),this.TextObject.shadowStroke=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shadowFill",{get:function(){return this.textObject.shadowFill},set:function(t){this.createTextObject(),this.TextObject.shadowFill=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return this.textObject.tint},set:function(t){this.createTextObject(),this.textObject.tint=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"underline",{get:function(){return this._underline},set:function(t){this._underline=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"underlineStartIndex",{get:function(){return this._underlineStartIndex},set:function(t){this._underlineStartIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"underlineEndIndex",{get:function(){return this._underlineEndIndex},set:function(t){this._underlineEndIndex=t},enumerable:!0,configurable:!0}),i.prototype.create=function(){var i=this;if(t.prototype.create.call(this),this.createTextObject(),this.textObject.setStyle(this.cachedTextConfig),this._cachedShadowConfig&&this.textObject.setShadow(this._cachedShadowConfig.shadowOffsetX,this._cachedShadowConfig.shadowOffsetY,this._cachedShadowConfig.shadowColor,this._cachedShadowConfig.shadowBlur,this._cachedShadowConfig.shadowStroke,this._cachedShadowConfig.shadowFill),this.textObject.visible=this.Active,this.OnActiveChanged.add((function(){return i.textObject.visible=i.Active})),this.setRootContainer(this.TextObject),this.GameObject.legacyTransform?this.textObject.setTextBounds(0,0,this.GameObject.legacyTransform.width,this.GameObject.legacyTransform.height):this.GameObject.transform instanceof $&&this.textObject.setTextBounds(0,0,this.GameObject.transform.rectTransformDimensions.width,this.GameObject.transform.rectTransformDimensions.height),this._underline){var n=null!==this.underlineStartIndex?this.underlineStartIndex:0,e=null!==this.underlineEndIndex?this.underlineEndIndex:this.textObject.text.length;this.drawUnderline(n,e)}},i.prototype.updateTransformValues=function(){if(this.applyWorldMatrix(),this.GameObject.transform instanceof $){var t=this.GameObject.transform.rectTransformDimensions,i=new w(-t.width*this.GameObject.transform.pivot.x,-t.height*this.GameObject.transform.pivot.y),n=this.textObject.textBounds,e=this.textObject.canvas;"right"===this.boundsAlignH?i.x+=n.width-e.width/this.textObject.resolution:"center"===this.boundsAlignH&&(i.x+=n.halfWidth-e.width/this.textObject.resolution*.5),"bottom"===this.boundsAlignV?i.y+=n.height-e.height/this.textObject.resolution:"middle"===this.boundsAlignV&&(i.y+=n.halfHeight-e.height/this.textObject.resolution*.5),this.textObject.worldTransform.tx+=i.x,this.textObject.worldTransform.ty+=i.y}this.applyCameraMatrix(),this.applyWorldProperties()},i.prototype.createTextObject=function(){f.isDefined(this.textObject)||(this.textObject=new Phaser.Text(X.instance.game,0,0,""))},i.prototype.updateText=function(){null===this.textObject?c.log("Trying to update the text on a Text component before the text object was created.",h.Warning):this.textObject.setText(this.Source.getText())},i.prototype.drawUnderline=function(t,i){var n=this.text.substring(t,Math.min(i,this.text.length)),e=this.getTextDimensions(n),s=this.getTextDimensions(this.text.substring(0,t)).width,r=.8*e.height,h=X.instance.game.add.graphics(s,r);h.lineStyle(2,(parseInt(this.fill.substr(1),16)<<8)/256),h.moveTo(0,0),h.lineTo(e.width+(this.GameObject.legacyTransform.width-this.getTextDimensions(this.text).width),0),this._underlines.push(h),this.GameObject.legacyTransform.group.addChild(h)},i.prototype.getTextDimensions=function(t){var i=new Phaser.Text(X.instance.game,0,0,t,this.cachedTextConfig),n=i.width,e=i.height;return i.destroy(),{width:n,height:e}},i.prototype.isValidColor=function(t){return/^#[0-9A-Fa-f]{6}|[0-9A-Fa-f]{8}$/.test(t)},i.prototype.destroy=function(){this._underlines.forEach((function(t){t.destroy()})),this._underlines=[],this.textObject.destroy(),t.prototype.destroy.call(this)},Object(o.__decorate)([rt("shadowConfigs"),Object(o.__metadata)("design:type",Object)],i.prototype,"_cachedShadowConfig",void 0),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",String),Object(o.__metadata)("design:paramtypes",[String])],i.prototype,"text",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",String),Object(o.__metadata)("design:paramtypes",[String])],i.prototype,"font",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",String),Object(o.__metadata)("design:paramtypes",[String])],i.prototype,"fontStyle",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",String),Object(o.__metadata)("design:paramtypes",[String])],i.prototype,"fontWeight",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"fontSize",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",String),Object(o.__metadata)("design:paramtypes",[String])],i.prototype,"fill",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",String),Object(o.__metadata)("design:paramtypes",[String])],i.prototype,"align",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",String),Object(o.__metadata)("design:paramtypes",[String])],i.prototype,"boundsAlignH",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",String),Object(o.__metadata)("design:paramtypes",[String])],i.prototype,"boundsAlignV",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",String),Object(o.__metadata)("design:paramtypes",[String])],i.prototype,"stroke",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"strokeThickness",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Boolean),Object(o.__metadata)("design:paramtypes",[Boolean])],i.prototype,"wordWrap",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"wordWrapWidth",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"blendMode",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"lineSpacing",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"paddingX",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"paddingY",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"shadowOffsetX",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"shadowOffsetY",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",String),Object(o.__metadata)("design:paramtypes",[String])],i.prototype,"shadowColor",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"shadowBlur",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Boolean),Object(o.__metadata)("design:paramtypes",[Boolean])],i.prototype,"shadowStroke",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Boolean),Object(o.__metadata)("design:paramtypes",[Boolean])],i.prototype,"shadowFill",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Number),Object(o.__metadata)("design:paramtypes",[Number])],i.prototype,"tint",null),Object(o.__decorate)([rt("underline"),Object(o.__metadata)("design:type",Boolean)],i.prototype,"_underline",void 0),Object(o.__decorate)([rt("underlineStartIndex"),Object(o.__metadata)("design:type",Number)],i.prototype,"_underlineStartIndex",void 0),Object(o.__decorate)([rt("underlineEndIndex"),Object(o.__metadata)("design:type",Number)],i.prototype,"_underlineEndIndex",void 0),i=Object(o.__decorate)([Q("Text")],i)}(di),mi=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i}(di),pi=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._filled=!0,i._color="#393939",i._size=new I(100,100),i._graphics=null,i._alpha=1,i}return Object(o.__extends)(i,t),i.prototype.create=function(){t.prototype.create.call(this),this._graphics=X.instance.game.add.graphics(0,0),this.setRootContainer(this._graphics),this.drawRect()},i.prototype.destroy=function(){this._graphics.destroy(),this._graphics=null,t.prototype.destroy.call(this)},i.prototype.getDimensions=function(){return this._size},i.prototype.setSize=function(t){this._size.setTo(t.width,t.height),this.drawRect()},i.prototype.drawRect=function(){this._graphics.clear();var t=parseInt(this._color.substr(1),16);this._filled?this._graphics.beginFill(t,this._alpha):this._graphics.lineStyle(2,t,this._alpha),this._graphics.drawRect(0,0,this._size.width,this._size.height)},i.prototype.getGraphics=function(){return this._graphics},Object(o.__decorate)([P(),Object(o.__metadata)("design:type",Boolean)],i.prototype,"_filled",void 0),Object(o.__decorate)([B(),Object(o.__metadata)("design:type",String)],i.prototype,"_color",void 0),Object(o.__decorate)([G(),Object(o.__metadata)("design:type",I)],i.prototype,"_size",void 0),Object(o.__decorate)([L(),Object(o.__metadata)("design:type",Number)],i.prototype,"_alpha",void 0),i=Object(o.__decorate)([Q("RectanglePrimitive")],i)}(mi),gi=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._filled=!0,i._color="#393939",i._alpha=1,i._points=[],i._graphics=null,i}return Object(o.__extends)(i,t),i.prototype.create=function(){t.prototype.create.call(this),this._graphics=X.instance.game.add.graphics(0,0),this.setRootContainer(this._graphics),this._points.length>0&&this.drawPolygon()},i.prototype.destroy=function(){this._graphics.destroy(),this._graphics=null,t.prototype.destroy.call(this)},i.prototype.setPoints=function(t){this._points=t,this.drawPolygon()},i.prototype.drawPolygon=function(){this._graphics.clear();var t=parseInt(this._color.substr(1),16);this._filled?this._graphics.beginFill(t,this._alpha):this._graphics.lineStyle(2,t,this._alpha),this._graphics.drawPolygon(this._points),this._filled?this._graphics.endFill():this._graphics.lineStyle(0)},i.prototype.getGraphics=function(){return this._graphics},Object(o.__decorate)([P(),Object(o.__metadata)("design:type",Boolean)],i.prototype,"_filled",void 0),Object(o.__decorate)([B(),Object(o.__metadata)("design:type",String)],i.prototype,"_color",void 0),Object(o.__decorate)([L(),Object(o.__metadata)("design:type",Number)],i.prototype,"_alpha",void 0),Object(o.__decorate)([H(),U(),Object(o.__metadata)("design:type",Array)],i.prototype,"_points",void 0),i=Object(o.__decorate)([Q("PolygonPrimitive")],i)}(mi),yi=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._filled=!0,i._color="#393939",i._radius=50,i._alpha=1,i._graphics=null,i._size=new I,i}return Object(o.__extends)(i,t),i.prototype.create=function(){t.prototype.create.call(this),this._graphics=X.instance.game.add.graphics(0,0),this._size.setTo(this._radius,this._radius),this.setRootContainer(this._graphics),this.drawCircle()},i.prototype.destroy=function(){this._graphics.destroy(),this._graphics=null,t.prototype.destroy.call(this)},i.prototype.getDimensions=function(){return this._size},i.prototype.setRadius=function(t){this._size.setTo(t,t),this.drawCircle()},i.prototype.drawCircle=function(){this._graphics.clear();var t=parseInt(this._color.substr(1),16);this._filled?this._graphics.beginFill(t,this._alpha):this._graphics.lineStyle(2,t,this._alpha),this._graphics.drawCircle(0,0,2*this._radius),this._filled?this._graphics.endFill():this._graphics.lineStyle(0)},i.prototype.getGraphics=function(){return this._graphics},Object(o.__decorate)([P(),Object(o.__metadata)("design:type",Boolean)],i.prototype,"_filled",void 0),Object(o.__decorate)([B(),Object(o.__metadata)("design:type",String)],i.prototype,"_color",void 0),Object(o.__decorate)([G(),Object(o.__metadata)("design:type",Number)],i.prototype,"_radius",void 0),Object(o.__decorate)([L(),Object(o.__metadata)("design:type",Number)],i.prototype,"_alpha",void 0),i=Object(o.__decorate)([Q("CirclePrimitive")],i)}(mi),ji=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.graphics=null,i._dimensions=new I(100,100),i._color="#FF00FF",i}return Object(o.__extends)(i,t),i.prototype.create=function(){t.prototype.create.call(this),this.graphics=X.instance.game.add.graphics(0,0),this.graphics.lineStyle(1,parseInt(this._color.substr(1),16),1),this.setRootContainer(this.graphics);var i=this.GameObject.legacyTransform;if(i)this.graphics.drawRect(i.x,i.y,i.width,i.height),this._dimensions.setTo(i.width,i.height);else if(this.GameObject.transform instanceof $){var n=this.GameObject.transform.rectTransformDimensions;this.graphics.drawRect(0,0,n.width,n.height),this._dimensions.setTo(n.width,n.height)}this.graphics.lineStyle(0)},i.prototype.destroy=function(){this.graphics.destroy(),t.prototype.destroy.call(this)},i.prototype.getDimensions=function(){return this._dimensions},Object(o.__decorate)([B(),Object(o.__metadata)("design:type",String)],i.prototype,"_color",void 0),i=Object(o.__decorate)([Q("DebugBounds")],i)}(di),_i=function(){function t(){}return t.getAssetProperties=function(t){return Reflect.getMetadata("custom:annotations:assetTagProperties",t.constructor)},t.addAssetMetadata=function(i,n,e){var s=new Map(t.getAssetProperties(i));s.set(n,e),Reflect.defineMetadata("custom:annotations:assetTagProperties",s,i.constructor)},t}(),wi=function(t){return function(i,n){_i.addAssetMetadata(i,n,t)}},Ei=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.image=null,i.atlas="",i.frame="",i._imageDimensions=new I,i}return Object(o.__extends)(i,t),i.prototype.create=function(){t.prototype.create.call(this),this.image=new Phaser.Image(X.instance.game,0,0,this.atlas,this.frame),this._imageDimensions.width=this.image.width,this._imageDimensions.height=this.image.height,this.setRootContainer(this.image)},i.prototype.destroy=function(){this.image.destroy(),t.prototype.destroy.call(this)},i.prototype.getDimensions=function(){return this._imageDimensions},i.prototype.updateAsset=function(t,i){this.image.loadTexture(t,i)},Object(o.__decorate)([wi(),rt(),Object(o.__metadata)("design:type",String)],i.prototype,"atlas",void 0),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",String)],i.prototype,"frame",void 0),i=Object(o.__decorate)([Q("Graphic")],i)}(di);!function(t){t[t.R0=0]="R0",t[t.R90=90]="R90",t[t.R180=180]="R180",t[t.R270=270]="R270",t[t.Rn90=-90]="Rn90",t[t.Rn180=-180]="Rn180",t[t.Rn270=-270]="Rn270"}(ti||(ti={}));var Ii,Ai=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.topLeft=null,i.topRight=null,i.bottomLeft=null,i.bottomRight=null,i.topCenter=null,i.bottomCenter=null,i.leftCenter=null,i.rightCenter=null,i.center=null,i.imgTopLeft=null,i.imgTopRight=null,i.imgBottomLeft=null,i.imgBottomRight=null,i.imgTopCenter=null,i.imgBottomCenter=null,i.imgLeftCenter=null,i.imgRightCenter=null,i.imgCenter=null,i.elementsGroup=null,i}return Object(o.__extends)(i,t),i.prototype.create=function(){t.prototype.create.call(this),this.elementsGroup=new Phaser.Group(X.instance.game,void 0,this.GameObject.name+" - Sliced Graphic root"),this.setRootContainer(this.elementsGroup);var i,n,e=this.GameObject.legacyTransform;if(e)i=e.width/e.scaleX,n=e.height/e.scaleY;else if(this.GameObject.transform instanceof $){var s=this.GameObject.transform.rectTransformDimensions;i=s.width,n=s.height}else i=0,n=0,c.log("Sliced Graphic is missing valid transform. Setting size to 0",h.Error);this.center?(this.imgCenter=new Phaser.Image(X.instance.game,0,0,this.center.atlas,this.center.frame),this.imgCenter.anchor.x=.5,this.imgCenter.anchor.y=.5,this.elementsGroup.add(this.imgCenter),this.topLeft&&this.topRight&&this.bottomLeft&&this.bottomRight?this.create9Slice(i,n):this.topLeft||this.topRight||this.bottomLeft||this.bottomRight?c.log("Invalid SlicedGraphic arrangement was attempted.",h.Error):this.create3Slice(i,n)):c.log("SlicedGraphic has center undefined.",h.Error),this.elementsGroup.exists=!1},i.prototype.onEnable=function(){t.prototype.onEnable.call(this),this.elementsGroup.cacheAsBitmap=!0},i.prototype.updateTransformValues=function(){this.applyWorldMatrix(),this.GameObject.transform instanceof $&&(this.elementsGroup.worldTransform.tx-=this.GameObject.transform.rectTransformDimensions.width*this.GameObject.transform.pivot.x,this.elementsGroup.worldTransform.ty-=this.GameObject.transform.rectTransformDimensions.height*this.GameObject.transform.pivot.y),this.applyCameraMatrix(),this.applyWorldProperties()},i.prototype.create9Slice=function(t,i){this.imgTopLeft=new Phaser.Image(X.instance.game,0,0,this.topLeft.atlas,this.topLeft.frame),this.imgTopRight=new Phaser.Image(X.instance.game,0,0,this.topRight.atlas,this.topRight.frame),this.imgBottomLeft=new Phaser.Image(X.instance.game,0,0,this.bottomLeft.atlas,this.bottomLeft.frame),this.imgBottomRight=new Phaser.Image(X.instance.game,0,0,this.bottomRight.atlas,this.bottomRight.frame),this.setElementProperties(this.imgTopLeft,this.topLeft),this.setElementProperties(this.imgTopRight,this.topRight),this.setElementProperties(this.imgBottomLeft,this.bottomLeft),this.setElementProperties(this.imgBottomRight,this.bottomRight),this.elementsGroup.add(this.imgTopLeft),this.elementsGroup.add(this.imgTopRight),this.elementsGroup.add(this.imgBottomLeft),this.elementsGroup.add(this.imgBottomRight),this.imgCenter.scale.x=(t-this.getHorizontalLength(this.imgTopLeft,this.topLeft)-this.getHorizontalLength(this.imgTopRight,this.topRight))/this.imgCenter.width,this.imgCenter.scale.y=(i-this.getVerticalLength(this.imgTopLeft,this.topLeft)-this.getVerticalLength(this.imgBottomLeft,this.bottomLeft))/this.imgCenter.height;var n=this.getHorizontalLength(this.imgTopLeft,this.topLeft)+.5*this.imgCenter.width,e=this.getVerticalLength(this.imgTopLeft,this.topLeft)+.5*this.imgCenter.height;this.imgCenter.position.x+=n,this.imgCenter.position.y+=e,this.imgTopLeft.position.x=-.5*(this.imgCenter.width+this.getHorizontalLength(this.imgTopLeft,this.topLeft))+n,this.imgTopLeft.position.y=-.5*(this.imgCenter.height+this.getVerticalLength(this.imgTopLeft,this.topLeft))+e,this.imgTopRight.position.x=.5*(this.imgCenter.width+this.getHorizontalLength(this.imgTopRight,this.topRight))+n,this.imgTopRight.position.y=-.5*(this.imgCenter.height+this.getVerticalLength(this.imgTopRight,this.topRight))+e,this.imgBottomLeft.position.x=-.5*(this.imgCenter.width+this.getHorizontalLength(this.imgBottomLeft,this.bottomLeft))+n,this.imgBottomLeft.position.y=.5*(this.imgCenter.height+this.getVerticalLength(this.imgBottomLeft,this.bottomLeft))+e,this.imgBottomRight.position.x=.5*(this.imgCenter.width+this.getHorizontalLength(this.imgBottomRight,this.bottomRight))+n,this.imgBottomRight.position.y=.5*(this.imgCenter.height+this.getVerticalLength(this.imgBottomRight,this.bottomRight))+e,this.topCenter&&this.bottomCenter&&this.leftCenter&&this.rightCenter?(this.imgTopCenter=new Phaser.Image(X.instance.game,0,0,this.topCenter.atlas,this.topCenter.frame),this.imgBottomCenter=new Phaser.Image(X.instance.game,0,0,this.bottomCenter.atlas,this.bottomCenter.frame),this.imgLeftCenter=new Phaser.Image(X.instance.game,0,0,this.leftCenter.atlas,this.leftCenter.frame),this.imgRightCenter=new Phaser.Image(X.instance.game,0,0,this.rightCenter.atlas,this.rightCenter.frame),this.setElementProperties(this.imgTopCenter,this.topCenter),this.setElementProperties(this.imgBottomCenter,this.bottomCenter),this.setElementProperties(this.imgLeftCenter,this.leftCenter),this.setElementProperties(this.imgRightCenter,this.rightCenter),this.elementsGroup.add(this.imgTopCenter),this.elementsGroup.add(this.imgBottomCenter),this.elementsGroup.add(this.imgLeftCenter),this.elementsGroup.add(this.imgRightCenter),this.imgTopCenter.position.x=n,this.imgTopCenter.position.y=-.5*(this.imgCenter.height+this.getVerticalLength(this.imgTopCenter,this.topCenter))+e,this.imgBottomCenter.position.x=n,this.imgBottomCenter.position.y=.5*(this.imgCenter.height+this.getVerticalLength(this.imgBottomCenter,this.bottomCenter))+e,this.imgLeftCenter.position.x=-.5*(this.imgCenter.width+this.getHorizontalLength(this.imgLeftCenter,this.leftCenter))+n,this.imgLeftCenter.position.y=e,this.imgRightCenter.position.x=.5*(this.imgCenter.width+this.getHorizontalLength(this.imgRightCenter,this.rightCenter))+n,this.imgRightCenter.position.y=e,this.isOrientationChanged(this.topCenter)?this.imgTopCenter.scale.y=this.imgCenter.width/Math.abs(this.imgTopCenter.height):this.imgTopCenter.scale.x=this.imgCenter.width/Math.abs(this.imgTopCenter.width),this.isOrientationChanged(this.bottomCenter)?this.imgBottomCenter.scale.y=this.imgCenter.width/Math.abs(this.imgBottomCenter.height):this.imgBottomCenter.scale.x=this.imgCenter.width/Math.abs(this.imgBottomCenter.width),this.isOrientationChanged(this.leftCenter)?this.imgLeftCenter.scale.x=this.imgCenter.height/Math.abs(this.imgLeftCenter.width):this.imgLeftCenter.scale.y=this.imgCenter.height/Math.abs(this.imgLeftCenter.height),this.isOrientationChanged(this.rightCenter)?this.imgRightCenter.scale.x=this.imgCenter.height/Math.abs(this.imgRightCenter.width):this.imgRightCenter.scale.y=this.imgCenter.height/Math.abs(this.imgRightCenter.height)):c.log("SlicedGraphic has sides undefined.",h.Error)},i.prototype.create3Slice=function(t,i){if(this.leftCenter&&this.rightCenter&&!this.topCenter&&!this.bottomCenter){this.imgLeftCenter=new Phaser.Image(X.instance.game,0,0,this.leftCenter.atlas,this.leftCenter.frame),this.imgRightCenter=new Phaser.Image(X.instance.game,0,0,this.rightCenter.atlas,this.rightCenter.frame),this.setElementProperties(this.imgLeftCenter,this.leftCenter),this.setElementProperties(this.imgRightCenter,this.rightCenter),this.elementsGroup.add(this.imgLeftCenter),this.elementsGroup.add(this.imgRightCenter),this.imgCenter.scale.x=(t-this.getHorizontalLength(this.imgLeftCenter,this.leftCenter)-this.getHorizontalLength(this.imgRightCenter,this.rightCenter))/this.imgCenter.width,this.imgCenter.scale.y=i/this.imgCenter.height;var n=this.getHorizontalLength(this.imgLeftCenter,this.leftCenter)+.5*this.imgCenter.width,e=.5*this.imgCenter.height;this.imgCenter.position.x+=n,this.imgCenter.position.y+=e,this.imgLeftCenter.position.x=-.5*(this.imgCenter.width+this.getHorizontalLength(this.imgLeftCenter,this.leftCenter))+n,this.imgLeftCenter.position.y=e,this.imgRightCenter.position.x=.5*(this.imgCenter.width+this.getHorizontalLength(this.imgRightCenter,this.rightCenter))+n,this.imgRightCenter.position.y=e}else if(this.topCenter&&this.bottomCenter&&!this.leftCenter&&!this.rightCenter){this.imgTopCenter=new Phaser.Image(X.instance.game,0,0,this.topCenter.atlas,this.topCenter.frame),this.imgBottomCenter=new Phaser.Image(X.instance.game,0,0,this.bottomCenter.atlas,this.bottomCenter.frame),this.setElementProperties(this.imgTopCenter,this.topCenter),this.setElementProperties(this.imgBottomCenter,this.bottomCenter),this.elementsGroup.add(this.imgTopCenter),this.elementsGroup.add(this.imgBottomCenter),this.imgCenter.scale.x=t/this.imgCenter.width,this.imgCenter.scale.y=(i-this.getVerticalLength(this.imgTopCenter,this.topCenter)-this.getVerticalLength(this.imgBottomCenter,this.bottomCenter))/this.imgCenter.height;n=.5*this.imgCenter.width,e=this.getVerticalLength(this.imgTopCenter,this.topCenter)+.5*this.imgCenter.height;this.imgCenter.position.x+=n,this.imgCenter.position.y+=e,this.imgTopCenter.position.x=n,this.imgTopCenter.position.y=-.5*(this.imgCenter.height+this.getVerticalLength(this.imgTopCenter,this.topCenter))+e,this.imgBottomCenter.position.x=n,this.imgBottomCenter.position.y=.5*(this.imgCenter.height+this.getVerticalLength(this.imgBottomCenter,this.bottomCenter))+e}else c.log("Invalid SlicedGraphic arrangement was attempted.",h.Error)},i.prototype.getHorizontalLength=function(t,i){return this.isOrientationChanged(i)?Math.abs(t.height):Math.abs(t.width)},i.prototype.getVerticalLength=function(t,i){return this.isOrientationChanged(i)?Math.abs(t.width):Math.abs(t.height)},i.prototype.isOrientationChanged=function(t){var i=Math.abs(t.rotation);return i===ti.R90||i===ti.R270},i.prototype.setElementProperties=function(t,i){t.anchor.x=.5,t.anchor.y=.5,f.isDefined(i.rotation)&&(f.isDefined(this.dividePIBy180)||(this.dividePIBy180=Math.PI/180),t.rotation=Number(i.rotation)*this.dividePIBy180),f.isDefined(i.flipX)&&i.flipX&&(t.scale.x*=-1),f.isDefined(i.flipY)&&i.flipY&&(t.scale.y*=-1)},i.prototype.destroy=function(){this.elementsGroup&&(this.elementsGroup.cacheAsBitmap=!1,this.elementsGroup.destroy()),this.topLeft=null,this.topRight=null,this.bottomLeft=null,this.bottomRight=null,this.topCenter=null,this.bottomCenter=null,this.leftCenter=null,this.rightCenter=null,this.center=null,this.imgTopLeft=null,this.imgTopRight=null,this.imgBottomLeft=null,this.imgBottomRight=null,this.imgTopCenter=null,this.imgBottomCenter=null,this.imgLeftCenter=null,this.imgRightCenter=null,this.imgCenter=null,this.elementsGroup=null,t.prototype.destroy.call(this)},Object(o.__decorate)([wi("atlas"),rt(),Object(o.__metadata)("design:type",Object)],i.prototype,"topLeft",void 0),Object(o.__decorate)([wi("atlas"),rt(),Object(o.__metadata)("design:type",Object)],i.prototype,"topRight",void 0),Object(o.__decorate)([wi("atlas"),rt(),Object(o.__metadata)("design:type",Object)],i.prototype,"bottomLeft",void 0),Object(o.__decorate)([wi("atlas"),rt(),Object(o.__metadata)("design:type",Object)],i.prototype,"bottomRight",void 0),Object(o.__decorate)([wi("atlas"),rt(),Object(o.__metadata)("design:type",Object)],i.prototype,"topCenter",void 0),Object(o.__decorate)([wi("atlas"),rt(),Object(o.__metadata)("design:type",Object)],i.prototype,"bottomCenter",void 0),Object(o.__decorate)([wi("atlas"),rt(),Object(o.__metadata)("design:type",Object)],i.prototype,"leftCenter",void 0),Object(o.__decorate)([wi("atlas"),rt(),Object(o.__metadata)("design:type",Object)],i.prototype,"rightCenter",void 0),Object(o.__decorate)([wi("atlas"),rt(),Object(o.__metadata)("design:type",Object)],i.prototype,"center",void 0),i=Object(o.__decorate)([Q("SlicedGraphic")],i)}(di),Ti=function(){function t(){}return t.areBitsSet=function(t,i){return(t&i)===i},t.isBitSet=function(i,n){return t.areBitsSet(i,1<<n)},t.setBits=function(t,i){return t|i},t.setBit=function(i,n){return t.setBits(i,1<<n)},t.clearBits=function(t,i){return t&~i},t.clearBit=function(i,n){return t.clearBits(i,1<<n)},t}(),Di=function(){function t(){}return t.completeGenerator=function(t){var i;do{i=t.next()}while(!i.done);return i.value},t.completeGeneratorAsync=function(i,n){return Object(o.__awaiter)(this,void 0,void 0,(function(){var e;return Object(o.__generator)(this,(function(s){if(n)return[2,t.processGeneratorStepFrameWorkManager(i,n)];do{e=i.next()}while(!e.done);return[2,e.value]}))}))},t.processGeneratorStepFrameWorkManager=function(t,i){return Object(o.__awaiter)(this,void 0,void 0,(function(){return Object(o.__generator)(this,(function(n){return[2,new Promise((function(n,e){i.awaitFreeTime((function(){var i=t.next();return i.done&&n(i.value),i.done}),e)}))]}))}))},t}(),Si=function(){function t(){}return t.getIOSVersion=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return parseInt(t[1],10)}return null},t}(),Ci=function(){function t(t){this._cancelled=!1,this._promise=new Promise(t)}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return"CancelablePromise"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cancelled",{get:function(){return this._cancelled},enumerable:!0,configurable:!0}),t.prototype.cancel=function(){this._cancelled=!0},t.prototype.then=function(t,i){var n=this;return this._promise.then((function(i){if(!n._cancelled)return null==t?void 0:t(i)}),(function(t){if(!n._cancelled)return null==i?void 0:i(t)})),this},t.prototype.catch=function(t){var i=this;return this._promise.catch((function(n){if(!i._cancelled)return null==t?void 0:t(n)})),this},t}(),Ni=function(){function t(){}return t.timeout=function(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){return Object(o.__generator)(this,(function(i){return[2,new Promise((function(i){window.setTimeout(i,t)}))]}))}))},t}(),xi=function(){function t(){var t=this;this.promise=new Promise((function(i,n){t.resolve=i,t.reject=n}))}return Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return"ResolvablePromise"},enumerable:!0,configurable:!0}),t.prototype.then=function(t,i){return Object(o.__awaiter)(this,void 0,void 0,(function(){return Object(o.__generator)(this,(function(n){return[2,this.promise.then(t,i)]}))}))},t.prototype.catch=function(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){return Object(o.__generator)(this,(function(i){return[2,this.promise.catch(t)]}))}))},t.prototype.finally=function(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){return Object(o.__generator)(this,(function(t){throw new Error("finally not yet implemented on ResolvablePromise")}))}))},t}(),Ri=function(){function t(){this._head=Promise.resolve()}return t.prototype.push=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,i;return Object(o.__generator)(this,(function(n){switch(n.label){case 0:return t=this._head,i=new xi,this._head=i,[4,t];case 1:return n.sent(),[2,i.resolve]}}))}))},t}(),Mi="INJECTION_PARAMS",Li=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.container=new fi,i.installers=[],i}var n;return Object(o.__extends)(i,t),n=i,Object.defineProperty(i.prototype,"ParentContainer",{get:function(){return this.GameObject&&this.GameObject.parent?this.GameObject.parent.findComponentInParent(n):null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Container",{get:function(){return this.container},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Installers",{get:function(){return this.installers},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.prototype.create.call(this),this.installers.length>0&&this.runInstallers()},i.prototype.runInstallers=function(){for(var t=0;t<this.Installers.length;++t)this.Installers[t].install(this.Container)},i.prototype.getInjectedValue=function(t){var i=this.Container.get(t);return null===i?null!==this.ParentContainer?this.ParentContainer.getInjectedValue(t):vi.getActiveScene().container.get(t):i},i.prototype.destroy=function(){for(var i=0;i<this.installers.length;++i)this.installers[i].cleanup();t.prototype.destroy.call(this)},Object(o.__decorate)([q("Installer"),H(),Object(o.__metadata)("design:type",Array)],i.prototype,"installers",void 0),i=n=Object(o.__decorate)([Q("GameObjectContext")],i)}(T),Pi=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.components=[],i.identifier=null,i.context=null,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"Identifier",{get:function(){return this.identifier},set:function(t){var i=this.GameObject.findComponentInParent(Li);null!==i&&null!==this.components&&(null!==this.identifier&&i.Container.unbind(this.identifier),null!==t&&this.bindComponents(t,this.components)),this.identifier=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Components",{get:function(){return this.components},set:function(t){var i=this.GameObject.findComponentInParent(Li);null!==i&&null!==this.identifier&&(null!==this.components&&i.Container.unbind(this.identifier),null!==t&&this.bindComponents(this.identifier,t)),this.components=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Context",{get:function(){return null!==this.context?this.context:this.GameObject.findComponentInParent(Li)},set:function(t){null!==this.context&&this.context.Container.unbind(this.identifier),this.context=t,null!==this.identifier&&null!==this.components&&this.bindComponents(this.identifier,this.components)},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.prototype.create.call(this),null!==this.identifier&&null!==this.components&&this.bindComponents(this.identifier,this.components)},i.prototype.destroy=function(){if(null!==this.identifier){var i=this.Context;null!==i&&i.Container.unbind(this.identifier)}t.prototype.destroy.call(this)},i.prototype.bindComponents=function(t,i){var n=this.Context;null!==n&&(1===i.length?n.Container.bind(t).toConstantValue(i[0]):i.length>1&&n.Container.bind(t).toConstantValue(i))},Object(o.__decorate)([V(),H(),Object(o.__metadata)("design:type",Array)],i.prototype,"components",void 0),Object(o.__decorate)([M(),Object(o.__metadata)("design:type",String)],i.prototype,"identifier",void 0),Object(o.__decorate)([K(Li),Object(o.__metadata)("design:type",Li)],i.prototype,"context",void 0),i=Object(o.__decorate)([Q("ContextBinding")],i)}(T),ki=function(t,i,n){var e=Mi+"_"+i,s=n.value;n.value=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=Reflect.getMetadata(e,t);if(Array.isArray(r))for(var h=0;h<r.length;++h){var o=r[h];void 0===i[o.index]&&(i[o.index]=this.getInjectedValue(o.identifier))}return s.apply(this,i)}},Bi=function(t){return function(i,n,e){var s=Mi+"_"+n,r=Reflect.getMetadata(s,i);Array.isArray(r)?r.push({identifier:t,index:e}):Reflect.defineMetadata(s,[{identifier:t,index:e}],i)}},Ui=function(t,i){return void 0===i&&(i=!0),function(n,e){Object.defineProperty(n,e,{get:function(){var n=null,s=this.GameObject.findComponentInParent(Li);return null!==s&&(n=s.getInjectedValue(t)),n||(n=vi.getActiveScene().container.get(t)),i&&null!==n&&Object.defineProperty(this,e,{get:function(){return n}}),n},configurable:!0})}},Gi=function(t,i){return void 0===i&&(i=!0),function(n,e){Object.defineProperty(n,e,{get:function(){var n=this.getInjectedValue(t);return i&&null!==n&&Object.defineProperty(this,e,{get:function(){return n}}),n},configurable:!0})}},Fi=function(){function t(){this.container=null}return Object.defineProperty(t.prototype,"Container",{get:function(){return this.container},enumerable:!0,configurable:!0}),t.prototype.install=function(t){this.container=t,this.installBindings()},t.prototype.cleanup=function(){},t}(),Hi=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.getInjectedValue=function(t){var i=this.GameObject.findComponentInParent(Li);return null!==i?i.getInjectedValue(t):vi.getActiveScene().container.get(t)},i}(T),Ki=function(){function t(t){this.container=null,this.container=t}return t.prototype.getInjectedValue=function(t){return this.container.get(t)},t}(),zi=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.installers=[],i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"Installers",{get:function(){return this.installers},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.prototype.create.call(this),this.installers.length>0&&this.runInstallers()},i.prototype.runInstallers=function(){for(var t=0;t<this.Installers.length;++t)this.Installers[t].install(vi.getActiveScene().container)},i.prototype.destroy=function(){for(var i=0;i<this.installers.length;++i)this.installers[i].cleanup();t.prototype.destroy.call(this)},Object(o.__decorate)([q("Installer"),H(),Object(o.__metadata)("design:type",Array)],i.prototype,"installers",void 0),i=Object(o.__decorate)([Q("SceneContainerInstaller")],i)}(T),Wi=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._components=[],i._identifier=null,i}return Object(o.__extends)(i,t),i.prototype.postDeserialize=function(){if(t.prototype.postDeserialize.call(this),null!==this._identifier&&this._components.length>0){var i=vi.getActiveScene().container;i.hasBinding(this._identifier)||i.bind(this._identifier).toConstantValue(1===this._components.length?this._components[0]:this._components)}},i.prototype.destroy=function(){null!==this._identifier&&vi.getActiveScene().container.unbind(this._identifier),t.prototype.destroy.call(this)},Object(o.__decorate)([V(),H(),Object(o.__metadata)("design:type",Array)],i.prototype,"_components",void 0),Object(o.__decorate)([M(),Object(o.__metadata)("design:type",String)],i.prototype,"_identifier",void 0),i=Object(o.__decorate)([Q("SceneContextBinding")],i)}(T),Yi="custom:annotations:UIDTagProperties",Vi=function(){function t(){}return t.getUIDProperties=function(t){return Reflect.getMetadata(Yi,t.constructor)},t.addUIDMetadata=function(t,i){S.addProperty(Yi,t.constructor,i)},t}(),qi=function(t,i){return function(n,e){R.addTypeMetadata(n,e,l.Number,t,i),Vi.addUIDMetadata(n,e)}},Qi="custom:annotations:RequireComponentTagProperties",Xi="custom:annotations:requireComponentInfo",Ji=function(){function t(){}return t.getProperties=function(t){return Reflect.getMetadata(Qi,t.constructor)||[]},t.getPropertyInfo=function(t,i){return Reflect.getMetadata(Xi,t.constructor,i)},t.addMetadata=function(t,i){S.addProperty(Qi,t.constructor,i)},t}(),Zi=function(t){return function(i,n){Ji.addMetadata(i,n);var e={ctor:t};Reflect.defineMetadata(Xi,e,i.constructor,n)}},$i=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.destroy=function(){f.isDefined(this._id)&&vi.getActiveScene().container.unbind(this._id),t.prototype.destroy.call(this)},i.customSerialize=function(i,n,e){t.customSerialize.call(this,i,n,e),i.properties.id=i.guid},i.prototype.customDeserialize=function(i){t.prototype.customDeserialize.call(this,i),f.isDefined(this._id)&&vi.getActiveScene().container.rebind(this._id).toConstantValue(this)},Object(o.__decorate)([ct(),M(),Object(o.__metadata)("design:type",String)],i.prototype,"_id",void 0),i}(T),tn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.guid=null,i.tuid=null,i.properties={},i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"GUID",{get:function(){return this.guid},set:function(t){this.guid=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"TUID",{get:function(){return this.tuid},set:function(t){this.tuid=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Properties",{get:function(){return this.properties},set:function(t){this.properties=t},enumerable:!0,configurable:!0}),i}(Dt),nn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.name=null,i.layer=null,i.guid=null,i.components=[],i.children=[],i.active=null,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"Name",{get:function(){return this.name},set:function(t){this.name=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Layer",{get:function(){return this.layer},set:function(t){this.layer=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"GUID",{get:function(){return this.guid},set:function(t){this.guid=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Components",{get:function(){return this.components},set:function(t){this.components=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Children",{get:function(){return this.children},set:function(t){this.children=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Active",{get:function(){return this.active},set:function(t){this.active=t},enumerable:!0,configurable:!0}),i}(Dt),en=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.tuid=null,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"TUID",{get:function(){return this.tuid},set:function(t){this.tuid=t},enumerable:!0,configurable:!0}),i}(nn),sn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.template=null,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"Template",{get:function(){return this.template},set:function(t){this.template=t},enumerable:!0,configurable:!0}),i}(nn),rn=function(){function t(){this.guid=null,this.root=null,this.map={},this.templates={}}return Object.defineProperty(t.prototype,"GUID",{get:function(){return this.guid},set:function(t){this.guid=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Root",{get:function(){return this.root},set:function(t){this.root=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Map",{get:function(){return this.map},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Templates",{get:function(){return this.templates},enumerable:!0,configurable:!0}),t}(),hn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.guid=null,i.type=null,i.properties={},i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"GUID",{get:function(){return this.guid},set:function(t){this.guid=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Type",{get:function(){return this.type},set:function(t){this.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Properties",{get:function(){return this.properties},set:function(t){this.properties=t},enumerable:!0,configurable:!0}),i}(Dt),on=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}var n;return Object(o.__extends)(i,t),n=i,i.prototype.deserialize=function(t){return n.deserializePrefab(t)},i.prototype.serialize=function(t){return n.serializePrefab(t)},i.deserializePrefab=function(t){var i=null;if(n.isPrefabSchemaTemplate(t)){var e=new sn;e.Template=t.template,i=e}else if(n.isPrefabSchemaOverride(t)){var s=new en;s.TUID=t.tuid,i=s}else i=new nn;return i.Name=t.name,i.Layer=t.layer,i.Active=t.active,i.GUID=t.guid,i.Components=Tt.deserializeCollection(t.components,n.deserializeComponent),i.Children=Tt.deserializeCollection(t.children,n.deserializePrefab),i},i.serializePrefab=function(t){return n.isPrefabDataTemplate(t)?{name:t.Name,layer:t.Layer,guid:t.GUID,template:t.Template,components:Tt.serializeCollection(t.Components,n.serializeComponent),children:Tt.serializeCollection(t.Children,n.prototype.serialize)}:n.isPrefabDataOverride(t)?{name:t.Name,layer:t.Layer,guid:t.GUID,tuid:t.TUID,components:Tt.serializeCollection(t.Components,n.serializeComponent),children:Tt.serializeCollection(t.Children,n.prototype.serialize)}:{name:t.Name,layer:t.Layer,guid:t.GUID,components:Tt.serializeCollection(t.Components,n.serializeComponent),children:Tt.serializeCollection(t.Children,n.prototype.serialize)}},i.deserializeComponent=function(t){var i;return n.isComponentSchemaOverride(t)?((i=new tn).GUID=t.guid,i.TUID=t.tuid,i.Properties=t.properties,i):((i=new hn).GUID=t.guid,i.Type=t.type,i.Properties=t.properties,i)},i.serializeComponent=function(t){return n.isComponentDataOverride(t)?{guid:t.GUID,tuid:t.TUID,properties:t.Properties}:{guid:t.GUID,type:t.Type,properties:t.Properties}},i.isPrefabSchemaTemplate=function(t){return t.hasOwnProperty("template")},i.isPrefabDataTemplate=function(t){return t instanceof sn},i.isPrefabSchemaOverride=function(t){return t.hasOwnProperty("tuid")},i.isPrefabDataOverride=function(t){return t instanceof en},i.isComponentSchemaOverride=function(t){return t.hasOwnProperty("tuid")},i.isComponentDataOverride=function(t){return t instanceof tn},i=n=Object(o.__decorate)([Object(u.injectable)()],i)}(Tt),un=function(){function t(t){this.prefabDataProvider=null,this.container=null,this.prefabDataProvider=t,this.container=new u.Container,this.container.bind("v1").to(on)}return t.prototype.getPrefab=function(t){var i=this.prefabDataProvider.getPrefab(t);return f.isDefined(i)?this.container.get("v1").deserialize(i):null},t=Object(o.__decorate)([Object(u.injectable)(),Object(o.__param)(0,Object(u.inject)(e.PrefabDataProvider)),Object(o.__metadata)("design:paramtypes",[Object])],t)}(),an=function(t){function i(i){var n=t.call(this,i)||this;return n._lastPrefabMap=null,n._cachedSerializableProperties=new Map,n}var n;return Object(o.__extends)(i,t),n=i,i.prototype.load=function(t,i){var n=this._prefabService.getPrefab(t);return this.loadFromJSON(n,i)},i.prototype.loadFromJSON=function(t,i){var e=n.isPrefabTemplate(t)?new rn:null,s=new rn;return Di.completeGenerator(this.instantiatePrefab(s,t,i,e)),f.isDefined(s.Root)&&(Di.completeGenerator(this.mapPrefab(s,t,s.Root,e)),Di.completeGenerator(this.createPrefab(s.Root)),Di.completeGenerator(this.postCreatePrefab(s.Root))),s.Root},i.prototype.loadAsync=function(t,i){var n=this._prefabService.getPrefab(t);return this.loadFromJSONAsync(n,i)},i.prototype.loadFromJSONAsync=function(t,i){var e=this,s=new Ci((function(r,h){return Object(o.__awaiter)(e,void 0,void 0,(function(){var e,u;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return e=n.isPrefabTemplate(t)?new rn:null,u=new rn,[4,Di.completeGeneratorAsync(this.instantiatePrefab(u,t,i,e),this._frameWorkManager)];case 1:return o.sent(),s.cancelled?(h(),[2]):f.isDefined(u.Root)?[4,Di.completeGeneratorAsync(this.mapPrefab(u,t,u.Root,e),this._frameWorkManager)]:[3,5];case 2:return o.sent(),s.cancelled?(h(),[2]):[4,Di.completeGeneratorAsync(this.createPrefab(u.Root),this._frameWorkManager)];case 3:return o.sent(),s.cancelled?(h(),[2]):[4,Di.completeGeneratorAsync(this.postCreatePrefab(u.Root),this._frameWorkManager)];case 4:if(o.sent(),s.cancelled)return h(),[2];o.label=5;case 5:return r(u.Root),[2]}}))}))}));return s},i.prototype.loadWithDependencies=function(t,i,n){void 0===n&&(n=!1);var e=this._prefabService.getPrefab(t);return this.loadFromJSONWithDependencies(e,i,n)},i.prototype.loadFromJSONWithDependencies=function(t,i,e){var s=this;void 0===e&&(e=!1);var r=new Ci((function(h,u){return Object(o.__awaiter)(s,void 0,void 0,(function(){var s,a,c;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return s=n.isPrefabTemplate(t)?new rn:null,a=new rn,c=e?this._frameWorkManager:void 0,[4,Di.completeGeneratorAsync(this.instantiatePrefab(a,t,i,s),c)];case 1:return o.sent(),r.cancelled||!f.isDefined(a.Root)?(u(),[2]):[4,Di.completeGeneratorAsync(this.mapPrefab(a,t,a.Root,s),c)];case 2:return o.sent(),r.cancelled?(u(),[2]):[4,this.preloadAssets(a.Root)];case 3:return o.sent(),r.cancelled?(u(),[2]):[4,Di.completeGeneratorAsync(this.createPrefab(a.Root),c)];case 4:return o.sent(),r.cancelled?(u(),[2]):[4,Di.completeGeneratorAsync(this.postCreatePrefab(a.Root),c)];case 5:return o.sent(),r.cancelled?(u(),[2]):(h(a.Root),[2])}}))}))}));return r},i.prototype.getLastPrefabMap=function(){return this._lastPrefabMap},i.prototype.instantiatePrefab=function(t,i,e,s){var r,u,a,l,b,v,d,O,m;return Object(o.__generator)(this,(function(p){switch(p.label){case 0:return r=this.generateUniqueGUID(t,i.GUID),f.isDefined(r)?[4]:(c.log("Attempting to instantiate the same object twice: "+i.GUID+".",h.Error),[2,null]);case 1:return p.sent(),u=null,a=s,l=i.Name,n.isPrefabTemplate(i)?(a=new rn,b=this._prefabService.getPrefab(i.Template),f.isDefined(b)?[5,Object(o.__values)(this.instantiatePrefab(a,b,e,null))]:[3,3]):[3,5];case 2:return p.sent(),u=a.Root,t.Templates[i.Template]||(t.Templates[i.Template]=[]),t.Templates[i.Template].push(a),[3,4];case 3:return c.log("Attempting to instantiate a template that does not exist: "+i.Template+".",h.Error),[2,null];case 4:return[3,6];case 5:if(n.isPrefabOverride(i)){if(!a.Map.hasOwnProperty(i.TUID))return c.log("Attempting to map a templated prefab that does not exist: "+i.TUID+".",h.Error),[2,null];if(!(a.Map[i.TUID]instanceof ot))return c.log("Attempting to map a templated prefab to a non-prefab: "+i.TUID+".",h.Error),[2,null];u=a.Map[i.TUID],f.isDefined(l)&&""!==l||(l=u.name)}else u=new ot(e);p.label=6;case 6:for(f.isDefined(i.Name)&&""!==i.Name&&(u.name=l),i.Layer&&(u.layer=i.Layer),f.isDefined(i.Active)&&(u.active=i.Active),t.Map[r]=u,f.isDefined(t.Root)||f.isDefined(t.GUID)||(t.Root=u,t.GUID=r),m=0;m<i.Components.length;m++)if(v=i.Components[m],d=this.generateUniqueGUID(t,v.GUID),f.isDefined(d))if(n.isComponentOverride(v))a.Map.hasOwnProperty(v.TUID)?t.Map[d]=a.Map[v.TUID]:c.log("Attempting to remap a templated component that does not exist: "+v.TUID+".",h.Error);else{if(O=null,!D.hasOwnProperty(v.Type)){c.log("Attempting to instantiate a component that is not componentable: "+v.Type+".",h.Error);continue}O=u.addComponent(D[v.Type],!1),t.Map[d]=O}else c.log("Attempting to instantiate the same component twice: "+v.GUID+".",h.Error);m=0,p.label=7;case 7:return m<i.Children.length?[5,Object(o.__values)(this.instantiatePrefab(t,i.Children[m],u,a))]:[3,10];case 8:p.sent(),p.label=9;case 9:return m++,[3,7];case 10:return this._lastPrefabMap=t.Map,[2,u]}}))},i.prototype.mapPrefab=function(t,i,e,s){var r,u,a,b,v,d,O,m,p,g,y,j,_,w,E;return Object(o.__generator)(this,(function(I){switch(I.label){case 0:return r=s,u=e,n.isPrefabTemplate(i)?(r=this.getTemplate(t,i.Template))?(a=this._prefabService.getPrefab(i.Template),[5,Object(o.__values)(this.mapPrefab(r,a,r.Root,null))]):(c.log("Attempting to template a prefab that was not instantiated: "+t.Templates[i.Template]+".",h.Error),[2,null]):[3,2];case 1:return I.sent(),[3,3];case 2:n.isPrefabOverride(i)&&(u=null!==(E=this.getOverride(s.Map,i.TUID))&&void 0!==E?E:u),I.label=3;case 3:for(j=0;j<i.Components.length;j++)if(b=i.Components[j],v=null,n.isComponentOverride(b)?r.Map.hasOwnProperty(b.TUID)?r.Map[b.TUID]instanceof T?v=r.Map[b.TUID]:c.log("Attempting to map a templated component to a non-component: "+b.TUID+".",h.Error):c.log("Attempting to map a templated component that does not exist: "+b.TUID+".",h.Error):D.hasOwnProperty(b.Type)?(v=t.Map[b.GUID])||(v=u.findComponent(D[b.Type])):c.log("Attempting to map a component that is not componentable: "+b.Type+".",h.Error),f.isDefined(v)&&(n.resolveRequiredComponents(v),(d=this.getSerializableProperties(v))&&d.length>0&&b.Properties)){try{for(_=void 0,O=Object(o.__values)(d),m=O.next();!m.done;m=O.next())if(p=m.value,g=p.alias?p.alias:p.property,y=b.Properties[g],f.isDefined(y))switch(p.type){case l.ObjectReference:n.mapObjectReference(t.Map,v,p,y);break;case l.SceneObjectReference:n.mapSceneObjectReference(v,p,y);break;case l.Signal:n.mapSignal(t.Map,v,p,y);break;case l.PrefabConstructable:n.mapPrefabConstructable(v,p,y);break;default:n.mapField(v,p.property,y)}}catch(A){_={error:A}}finally{try{m&&!m.done&&(w=O.return)&&w.call(O)}finally{if(_)throw _.error}}v.customDeserialize(b.Properties),v.postDeserialize()}j=0,I.label=4;case 4:return j<i.Children.length?[5,Object(o.__values)(this.mapPrefab(t,i.Children[j],u.children[j],r))]:[3,7];case 5:I.sent(),I.label=6;case 6:return j++,[3,4];case 7:return[2]}}))},i.prototype.preloadAssets=function(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var i,n,e=this;return Object(o.__generator)(this,(function(s){return i=new Set,(n=function(t){var e,s,r,h,u,a,c,l;try{for(var f=Object(o.__values)(t.components),b=f.next();!b.done;b=f.next()){var v=b.value,d=_i.getAssetProperties(v);if(d)try{for(var O=(r=void 0,Object(o.__values)(d)),m=O.next();!m.done;m=O.next()){var p=Object(o.__read)(m.value,2),g=p[0],y=p[1],j=v[g];if(j)try{for(var _=(u=void 0,Object(o.__values)(Array.isArray(j)?j:[j])),w=_.next();!w.done;w=_.next()){var E=w.value;y&&E[y]?i.add(E[y]):i.add(E)}}catch(D){u={error:D}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(u)throw u.error}}}}catch(S){r={error:S}}finally{try{m&&!m.done&&(h=O.return)&&h.call(O)}finally{if(r)throw r.error}}}}catch(C){e={error:C}}finally{try{b&&!b.done&&(s=f.return)&&s.call(f)}finally{if(e)throw e.error}}try{for(var I=Object(o.__values)(t.children),A=I.next();!A.done;A=I.next()){var T=A.value;n(T)}}catch(N){c={error:N}}finally{try{A&&!A.done&&(l=I.return)&&l.call(I)}finally{if(c)throw c.error}}})(t),[2,new Promise((function(t){e._assetLoader.loadAssets(Array.from(i),t)}))]}))}))},i.prototype.getTemplate=function(t,i){var n=t.Templates[i];if((null==n?void 0:n.length)>0){var e=n.shift();return n.push(e),e}return null},i.prototype.getOverride=function(t,i){var n=t[i];return n instanceof ot?n:null},i.prototype.createPrefab=function(t){var i,n,e;return Object(o.__generator)(this,(function(s){switch(s.label){case 0:i=t.components,e=i.length-1,s.label=1;case 1:return e>=0?i[e].isCreated?[3,3]:[4]:[3,4];case 2:s.sent(),i[e].create(),s.label=3;case 3:return--e,[3,1];case 4:n=t.children,e=n.length-1,s.label=5;case 5:return e>=0?[5,Object(o.__values)(this.createPrefab(n[e]))]:[3,8];case 6:s.sent(),s.label=7;case 7:return--e,[3,5];case 8:return[2]}}))},i.prototype.postCreatePrefab=function(t){var i,n,e;return Object(o.__generator)(this,(function(s){switch(s.label){case 0:i=t.components,e=0,s.label=1;case 1:return e<i.length?[4]:[3,4];case 2:s.sent(),i[e].postCreate(),s.label=3;case 3:return e++,[3,1];case 4:n=t.children,e=0,s.label=5;case 5:return e<n.length?[5,Object(o.__values)(this.postCreatePrefab(n[e]))]:[3,8];case 6:s.sent(),s.label=7;case 7:return e++,[3,5];case 8:return[2]}}))},i.prototype.generateUniqueGUID=function(t,i){var n=i;if(f.isDefined(n)&&""!==n)t.Map.hasOwnProperty(n)&&(n=null);else do{n=f.generateGUID()}while(t.Map.hasOwnProperty(n));return n},i.prototype.getSerializableProperties=function(t){if(this._cachedSerializableProperties.has(t.constructor))return this._cachedSerializableProperties.get(t.constructor);var i=null,n=Reflect.getMetadata(N,t.constructor);return n&&n.length>0&&(i=n.map((function(i){return Reflect.getMetadata(x,t.constructor,i)})),i=m.orderBy(i,["priority"],["desc"]),this._cachedSerializableProperties.set(t.constructor,i)),i},i.mapObjectReference=function(t,i,n,e){if(Array.isArray(i[n.property])||n.isArray)if(Array.isArray(e))for(var s=i[n.property],r=0;r<e.length;r++)t.hasOwnProperty(e[r])?s.push(t[e[r]]):c.log("Attempting to deserialize an object that does not exist: "+n.property+".",h.Error);else c.log("Attempting to deserialize an array property with a non-array value: "+n.property+".",h.Error);else t.hasOwnProperty(e)?i[n.property]=t[e]:c.log("Attempting to deserialize an object that does not exist: ."+n.property+".",h.Error)},i.mapSceneObjectReference=function(t,i,n){var e=vi.getActiveScene().container;if(Array.isArray(t[i.property])||i.isArray)if(Array.isArray(n))for(var s=t[i.property],r=0;r<n.length;r++){var o;(o=e.get(n[r]))?s.push(o):c.log("Attempting to deserialize an object that does not exist: "+i.property+".",h.Error)}else c.log("Attempting to deserialize an array property with a non-array value: "+i.property+".",h.Error);else(o=e.get(n))?t[i.property]=o:c.log("Attempting to deserialize an object that does not exist: ."+i.property+".",h.Error)},i.mapSignal=function(t,i,n,e){var s=Array.isArray(e)?e:[e];i[n.property]||(i[n.property]=new A);for(var r=function(e){var r=s[e];if(!t.hasOwnProperty(r.guid))return c.log("Map has no reference to "+r.guid+". Unable to set "+n.property+".",h.Error),"continue";var u=t[r.guid];if(r.functionName){for(var a=r.functionName.split("."),l=a[a.length-1],f=0;f<a.length-1;++f)if(!(u=u[a[f]])){c.log("Attempting to deserialize a Signal property with an invalid handler path: "+r.functionName,h.Error);break}if(!u)return"continue";var b=u[l];if(b){var v=i[n.property],d=r.args,O=v._indexOfListener(b,u);-1===O?void 0!==d?v.add.apply(v,Object(o.__spread)([b,u,0],d)):v.add(b,u):d&&(v._bindings[O]._args=d)}else c.log("Attempting to deserialize a Signal property with an undefined handler "+r.functionName+".",h.Error)}else if(r.propertyName){var m=r.args;void 0!==m?i[n.property].add((function(){u[r.propertyName]=m}),u):c.log("Attempting to deserialize a Signal property with an undefined args for property "+r.propertyName+".",h.Error)}},u=0;u<s.length;++u)r(u)},i.mapField=function(t,i,e){if(e instanceof Object){t[i]||(t[i]=Array.isArray(e)?[]:{});var s=t[i];for(var r in e)n.mapField(s,r,e[r])}else t[i]=e},i.resolveRequiredComponents=function(t){var i,n,e=Ji.getProperties(t);try{for(var s=Object(o.__values)(e),r=s.next();!r.done;r=s.next()){var u=r.value,a=Ji.getPropertyInfo(t,u).ctor,l=t.GameObject.findComponent(a);l?t[u]=l:c.log("Missing "+a.name+" component required by "+t.constructor.name+" component",h.Error)}}catch(f){i={error:f}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}},i.mapPrefabConstructable=function(t,i,n){var e,s,r=function(t){var i=vt[t];return i?new i.ctor:(c.log("Attempting to construct instance of non-prefabConstructable class "+t,h.Error),null)};if(i.isArray){var u=[];try{for(var a=Object(o.__values)(n),l=a.next();!l.done;l=a.next()){var f=r(l.value);f&&u.push(f)}}catch(b){e={error:b}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(e)throw e.error}}t[i.property]=u}else t[i.property]=r(n)},i.isPrefabTemplate=function(t){return t instanceof sn},i.isPrefabOverride=function(t){return t instanceof en},i.isComponentOverride=function(t){return t instanceof tn},Object(o.__decorate)([Gi(e.PrefabService),Object(o.__metadata)("design:type",un)],i.prototype,"_prefabService",void 0),Object(o.__decorate)([Gi(e.AssetLoader),Object(o.__metadata)("design:type",Object)],i.prototype,"_assetLoader",void 0),Object(o.__decorate)([Gi(e.FrameWorkManager),Object(o.__metadata)("design:type",bt)],i.prototype,"_frameWorkManager",void 0),i=n=Object(o.__decorate)([Object(u.injectable)(),Object(o.__metadata)("design:paramtypes",[Object])],i)}(Ki);!function(t){t[t.Over=0]="Over",t[t.Down=1]="Down",t[t.Up=2]="Up",t[t.Disabled=3]="Disabled"}(Ii||(Ii={}));var cn,ln=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._collisionBox=null,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"inputEnabled",{get:function(){return!!this._collisionBox&&this._collisionBox.inputEnabled},set:function(t){var i=this.getCollisionBox();i.inputEnabled=t,this.applyUseHandCursorSetting(i,this.useHandCursor)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useHandCursor",{get:function(){return!(!this._collisionBox||!this._collisionBox.input)&&this._collisionBox.input.useHandCursor},set:function(t){this.applyUseHandCursorSetting(this.getCollisionBox(),t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onInputDown",{get:function(){return this.getCollisionBox().events.onInputDown},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onInputUp",{get:function(){return this.getCollisionBox().events.onInputUp},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onInputOver",{get:function(){return this.getCollisionBox().events.onInputOver},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onInputOut",{get:function(){return this.getCollisionBox().events.onInputOut},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.prototype.create.call(this),this.getCollisionBox(),this.updateCollisionBox()},i.prototype.getCollisionBox=function(t){return void 0===t&&(t=!0),t&&!this._collisionBox&&this.createInternalCollisionBox(),this._collisionBox},i.prototype.onDown=function(t,i){},i.prototype.onUp=function(t,i,n){},i.prototype.onOver=function(t,i){},i.prototype.onOut=function(t,i){},i.prototype.applyUseHandCursorSetting=function(t,i){t&&t.input&&(t.input.useHandCursor=i)},i.prototype.createInternalCollisionBox=function(){this._collisionBox=X.instance.game.add.sprite(0,0),this.GameObject.legacyTransform.group.add(this._collisionBox),this._collisionBox.alpha=0,this._collisionBox.inputEnabled=!0,this._collisionBox.events.onInputDown.add(this.onDown,this),this._collisionBox.events.onInputUp.add(this.onUp,this),this._collisionBox.events.onInputOver.add(this.onOver,this),this._collisionBox.events.onInputOut.add(this.onOut,this)},i.prototype.updateCollisionBox=function(){var t=this.getCollisionBox();t.width=this.GameObject.legacyTransform.width,t.height=this.GameObject.legacyTransform.height,t.inputEnabled=this.inputEnabled,this.applyUseHandCursorSetting(t,this.useHandCursor)},Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Boolean),Object(o.__metadata)("design:paramtypes",[Boolean])],i.prototype,"inputEnabled",null),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Boolean),Object(o.__metadata)("design:paramtypes",[Boolean])],i.prototype,"useHandCursor",null),i=Object(o.__decorate)([Q("Interactable")],i)}(T),fn=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i}(T),bn=function(t){function i(){var n=null!==t&&t.apply(this,arguments)||this;return n._transition=null,n._currentState=i.DEFAULT_STATE,n._isTransitionLocked=!1,n}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"transition",{get:function(){return this._transition},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentState",{get:function(){return this._currentState},set:function(t){var i=this._currentState;this._currentState=t,this.onStateChanged(this._currentState,i)},enumerable:!0,configurable:!0}),i.prototype.postCreate=function(){t.prototype.postCreate.call(this),this.applyCurrentState()},i.prototype.onStateChanged=function(t,i){this.setTransitionState(t)},i.prototype.applyCurrentState=function(){this.onStateChanged(this._currentState,this._currentState)},i.prototype.setTransitionState=function(t){this.transition&&!this.isStateLocked()&&this.transition.setState(t)},i.prototype.lockState=function(t){this.setTransitionState(t),this._isTransitionLocked=!0},i.prototype.unlockState=function(){this._isTransitionLocked=!1,this.setTransitionState(this._currentState)},i.prototype.isStateLocked=function(){return this._isTransitionLocked},i.prototype.onDown=function(t,i){this.currentState=Ii.Down},i.prototype.onUp=function(t,i,n){this.currentState=n&&i.withinGame&&i.isMouse?Ii.Over:Ii.Up},i.prototype.onOver=function(t,i){this.currentState=i.isMouse?Ii.Over:Ii.Up},i.prototype.onOut=function(t,i){this.currentState=Ii.Up},i.DEFAULT_STATE=Ii.Up,Object(o.__decorate)([ut("transition"),Object(o.__metadata)("design:type",fn)],i.prototype,"_transition",void 0),i}(ln),vn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._onClick=new Phaser.Signal,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"onClick",{get:function(){return this._onClick},enumerable:!0,configurable:!0}),i.prototype.onUp=function(i,n,e){this.currentState===Ii.Down&&e&&this._onClick.dispatch(),t.prototype.onUp.call(this,i,n,e)},i.prototype.destroy=function(){this._onClick.dispose(),t.prototype.destroy.call(this)},Object(o.__decorate)([W(),Object(o.__metadata)("design:type",Phaser.Signal)],i.prototype,"_onClick",void 0),i=Object(o.__decorate)([Q("Button")],i)}(bn),dn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._upStateObject=null,i._downStateObject=null,i._overStateObject=null,i._disabledStateObject=null,i.currentStateObject=null,i._avoidEmptyStates=!1,i}var n;return Object(o.__extends)(i,t),n=i,Object.defineProperty(i.prototype,"avoidEmptyStates",{get:function(){return this._avoidEmptyStates},set:function(t){this._avoidEmptyStates=t},enumerable:!0,configurable:!0}),i.prototype.postCreate=function(){t.prototype.postCreate.call(this),this._upStateObject&&(this._upStateObject.active=!1),this._downStateObject&&(this._downStateObject.active=!1),this._overStateObject&&(this._overStateObject.active=!1),this._disabledStateObject&&(this._disabledStateObject.active=!1),this.currentStateObject&&(this.currentStateObject.active=!0)},i.prototype.setState=function(t){this.currentStateObject&&(this.currentStateObject.active=!1),this.currentStateObject=this.getStateObject(t),this.currentStateObject?this.currentStateObject.active=!0:this.avoidEmptyStates&&(this.currentStateObject=this.getStateObject(n.DEFAULT_STATE),this.currentStateObject&&(this.currentStateObject.active=!0))},i.prototype.getStateObject=function(t){switch(t){case Ii.Up:return this._upStateObject;case Ii.Down:return this._downStateObject;case Ii.Over:return this._overStateObject;case Ii.Disabled:return this._disabledStateObject;default:return null}},i.DEFAULT_STATE=Ii.Up,Object(o.__decorate)([ut("upStateObject"),Object(o.__metadata)("design:type",ot)],i.prototype,"_upStateObject",void 0),Object(o.__decorate)([ut("downStateObject"),Object(o.__metadata)("design:type",ot)],i.prototype,"_downStateObject",void 0),Object(o.__decorate)([ut("overStateObject"),Object(o.__metadata)("design:type",ot)],i.prototype,"_overStateObject",void 0),Object(o.__decorate)([ut("disabledStateObject"),Object(o.__metadata)("design:type",ot)],i.prototype,"_disabledStateObject",void 0),Object(o.__decorate)([rt("avoidEmptyStates"),Object(o.__metadata)("design:type",Boolean)],i.prototype,"_avoidEmptyStates",void 0),i=n=Object(o.__decorate)([Q("GameObjectTransition")],i)}(fn),On=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._selectedStateObject=null,i._selectable=null,i}return Object(o.__extends)(i,t),i.prototype.postCreate=function(){t.prototype.postCreate.call(this),this._selectedStateObject&&(this._selectedStateObject.active=this._selectable.isSelected())},i.prototype.getStateObject=function(i){return this._selectable.isSelected()?this._selectedStateObject:t.prototype.getStateObject.call(this,i)},Object(o.__decorate)([ut("selectedStateObject"),Object(o.__metadata)("design:type",ot)],i.prototype,"_selectedStateObject",void 0),Object(o.__decorate)([ut("selectable"),Object(o.__metadata)("design:type",Object)],i.prototype,"_selectable",void 0),i=Object(o.__decorate)([Q("SelectedGameObjectTransition")],i)}(dn),mn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._onSelected=new Phaser.Signal,i._selected=!1,i._isSelectionLocked=!1,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"onSelected",{get:function(){return this._onSelected},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isSelectionLocked",{get:function(){return this._isSelectionLocked},set:function(t){this._isSelectionLocked=t},enumerable:!0,configurable:!0}),i.prototype.setSelected=function(t){this._selected=t,this.applyCurrentState()},i.prototype.isSelected=function(){return this._selected},i.prototype.onUp=function(i,n,e){!this._isSelectionLocked&&this.currentState===Ii.Down&&e&&(this._onSelected.dispatch(),this.setSelected(!this.isSelected())),t.prototype.onUp.call(this,i,n,e)},i.prototype.destroy=function(){this._onSelected.dispose(),t.prototype.destroy.call(this)},Object(o.__decorate)([W(),Object(o.__metadata)("design:type",Phaser.Signal)],i.prototype,"_onSelected",void 0),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Boolean)],i.prototype,"_selected",void 0),i=Object(o.__decorate)([Q("Toggle")],i)}(bn),pn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.allowMultiSelect=!1,i.toggleObjects=[],i.defaultIndex=[],i}return Object(o.__extends)(i,t),i.prototype.postCreate=function(){t.prototype.postCreate.call(this);for(var i=0===this.defaultIndex.length||this.defaultIndex[0]>this.toggleObjects.length-1,n=0;n<this.toggleObjects.length;n++)this.allowMultiSelect?this.setItemSelected(this.toggleObjects[n],-1!==this.defaultIndex.indexOf(n)):i?this.setItemSelected(this.toggleObjects[n],0===n):this.setItemSelected(this.toggleObjects[n],n===this.defaultIndex[0]);for(n=0;n<this.toggleObjects.length;n++)this.toggleObjects[n].onSelected.add(this.clicked,this,0,this.toggleObjects[n])},i.prototype.clicked=function(t){if(!this.allowMultiSelect)for(var i=0;i<this.toggleObjects.length;i++){var n=this.toggleObjects[i];n!==t?this.setItemSelected(n,!1):t.isSelectionLocked=!0}},i.prototype.addSelectable=function(t){t.onSelected.add(this.clicked,this,0,t),this.toggleObjects.push(t)},i.prototype.removeSelectable=function(t){var i=this.toggleObjects.indexOf(t);-1!==i&&(t.onSelected.remove(this.clicked,this),this.toggleObjects.splice(i,1))},i.prototype.setItemSelected=function(t,i){t.setSelected(i),t.isSelectionLocked=!this.allowMultiSelect&&i},i.prototype.destroy=function(){for(var i=0;i<this.toggleObjects.length;i++)this.toggleObjects[i].onSelected.remove(this.clicked,this);t.prototype.destroy.call(this)},Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Boolean)],i.prototype,"allowMultiSelect",void 0),Object(o.__decorate)([ut(),Object(o.__metadata)("design:type",Array)],i.prototype,"toggleObjects",void 0),Object(o.__decorate)([rt(),Object(o.__metadata)("design:type",Array)],i.prototype,"defaultIndex",void 0),i=Object(o.__decorate)([Q("ToggleGroup")],i)}(T),gn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._start=0,i._pressed=!1,i._direction=cn.Vertical,i._nib=null,i._scrollView=null,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"horizontal",{set:function(t){t&&(this._direction=cn.Horizontal)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollView",{set:function(t){this._scrollView=t},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.prototype.create.call(this),X.instance.game.input.addMoveCallback(this.moveNib,this)},i.prototype.onDown=function(t,i){this._pressed=!0,this._start=this.direction===cn.Vertical?i.y:i.x},i.prototype.onUp=function(t,i){this._pressed=!1},i.prototype.moveNib=function(t,i,n){if(this._pressed){var e=this.direction===cn.Vertical?n-this._start:i-this._start;this._start=this.direction===cn.Vertical?n:i,this.direction===cn.Vertical?(this._nib.legacyTransform.y+=e,this._scrollView.scrollBarListener.boundDispatch(this._nib.legacyTransform.y/(this.getCollisionBox().height-this._nib.legacyTransform.height),this._direction)):(this._nib.legacyTransform.x+=e,this._scrollView.scrollBarListener.boundDispatch(this._nib.legacyTransform.x/(this.getCollisionBox().width-this._nib.legacyTransform.width),this._direction)),this.limitMovement()}},i.prototype.limitMovement=function(){this._nib.legacyTransform.y<this.getCollisionBox().y?this._nib.legacyTransform.y=this.getCollisionBox().y:this._nib.legacyTransform.y>this.maxNibY()&&(this._nib.legacyTransform.y=this.maxNibY())},i.prototype.scrollToPercent=function(t){this._nib.legacyTransform.y=-this.maxNibY()*t,this.limitMovement()},i.prototype.maxNibY=function(){return this.getCollisionBox().height+this.getCollisionBox().y-this._nib.legacyTransform.height},i.prototype.destroy=function(){X.instance.game.input.deleteMoveCallback(this.moveNib),t.prototype.destroy.call(this)},Object(o.__decorate)([rt("isHorizontal"),Object(o.__metadata)("design:type",Boolean),Object(o.__metadata)("design:paramtypes",[Boolean])],i.prototype,"horizontal",null),Object(o.__decorate)([ut("nib"),Object(o.__metadata)("design:type",ot)],i.prototype,"_nib",void 0),Object(o.__decorate)([ut("scrollView"),Object(o.__metadata)("design:type",jn)],i.prototype,"_scrollView",void 0),i=Object(o.__decorate)([Q("ScrollBar")],i)}(ln),yn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._contentView=null,i._onClick=new Phaser.Signal,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"onClick",{get:function(){return this._onClick},enumerable:!0,configurable:!0}),Object(o.__decorate)([ut("contentView"),Object(o.__metadata)("design:type",ot)],i.prototype,"_contentView",void 0),Object(o.__decorate)([W(),Object(o.__metadata)("design:type",Phaser.Signal)],i.prototype,"_onClick",void 0),i}(T);!function(t){t[t.Vertical=1]="Vertical",t[t.Horizontal=2]="Horizontal"}(cn||(cn={}));var jn=function(t){function i(){var i=t.call(this)||this;return i._direction=0,i._isKinematic=!0,i._verticalScrollBar=null,i._horizontalScrollBar=null,i._contentView=null,i._wheelStep=40,i._wheelOnOver=!1,i._allowMouseWheel=!0,i._allowTouch=!0,i._scrollBarListener=null,i._pressedDown=!1,i._startedInside=!1,i._timestamp=0,i._startX=0,i._startY=0,i._velocityX=0,i._velocityY=0,i._velocityWheel=0,i._scrollBarListener=new A,i._scrollBarListener.add(i.scrollToPercent.bind(i),i),i}var n;return Object(o.__extends)(i,t),n=i,Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vertical",{set:function(t){this._direction=t?this._direction|cn.Vertical:this._direction&cn.Vertical},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"horizontal",{set:function(t){this._direction=t?this._direction|cn.Horizontal:this._direction&cn.Horizontal},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isKinematic",{get:function(){return this._isKinematic},set:function(t){this._isKinematic=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalScrollBar",{get:function(){return this._verticalScrollBar},set:function(t){this._verticalScrollBar=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"horizontalScrollBar",{get:function(){return this._horizontalScrollBar},set:function(t){this._horizontalScrollBar=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentView",{get:function(){return this._contentView},set:function(t){this._contentView=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wheelStep",{get:function(){return this._wheelStep},set:function(t){this._wheelStep=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wheelOnOver",{get:function(){return this._wheelOnOver},set:function(t){this._wheelOnOver=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"allowMouseWheel",{get:function(){return this._allowMouseWheel},set:function(t){this._allowMouseWheel=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"allowTouch",{get:function(){return this._allowTouch},set:function(t){this._allowTouch=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollBarListener",{get:function(){return this._scrollBarListener},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.prototype.create.call(this),this._allowTouch&&X.instance.game.input.addMoveCallback(this.moveCanvas,this),this._allowMouseWheel&&(X.instance.game.input.mouse.mouseWheelCallback=this.mouseWheel.bind(this));var i=X.instance.game.add.graphics(0,0,this.GameObject.legacyTransform.group);i.beginFill(0),i.drawRect(0,0,this.GameObject.legacyTransform.width,this.GameObject.legacyTransform.height),i.inputEnabled=!1,this.GameObject.legacyTransform.group.mask=i},i.prototype.populateContentView=function(){this._contentView||(this._contentView=new ot(this.GameObject),this._contentView.addComponent(ht))},i.prototype.update=function(){this._isKinematic&&(this._direction&cn.Vertical)===cn.Vertical&&Math.abs(this._velocityWheel)>n.velocityThreshold&&(this._contentView.legacyTransform.y+=this._velocityWheel,this.limitMovement(),this._velocityWheel*=n.deceleration)},i.prototype.onDown=function(t,i){this._startX=i.x,this._startY=i.y,this._pressedDown=!0,this._startedInside=!0,this._timestamp=Date.now(),this._velocityY=this._velocityX=0},i.prototype.onUp=function(t,i,e){if(this._pressedDown=!1,this._startedInside){var s=this._contentView.findComponentsInChildren(yn);if(Math.abs(i.x-i.positionDown.x)<=n.tapThreshold&&Math.abs(i.y-i.positionDown.y)<=n.tapThreshold)for(var r=0;r<s.length;r++){var h=s[r].GameObject.legacyTransform;s[r].onClick&&Phaser.Rectangle.containsRaw(h.group.worldPosition.x,h.group.worldPosition.y,h.width,h.height,i.x,i.y)&&s[r].onClick.dispatch()}}},i.prototype.moveCanvas=function(t,i,e){if(this._pressedDown){var s=Date.now(),r=s-this._timestamp;this._timestamp=s;var h=0;(this._direction&cn.Horizontal)===cn.Horizontal&&(h=i-this._startX,this._startX=i,this._velocityX=h*n.displacement/(r+1)*n.initialAcceleration+this._velocityX*n.finalAcceleration,this._contentView.legacyTransform.x+=h,this.limitMovement()),(this._direction&cn.Vertical)===cn.Vertical&&(h=e-this._startY,this._startY=e,this._velocityY=h*n.displacement/(r+1)*n.initialAcceleration+this._velocityY*n.finalAcceleration,this._contentView.legacyTransform.y+=h,this.limitMovement())}},i.prototype.mouseWheel=function(t){t.preventDefault();var i=this.getCollisionBox();if(!this._wheelOnOver&&Phaser.Rectangle.containsRaw(i.worldPosition.x,i.worldPosition.y,i.width,i.height,X.instance.game.input.activePointer.x,X.instance.game.input.activePointer.y)){var n=120*X.instance.game.input.mouse.wheelDelta/this._wheelStep;this._isKinematic?this._velocityWheel+=n:(this._contentView.legacyTransform.y+=n,this.limitMovement())}},i.prototype.limitMovement=function(){var t=this.getCollisionBox();(this._direction&cn.Vertical)===cn.Vertical&&(this._contentView.legacyTransform.y>t.y&&(this._contentView.legacyTransform.y=t.y),this._contentView.legacyTransform.y<-(this._contentView.legacyTransform.height-t.height-t.y+this._contentView.children.slice(-1)[0].legacyTransform.height)&&(this._contentView.legacyTransform.height>t.height?this._contentView.legacyTransform.y=-(this._contentView.legacyTransform.height-t.height-t.y+this._contentView.children.slice(-1)[0].legacyTransform.height):this._contentView.legacyTransform.y=t.y),this._verticalScrollBar&&this._verticalScrollBar.scrollToPercent(this._contentView.legacyTransform.y/(this._contentView.legacyTransform.height-t.height-t.y+this._contentView.children.slice(-1)[0].legacyTransform.height))),(this._direction&cn.Horizontal)===cn.Horizontal&&(this._contentView.legacyTransform.x>t.x&&(this._contentView.legacyTransform.x=t.x),this._contentView.legacyTransform.x<-(this._contentView.legacyTransform.width-t.width-t.x+this._contentView.children.slice(-1)[0].legacyTransform.width)&&(this._contentView.legacyTransform.width>t.width?this._contentView.legacyTransform.x=-(this._contentView.legacyTransform.width-t.width-t.x+this._contentView.children.slice(-1)[0].legacyTransform.width):this._contentView.legacyTransform.x=t.x),this._horizontalScrollBar&&this._horizontalScrollBar.scrollToPercent(this._contentView.legacyTransform.x/(this._contentView.legacyTransform.width-t.width-t.x+this._contentView.children.slice(-1)[0].legacyTransform.width)))},i.prototype.scrollToPercent=function(t,i){var n=this.getCollisionBox();i===cn.Vertical?this._contentView.legacyTransform.y=-(this._contentView.legacyTransform.height-n.height-n.y+this._contentView.children.slice(-1)[0].legacyTransform.height)*t:this._contentView.legacyTransform.x=-(this._contentView.legacyTransform.width-n.width-n.x+this._contentView.children.slice(-1)[0].legacyTransform.width)*t,this.limitMovement()},i.prototype.scrollByPixels=function(t,i){i===cn.Vertical?this._contentView.legacyTransform.y+=t:this._contentView.legacyTransform.x+=t,this.limitMovement()},i.prototype.destroy=function(){this._scrollBarListener.removeAll(),this.GameObject.legacyTransform.group.mask.destroy(),this.GameObject.legacyTransform.group.mask=null,X.instance.game.input.deleteMoveCallback(this.moveCanvas),X.instance.game.input.mouse.mouseWheelCallback=null,t.prototype.destroy.call(this)},i.deceleration=.95,i.velocityThreshold=.1,i.tapThreshold=5,i.initialAcceleration=.8,i.finalAcceleration=.8,i.displacement=1e3,Object(o.__decorate)([rt("verticalScrolling"),Object(o.__metadata)("design:type",Boolean),Object(o.__metadata)("design:paramtypes",[Boolean])],i.prototype,"vertical",null),Object(o.__decorate)([rt("horizontalScrolling"),Object(o.__metadata)("design:type",Boolean),Object(o.__metadata)("design:paramtypes",[Boolean])],i.prototype,"horizontal",null),Object(o.__decorate)([rt("isKinematic"),Object(o.__metadata)("design:type",Boolean)],i.prototype,"_isKinematic",void 0),Object(o.__decorate)([ut("verticalScrollBar"),Object(o.__metadata)("design:type",gn)],i.prototype,"_verticalScrollBar",void 0),Object(o.__decorate)([ut("horizontalScrollBar"),Object(o.__metadata)("design:type",gn)],i.prototype,"_horizontalScrollBar",void 0),Object(o.__decorate)([ut("contentView"),Object(o.__metadata)("design:type",ot)],i.prototype,"_contentView",void 0),Object(o.__decorate)([rt("wheelStep"),Object(o.__metadata)("design:type",Number)],i.prototype,"_wheelStep",void 0),Object(o.__decorate)([rt("wheelOnOver"),Object(o.__metadata)("design:type",Boolean)],i.prototype,"_wheelOnOver",void 0),Object(o.__decorate)([rt("allowMouseWheel"),Object(o.__metadata)("design:type",Boolean)],i.prototype,"_allowMouseWheel",void 0),Object(o.__decorate)([rt("allowTouch"),Object(o.__metadata)("design:type",Boolean)],i.prototype,"_allowTouch",void 0),i=n=Object(o.__decorate)([Q("ScrollView"),Object(o.__metadata)("design:paramtypes",[])],i)}(ln),_n=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._dataSource=null,i._createSection=function(){var t=new ot;return t.addComponent(ht),t},i._createCell=function(){var t=new ot;return t.addComponent(ht),t},i._numColumns=2,i._columnBuffer=15,i._sectionBuffer=15,i._rowHeight=115,i._sectionHeight=50,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._dataSource},set:function(t){this._dataSource=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"createSection",{set:function(t){this._createSection=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"createCell",{set:function(t){this._createCell=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numColumns",{get:function(){return this._numColumns},set:function(t){this._numColumns=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnBuffer",{get:function(){return this._columnBuffer},set:function(t){this._columnBuffer=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sectionBuffer",{get:function(){return this._sectionBuffer},set:function(t){this._sectionBuffer=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowHeight",{get:function(){return this._rowHeight},set:function(t){this._rowHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sectionHeight",{get:function(){return this._sectionHeight},set:function(t){this._sectionHeight=t},enumerable:!0,configurable:!0}),i.prototype.populateContentView=function(){t.prototype.populateContentView.call(this);for(var i=-(this._sectionHeight+this._sectionBuffer),n=0;n<this._dataSource.data.length;n++){var e=this._dataSource.updateSection(n,this._createSection());this.contentView.addChild(e),e.legacyTransform.y=Math.ceil(this._dataSource.numberOfItemsInSection(n-1)/this._numColumns)*this._rowHeight+this._sectionHeight+this._sectionBuffer+i,i=e.legacyTransform.y;for(var s=0;s<this._dataSource.numberOfItemsInSection(n);s++){var r=this._dataSource.updateCellAt(n,s,this._createCell());this.contentView.addChild(r);var h=r.legacyTransform;h.x=s%this._numColumns*(h.width+this._columnBuffer),h.y=Math.floor(s/this._numColumns)*this._rowHeight+(e.legacyTransform.y+this._sectionHeight)}}},Object(o.__decorate)([rt("numColumns"),Object(o.__metadata)("design:type",Number)],i.prototype,"_numColumns",void 0),Object(o.__decorate)([rt("columnBuffer"),Object(o.__metadata)("design:type",Number)],i.prototype,"_columnBuffer",void 0),Object(o.__decorate)([rt("sectionBuffer"),Object(o.__metadata)("design:type",Number)],i.prototype,"_sectionBuffer",void 0),Object(o.__decorate)([rt("rowHeight"),Object(o.__metadata)("design:type",Number)],i.prototype,"_rowHeight",void 0),Object(o.__decorate)([rt("sectionHeight"),Object(o.__metadata)("design:type",Number)],i.prototype,"_sectionHeight",void 0),i=Object(o.__decorate)([Q("CollectionScrollView")],i)}(jn),wn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._contentView=null,i}return Object(o.__extends)(i,t),Object(o.__decorate)([ut("contentView"),Object(o.__metadata)("design:type",ot)],i.prototype,"_contentView",void 0),i}(T),En=function(){function t(t){void 0===t&&(t=[]),this._data=[],this._data=t}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),t.prototype.numberOfItemsInSection=function(t){return this._data[t]?this._data[t].cells.length:0},t.prototype.titleForSection=function(t){return this._data[t]?this._data[t].title:""},t.prototype.updateSection=function(t,i){var n=i.findComponentInChildren(wn);return n&&n.updateContentView(this._data[t]),i},t.prototype.updateCellAt=function(t,i,n){var e=n.findComponentInChildren(yn);return e&&e.updateContentView(this._data[t].cells[i]),n},t}(),In=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._enableContinuousPress=!1,i._onKeyDown=new A,i._isEnabled=!0,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"onKeyDown",{get:function(){return this._onKeyDown},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.prototype.create.call(this),f.isDefined(this._keyCode)&&this.initialize(this._keyCode,null,this._enableContinuousPress)},i.prototype.initialize=function(t,i,n){var e=this;void 0===i&&(i=null),void 0===n&&(n=!1),this._keyCode=t,i&&this._onKeyDown.add(i),this._onKeyHandler=function(){e._isEnabled&&e.GameObject.active&&e._onKeyDown.dispatch()};var s=X.instance.game.input.keyboard.addKey(this._keyCode);s.onDown.add(this._onKeyHandler,this),this._enableContinuousPress=n,this._enableContinuousPress&&(this.update=function(){s.isDown&&e._onKeyHandler()})},i.prototype.setEnabled=function(t){this._isEnabled=t},i.prototype.destroy=function(){X.instance.game.input.keyboard.addKey(this._keyCode).onDown.remove(this._onKeyHandler,this),this._onKeyHandler=null,this._onKeyDown.dispose(),t.prototype.destroy.call(this)},Object(o.__decorate)([L(),Object(o.__metadata)("design:type",Number)],i.prototype,"_keyCode",void 0),Object(o.__decorate)([P(),Object(o.__metadata)("design:type",Boolean)],i.prototype,"_enableContinuousPress",void 0),Object(o.__decorate)([W(),Object(o.__metadata)("design:type",A)],i.prototype,"_onKeyDown",void 0),i=Object(o.__decorate)([Q("KeyListener")],i)}(T),An=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._sound=null,i._key="",i._startTime=0,i._duration=1,i._playOnAwake=!1,i._volume=1,i._loop=!1,i}return Object(o.__extends)(i,t),Object.defineProperty(i.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.prototype.create.call(this),this._sound=X.instance.game.sound.add(this._key,this.volume),this._playOnAwake&&this.play()},i.prototype.play=function(t){void 0===t&&(t=null),t&&this._sound.onMarkerComplete.add(t),this._sound.addMarker("play",this._startTime,this._duration),this._sound.play("play",0,this.volume,this.loop)},i.prototype.pause=function(){this._sound&&this._sound.pause()},i.prototype.resume=function(){this._sound&&this._sound.resume()},i.prototype.stop=function(){this._sound&&this._sound.stop()},i.prototype.destroy=function(){this._sound.removeMarker("play"),X.instance.game.sound.remove(this._sound),this._sound=null,t.prototype.destroy.call(this)},Object(o.__decorate)([rt("key"),Object(o.__metadata)("design:type",String)],i.prototype,"_key",void 0),Object(o.__decorate)([rt("startTime"),Object(o.__metadata)("design:type",Number)],i.prototype,"_startTime",void 0),Object(o.__decorate)([rt("duration"),Object(o.__metadata)("design:type",Number)],i.prototype,"_duration",void 0),Object(o.__decorate)([rt("playOnAwake"),Object(o.__metadata)("design:type",Boolean)],i.prototype,"_playOnAwake",void 0),Object(o.__decorate)([rt("volume"),Object(o.__metadata)("design:type",Number)],i.prototype,"_volume",void 0),Object(o.__decorate)([rt("loop"),Object(o.__metadata)("design:type",Boolean)],i.prototype,"_loop",void 0),i=Object(o.__decorate)([Q("Sound")],i)}(T),Tn=function(){function t(t){this.workerInstance=null,this.workerCtor=null,this.workerCtor=t}return t.prototype.start=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){return Object(o.__generator)(this,(function(t){return this.workerInstance||(this.workerInstance=this.workerCtor()),[2,Promise.resolve(this.workerInstance)]}))}))},t.prototype.isReady=function(){return null!==this.workerInstance},t.prototype.stop=function(){this.workerInstance?this.workerInstance=null:c.log("Worker has not been started",h.Error)},t.prototype.getInterface=function(){return this.workerInstance},t}(),Dn=n(313),Sn=function(){function t(t){this.workerSpawner=null,this.workerInstance=null,this.workerInterface=null,this.workerSpawner=t}return t.prototype.start=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t;return Object(o.__generator)(this,(function(i){switch(i.label){case 0:return this.workerInstance?[3,2]:(this.workerInstance=this.workerSpawner(),this.workerInterfacePromise=new(Dn.b(this.workerInstance)),t=this,[4,this.workerInterfacePromise]);case 1:return t.workerInterface=i.sent(),[3,3];case 2:if(!this.workerInterface)return[2,this.workerInterfacePromise];i.label=3;case 3:return[2,Promise.resolve(this.workerInterface)]}}))}))},t.prototype.isReady=function(){return f.isDefined(this.workerInstance)&&f.isDefined(this.workerInterface)},t.prototype.getInterface=function(){return this.workerInterface},t.prototype.stop=function(){var t=this;this.workerInterface?(this.workerInstance.terminate(),this.workerInstance=null,this.workerInterface=null):this.workerInterfacePromise?this.workerInterfacePromise.then((function(){t.stop()})).catch():c.log("Worker has not been started",h.Error)},t}(),Cn=function(){function t(){}return t.createWorker=function(i,n){return 11===Si.getIOSVersion()?new Tn((function(){return new i})):new Sn((function(){var i=null;try{i=new Worker(n)}catch(e){i=t.createBlobWorker(["importScripts('"+n+"');"])}return i}))},t.createBlobWorker=function(t){var i,n,e,s=null,r=null;try{try{r=new Blob(t,{type:"application/javascript"})}catch(a){var o=new(null!==(n=null!==(i=window.BlobBuilder)&&void 0!==i?i:window.WebKitBlobBuilder)&&void 0!==n?n:window.MozBlobBuilder);o.append(t),r=o.getBlob("application/javascript")}var u=(null!==(e=window.URL)&&void 0!==e?e:window.webkitURL).createObjectURL(r);s=new Worker(u)}catch(l){c.log("Could not spawn a blob worker",h.Error)}return s},t}(),Nn=function(){function t(t){var i=this;this.requestPromises=new Map,this.lastRequestId=0;var n="var workerFunction = "+t.toString()+";\n("+this.work.toString()+"())";this.worker=Cn.createBlobWorker([n]),this.worker.onmessage=function(t){var n=t.data[0],e=i.requestPromises.get(n);e?(t.data[1]?e.resolve(t.data[2]):e.reject(t.data[2]),i.requestPromises.delete(n)):i.worker.onerror(new ErrorEvent("Unknown promise",{message:"Promise with ID "+n+" not found in map."}))},this.worker.onerror=function(t){c.log("FunctionWebWorker: An error was thrown that could not be caught gracefully: "+t.message,h.Error)}}return t.prototype.destroy=function(){this.worker.terminate()},t.prototype.execute=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return Object(o.__awaiter)(this,void 0,void 0,(function(){var i,n=this;return Object(o.__generator)(this,(function(e){return i=++this.lastRequestId,this.worker.postMessage({requestId:i,args:t}),[2,new Promise((function(t,i){n.requestPromises.set(n.lastRequestId,{resolve:t,reject:i})}))]}))}))},t.prototype.work=function(){onmessage=function(t){var i=t.data,n=i.requestId,e=i.args;try{null([n,!0,null.apply(null,e)])}catch(s){null([n,!1,s.message])}}},t}(),xn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.points=[{x:0,y:0},{x:100,y:0},{x:100,y:100},{x:0,y:100}],i}return Object(o.__extends)(i,t),Object(o.__decorate)([k(),Object(o.__metadata)("design:type",Array)],i.prototype,"points",void 0),i=Object(o.__decorate)([Q("NavMeshPolygon")],i)}(T),Rn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.points=[{x:0,y:0},{x:100,y:0},{x:100,y:100},{x:0,y:100}],i}return Object(o.__extends)(i,t),Object(o.__decorate)([k(),Object(o.__metadata)("design:type",Array)],i.prototype,"points",void 0),i=Object(o.__decorate)([Q("ColliderPolygon")],i)}(T),Mn=function(){function t(t,i,n,e){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===e&&(e=0),this._position=new w(0,0),this._size=new I(0,0),this._center=new w(0,0),this.x=t,this.y=i,this.width=n,this.height=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._position.x},set:function(t){this._position.x=t,this._center.x=t+this._size.getHalfWidth()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._position.y},set:function(t){this._position.y=t,this._center.y=t+this._size.getHalfHeight()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._size.width},set:function(t){this._size.width=t,this._center.x=this.x+this._size.getHalfWidth()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._size.height},set:function(t){this._size.height=t,this._center.y=this.y+this._size.getHalfHeight()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerX",{get:function(){return this._center.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerY",{get:function(){return this._center.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),t.prototype.setPosition=function(t,i){this.x=t,this.y=i},t.prototype.setSize=function(t,i){this.width=t,this.height=i},t.prototype.containsVector=function(t){return this.containsXY(t.x,t.y)},t.prototype.containsXY=function(t,i){return t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height},t.prototype.isNearlyEqual=function(t,i){return _.isNearlyEqual(this.x,t.x,i)&&_.isNearlyEqual(this.y,t.y,i)&&_.isNearlyEqual(this.width,t.width,i)&&_.isNearlyEqual(this.height,t.height,i)},t.prototype.intersectsRect=function(t){return this.intersectsRectValues(t.x,t.y,t.width,t.height)},t.prototype.intersectsRectValues=function(t,i,n,e){return!(this.x>=t+n||this.x+this.width<=t||this.y>=i+e||this.y+this.height<=i)},t}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return e}));var e=function(){function t(i){t._instance||(t._instance=this),this._game=i};Object.defineProperty(hack, "instance", { get: () => t.instance });return Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"game",{get:function(){return this._game},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prodigy",{get:function(){return this._prodigy},set:function(t){this._prodigy||(this._prodigy=t)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){t._instance=null,this._game=null,this._prodigy=null},t}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return e})),n.d(i,"b",(function(){return m}));var e,s=n(0),r=n(26),h=n(1),o=n(5),u=n(2),a=n(6),c=n(148),l=n(10),f=n(62),b=n(8),v=n(7),d=n(35),O=n(30);!function(t){t[t.UserID=0]="UserID",t[t.ClassID=1]="ClassID",t[t.Grade=2]="Grade"}(e||(e={}));var m=function(){function t(){}return t.capitalize=function(i){return t.isValid(i)?i.charAt(0).toUpperCase()+i.slice(1):""},t.getDate=function(){var t=new Date,i=t.getDate(),n=t.getMonth()+1,e=""+i,s=""+n;return i<10&&(e="0"+i),n<10&&(s="0"+n),""+s+e+t.getFullYear()},t.getDateId=function(){return Math.floor((new Date).getTime()/864e5)},t.convertToUTC=function(t){var i=new Date(t);return i.setMinutes(i.getMinutes()-i.getTimezoneOffset()),i},t.isDateToday=function(t){var i=new Date;return t.getUTCDate()===i.getUTCDate()&&t.getUTCMonth()===i.getUTCMonth()&&t.getUTCFullYear()===i.getUTCFullYear()},t.getDayName=function(t,i){return u.a.instance.prodigy.gameContainer.get(h.GameIdentifiers.LocalizationService).getText("WEEKDAY_NAME_"+i)},t.elapsedTimeInHours=function(t,i){return(i-t)/36e5},t.elapsedTimeInDays=function(i,n){return(t.convertToUTC(n)-t.convertToUTC(i))/864e5},t.addDays=function(t,i){var n=new Date(t);return n.setDate(n.getDate()+i),n},t.convertItemToIcon=function(i){return"gold"===i.type?"item/26":"spell"===i.type?(i.data=t.isValid(i.data)?i.data:v.a.getItem(i.type,i.ID).data,i.data.element):"boss"===i.type?"boss":"player"===i.type?"player":"dorm"===i.type?""+i.ID:t.isValid(i.metadata)&&t.isValid(i.metadata.icon)?""+i.metadata.icon:t.isValid(i.type)&&t.isValid(i.ID)?i.type+"/"+i.ID:t.isValid(i.tag)?i.tag:"string"==typeof i?i:"empty"},t.numberToString=function(t){for(var i=""+t,n="",e=1,s=i.length-1;s>=0;s--)n=""+i.charAt(s)+n,e%3==0&&e>0&&s>0&&(n=","+n),e++;return n},t.isSchoolHours=function(){var t=(new Date).getHours(),i=l.a.get("GameConstants.Debug.SCHOOL_START_HOUR"),n=l.a.get("GameConstants.Debug.SCHOOL_END_HOUR");return t>=i&&t<=n-1},t.isDateWithinSchoolHours=function(t){var i=t.getHours(),n=l.a.get("GameConstants.Debug.SCHOOL_START_HOUR"),e=l.a.get("GameConstants.Debug.SCHOOL_END_HOUR");return i>=n&&i<e},t.isSchoolDay=function(t){var i=t.getDay();return 0!==i&&6!==i},t.isNightTime=function(){var t=(new Date).getHours();return t>=16&&t<=23},t.isDefined=function(t){return!(null==t||"null"===t)},t.isNullOrUndefined=function(t){return null==t},t.isValid=function(t){return!(null==t)},t.has=function(i,n){if(t.isValid(i)){for(var e=n.split("."),s=i,r=0;r<e.length;r++)if(null==(s=s[e[r]])||"null"===s)return!1;return!0}return!1},t.isString=function(t){return"string"==typeof t||t instanceof String},t.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},t.getDateTime=function(){var t=new Date;return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()).getTime()},t.highlightAll=function(i,n,e,s){for(var r=0;r<i.length;r++)t.isValid(i[r].highlight)&&i[r].highlight(n,e,s)},t.getObject=function(i){return"null"===i?null:t.isString(i)?JSON.parse(i):i},t.copyObject=function(i){var n={};if(null===i||"object"!=typeof i)return i;if(i instanceof Array){n=[];for(var e=i.length,s=0;s<e;s++)n[s]=t.copyObject(i[s])}if(i instanceof Object)for(var r in i)i.hasOwnProperty(r)&&(n[r]=t.copyObject(i[r]));return n},t.isEmptyObject=function(i){if(!t.isValid(i))return!0;for(var n in i)if(i.hasOwnProperty(n))return!1;return!0},t.inArray=function(t,i){for(var n=0;n<t.length;n++)if(t[n]===i)return!0;return!1},t.removeMultipleFromArray=function(t,i,n){var e=this,r=Object(s.__spread)(t);return i.forEach((function(t){return e.removeFromArray(t,r,n)})),r},t.removeDuplicates=function(i){for(var n=[],e=0;e<i.length;e++)t.inArray(n,i[e])||n.push(i[e]);return n},t.equalArrays=function(t,i){if(t===i)return!0;if(null===t||null===i)return!1;if(t.length!==i.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==i[n])return!1;return!0},t.equalArrayContents=function(t,i){var n,e;if(t===i)return!0;if(null===t||null===i)return!1;if(t.length!==i.length)return!1;var r=Object(s.__spread)(t);try{for(var h=Object(s.__values)(i),o=h.next();!o.done;o=h.next()){var u=o.value;if(!this.removeFromArray(u,r))return!1}}catch(a){n={error:a}}finally{try{o&&!o.done&&(e=h.return)&&e.call(h)}finally{if(n)throw n.error}}return!(r.length>0)},t.insertionSortY=function(t){for(var i=t.length,n=-1;++n<i;){for(var e=t[n],s=e.y,r=n;--r>=0;){var h=t[r];if(h.y<=s)break;t[r+1]=h}t[r+1]=e}},t.strip=function(t){var i=t;try{i=t.replace(/[^a-zA-Z0-9]/g,"")}catch(n){}return i},t.getUrlVariable=function(t){var i={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,n,e){return i[n]=e})),i[t]},t.getCookie=function(t){for(var i=t+"=",n=document.cookie.split(";"),e=0;e<n.length;e++){for(var s=n[e];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(i))return s.substring(i.length,s.length)}return""},t.removeParamsFromUrl=function(t,i){for(var n=t,e="",s=0;s<i.length;s++)e=i[s],n=n.replace(new RegExp("([?&]+)"+e+"=[^&]*&*","gi"),(function(t,i){return i}));if(n.length>0){var r=n[n.length-1];"?"!==r&&"&"!==r||(n=n.substring(0,n.length-1))}return n},t.removeFromArray=function(t,i,n){void 0===n&&(n=function(t,i){return t===i});for(var e=0;e<i.length;e++)if(n(i[e],t))return i.splice(e,1),!0;return!1},t.moveArrayElement=function(t,i,n){if(n>=t.length)for(var e=n-t.length;e+1!==0;)t.push(void 0),e-=1;return t.splice(n,0,t.splice(i,1)[0]),t},t.centreObject=function(i,n,e,s,r){t.isValid(n)&&t.isValid(s)&&(i.x=n-.5*s),t.isValid(e)&&t.isValid(r)&&(i.y=e-.5*r)},t.getCenteredXY=function(t,i,n,e,s,r){return{x:n+.5*(s-t),y:e+.5*(r-i)}},t.processTime=function(t){if(t<=0)return"00:00";var i=Math.floor(t/36e5),n=Math.floor((t-36e5*i)/6e4),e=Math.floor((t-36e5*i-6e4*n)/1e3),s="",r="",h="";return r=0===n?"00":n<10?"0"+n:""+n,h=0===e?"00":e<10?"0"+e:""+e,"00"===(s=0===i?"00":i<10?"0"+i:""+i)?r+":"+h:i<24?s+":"+r+":"+h:Math.floor(i/24)+" days"},t.calculateItemSpacing=function(t,i,n){return(n-t*i)/(t+1)},t.calculateItemCoordinate=function(t,i,n){return(i+n)*t+n},t.centerItemsWithinContainer=function(i,n,e,s,r){var h={width:0,height:0};if(t.isValid(r))h.width=r.width,h.height=r.height;else{for(var o=0;o<i.length;o++){var u=i[o];u.width>h.width&&(h.width=u.width),h.height+=u.height}h.height/=i.length}var a=e?0:n.x,c=e?0:n.y;t.isValid(s)&&(a+=t.isValid(s.x)?s.x:0,c+=t.isValid(s.y)?s.y:0);var l=t.calculateItemSpacing(i.length,h.width,n.width),f=t.calculateItemSpacing(1,h.height,n.height),b=c+t.calculateItemCoordinate(0,h.height,f);i.forEach((function(i,n){i.x=a+t.calculateItemCoordinate(n,h.width,l),i.y=b}))},t.frameDataToFrameJson=function(t){for(var i={},n=0;n<t.length;n++)i[t[n].name]={frame:{x:t[n].x,y:t[n].y,w:t[n].width,h:t[n].height},trimmed:t[n].trimmed,sourceSize:{w:t[n].sourceSizeW,h:t[n].sourceSizeH},spriteSourceSize:{x:t[n].spriteSourceSizeX,y:t[n].spriteSourceSizeY,w:t[n].spriteSourceSizeW,h:t[n].spriteSourceSizeH}};return{frames:i}},t.filterDuplicateKeys=function(i,n){for(var e=[],s=u.a.instance.prodigy.gameContainer.get("447-4630").player,r=0;r<n.length;r++){var h=n[r];"key"===h.type&&s.backpack.hasItem("key",h.ID)>0||"spell"===h.type&&t.isValid(s.data.spells)&&-1!==s.data.spells.indexOf(h.ID)||e.push(h)}return e},t.validateVersion=function(t){return/^[0-9-]+$/.test(t)?t:null},t.extends=function(t,i,n){for(var e in t.prototype=Object.create(i.prototype),n)t.prototype[e]=n[e]},t.trimText=function(t,i,n){void 0===n&&(n=!1);var e=t;return e.length>i&&(e=t.substring(0,i),n&&(e+="...")),e},t.joinByProperty=function(t,i,n){void 0===n&&(n=",");for(var e="",s=t.length,r=0;r<s;r++)e+=""+t[r][i]+(r<s-1?n:"");return e},t.rgbArrayToHex=function(i){return t.rgb2hex(i[0],i[1],i[2])},t.rgb2hex=function(t,i,n){return n|i<<8|t<<16},t.cleanUpGameID=function(t){for(var i in t)for(var n=0;n<t[i].length;n++)t[i][n].hasOwnProperty("gameID")&&(t[i][n].hasOwnProperty("ID")||(t[i][n].ID=t[i][n].gameID),delete t[i][n].gameID)},t.getEnvironment=function(){var t=window.location.host,i=window.location.search,n="local";return t.indexOf("-qa")>=0||t.indexOf("dev.prodigygame.org")>=0?n="test":t.indexOf("prodigygame.net")>=0||i.indexOf("env=dev")>=0?n="dev":t.indexOf("prodigygame.org")>=0||i.indexOf("env=staging")>=0?n="staging":(t.indexOf("prodigygame.com")>=0||i.indexOf("env=production")>=0||i.indexOf("env=prod")>=0)&&(n="production"),n},t.getEnvironmentByHost=function(){var t=window.location.host,i="local";return t.indexOf("-qa")>=0||t.indexOf("dev.prodigygame.org")>=0?i="test":t.indexOf("prodigygame.net")>=0?i="dev":t.indexOf("prodigygame.org")>=0?i="staging":t.indexOf("prodigygame.com")>=0&&(i="production"),i},t.getUrlByHost=function(){var t=window.location.host;return t.indexOf("prodigygame.net")>=0?"prodigygame.net":t.indexOf("prodigygame.org")>=0?"prodigygame.org":(t.indexOf("prodigygame.com"),"prodigygame.com")},t.getOptionalParameter=function(t,i){return void 0===t?i:t},t.isSpineLoaded=function(t,i){if(t.checkTextKey(i+"Atlas")&&t.checkJSONKey(i)){for(var n=t.getText(i+"Atlas"),e=/\S+(?:\.png|\.jpg|\.jpeg)/g.exec(n),s=0;s<e.length;++s)if(!t.checkImageKey(e[s]))return!1;return!0}return!1},t.getWorldPosition=function(i){var n=0,e=0;if(t.isValid(i)){n=i.position.x,e=i.position.y;for(var s=i.parent;t.isValid(s);)n+=s.position.x,e+=s.position.y,s=s.parent}return{x:n,y:e}},t.getRealWorldPosition=function(t,i,n){return n?{x:t+n.viewMatrix.tx,y:i+n.viewMatrix.ty}:{x:t,y:i}},t.hilightObjectOnLayer=function(i,n,e,s,r){void 0===n&&(n=0),void 0===e&&(e=0);var h=t.isValid(r)?r:s,o=h.add(u.a.instance.prodigy.create.sprite(n,e,"atlas-21","help"));return o.anchor.setTo(.5,1),t.isValid(s)&&(o.x+=t.getWorldPosition(s).x-t.getWorldPosition(h).x,o.y+=t.getWorldPosition(s).y-t.getWorldPosition(h).y),i.add.tween(o).to({y:o.y+25},400,a.a.Quadratic.InOut,!0,0,l.a.MAX_SAFE_INTEGER,!0),o},t.resizeSpriteMaintainingAspectRatio=function(t,i,n){t.width>t.height?(t.scale.x=i/t.width,t.scale.y=t.scale.x):(t.scale.y=n/t.height,t.scale.x=t.scale.y)},t.safeDeleteObjectProperty=function(i,n){t.isValid(i[n])&&delete i[n]},t.deleteFieldsWithNullsOrEmptyStrings=function(i,n){for(var e in void 0===n&&(n=!1),i)i.hasOwnProperty(e)&&(""===i[e]?(n&&h.Logger.log("Util.deleteFieldsWithNullsOrEmptyStrings - deleted key with empty string value named: "+e,h.LogLevel.Verbose),delete i[e]):null===i[e]?(n&&h.Logger.log("Util.deleteFieldsWithNullsOrEmptyStrings - deleted key with null value named: "+e,h.LogLevel.Verbose),delete i[e]):"object"==typeof i[e]&&t.deleteFieldsWithNullsOrEmptyStrings(i[e]))},t.defineLazyLoadedProperty=function(t,i,n,e){void 0===e&&(e=!1),!e&&t.hasOwnProperty(i)||Object.defineProperty(t,i,{get:function(){var e=n.call(t);return Object.defineProperty(t,i,{get:function(){return e}}),e},configurable:!0})},t.generateUID=function(t){void 0===t&&(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx");var i=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(i+=performance.now()),t.replace(/[xy]/g,(function(t){var n=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===t?n:3&n|8).toString(16)}))},t.inTestGroup=function(i,n,s,r,o){void 0===s&&(s=t.LANE_SIZE),void 0===r&&(r=t.TOTAL_LANES),void 0===o&&(o=e.UserID);var u=null,a=l.a.get("GameConstants.Features.SplitTests.DEBUG_LANE");if(t.isValid(a))return n===a;if(n>r-1||n<0)return h.Logger.log("Lane "+n+" is invalid for totalLanes "+r,h.LogLevel.Error),!1;switch(o){case e.UserID:u=i.userID;break;case e.ClassID:u=t.getLatestClassID(i.owners,i.playerTeachers,i.playerParents);break;case e.Grade:u=i.grade;break;default:return h.Logger.log("Invalid type "+o,h.LogLevel.Error),!1}return t.isValid(u)?Math.floor(u/s)%r===n:(h.Logger.log("Invalid ID being used. type = "+o+" player = "+i,h.LogLevel.Error),!1)},t.inTestGroups=function(i,n,s,r,h){void 0===s&&(s=t.LANE_SIZE),void 0===r&&(r=t.TOTAL_LANES),void 0===h&&(h=e.UserID);for(var o=0;o<n.length;o++)if(t.inTestGroup(i,n[o],s,r,h))return!0;return!1},t.getTestLane=function(i,n,s,r){void 0===n&&(n=t.LANE_SIZE),void 0===s&&(s=t.TOTAL_LANES),void 0===r&&(r=e.UserID);var o=null,u=l.a.get("GameConstants.Features.SplitTests.DEBUG_LANE");if(t.isValid(u))return u;switch(r){case e.UserID:o=i.userID;break;case e.ClassID:o=t.getLatestClassID(i.owners,i.playerTeachers,i.playerParents);break;case e.Grade:o=i.grade;break;default:return h.Logger.log("Invalid type "+r,h.LogLevel.Error),-1}return t.isValid(o)?Math.floor(o/n)%s:(h.Logger.log("Invalid ID being used. type = "+r+" player = "+i,h.LogLevel.Error),-1)},t.inTestGroupsBetweenCreationDates=function(i,n,s,r,h,o,u){void 0===s&&(s=t.LANE_SIZE),void 0===r&&(r=t.TOTAL_LANES),void 0===u&&(u=e.UserID);var a=l.a.get("GameConstants.Features.SplitTests.CHARACTER_CREATION_TIME"),c=a>0?a:i.data.startDate;return c>=h&&c<o&&t.inTestGroups(i,n,s,r,u)},t.validateString=function(i,n){void 0===n&&(n="");for(var e=0;e<i.length;e++)if(t.isValid(i[e]))return i[e];return n},t.getLatestClassID=function(i,n,e){var s=[],r=null,h=null,o=null;t.isValid(e)&&e.length>0&&(s=e),t.isValid(n)&&n.length>0&&(s=n);for(var u=0;u<s.length;u++){h=s[u];for(var a=0;a<i.length;a++)r=i[a],h.startDate===r.startDate&&(null===o||r.startDate>o.startDate)&&(o=r)}return t.isValid(o)?o.id:0},t.inTestGroupsBetweenSessionDates=function(i,n,s,r,h,o,u){void 0===u&&(u=e.UserID);var a=(new Date).getTime();return a>=h&&a<o&&t.inTestGroups(i,n,s,r,u)},t.getFriendAndClassmateIds=function(t){var i=u.a.instance.prodigy.friendsListNetworkHandler.classList,n=u.a.instance.prodigy.friendsListNetworkHandler.friendsList;return o.map(i.concat(n),"userID")},t.renderFriendAndClassmateFace=function(t,i,n){var e=u.a.instance.prodigy.friendsListNetworkHandler.classList,s=u.a.instance.prodigy.friendsListNetworkHandler.friendsList;s=s.concat(e);for(var r=0;r<s.length;r++)if(s[r].userID===i){var h=new d.a(t);h.init(s[r]),u.a.instance.prodigy.create.player(n,h,1,0,0,!0,!0,!1,!0).reload();break}},t.clampedLerp=function(t,i,n){var e=n<0?0:n;return t+(i-t)*(e=e>1?1:e)},t.inverseLerp=function(t,i,n){return(n-t)/(i-t)},t.convertLegacyElements=function(t){return"wizard"===t?"astral":"mech"===t?"storm":"earth"===t?"plant":"ice & fire"===t?"water":t},t.spellConversion=function(t){var i={1:55,2:56,3:57,4:58,5:59,6:60,7:81,8:82,9:83,10:84,11:85,12:86,13:67,14:68,15:69,16:70,17:71,18:72,19:61,20:62,21:63,22:64,23:65,24:66,25:75,26:76,27:77,28:78,29:79,30:80,31:49,32:50,33:51,34:52,35:53,36:54};return this.isValid(i[t.ID])?i[t.ID]:t.ID},t.setLastDungeonRun=function(i,n,e){var s=u.a.instance.prodigy.gameContainer.get("447-4630").player,r=s.data.dungeonRunsTimeStamps;if(t.isValid(r)){var h=o.find(r,["dungeonName",n]);t.isValid(h)?h.lastRunTimeStamp=e:r.push({dungeonName:n,lastRunTimeStamp:e})}else r=[{dungeonName:n,lastRunTimeStamp:e}];s.data.dungeonRunsTimeStamps=r},t.getLastDungeonRun=function(i,n){var e=u.a.instance.prodigy.gameContainer.get("447-4630").player;if(t.isValid(e.data.dungeonRunsTimeStamps)){var s=o.find(e.data.dungeonRunsTimeStamps,["dungeonName",n]);if(t.isValid(s))return s}return null},t.createGearMetadata=function(t){var i=v.a.getItemData("hat",t.hat),n=v.a.getItemData("outfit",t.outfit),e=v.a.getItemData("boots",t.boots),s=v.a.getItemData("weapon",t.weapon),r=v.a.getItemData("spellRelic",t.spellRelic);return{hat:o.get(i,"name",null),hat_rarity:o.get(i,"rarity",null),outfit:o.get(n,"name",null),outfit_rarity:o.get(n,"rarity",null),boots:o.get(e,"name",null),boots_rarity:o.get(e,"rarity",null),weapon:o.get(s,"name",null),weapon_rarity:o.get(s,"rarity",null),relic:o.get(r,"name",null),relic_rarity:o.get(r,"rarity",null)}},t.convertRarityToText=function(t,i){var n=u.a.instance.prodigy.gameContainer.get(h.GameIdentifiers.LocalizationService);switch(t){case c.a.Common:return n.getText("RARITY_COMMON");case c.a.Uncommon:return n.getText("RARITY_UNCOMMON");case c.a.Rare:return n.getText("RARITY_RARE");case c.a.Epic:return n.getText("RARITY_HEROIC");case c.a.Legendary:return n.getText("RARITY_LEGENDARY");default:return n.getText("RARITY_COMMON")}},t.isLevelLocked=function(t,i){return t.getLevel()<i},t.bagItem=function(i,n,e,s){u.a.instance.prodigy.gameContainer.get("506-bf49").sendItemChangeEvent(t.isValid(e)?e:"got-item",{type:i.type,ID:t.isValid(i.ID)?i.ID:-1,N:t.isValid(i.N)?i.N:1},s);var r=o.get(v.a.getItem(i.type,i.ID),"data",null),h=["store","memberBox-reward","parent-reward","wheel-of-wonder","twilight-wheel","wheel-of-sun"],a=u.a.instance.prodigy.gameContainer.get("447-4630").player;if("gold"===i.type)a.changeGold(i.N);else if("pet"===i.type)a.kennel.addPet(i.ID,i.data.hp,i.data.stars,i.data.level,i.data.nickname);else if("spell"===i.type)a.addSpell(i.ID);else if("dorm"===i.type)-1===h.indexOf(e)&&u.a.instance.prodigy.notifications.initSocialNotification(f.a.ITEMGENERIC,[{ID:i.ID,type:i.type}]),a.house.add(i.ID);else if("dormbg"===i.type)a.house.setCurrentHouseTag(i.data.tag);else if("key"===i.type)a.backpack.addKeyItem(i.ID,i.lvl,i.data);else if("giftBox"===i.type);else if("item"===i.type){t.isValid(i.type)&&"potion"===i.type?a.backpack.add("item",i.ID,!(1===r.member)||!a.hasMembership()&&1===r.member,t.isValid(i.N)?i.N:1):t.isValid(i.data.seed)?a.backpack.addBountyNote(i.type,i.ID,i.data.seed):a.backpack.add("item",i.ID,!1,t.isValid(i.N)?i.N:1)}else if("currency"===i.type){var c=1===v.a.getItemData(i.type,i.ID).member&&!a.hasMembership();a.backpack.add(i.type,i.ID,c,i.N)}else if("hair"===i.type){var l=a.appearance.getHair();a.appearance.setHair(i.ID,l.color),a.appearanceChanged=!0,n.broadcaster.broadcast(b.r.PlayerAppearanceUpdated,"Card",[])}else if("gender"===i.type)a.appearance.setGender(1===i.ID?"male":"female"),a.appearance.setFace(1===i.ID?4:12),a.appearanceChanged=!0,n.broadcaster.broadcast(b.r.PlayerAppearanceUpdated,"Card",[]);else if("eyeColor"===i.type)a.appearance.setEyeColor(i.ID),a.appearanceChanged=!0,n.broadcaster.broadcast(b.r.PlayerAppearanceUpdated,"Card",[]);else if("skinColor"===i.type)a.appearance.setSkinColor(i.ID),a.appearanceChanged=!0,n.broadcaster.broadcast(b.r.PlayerAppearanceUpdated,"Card",[]);else if("hairColor"===i.type){l=a.appearance.getHair();a.appearance.setHair(l.style,i.ID),a.appearanceChanged=!0,n.broadcaster.broadcast(b.r.PlayerAppearanceUpdated,"Card",[])}else if("face"===i.type)a.appearance.setFace(i.ID),a.appearanceChanged=!0,n.broadcaster.broadcast(b.r.PlayerAppearanceUpdated,"Card",[]);else if("bounty"!==i.type){c=1===v.a.getItemData(i.type,i.ID).member&&!a.hasMembership();t.isValid(i.isGift)&&i.isGift&&(c=!1),t.isValid(i.data.seed)?a.backpack.addBountyNote(i.type,i.ID,i.data.seed):(-1===h.indexOf(e)&&u.a.instance.prodigy.notifications.initSocialNotification(f.a.ITEMGENERIC,[{ID:i.ID,type:i.type}]),a.backpack.add(i.type,i.ID,c,i.N))}a.appearanceChanged&&("gender"===i.type?u.a.instance.prodigy.gameContainer.get("adf-10da").create("avatar-change-gender","menu",null,a.appearance.getGender()).broadcast():u.a.instance.prodigy.gameContainer.get("adf-10da").create("avatar-change","menu",null,i.type).broadcast())},t.getStoreEventsCustomObject=function(t,i){var n={};if(i&&(n.member_locked=Boolean(i.member),n.level_locked=i.lockLevel,n.rarity=i.rarity),t){var e=t.getCost();e.length>0&&(n.cost=e[0].getAmount(),n.currency=v.a.getItem(e[0].getType(),e[0].getID()).data.name)}return n},t.setOuterWidth=function(t,i){t.style.width=i-(t.style.paddingLeft?parseInt(t.style.paddingLeft):0)-(t.style.paddingRight?parseInt(t.style.paddingRight):0)-(t.style.borderLeftWidth?parseInt(t.style.borderLeftWidth):0)-(t.style.borderRightWidth?parseInt(t.style.borderRightWidth):0)+"px"},t.setOuterHeight=function(t,i){t.style.height=i-(t.style.paddingTop?parseInt(t.style.paddingTop):0)-(t.style.paddingBottom?parseInt(t.style.paddingBottom):0)-(t.style.borderTopWidth?parseInt(t.style.borderTopWidth):0)-(t.style.borderBottomWidth?parseInt(t.style.borderBottomWidth):0)+"px"},t.normalizeRange=function(t,i,n){return i>t?(n-t)/(i-t):i<t?this.normalizeRange(i,t,n):i},t.shouldSuppressAd=function(t,i){return void 0===i&&(i=!0),t.isPlayingAtSchool()&&(!i||i&&!t.hasMembership())},t.showYouTubeMembershipAd=function(i,n){void 0===n&&(n=!0);var e,s,r=u.a.instance.prodigy.gameContainer.get("d3c-0d33"),h=u.a.instance.prodigy.gameContainer.get("447-4630").player;return r.getValue("enableMembershipVideoAd",!1)&&!h.isPlayingAtSchool()&&(e=r.getValue("disableMembershipVideoAdDuringSchoolHours",!0),s=r.getValue("useServerTimeForVideoLockout",!0)?new Date(u.a.instance.prodigy.timeManager.getServerTimeMs()):new Date,!(e&&t.isSchoolDay(s)&&t.isDateWithinSchoolHours(s)))&&!O.a.isNativeApp()&&!(n&&t.isValid(h.data.membershipVideoTimeStamp)&&t.isDateWithinSameDay(new Date(h.data.membershipVideoTimeStamp),new Date(u.a.instance.prodigy.timeManager.getServerTimeMs())))},t.isDateWithinSameDay=function(t,i){return t.getDate()===i.getDate()&&t.getMonth()===i.getMonth()&&t.getFullYear()===i.getFullYear()},t.validateInt=function(t,i){if(void 0===i&&(i=0),"number"!=typeof t){var n=parseInt(t,10);return Number.isNaN(n)?i:n}return Number.isNaN(t)?i:t},t.wrapArrayIndex=function(t,i){if(i<=0)return null;for(var n=t;n<0;)n+=i;for(;n>=i;)n-=i;return n},t.guaranteeArray=function(i){return t.isValid(i)?Array.isArray(i)?i:[i]:[]},t.logUpdateUserFailed=function(){var t=new r.StatsData;t.setKey("prodigy_game.education.updateUserFailed"),t.setValue(1),u.a.instance.prodigy.gameContainer.get("c0d-1ede").logStat(t,r.EStatsType.Increment),h.Logger.log("Education update user failed.",h.LogLevel.Error)},t.DEBUG_DAY_LENGTH=864e5,t.LANE_SIZE=1e3,t.TOTAL_LANES=10,t}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return h}));var e=n(13),s=n(66),r=n(25),h=function(){function t(){}return t.FEATURE_NAME="FEATURE_TOWERTOWN",t.TOWER_TOWN_MAP="tower_town-A1",t.TOWER_TOWN_TUTORIAL_MAP="tower_town-A0",t.MAP_INFINITY_TOWER_CONSTRUCTION="towertown-default-1",t.CURRENCY_FIRE=21,t.CURRENCY_ICE=22,t.CURRENCY_PLANT=23,t.CURRENCY_WATER=24,t.CURRENCY_STORM=25,t.ATLAS_CORE="atlas-18",t.ATLAS_CORE_2="atlas-19",t.ATLAS_ICONS="atlas-21",t.ATLAS_TOY_ZONE="atlas-126",t.ATLAS_MATH_TOWER="atlas-128",t.ATLAS_SWOOPY_FACE="atlas-138",t.ATLAS_SHARED="atlas-144",t.ATLAS_UI_TITAN="atlas-145",t.ATLAS_SHIPWRECK_PROGRESS="atlas-148",t.ATLAS_SHIVERCHILL_PROGRESS="atlas-149",t.ATLAS_BAM="atlas-167",t.ATLAS_BUTTONS="atlas-179",t.ATLAS_DIALOGUES="atlas-180",t.ATLAS_STORE="atlas-181",t.ATLAS_REGISTRATION="atlas-189",t.ATLAS_TOWERTOWN_MISC="atlas-190",t.ATLAS_TOWERTOWN="atlas-191",t.ATLAS_UI_ICONS="atlas-192",t.ATLAS_PANELS="atlas-193",t.ATLAS_FLING_TARGETS="atlas-198",t.ATLAS_RESEARCH_POINTS="atlas-199",t.ATLAS_FLAGS="atlas-202",t.ATLAS_TOPIC_ICONS="atlas-203",t.ATLAS_SWOOPY_FACE_FRAME_LAUGH="face_0",t.ATLAS_SWOOPY_FACE_FRAME_DEFAULT="face_1",t.ATLAS_SWOOPY_FACE_FRAME_THINK="face_2",t.SPINE_SHADOW_PORTAL="spine-81",t.SPINE_SMART_BLOCK_VFX="spine-186",t.SPINE_FLOATING_FIRE_1="spine-190",t.SPINE_FLOATING_ICE_1="spine-195",t.SPINE_FLOATLING_PLANT_1="spine-201",t.SPINE_FLOATLING_STORM_1="spine-206",t.SPINE_LUMIN_TREE="spine-219",t.SPINE_SWOOPY="spine-221",t.SPINE_FLING_SHIMMER="spine-231",t.SPINE_STUBBORN_SHADOW="spine-239",t.SPINE_SHROUD_CLOUD="spine-240",t.SPINE_SHADOW_CLASH="spine-241",t.SPINE_FLAGPOLE="spine-247",t.FLOATLING_FLING_BACKGROUND="singleImage-239",t.FLOATLING_FLING_RESEARCH_ICONS="singleImage-246",t.POPUP_NO_FLOATLINGS_ICON="singleImage-251",t.POPUP_INFINITY_TOWER_CLOSE="singleImage-248",t.POPUP_INFINITY_TOWER_OPEN="singleImage-249",t.POPUP_TOWER_TOWN_OPEN="singleImage-282",t.FRAME_LEFT_BAR="meter-fill-left-green",t.FRAME_RIGHT_BAR="meter-fill-right-green",t.FRAME_MIDDLE_BAR="meter-fill-mid-green",t.ASSET_ORANGE_FLAG_FRAME="skill-flag-g-ss",t.ASSET_BLUE_FLAG_FRAME="skill-flag-p-a",t.ASSET_RED_FLAG_FRAME="skill-flag-dm-p",t.ASSET_PURPLE_FLAG_FRAME="skill-flag-m",t.ASSET_TURQOISE_FLAG_FRAME="skill-flag-ns-n",t.UI_ADD_FLOOR_PREFAB=33,t.UI_ARROW_HUD_PREFAB=34,t.UI_BUILD_COMPONENT_PREFAB=24,t.UI_CHOOSE_FLOOR_LOOK_PREFAB=30,t.UI_LARGE_LIST_ITEM_PREFAB=29,t.UI_SMALL_LIST_ITEM_PREFAB=36,t.UI_TOOLTIP_PREFAB=31,t.UI_SHROUD_LOCK_PREFAB=40,t.UI_DECORATION_POINTS_PREFAB=39,t.UI_FLOOR_LOOK_PREFAB=38,t.UI_RESEARCH_POINTS_PANEL_PREFAB=37,t.UI_CORNER_PREFAB=41,t.UI_TOWER_TOWN_MALL_PREFAB=79,t.UI_TOWER_TOWN_MALL_SHOP_PREFAB=80,t.UI_TOWER_TOWN_MALL_SCROLLVIEW=82,t.UI_TOWER_TOWN_MALL_SCROLLBAR=84,t.UI_TOWER_TOWN_MALL_HATSTORE_AD=88,t.UI_TUTORIAL_TAG=78,t.UI_ROOFTOP_MASTERY=81,t.UI_MOVE_FLOOR=91,t.UI_TOWER_TOWN_SHOP_ROOM_SIDEBAR=89,t.UI_STORE_ITEM_DESCRIPTOR=92,t.UI_TOWER_TOWN_UPDATE=90,t.UI_QUICK_RENOVATION=111,t.UI_INFINITY_TOWER_TOP_RIGHT_CONTAINER=103,t.UI_CLOSED_RED_MESSAGE=104,t.UI_SMALL_WARNING_MESSAGE=105,t.UI_PROGRESS_BAR_200=106,t.UI_INFINITY_TOWER_PROGRESS=107,t.UI_NEW_GRADE_PREFAB=158,t.POPUP_NO_FLOATLINGS_TITLE="FF_POPUP_NO_FLOATLING_TITLE",t.POPUP_NO_FLOATLINGS_BODY="FF_POPUP_NO_FLOATLING_BODY",t.POPUP_NO_FLOATLINGS_CONFIRM="BUTTON_OKAY_CAPITAL",t.POPUP_FLING_FINISH_TITLE="FF_POPUP_FINISH_TITLE",t.POPUP_FLING_FINISH_BODY="FF_POPUP_FINISH_BODY",t.POPUP_FLING_FINISH_BUTTON="BUTTON_OKAY_CAPITAL",t.POPUP_FLING_COLLECT_TITLE="FF_POPUP_COLLECT_TITLE",t.POPUP_FLING_COLLECT_BODY="FF_POPUP_COLLECT_BODY",t.FLING_CLICK_AND_DRAG="FF_CLICK_AND_DRAG",t.TOOLTIP_FLOOR_FINISHED="TT_TOOLTIP_FLOOR_COMPLETE",t.HEADER_MOVE_FLOOR="TT_MOVE_FLOOR_HEADER",t.WARNING_TOP_FORWARD="TT_MOVE_FLOOR_TOP_ONLY_FORWARD",t.WARNING_BOTTOM_BACK="TT_MOVE_FLOOR_BOTTOM_ONLY_BACK",t.MOVE_FLOOR_MINIMUM_WARNING="TT_MOVE_FLOOR_MINIMUM_WARNING",t.MOVE_FLOOR_TOP_BOTTOM="TT_MOVE_FLOOR_TOP_BOTTOM_ONLY",t.MOVE_FLOOR_PREV_TALL="TT_MOVE_FLOOR_PREV_TALL",t.MOVE_FLOOR_NEXT_TALL="TT_MOVE_FLOOR_NEXT_TALL",t.MOVE_FLOOR_FIRST="TT_MOVE_FIRST_FLOOR",t.POPUP_FLING_QUIT_CONFIRM="BUTTON_QUIT_CAPITAL",t.POPUP_FLING_QUIT_DECLINE="BUTTON_STAY_TEAM",t.POPUP_FLING_QUIT_TITLE="BUTTON_QUIT_QUESTION",t.POPUP_FLING_QUIT_BODY="FF_QUIT_BODY",t.TT_ROOMMATES="TT_ROOMMATES",t.TT_BLOCKED_FLOOR="TT_MOVE_FLOOR_BLOCKED",t.POPUP_STUBBORN_SHADOW_QUIT_BODY="TT_STUBBORN_SHADOW_QUIT_BODY",t.POPUP_STUBBORN_SHADOW_QUIT_TITLE="BUTTON_QUIT_QUESTION",t.POPUP_STUBBORN_SHADOW_QUIT_BUTTON="BUTTON_QUIT_CAPITAL",t.POPUP_STUBBORN_SHADOW_STAY_BUTTON="BUTTON_STAY_TEAM",t.POPUP_SHROUD_QUIT_BODY="TT_SHROUD_QUIT_CONFIRM_BODY",t.POPUP_SHROUD_QUIT_TITLE="BUTTON_QUIT_QUESTION",t.POPUP_SHROUD_QUIT_BUTTON="BUTTON_QUIT_CAPITAL",t.POPUP_SHROUD_STAY_BUTTON="BUTTON_STAY_TEAM",t.POPUP_CHOOSE_FLOOR_QUIT_BUTTON="BUTTON_QUIT_CAPITAL",t.POPUP_CHOOSE_FLOOR_STAY_BUTTON="BUTTON_STAY_TEAM",t.POPUP_CHOOSE_FLOOR_QUIT_TITLE="BUTTON_QUIT_QUESTION",t.POPUP_CHOOSE_FLOOR_QUIT_BODY="TT_CHOOSE_FLOOR_QUIT_BODY",t.TT_TOWER_WORK_DONE="TT_TOWER_WORK_DONE",t.TT_START_BUILDING="TT_START_BUILDING",t.TT_TOWER_TOWN_OPEN="TT_TOWER_TOWN_OPEN",t.TT_INFINITY_TOWER_OPEN_BODY="TT_INFINITY_TOWER_OPEN_BODY",t.TT_INFINITY_TOWER_OPEN="TT_INFINITY_TOWER_OPEN",t.TT_FINISH_TOWER_FIRST="TT_FINISH_TOWER_FIRST",t.TT_FINISH_TOWER_ON_ADD="TT_FINISH_TOWER_ON_ADD",t.TT_TOWER_CLOSED_LINKTXT="TT_TOWER_CLOSED_LINKTXT",t.TT_TOWER_CLOSED_FOOTER="TT_TOWER_CLOSED_FOOTER",t.TT_TOWER_CLOSED_BODY="TT_TOWER_CLOSED_BODY",t.TT_INFINITY_TOWER_CLOSED="TT_INFINITY_TOWER_CLOSED",t.TT_TOWER_CLOSED_LINK="TT_TOWER_CLOSED_LINK",t.TT_STORE_TOO_MANY_ITEMS="STORE_TOOLTIP_MESSAGE_2",t.TT_STORE_ALREADY_OWNED="STORE_TOOLTIP_MESSAGE_5",t.TT_STORE_ITEM_LOCKED="STORE_TOOLTIP_MESSAGE_6",t.TT_STORE_ITEM_BUY_LOCKED="STORE_TOOLTIP_MESSAGE_4",t.TT_STORE_YOU_NEED_MORE="STORE_TOOLTIP_MESSAGE_3",t.TT_STORE_ITEM_LOCKED_HEADER="STORE_TOOLTIP_HEADER_4",t.TT_STORE_NOT_ENOUGH_HEADER="STORE_TOOLTIP_HEADER_3",t.POPUP_TOWER_TOWN_REDIRECT="TOWER_TOWN_REDIRECT",t.POPUP_TOWER_TOWN_GO_TO="TOWER_TOWN_GO_POPUP",t.POPUP_NEW_TOWN_BUTTON="NEW_TOWN_POPUP_BUTTON",t.POPUP_NEW_TOWN_TITLE="NEW_TOWN_POPUP_TITLE",t.POPUP_NEW_TOWN_BODY="NEW_TOWN_POPUP_BODY",t.ASSET_TYPE_DECORATION="mathTownDecor",t.ASSET_TYPE_FRAME="mathTownFrame",t.ASSET_TYPE_INTERIOR="mathTownInterior",t.ASSET_TYPE_STREET_FURNITURE="mathTowerOrnament",t.BASE_MENU_ASSET_ID=74,t.PUPPETMASTER_BGM="bgm-12",t.TOWER_TOWN_BGM="bgm-27",t.FLOATLING_FLING_BGM="bgm-28",t.PUPPETMASTER_BGM_ID=12,t.TOWER_TOWN_BGM_ID=27,t.FLOATLING_FLING_BGM_ID=28,t.SHADOW_PORTAL_OPEN="sfx-34",t.SHADOW_PORTAL_CLOSE="sfx-35",t.TOWER_TOWN_SFX="sfx-48",t.FLOATLING_FLING_SFX="sfx-47",t.SHADOW_PORTAL_OPEN_ID=34,t.SHADOW_PORTAL_CLOSE_ID=35,t.TOWER_TOWN_SFX_ID=48,t.FLOATLING_FLING_SFX_ID=47,t.LAND_FLOATLING="landaFloatling",t.LAUNCH_FLOATLING="launchaFloatling",t.CLEAR_SHROUD="clearaShroud",t.COMPLETE_FLOOR="completeaFloor",t.STUBBORN_SHADOW_DEFEAT="defeataStubbornShadow",t.STUBBORN_SHADOW_DEFEND="StubbornShadowDefend",t.STUBBORN_SHADOW_DROP="droppingaStubbornShadow",t.DROP_BLOCK="droppingaBlock",t.FLAG_SMOKE_ANIMATION="spine-smoke-flagmask",t.PORTAL_APPEAR_ANIMATION="appear",t.PORTAL_IDLE_ANIMATION="idle",t.PORTAL_DISAPPEAR_ANIMATION="disappear2",t.STUBBORN_SHADOW_APPEAR_ANIMATION="appear",t.STUBBORN_SHADOW_IDLE_ANIMATION="idle",t.STUBBORN_SHADOW_DEFEND_ANIMATION="defend",t.STUBBORN_SHADOW_SUSTAIN_ANIMATION="sustain",t.STUBBORN_SHADOW_DEATH_ANIMATION="die",t.BEAM_TRAVEL_ANIMATION="beam-travel",t.BEAM_END_ANIMATION="beam-end",t.SHADOW_BEAM_TRAVEL_ANIMATION="beam-travel-shadow",t.SHADOW_BEAM_END_ANIMATION="beam-end-shadow",t.SPELL_SUMMON_ANIMATION="summon-create",t.SPELL_TRAVEL_ANIMATION="summon-travel",t.SPELL_END_ANIMATION="summon-end",t.SPELL_CLASH_ANIMATION="cap-clash",t.SPELL_CLASH_END_ANIMATION="cap-end",t.SHADOW_PORTAL_ANIMATION_APPEAR="appear",t.SHADOW_PORTAL_ANIMATION_IDLE="idle",t.SHADOW_PORTAL_ANIMATION_DISAPPEAR="disappear2",t.STUBBORN_SHADOW_ANIMATION_APPEAR="appear",t.STUBBORN_SHADOW_ANIMATION_IDLE="idle",t.TOWN_BG_COLOR=8703726,t.TUTORIAL_BG_COLOR=1585480,t.DEFAULT_EDUCATION_GRADE=1,t.DEFAULT_ITEM_COUNT=10,t.ADD_FLOOR_BUTTON_OFFSET=45,t.BLOCK_FALL_DURATION_SECONDS=.2,t.BLOCK_FALL_HEIGHT=250,t.BLOCK_OFFSET_X=34,t.BLOCK_OFFSET_Y=54,t.CAMERA_Y_OFFSET=298,t.CAMERA_Y_OFFSET_QUICK_RENO=268,t.CAMERA_X_OFFSET=-500,t.PLAYER_CAMERA_OFFSET_X=180,t.PLAYER_CAMERA_OFFSET_Y=680,t.PLAYER_FLING_OFFSET_X=100,t.PLAYER_FLING_OFFSET_Y=500,t.SWOOPY_OFFSET_X=-25,t.SWOOPY_OFFSET_Y=-90,t.FLOOR_HEIGHT=134,t.FLOOR_WIDTH=416,t.FLOOR_TUTORIAL_OFFSET=320,t.GAME_CHALLENGE_SCENARIO_ID=10001,t.MAX_SMART_BLOCKS=10,t.TUTORIAL_SMART_BLOCKS=5,t.RENDERER_JUMP_PERCENTAGE=.5,t.RENDERER_OFFSET_PERCENTAGE=.25,t.RENDERER_OFFSET_PERCENTAGE_INFINITY_TOWER=.5,t.TOWER_BASE_Y=450,t.PLAYER_BASE_Y=450,t.UI_BUILD_INTERFACE_X=250,t.UI_BUILD_INTERFACE_Y=250,t.UI_BUILD_INTERFACE_X_OFFSET=20,t.MAX_DECORATION_SLOTS=5,t.FRAME_HEIGHT=196,t.FRAME_WIDTH=416,t.FRAME_HALF_WIDTH=208,t.IN_PROGRESS_PREFAB_X_OFFSET=-169,t.IN_PROGRESS_PREFAB_Y_OFFSET=-49,t.FLOOR_LOOK_PREFAB_X_OFFSET=-200,t.FLOOR_LOOK_PREFAB_Y_OFFSET=-120,t.BLOCK_APPEAR_TIMESCALE=2.5,t.BLOCK_FALL_TIMESCALE=1.5,t.BLOCK_FALL_MULTIPLE_DELAY=300,t.BLOCK_FALL_SHAKE_DISTANCE=20,t.BLOCK_FALL_SHAKE_IN_TIME=50,t.BLOCK_FALL_SHAKE_OUT_TIME=200,t.BLOCK_FALL_SHAKE_ANIMATION_DELAY=230,t.MS_DAY=864e5,t.TOOLTIP_SLIDE_DURATION=500,t.TOOLTIP_WIDTH=380,t.TOOLTIP_STAY_DURATION=3e3,t.TOOLTIP_OFFSET_X=125,t.MOVE_HEADER_WIDTH=340,t.STUBBORN_SHADOW_OFFSET_X=140,t.STUBBORN_SHADOW_OFFSET_Y=-90,t.STUBBORN_SHADOW_PLAYER_OFFSET_X=-350,t.STUBBORN_SHADOW_PLAYER_OFFSET_Y=0,t.SHADOW_PORTAL_OFFSET=new e.a(0,-250),t.SPELL_CLASH_START_OFFSET=-400,t.SPELL_CLASH_END_OFFSET=-40,t.SPELL_CLASH_X_OFFSET=20,t.SPELL_CLASH_Y_OFFSET=30,t.SPELL_CLASH_SCALE=.7,t.SPELL_MASK_FILL=0,t.SPELL_MASK_SKIN_WIDTH=60,t.SPELL_MASK_HEIGHT=200,t.SPELL_MASK_OFFSET_Y=100,t.BEAM_SCALE_X=.9,t.BUTTON_FLASH_DURATION_MS=150,t.LUMIN_TREE_OFFSET_Y=40,t.MOVE_FLOOR_BUTTON_OFFSET_X=200,t.MOVE_FLOOR_WARNING_OFFSET_X=-175,t.MOVE_FLOOR_WARNING_OFFSET_Y=-110,t.WARNING_ARROW_OFFSET_X=20,t.WARNING_ARROW_OFFSET_Y=-7,t.FLOOR_FINISHED_TOOLTIP_WIDTH=350,t.CHOOSE_FLOOR_BUILD_BUTTON_OFFSET_X=120,t.CHOOSE_FLOOR_BUILD_BUTTON_OFFSET_Y=90,t.FLAG_VISIBILITY_DELAY_MS=200,t.STUBBORN_SHADOW_BOUNDS_OFFSET_X=300,t.STUBBORN_SHADOW_CAMERA_OFFSET_X=600,t.NO_SKILL_FLAG_ICON_ID=-1,t.TOWER_RENDERER_CAMERA_HEIGHT=8,t.PUPPET_MASTER_PORTAL_OFFSET_X=-50,t.PUPPET_MASTER_TWEEN_TO_PORTAL_DELAY_MS=1200,t.BUTTON_DEBOUNCE_TIME=300,t.CHARACTER_TWEEN_DELAY_MS=200,t.SCRIM_ALPHA=.6,t.SCRIM_SCALE_X=20,t.SCRIM_SCALE_Y=40,t.SCRIM_OFFSET_X_IN_SCREENS=3,t.SCRIM_OFFSET_Y_IN_SCREENS=10,t.NEW_TOWN_POPUP_SIZE=300,t.FLOATLING_WALK_AREA=new s.a(-250,50,500,200),t.FLOATLING_WALK_PIXELS_PER_SECOND=70,t.FLOATLING_WALK_MIN_IDLE_MS=3e3,t.FLOATLING_WALK_MAX_IDLE_MS=1e4,t.FLOATLING_IMMEDIATE_WALK_RATIO=.2,t.FLOATLING_FLOOR_X_OFFSET=50,t.FLOATLING_FLOOR_Y_OFFSET=-35,t.FLOATLING_MAX_COUNT_DISPLAYED=8,t.FLOATLING_FLOAT_MIN_START_Y_OFFSET=-700,t.FLOATLING_FLOAT_MAX_START_Y_OFFSET=-500,t.FLOATLING_FLOAT_HALF_ARC_WIDTH=50,t.FLOATLING_FLOAT_MIN_DELAY_MS=0,t.FLOATLING_FLOAT_MAX_DELAY_MS=400,t.FLOATLING_FLOAT_LAST_FLOATED_OFFSET_MS=600,t.FLOATLING_FLOAT_PIXELS_PER_SECOND=60,t.FLOATLING_FLY_AWAY_MS=1700,t.BUTTON_OFFSET_X=65,t.BUTTON_OFFSET_Y=34,t.SHROUD_OFFSET_Y=30,t.SHROUD_CLEAN_SPELLS=20,t.THETA_MAXIMUM=3,t.THETA_MINIMUM=-3,t.TUTORIAL_GRADE=-1,t.DIALOGUE_SHROUD_FTUE_1=914,t.DIALOGUE_SHROUD_FTUE_2=915,t.DIALOGUE_SHROUD_FTUE_3=916,t.DIALOGUE_SHROUD_FTUE_4=917,t.DIALOGUE_START_CLICKING_BUTTON=920,t.DIALOGUE_CHOOSE_THE_LOOK=921,t.DIALOGUE_CAST_SPELLS_FOR_BLOCKS=922,t.DIALOGUE_SPEED_UP_BLOCK_NUMBERS=923,t.DIALOGUE_FORCE_CORRECT_ANSWER=924,t.DIALOGUE_ALL_DONE=925,t.DIALOGUE_RETURNING_FLOATLINGS=926,t.DIALOGUE_GATHERED_KNOWLEDGE=927,t.DIALOGUE_LETS_GET_TO_WORK=928,t.DIALOGUE_THANK_GOODNESS=945,t.DIALOGUE_LUMIN_TREE=946,t.DIALOGUE_SHOW_YOU=947,t.DIALOGUE_BUILDING_BASICS=952,t.DIALOGUE_FLOATLING_TYPES=953,t.DIALOGUE_WEAKENED_PUPPETMASTER=954,t.FLING_FTUE_MISSED=959,t.FLING_FTUE_POST_FLING=939,t.FLING_FTUE_INTRO_DIALOGUES=[937,949,938,950,951],t.FLING_FTUE_OUTRO_DIALOGUES=[969,970],t.STORE_FTUE_OUTRO_DIALOGUE=[971,972,973],t.DIALOGUE_WELCOME_BACK=960,t.DIALOGUE_STUBBORN_SHADOW_FTUE_1=929,t.DIALOGUE_STUBBORN_SHADOW_FTUE_2=956,t.DIALOGUE_STUBBORN_SHADOW_FTUE_3=930,t.DIALOGUE_STUBBORN_SHADOW_FTUE_4=931,t.DIALOGUE_STUBBORN_SHADOW_FTUE_5=933,t.DIALOGUE_STUBBORN_SHADOW_FTUE_6=957,t.DIALOGUE_STUBBORN_SHADOW_FTUE_7=974,t.DIALOGUE_STUBBORN_SHADOW_FTUE_8=935,t.DIALOGUE_STUBBORN_SHADOW_FTUE_9=958,t.DIALOGUE_STUBBORN_SHADOW_DUEL_CHOICE=934,t.FLAG_ORANGE_SKILL_IDS=[1,2,8,42,46,47],t.FLAG_BLUE_SKILL_IDS=[28,29,30,41,45,50,54,73,84],t.FLAG_RED_SKILL_IDS=[14,60,75],t.FLAG_PURPLE_SKILL_IDS=[9,48,49,62,81,82],t.STORE_PLANT=40,t.STORE_FIRE=41,t.STORE_ICE=42,t.STORE_WATER=43,t.STORE_STORM=44,t.STORE_HAT=-1,t.ZONE_CURRENCY_IDS=[13,15,16,12,14],t.ZONE_CURRENCY_PAYOUT=10,t.SHROUD_CORRECT_PAYOUT=1,t.ROOFTOP_CORRECT_PAYOUT=1,t.FIRE_RESEARCH_CURRENCY=21,t.ICE_RESEARCH_CURRENCY=22,t.PLANT_RESEARCH_CURRENCY=23,t.WATER_RESEARCH_CURRENCY=24,t.STORM_RESEARCH_CURRENCY=25,t.FLING_PIP_SPREAD=.07,t.FLING_PIP_COUNT=12,t.FLING_GRAVITY=98,t.FLING_GRAVITY_POWER=3,t.FLING_FIRE_POWER_MULTIPLIER=2,t.FLING_FIRE_POWER_MAX=600,t.FLING_MIN_DRAG_DISTANCE=50,t.FLING_CAMERA_TWEEN_IN_MS=1e3,t.FLING_CAMERA_TWEEN_OUT_MS=3e3,t.FLING_CAMERA_LEAVE_DELAY_MS=1e3,t.FLING_PLAYER_DELAY_OFFSET_MS=100,t.FLING_MAX_COUNT_DISPLAYED=10,t.FLING_WAITING_SPAWN_OFFSET=400,t.FLING_WAITING_SPAWN_TWEEN_MS=2e3,t.FLING_WAITING_SHARED_OFFSET=100,t.FLING_WAITING_INDIVIDUAL_OFFSET=25,t.FLING_WAITING_MIN_X=-180,t.FLING_WAITING_MAX_X=-100,t.FLING_FTUE_POINTS_PER_SHOT=140,t.FLING_FTUE_INTRO_DIALOGUE_Y_OFFSET=120,t.FLING_FTUE_FLOATLING_COUNT=2,t.FLING_SCORE_MANAGER_X=532,t.FLING_SCORE_MANAGER_Y=32,t.SPACE_16PX=16,t.SCREEN_HEIGHT=720,t.SCREEN_WIDTH=1280,t.STATE_BUILD="build",t.STATE_CAMERA="camera",t.STATE_CHOOSE_FLOOR="chooseFloor",t.STATE_START="start",t.STATE_SHROUD="shroud",t.STATE_ROOFTOP="rooftop",t.STATE_MOVE="move",t.STATE_FLING="fling",t.STATE_INFINITY="infinity",t.STATE_INFINITY_CHOOSE_FLOOR="infinityChooseFloor",t.STATE_INFINITY_BUILD="infinityBuild",t.STATE_QUICK_RENO="quickReno",t.STATE_TUTORIAL_START="tutorialStart",t.STATE_TUTORIAL_BUILD="tutorialBuild",t.STATE_TUTORIAL_CHOOSE_FLOOR="tutorialFloor",t.STATE_TUTORIAL_END="tutorialEnd",t.TUTORIAL_CUTSCENE="tower_town-intro",t.MESSAGE_DISABLE_NAVIGATION="tt-navigation-disable",t.MESSAGE_ENABLE_NAVIGATION="tt-navigation-enable",t.MESSAGE_DISABLE_FLING_BUTTON="tt-fling-button-disable",t.MESSAGE_ENABLE_FLING_BUTTON="tt-fling-button-enable",t.MESSAGE_ENABLE_BUTTON="tt-enable-button",t.MESSAGE_DISABLE_BUTTON="tt-disable-button",t.ELEMENT_STRINGS=[r.a.Plant,r.a.Ice,r.a.Storm,r.a.Fire,r.a.Water],t.FLING_CURRENCY_ORDER=[t.CURRENCY_PLANT,t.CURRENCY_ICE,t.CURRENCY_STORM,t.CURRENCY_FIRE,t.CURRENCY_WATER],t.MAX_FLOATLING_LEVELS=5,t.POINTER_BOUNCE_MS=750,t.DECORATION_PREFAB_HEIGHT=46,t.DECORATION_FLOOR_OFFSET=20,t.DECORATION_OFFSETS=[new e.a(-t.FRAME_WIDTH/2,-t.FRAME_HEIGHT/2+t.DECORATION_PREFAB_HEIGHT/2-t.DECORATION_FLOOR_OFFSET),new e.a(-t.FRAME_WIDTH/2,-t.FRAME_HEIGHT+t.DECORATION_PREFAB_HEIGHT),new e.a(0,-t.FRAME_HEIGHT+t.DECORATION_PREFAB_HEIGHT),new e.a(t.FRAME_WIDTH/2,-t.FRAME_HEIGHT+t.DECORATION_PREFAB_HEIGHT),new e.a(t.FRAME_WIDTH/2,-t.FRAME_HEIGHT/2+t.DECORATION_PREFAB_HEIGHT/2-t.DECORATION_FLOOR_OFFSET)],t.DEFAULT_FLOOR_ROOM_ID=1,t.DEFAULT_FLOOR_FRAME_ID=2,t.TILESET_CLOUD="tileset-cloud",t.TILESET_CLOUD_NEW="tileset-cloud-new",t.TILESET_COLLISIONS="tileset-collisions",t.TILESET_FOREST_NEW="tileset-forest-new",t.TILESET_GENERIC="tileset-generic",t.TILESET_GENERIC_NEW="tileset-generic-new",t.TILESET_MATH_TOWER_BASIC="tileset-math-tower-basic",t.TILESET_TUTORIAL_SUBSPACE="tileset-tutorial-subspace",t.TILESET_INFINITY_TOWER_CONSTRUCTION="tileset-infinity-tower-construction",t.TILESET_OUTSIDE="tileset-outside",t.TILESET_TOWERTOWN_BASIC="tileset-towertown-basic",t.TILESET_TOWN_NEW="tileset-town-new",t}()},function(t,i){t.exports=window._},function(t,i,n){"use strict";n.d(i,"a",(function(){return e}));var e=function(){function t(){}return t.Back={In:Phaser.Easing.Back.In,Out:Phaser.Easing.Back.Out,InOut:Phaser.Easing.Back.InOut},t.Bounce={In:Phaser.Easing.Bounce.In,Out:Phaser.Easing.Back.Out,InOut:Phaser.Easing.Back.InOut},t.Circular={In:Phaser.Easing.Circular.In,Out:Phaser.Easing.Circular.Out,InOut:Phaser.Easing.Circular.InOut},t.Cubic={In:Phaser.Easing.Cubic.In,Out:Phaser.Easing.Cubic.Out,InOut:Phaser.Easing.Cubic.InOut},t.Elastic={In:Phaser.Easing.Elastic.In,Out:Phaser.Easing.Elastic.Out,InOut:Phaser.Easing.Elastic.InOut},t.Exponential={In:Phaser.Easing.Exponential.In,Out:Phaser.Easing.Exponential.Out,InOut:Phaser.Easing.Exponential.InOut},t.Linear={None:Phaser.Easing.Linear.None},t.Quadratic={In:Phaser.Easing.Quadratic.In,Out:Phaser.Easing.Quadratic.Out,InOut:Phaser.Easing.Quadratic.InOut},t.Quintic={In:Phaser.Easing.Quintic.In,Out:Phaser.Easing.Quintic.Out,InOut:Phaser.Easing.Quintic.InOut},t.Quartic={In:Phaser.Easing.Quartic.In,Out:Phaser.Easing.Quartic.Out,InOut:Phaser.Easing.Quartic.InOut},t.Sinusoidal={In:Phaser.Easing.Sinusoidal.In,Out:Phaser.Easing.Sinusoidal.Out,InOut:Phaser.Easing.Sinusoidal.InOut},t.Default=t.Linear.None,t.Power0=t.Linear.None,t.Power1=t.Quadratic.Out,t.Power2=t.Cubic.Out,t.Power3=t.Quartic.Out,t.Power4=t.Quintic.Out,t}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return h}));var e=n(1),s=n(10),r=n(3),h=function(){function t(){}return t.parseData=function(i){t.data=i;var n={outfit:4e-4,weapon:5e-4,hat:.001,boots:.001,item:.025,currency:1},e=[1,.75,.5,.25,.1];for(var s in t.data)if(t.data.hasOwnProperty(s))for(var h=t.data[s],o=0;o<h.length;o++){var u=h[o];if(t.itemMap[s+"-"+u.ID]=u,r.b.isValid(u.data.drop)&&u.data.drop>0){var a=0;n.hasOwnProperty(s)&&(a=n[s]);var c=1;r.b.isValid(u.data.rarity)&&u.data.rarity<e.length&&(c=e[u.data.rarity]);var l=a*c*u.data.drop;if(l>0){var f={type:s,ID:u.ID,R:l};t.drops.push(f)}}}},t.getItem=function(i,n){var e=t.itemMap[i+"-"+n];return r.b.isValid(e)?e:null},t.doesExist=function(i,n){return null!==t.getItem(i,n)},t.getRandomItem=function(i){var n=t.data[i];return r.b.isValid(n)&&n.length>0?n[Math.floor(n.length*Math.random())]:null},t.getItemDrops=function(i){var n=t.drops.slice();r.b.isValid(i)&&(n=n.concat(i));for(var e=[],s=0;s<n.length;s++){var h=n[s];r.b.isValid(h)&&Math.random()<h.R&&e.push(h)}return e},t.getItemsWithFilter=function(i,n){return t.data.hasOwnProperty(i)?t.data[i].filter(n):[]},t.getCategoryItems=function(i){return t.data[i]},t.getItemData=function(i,n){var s=t.getItem(i,n);return r.b.isValid(s)?s.data:("gold"!==i&&e.Logger.log("Item Data not found for type: "+i+" ID: "+n,e.LogLevel.Warning),null)},t.getItemMetadata=function(i,n){var e=t.itemMap[i+"-"+n];return r.b.isValid(e)?e.metadata:null},t.getIconAtlas=function(i){if(!r.b.isValid(i))return"atlas-21";if(r.b.isValid(i.metadata)&&r.b.isValid(i.metadata.iconAtlas))return i.metadata.iconAtlas;if(r.b.isValid(i.iconAtlas))return i.iconAtlas;if(r.b.isValid(i.ID)&&r.b.isValid(i.type)){var n=null;if(r.b.isValid(i.metadata)&&r.b.isValid(i.metadata.icon)&&r.b.isValid(i.metadata.icon.type)){if(n=t.getItem(i.metadata.icon.type,i.metadata.icon.ID).metadata,r.b.isValid(n)&&r.b.isValid(n.iconAtlas))return n.iconAtlas}else{var e=t.getItem(i.type,i.ID);if(n=r.b.isValid(e)?e.metadata:null,r.b.isValid(n)&&r.b.isValid(n.iconAtlas))return n.iconAtlas;if(r.b.isValid(n)&&r.b.isValid(n.vIcon)||"storeTab"===i.type)return"icon-"+i.type+"-"+i.ID}}return"atlas-21"},t.getIconFrame=function(t){return"string"!=typeof t?r.b.isValid(t.ID)?""+t.ID:null:t},t.getItems=function(i,n){return t.getItemsWithFilter(i,(function(t){return r.b.isValid(t.data.drop)&&t.data.drop>0&&r.b.isValid(t.data.rarity)&&t.data.rarity===n}))},t.getRawItems=function(i,n){return r.b.isValid(n)?t.getItemsWithFilter(i,(function(t){return r.b.isValid(t.data.rarity)&&t.data.rarity===n})):t.data.hasOwnProperty(i)?t.data[i]:[]},t.getCost=function(i,n){var e=t.getItem(i,n).data;return r.b.isValid(e)&&r.b.isValid(e.cost)?e.cost[0]:{type:"currency",ID:1,N:250}},t.getRandomizedDropsFromCreatures=function(t,i,n){var e=[],h=[];if(r.b.isValid(t))for(var o=void 0,u=0;u<t.length;u++)"hat"===(o=t[u]).type||"outfit"===o.type||"weapon"===o.type||"boots"===o.type||"relic"===o.type?0===h.length&&h.push(o):e.push(o);if(n){var a=s.a.get("GameConstants.Debug.FORCE_DROPS").concat(i.getDrops()),c=4;for(u=0;u<a.length;u++)"hat"===a[u].type||"outfit"===a[u].type||"weapon"===a[u].type||"boots"===a[u].type||"relic"===a[u].type?0===h.length&&h.push(a[u]):0!==c&&("item"!==a[u].type&&"currency"!==a[u].type||c--,e.push(a[u]))}return h.length>0&&e.push(h[0]),e},t.getRangeByAmount=function(i,n,e){for(var s=[],h=n;h<=n+e-1;h++){var o=t.data[i][h];r.b.isValid(o)&&s.push(o)}return s},t.getItemCount=function(i){return r.b.isValid(t.data[i])?t.data[i].length:0},t.getEpicRelic=function(i){switch(t.getItem(i.getType(),i.getID()).data.element){case"mech":case"storm":return{type:"relic",ID:29};case"earth":return{type:"relic",ID:30};case"fire":return{type:"relic",ID:31};case"ice":return{type:"relic",ID:32};case"water":return{type:"relic",ID:33};case"ice & fire":return{type:"relic",ID:34};default:return{type:"relic",ID:29}}},t.itemMap={},t.drops=[],t}()},function(t,i,n){"use strict";var e,s,r,h,o,u,a,c,l,f,b,v,d,O,m,p,g,y,j,_,w,E,I,A,T,D,S,C,N,x,R,M,L;n.d(i,"v",(function(){return s})),n.d(i,"w",(function(){return r})),n.d(i,"t",(function(){return h})),n.d(i,"A",(function(){return o})),n.d(i,"g",(function(){return u})),n.d(i,"b",(function(){return c})),n.d(i,"e",(function(){return l})),n.d(i,"d",(function(){return f})),n.d(i,"p",(function(){return b})),n.d(i,"q",(function(){return v})),n.d(i,"k",(function(){return d})),n.d(i,"o",(function(){return O})),n.d(i,"j",(function(){return m})),n.d(i,"i",(function(){return g})),n.d(i,"c",(function(){return y})),n.d(i,"n",(function(){return j})),n.d(i,"l",(function(){return _})),n.d(i,"u",(function(){return w})),n.d(i,"m",(function(){return I})),n.d(i,"h",(function(){return A})),n.d(i,"s",(function(){return T})),n.d(i,"z",(function(){return S})),n.d(i,"x",(function(){return C})),n.d(i,"r",(function(){return N})),n.d(i,"B",(function(){return x})),n.d(i,"f",(function(){return R})),n.d(i,"a",(function(){return M})),n.d(i,"y",(function(){return L})),function(t){t.ShowDrops="Prodigy.Events.VictoryManager.SHOW_DROPS",t.Complete="Prodigy.Events.VictoryManager.COMPLETE"}(e||(e={})),function(t){t.OnGetDataComplete="Prodigy.Events.Survey.ON_GET_DATA_COMPLETE"}(s||(s={})),function(t){t.Audio="Prodigy.Events.SystemMenu.REFRESH_AUDIO_MENU"}(r||(r={})),function(t){t.AddChild="Prodigy.Events.Screen.ADD_CHILD",t.GetLayer="Prodigy.Events.Screen.GET_LAYER",t.EnableBackground="Prodigy.Events.Screen.ENABLE_BACKGROUND",t.EnableContent="Prodigy.Events.Screen.ENABLE_CONTENT"}(h||(h={})),function(t){t.PlayerAdded="Prodigy.Events.WalkableScreen.PLAYER_ADDED",t.PlayerUpdate="Prodigy.Events.WalkableScreen.PLAYER_UPDATED"}(o||(o={})),function(t){t.Done="Prodigy.Events.FlyingStars.DONE",t.PippetStarsDone="Prodigy.Events.FlyingPippetStars.DONE",t.MemberStarsDone="Prodigy.Events.FlyingMemberStars.DONE"}(u||(u={})),function(t){t.Done="Prodigy.Events.OpenJar.DONE"}(a||(a={})),function(t){t.GetIsRunning="Prodigy.Events.Battle.GET_IS_RUNNING",t.PopupClosed="Prodigy.Events.Battle.POPUP_CLOSED",t.EndBattle="Prodigy.Events.Battle.END_BATTLE",t.ApplySlotBonus="Prodigy.Events.Battle.APPLY_SLOT_BONUS",t.PvpComboIncrease="Prodigy.Events.Battle.PVP_COMBO_INCREASE",t.PvpComboBreak="Prodigy.Events.Battle.PVP_COMBO_BREAK",t.PvpUpdate="Prodigy.Events.Battle.PVP_UPDATE",t.PvpComboMeterMoveIn="Prodigy.Events.Battle.PVP_COMBO_METRE_MOVE_IN",t.PvpComboMeterMoveOut="Prodigy.Events.Battle.PVP_COMBO_METRE_MOVE_OUT"}(c||(c={})),function(t){t.AnimationDone="Prodigy.Events.Creature.ANIMATION_DONE",t.LevelUp="Prodigy.Events.Creature.LEVEL_UP",t.StarsAdded="Prodigy.Events.Creature.STARS_ADDED",t.PlayerLoaded="Prodigy.Events.Creature.PLAYER_LOADED",t.LevelUpAnimation="Prodigy.Events.Creature.LEVEL_UP_ANIMATION",t.ProcessedAllEvents="Prodigy.Events.Creature.PROCESSED_ALL_EVENTS",t.EvolveStart="Prodigy.Events.Creature.EVOLVE_START",t.EvolveEnd="Prodigy.Events.Creature.EVOLVE_END",t.Evolved="Prodigy.Events.Creature.EVOLVED"}(l||(l={})),function(t){t.ShowPippetBattleBonus="Prodigy.Events.Chest.SHOW_PIPPET_BATTLE_BONUS",t.ShowMemberStars="Prodigy.Events.Chest.SHOW_MEMBER_STARS"}(f||(f={})),function(t){t.EnableDynamicLayer="Prodigy.Events.Map.ENABLE_DYNAMIC_LAYER"}(b||(b={})),function(t){t.Setup="Prodigy.Events.NetworkHandlers.SETUP",t.LoginError="Prodigy.Events.NetworkHandlers.LOGIN_ERROR"}(v||(v={})),function(t){t.HideHUD="Prodigy.Events.HUD.OPEN_CHAT",t.ShowHUD="Prodigy.Events.HUD.CLOSE_CHAT",t.SetClickedWorldMap="Prodigy.Events.HUD.SET_CLICKED_WORLD_MAP",t.HideChatNotif="Prodigy.Events.HUD.HIDE_CHAT_NOTIF"}(d||(d={})),function(t){t.GetTotalMail="Prodigy.Events.Mailer.GET_TOTAL_MAIL",t.GetTotalMailFailure="Prodigy.Events.Mailer.GET_TOTAL_MAIL_FAILURE",t.GetAllMail="Prodigy.Events.Mailer.GET_ALL_MAIL",t.GetAllMailSuccess="Prodigy.Events.Mailer.GET_ALL_MAIL_SUCCESS",t.GetAllMailFailure="Prodigy.Events.Mailer.GET_ALL_MAIL_FAILURE",t.MarkAsRead="Prodigy.Events.Mailer.MARK_AS_READ",t.MarkAsReadFailure="Prodigy.Events.Mailer.MARK_AS_READ_FAILED",t.DeleteMail="Prodigy.Events.Mailer.DELETE_MAIL",t.DeleteMailSuccess="Prodigy.Events.Mailer.DELETE_MAIL_SUCCESSFUL",t.DeleteMailFailure="Prodigy.Events.Mailer.DELETE_MAIL_FAILURE",t.UpdateMailCounters="Prodigy.Events.Mailer.UPDATE_MAIL_COUNTERS",t.ShowIndicator="Prodigy.Events.Mailer.SHOW_INDICATOR",t.GiftBoxOpened="Prodigy.Events.Mailer.GIFT_BOX_OPENED",t.CloseList="Prodigy.Events.Mailer.CLOSE_LIST"}(O||(O={})),function(t){t.GetGiftBoxes="Prodigy.Events.GiftBoxes.GET_GIFT_BOXES",t.UpdateConjureCubeCount="Prodigy.Events.GiftBoxes.UPDATE_CONJURE_CUBE_COUNT"}(m||(m={})),function(t){t.OnGetDataComplete="Prodigy.Events.Boss.ON_GET_DATA_COMPLETE"}(p||(p={})),function(t){t.Update="Prodigy.Events.GameObj.UPDATE",t.PlayerInitialized="Prodigy.Events.GameObj.PLAYER_INITIALIZED"}(g||(g={})),function(t){t.Loaded="Prodigy.Events.Boot.LOADED"}(y||(y={})),function(t){t.WorkerLoadComplete="Prodigy.Events.Loading.WORKER_LOAD_COMPLETE"}(j||(j={})),function(t){t.ClickedHouseIcon="Prodigy.Events.House.CLICKED_HOUSE_ICON",t.OpenEditor="Prodigy.Events.House.OPEN_EDITOR",t.CloseEditor="Prodigy.Events.House.CLOSE_EDITOR"}(_||(_={})),function(t){t.InkBlasted="Prodigy.Events.ShipwreckShore.INK_BLASTED",t.InkGroupDestroyed="Prodigy.Events.ShipwreckShore.INK_GROUP_DESTROYED"}(w||(w={})),function(t){t.AutoClickItem="Prodigy.Events.Debug.AUTO_CLICK_ITEM",t.AutoClick="Prodigy.Events.Debug.AUTO_CLICK",t.AutoClickElement="Prodigy.Events.Debug.AUTO_CLICK_UI",t.AutoClickScene="Prodigy.Events.Debug.AUTO_CLICK_SCENE",t.AutoClickList="Prodigy.Events.Debug.AUTO_CLICK_LIST",t.GetUIElement="Prodigy.Events.Debug.GET_UI_ELEMENT"}(E||(E={})),function(t){t.OnMouseWheel="Prodigy.Events.Input.ON_MOUSE_WHEEL"}(I||(I={})),function(t){t.GotFriendsList="Prodigy.Events.FriendsList.GOT_FRIENDS_LIST",t.GotFriendsListAppearance="Prodigy.Events.FriendsList.GOT_FRIENDS_LIST_APPEARANCE",t.GetTotalFriendRequests="Prodigy.Events.FriendsList.GET_TOTAL_FRIEND_REQUESTS",t.GetTotalFriendRequestsFailure="Prodigy.Events.FriendsList.GET_TOTAL_FRIEND_REQUESTS_FAILURE",t.ClearFriendRequestsCache="Prodigy.Events.FriendsList.CLEAR_FRIEND_REQUESTS_CACHE",t.GetFriendRequestList="Prodigy.Events.FriendsList.GET_FRIEND_REQUEST_LIST",t.GotFriendRequestList="Prodigy.Events.FriendsList.GOT_FRIEND_REQUEST_LIST",t.GetFriendList="Prodigy.Events.FriendsList.GET_FRIENDS_LIST",t.SetRequests="Prodigy.Events.FriendsList.SET_REQUESTS",t.SendRequest="Prodigy.Events.FriendsList.SEND_REQUEST",t.CancelRequest="Prodigy.Events.FriendsList.CANCEL_REQUEST",t.AcceptRequest="Prodigy.Events.FriendsList.ACCEPT_REQUEST",t.RejectRequest="Prodigy.Events.FriendsList.REJECT_REQUEST",t.RequestSent="Prodigy.Events.FriendsList.REQUEST_SENT",t.RequestCancelled="Prodigy.Events.FriendsList.REQUEST_CANCELLED",t.RequestReceived="Prodigy.Events.FriendsList.REQUEST_RECEIVED",t.RequestAccepted="Prodigy.Events.FriendsList.REQUEST_ACCEPTED",t.RequestRejected="Prodigy.Events.FriendsList.REQUEST_REJECTED",t.RemoveFriend="Prodigy.Events.FriendsList.REMOVE_FRIEND",t.FriendRemoved="Prodigy.Events.FriendsList.FRIEND_REMOVED",t.GetFriendshipStatus="Prodigy.Events.FriendsList.GET_FRIENDSHIP_STATUS",t.GotFriendshipStatus="Prodigy.Events.FriendsList.GOT_FRIENDSHIP_STATUS",t.FriendsAppearanceUpdated="Prodigy.Events.FriendsList.FRIENDS_APPEARANCE_UPDATED",t.IllogicalRequestAction="Prodigy.Events.FriendsList.ILLOGICAL_REQUEST_ACTION"}(A||(A={})),function(t){t.MovePlayer="Prodigy.Events.PlayerLocomotion.MOVE_PLAYER",t.StopPlayer="Prodigy.Events.PlayerLocomotion.STOP_PLAYER",t.GetTarget="Prodigy.Events.PlayerLocomotion.GET_TARGET"}(T||(T={})),function(t){t.SetBackgroundPanelTileDimensions="Prodigy.Events.LocationPage.SET_BACKGROUND_PANEL_TILE_DIMENSIONS",t.GetBackgroundPanelTileDimensions="Prodigy.Events.LocationPage.GET_BACKGROUND_PANEL_TILE_DIMENSIONS"}(D||(D={})),function(t){t.TabButtonClicked="Prodigy.Events.UI.TAB_BUTTON_CLICKED",t.TabSelected="Prodigy.Events.UI.TAB_SELECTED",t.ChildAdded="Prodigy.Events.UI.CHILD_ADDED",t.ChildRemoved="Prodigy.Events.UI.CHILD_REMOVED",t.MenuOpened="Prodigy.Events.UI.MENU_OPENED",t.MountTogglePressed="Prodigy.Events.UI.MOUNT_TOGGLE_PRESSED",t.WorldMapZoneSelected="Prodigy.Events.UI.WORLD_MAP_ZONE_SELECTED"}(S||(S={})),function(t){t.GotTitans="Prodigy.Events.Titan.GOT_TITANS",t.GotTitan="Prodigy.Events.Titan.GOT_TITAN",t.Catapult="Prodigy.Events.Titan.CATAPULT"}(C||(C={})),function(t){t.PlayerAppearanceUpdated="Prodigy.Events.PlayerContainer.PLAYER_APPEARANCE_UPDATED",t.PlayerEditingMenuClosed="Prodigy.Events.PlayerContainer.PLAYEREDITINGMENUCLOSED",t.NewAnimationStateSet="Prodigy.Events.PlayerContainer.NEW_ANIMATION_STATE_SET",t.MorphMarbleUsed="Prodigy.Events.PlayerContainer.MORPH_MARBLE_USED",t.MorphMarbleCancelled="Prodigy.Events.PlayerContainer.MORPH_MARBLE_CANCELLED"}(N||(N={})),function(t){t.POST_MESSAGE_RECEIVED="Prodigy.Events.Web.POST_MESSAGE_RECEIVED"}(x||(x={})),function(t){t.TargetCollected="Prodigy.Events.Dungeon.TARGET_COLLECTED"}(R||(R={})),function(t){t.PagesCollected="Prodigy.Events.Achivements.PAGES_COLLECTED"}(M||(M={})),function(t){t.ToolTipClosed="Prodigy.Events.ToolTip.CLOSE"}(L||(L={}))},function(t,i){t.exports=window.inversify},function(t,i,n){"use strict";n.d(i,"a",(function(){return r}));var e=n(1),s=n(30),r=function(){function t(){}return t.get=function(t){return this.constants[t]},t.setLogLevel=function(t){if("number"==typeof t)e.Logger.setLogLevel(t);else switch(t){case"dev":case"verbose":case"all":e.Logger.setLogLevel(e.LogLevel.Verbose);break;case"warn":e.Logger.setLogLevel(e.LogLevel.Warning);break;case"error":default:e.Logger.setLogLevel(e.LogLevel.Error)}},t.setDrops=function(t,i){0},t.setGameConstant=function(t,i){this.constants[t]=i},t.setNFactor=function(t){0},t.setCrit=function(t){0},t.setEscapeChance=function(t){0},t.setBench=function(t){0},t.scaleEncounterDistance=function(t){0},t.setRespawnTime=function(t){void 0===t&&(t=120)},t.setGameSpeed=function(t){0},t.setFeedLimit=function(t){0},t.overrideUserRank=function(t){0},t.overrideUserPoints=function(t){0},t.setUnlimitedWheelSpins=function(t){0},t.setWheelSpinDuration=function(t){0},t.setMonsterRadiusVisible=function(t){0},t.setMaintainAspectRatio=function(t){0},t.overrideLastLogin=function(t){0},t.overrideDateToday=function(t){0},t.resetMaxPlayerLimit=function(){return!!t.isMaxOnScreenOrigSet&&(this.constants["GameConstants.Build.MAX_ON_SCREEN_PLAYERS_MOBILE"]=t.maxOnScreenPlayersMobileOrig,this.constants["GameConstants.Build.MAX_ON_SCREEN_PLAYERS_PC"]=t.maxOnScreenPlayersPCOrig,!0)},t.setMaxPlayerLimit=function(i){t.isMaxOnScreenOrigSet||(t.isMaxOnScreenOrigSet=!0,t.maxOnScreenPlayersMobileOrig=this.constants["GameConstants.Build.MAX_ON_SCREEN_PLAYERS_MOBILE"],t.maxOnScreenPlayersPCOrig=this.constants["GameConstants.Build.MAX_ON_SCREEN_PLAYERS_PC"]),s.a.isMobile()?this.constants["GameConstants.Build.MAX_ON_SCREEN_PLAYERS_MOBILE"]=i:this.constants["GameConstants.Build.MAX_ON_SCREEN_PLAYERS_PC"]=i},t.getMaxPlayerLimit=function(){return s.a.isMobile()?this.constants["GameConstants.Build.MAX_ON_SCREEN_PLAYERS_MOBILE"]:this.constants["GameConstants.Build.MAX_ON_SCREEN_PLAYERS_PC"]},t.setKillGore=function(t){0},t.setForceCast=function(t){this.constants["GameConstants.Battle.FORCE_CAST"]=t},t.setForceOpponentCast=function(t){0},t.setMorphDuration=function(t){0},t.setCharacterCreationDate=function(t,i,n,e,s){void 0===e&&(e=0),void 0===s&&(s=0)},t.setSplitTestLane=function(t){this.constants["GameConstants.Features.SplitTests.DEBUG_LANE"]=t},hack.constants=t,t.constants=Object({"GameConstants.Build.VERSION":"3-10-5","GameConstants.Build.SHOW_FPS":!1,"GameConstants.Build.SHOW_DEBUG_VALUES":[],"GameConstants.Build.MUTE_BGM":!1,"GameConstants.Build.FRAMEWORK_LOG_LEVEL":2,"GameConstants.Build.ASSETS_LOCATION":"https://cdn.prodigygame.com/game/assets/","GameConstants.Build.TELEPORT":"","GameConstants.Build.QUEST":[],"GameConstants.Build.ITEM_TYPE":[],"GameConstants.Build.KILL_GORE":!1,"GameConstants.Build.EASY_MODE":!1,"GameConstants.Build.MEMBERSHIP":!1,"GameConstants.Build.SCALE_MODE":0,"GameConstants.Build.ADD_PLAYER_FPS_THRESHOLD_LIMIT":20,"GameConstants.Build.ADD_PLAYER_FPS_THRESHOLD_RENABLE":25,"GameConstants.Build.MAX_ON_SCREEN_PLAYERS_PC":30,"GameConstants.Build.MAX_ON_SCREEN_PLAYERS_MOBILE":20,"GameConstants.Build.MAX_ON_SCREEN_FPS_LIMITED":5,"GameConstants.Build.MIN_ON_SCREEN_PLAYERS":5,"GameConstants.Build.ENABLE_LOADING_METRICS":!0,"GameConstants.Build.ENABLE_ADVANCED_METRICS":!0,"GameConstants.Build.DRAW_TRIGGERS":!1,"GameConstants.Tower.MAX_FREE_MEMBER_FLOOR":5,"GameConstants.Debug.AUTOSAVE_ENABLED":!0,"GameConstants.Debug.POPUPS_ENABLED":!0,"GameConstants.Debug.PLAYER_CARDS_ENABLED":!0,"GameConstants.Debug.ENABLE_MAP":!1,"GameConstants.Debug.AUTO_LOGIN":[],"GameConstants.Debug.GET_PET":[],"GameConstants.Debug.SET_LEVEL":0,"GameConstants.Debug.DISABLE_ACHIEVEMENTS":!1,"GameConstants.Debug.GET_GOLD":0,"GameConstants.Debug.GET_SPELL":0,"GameConstants.Debug.COMPLETE_TUTORIAL":!1,"GameConstants.Debug.FORCE_DROPS":[],"GameConstants.Debug.SCALE_ENCOUNTER_DISTANCE":1,"GameConstants.Debug.MONSTER_RESPAWN_TIME":120,"GameConstants.Debug.WIZARDS_ENABLED":!0,"GameConstants.Debug.AUTO_RESOLVE_BATTLES_ENABLED":!1,"GameConstants.Debug.GAME_SPEED":1,"GameConstants.Debug.FAST_GAME_SPEED":0,"GameConstants.Debug.FSM_LOGGING":!1,"GameConstants.Debug.DEBUG_LOCALIZATION":!1,"GameConstants.Debug.VERBOSE_LOCALIZATION":!1,"GameConstants.Debug.AUTO_RESOLVE_TOWER_BATTLES_ENABLED":!1,"GameConstants.Debug.EDUCATION_ENABLED":!0,"GameConstants.Debug.EDUCATION_LOGGING_ENABLED":!1,"GameConstants.Debug.AUTO_ANSWER_CORRECT_PERCENT":1,"GameConstants.Debug.UNLIMITED_WHEEL_SPINS":!1,"GameConstants.Debug.SKIP_MEMBERSHIP_WEBSITE":!1,"GameConstants.Debug.GIVES_MEMBERSHIP_AFTER_SKIP_WEBSITE":!1,"GameConstants.Debug.MONSTER_RADIUS_VISIBLE":!1,"GameConstants.Debug.CLOSE_BATTLE_RESULTS_SCREEN":!1,"GameConstants.Debug.ADD_FAKE_PLAYERS_TO_SCREEN":0,"GameConstants.Debug.OVERRIDE_FPS":0,"GameConstants.Debug.WINNER_EVERY_TIME":!1,"GameConstants.Debug.DEBUG_TEST_SCREEN":!1,"GameConstants.Debug.NEXT_SKILL_ID":void 0,"GameConstants.Debug.PA_COOLDOWN_EXPIRED":void 0,"GameConstants.Debug.DEPRECATED_IOS":!1,"GameConstants.Debug.SCHOOL_START_HOUR":8,"GameConstants.Debug.SCHOOL_END_HOUR":16,"GameConstants.Debug.USER_DATA_PLATFORM":void 0,"GameConstants.Mailer.TEST_MAIL":!1,"GameConstants.FriendsList.TEST_FRIENDS_LIST":!1,"GameConstants.Features.ENABLE_HOUSE_MOVING":!0,"GameConstants.Features.Wheel.COOLDOWN":5,"GameConstants.Features.Wheel.DEFAULT_SPINS":1,"GameConstants.Features.Wheel.MEMBER_SPINS":2,"GameConstants.Features.Wheel.SPIN_TIME":15e3,"GameConstants.Features.SplitTests.PLAY_AT_HOME":!0,"GameConstants.Features.SplitTests.CHARACTER_CREATION_TIME":0,"GameConstants.Features.LevelLock.ACADEMY":15,"GameConstants.Features.TrialMembership.PARENT_ATTACH_TIMEOUT":864e5,"GameConstants.Features.DailyQuestions.NOTIFICATION_TIMEOUT":9e5,"GameConstants.Features.ENABLE_MONSTER_SPAWNING":!0,"GameConstants.Battle.VALID_PARENT_EMAIL_STARS_PERCENTAGE":.05,"GameConstants.Battle.MEMBER_STARS_PERCENTAGE":.5,"GameConstants.Battle.STARS_EARNED_PER_OPPONENT":10,"GameConstants.Battle.MAX_NUM_PETS":1,"GameConstants.Battle.ATTACK_DAMAGE_OVERRIDE":null,"GameConstants.Battle.ESCAPE_CHANCE":.75,"GameConstants.Battle.CATCH_COST":50,"GameConstants.Battle.CATCH_COST_GOLD":500,"GameConstants.Battle.ALWAYS_SWITCH":!1,"GameConstants.Battle.FORCE_CAST":-1,"GameConstants.Battle.FORCE_OPPONENT_CAST":-1,"GameConstants.Battle.ENEMY_ACCURACY_OVERRIDE":-1,"GameConstants.Battle.SET_BENCH":null,"GameConstants.Battle.FORCE_TARGETING_ENABLED":!1,"GameConstants.Battle.AUTOMATION_ACTIONS":Object({}),"GameConstants.Battle.AUTO_ATTACK_ENABLED":!1,"GameConstants.Battle.AUTO_ATTACK_PAUSE":!1,"GameConstants.Battle.AUTO_ATTACK_TARGET":0,"GameConstants.Battle.SKIP_ENEMY_TURN":!1,"GameConstants.Battle.SKIP_PLAYER_TURN":!1,"GameConstants.Battle.HIDE_TEMP_HEALTHBAR":!1,"GameConstants.Battle.SHOW_HITBOXES":!1,"GameConstants.Mira.MAX_HP":1e5,"GameConstants.Mira.DIFFICULTY":10,"GameConstants.Grandoff.MAX_HP":12e3,"GameConstants.Grandoff.DIFFICULTY":3,"GameConstants.Pippet.MAX_HP":null,"GameConstants.Pippet.DIFFICULTY":3,"GameConstants.Cebollini.MAX_HP":null,"GameConstants.Cebollini.DIFFICULTY":3,"GameConstants.ShadowGerald.MAX_HP":null,"GameConstants.ShadowGerald.DIFFICULTY":7,"GameConstants.Gerald.MAX_HP":null,"GameConstants.Gerald.DIFFICULTY":4,"GameConstants.OldOne.MAX_HP":null,"GameConstants.OldOne.DIFFICULTY":4,"GameConstants.IceWyrm1.MAX_HP":null,"GameConstants.IceWyrm1.DIFFICULTY":3,"GameConstants.IceWyrm2.MAX_HP":null,"GameConstants.IceWyrm2.DIFFICULTY":4,"GameConstants.FrostyStorm.MAX_HP":null,"GameConstants.FrostyStorm.DIFFICULTY":3,"GameConstants.StormyStorm.MAX_HP":null,"GameConstants.StormyStorm.DIFFICULTY":4,"GameConstants.RainyStorm.MAX_HP":null,"GameConstants.RainyStorm.DIFFICULTY":3,"GameConstants.SandyStorm.MAX_HP":null,"GameConstants.SandyStorm.DIFFICULTY":3,"GameConstants.Inactivity.DIALOG_TIMER_SECONDS":1500,"GameConstants.Inactivity.LOG_OUT_TIMER_SECONDS":300,"GameConstants.Inactivity.CANNOT_CONNECT_TIMER_SECONDS":120,"GameConstants.Inactivity.NETWORK_BOOT_TIMER_SECONDS":6e4,"GameConstants.Audio.DEFAULT_SOUND_VOLUME":.9,"GameConstants.Audio.DEFAULT_MUSIC_VOLUME":.3,"GameConstants.Audio.DEFAULT_VOICE_VOLUME":1,"GameConstants.LocationSelection.NONE":"none","GameConstants.LocationSelection.HOME":"home","GameConstants.LocationSelection.SCHOOL":"school","GameConstants.PVP.INVITE_TIMEOUT":6e4,"GameConstants.PVP.OVERRIDE_USER_RANK":null,"GameConstants.PVP.OVERRIDE_USER_POINTS":null,"GameConstants.PVP.OVERRIDE_USER_LEADERBOARD":null,"GameConstants.PVP.BOT_TEAM":null,"GameConstants.PVP.TIMER_ENABLED":!0,"GameConstants.PVP.STARS_PER_QUESTION":2,"GameConstants.TITAN.HP_MULTIPLIER":1.5,"GameConstants.CO_OP_TITAN.TITAN_HP":10,"GameConstants.CO_OP_TITAN.CRYSTAL_HP":5,"GameConstants.CO_OP_TITAN.ATTACK_FREQUENCY":2,"GameConstants.CO_OP_TITAN.TITAN_DIFFICULTY":5,"GameConstants.CO_OP_TITAN.TITAN_BOUNTY":10,"GameConstants.CO_OP_TITAN.HOST_HEARTBEAT_TIME":5e3,"GameConstants.CO_OP_TITAN.CLIENT_HEARTBEAT_TIMEOUT":2e4,"GameConstants.DailyQuestions.OVERRIDE_LAST_LOGIN":-1,"GameConstants.DailyQuestions.OVERRIDE_DATE_TODAY":-1,"GameConstants.MorphMarbles.MORPH_DURATION_OVERRIDE":null}),t.isMaxOnScreenOrigSet=!1,t.DAY_IN_MS=864e5,t.MAX_SAFE_INTEGER=9007199254740991,t.NEW_FTUE_REQUIREMENT_ID=10,t.EARLY_ZONE_LOCK_REQUIREMENT_ID=11,t.GOLDEN_PAGE_CURRENCY_ID=18,t.EARTH_TOWER_COMMON_ROOM_SHORTFORM="CR",t.EARTH_TOWER_WARDEN_ROOM_SHORTFORM="WR",t.TARGET_FPS_60_MS=1e3/60,t}();i.b=r},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t.FEATURE_HOUSE_MOVING="FEATURE_HOUSE_MOVING",t.FEATURE_HOUSE_VISITING="FEATURE_HOUSE_VISITING",t.FEATURE_STYLIST="FEATURE_STYLIST",t.FEATURE_CLOUD_MOUNT="FEATURE_CLOUD_MOUNT",t.FEATURE_SOCIAL_FEED="FEATURE_SOCIAL_FEED",t.FEATURE_BADGES="FEATURE_BADGES",t.FEATURE_BATTLE_TUTORIAL="FEATURE_BATTLE_TUTORIAL",t.FEATURE_ACADEMY="FEATURE_ACADEMY",t.FEATURE_ACADEMY_TOWERS="FEATURE_ACADEMY_TOWERS",t.FEATURE_TOWERS_PROMPT="FEATURE_TOWERS_PROMPT",t.FEATURE_SUMMERFEST_CUTSCENES="FEATURE_SUMMERFEST_CUTSCENES",t.FEATURE_SPRINGFEST_CUTSCENES="FEATURE_SPRINGFEST_CUTSCENES",t.FEATURE_STARLIGHT_CUTSCENES="FEATURE_STARLIGHT_CUTSCENES",t.FEATURE_PUMPKINFEST_CUTSCENES="FEATURE_PUMPKINFEST_CUTSCENES",t.FEATURE_WINTERFEST_CUTSCENES="FEATURE_WINTERFEST_CUTSCENES",t.FEATURE_TOWERTOWN="FEATURE_TOWERTOWN",t.BREADCRUMB_CLICKED_WORLD_MAP_BUTTON="BREADCRUMB_CLICKED_WORLD_MAP_BUTTON",t.BREADCRUMB_CLICKED_WORLD_MAP_HOUSE="BREADCRUMB_CLICKED_WORLD_MAP_HOUSE",t.BREADCRUMB_CLICKED_HOUSE_LOCK_BUTTON="BREADCRUMB_CLICKED_HOUSE_LOCK_BUTTON",t.BREADCRUMB_CLICKED_HOUSE_MOVE_BUTTON="BREADCRUMB_CLICKED_HOUSE_MOVE_BUTTON",t.BREADCRUMB_CLICKED_CARD_VISIT_BUTTON="BREADCRUMB_CLICKED_CARD_VISIT_BUTTON",t.BREADCRUMB_CLICKED_CARD_STYLIST_BUTTON="BREADCRUMB_CLICKED_CARD_STYLIST_BUTTON",t.BREADCRUMB_CLICKED_DAB="BREADCRUMB_CLICKED_DAB",t.BREADCRUMB_CLICKED_DAB_EMOTE_BUTTON="BREADCRUMB_CLICKED_DAB_EMOTE_BUTTON",t.BREADCRUMB_CLICKED_DAB_DANCE_BUTTON="BREADCRUMB_CLICKED_DAB_DANCE_BUTTON",t.BREADCRUMB_CLICKED_DAB_DAB_BUTTON="BREADCRUMB_CLICKED_DAB_DAB_BUTTON",t.BREADCRUMB_TITAN_INTRO="BREADCRUMB_TITAN_INTRO",t.BREADCRUMB_TITAN_WATCHED_INTRO="BREADCRUMB_TITAN_WATCHED_INTRO",t.BREADCRUMB_TITAN_HARVEY_TALKED="BREADCRUMB_TITAN_HARVEY_TALKED",t.FEATURE_TITAN_UNLOCKED="BREADCRUMB_TITAN_UNLOCKED_HUD_BUTTON",t.BREADCRUMB_TITAN_UNLOCKED_HUD_BUTTON="BREADCRUMB_TITAN_UNLOCKED_HUD_BUTTON",t.BREADCRUMB_TITAN_UNLOCKED_DIALOGUE="BREADCRUMB_TITAN_UNLOCKED_DIALOGUE",t.BREADCRUMB_TITAN_UNLOCKED_BUTTONS="BREADCRUMB_TITAN_UNLOCKED_BUTTONS",t.BREADCRUMB_CLOUD_MOUNT_TOGGLED="BREADCRUMB_CLOUD_MOUNT_TOGGLED",t.BREADCRUMB_SOCIAL_FEED_OPENED="BREADCRUMB_SOCIAL_FEED_OPENED",t.BREADCRUMB_CLICKED_SOCIAL_BUTTON="BREADCRUMB_CLICKED_SOCIAL_BUTTON",t.BREADCRUMB_CLICKED_BADGES_BUTTON="BREADCRUMB_CLICKED_BADGES_BUTTON",t.BREADCRUMB_UNLOCK_ACADEMY="BREADCRUMB_UNLOCK_ACADEMY",t.BREADCRUMB_UNLOCK_ACADEMY_NOOT_DIALOGUE="BREADCRUMB_UNLOCK_ACADEMY_NOOT_DIALOGUE",t.BREADCRUMB_FIRST_BATTLE_STARTED="BREADCRUMB_FIRST_BATTLE_STARTED",t.BREADCRUMB_FIRST_BATTLE_FINISHED="BREADCRUMB_FIRST_BATTLE_FINISHED",t.BREADCRUMB_FIRST_NEAR_DEFEAT="BREADCRUMB_FIRST_NEAR_DEFEAT",t.BREADCRUMB_FIRST_ENEMY_HURT="BREADCRUMB_FIRST_ENEMY_HURT",t.BREADCRUMB_FIRST_NFACTOR_BONUS="BREADCRUMB_FIRST_NFACTOR_BONUS",t.BREADCRUMB_FIRST_ENERGY_GAINED="BREADCRUMB_FIRST_ENERGY_GAINED",t.BREADCRUMB_FIRST_AOE_READY="BREADCRUMB_FIRST_AOE_READY",t.BREADCRUMB_FIRST_AOA_CHARGED="BREADCRUMB_FIRST_AOA_CHARGED",t.BREADCRUMB_FIRST_AOA_USED="BREADCRUMB_FIRST_AOA_USED",t.BREADCRUMB_AUTO_ATTACK_TUTORIAL="BREADCRUMB_AUTO_ATTACK_TUTORIAL",t.BREADCRUMB_FIRST_PET_RESCUABLE="BREADCRUMB_FIRST_PET_RESCUABLE",t.BREADCRUMB_FIRST_PET_RESCUED="BREADCRUMB_FIRST_PET_RESCUED",t.BREADCRUMB_FREE_RESCUE="BREADCRUMB_FREE_RESCUE",t.BREADCRUMB_FOREST_KEYSTONE="BREADCRUMB_FOREST_KEYSTONE",t.BREADCRUMB_BONFIRE_KEYSTONE="BREADCRUMB_BONFIRE_KEYSTONE",t.BREADCRUMB_SHIVERCHILL_KEYSTONE="BREADCRUMB_SHIVERCHILL_KEYSTONE",t.BREADCRUMB_SHIPWRECK_KEYSTONE="BREADCRUMB_SHIPWRECK_KEYSTONE",t.BREADCRUMB_SKYWATCH_KEYSTONE="BREADCRUMB_SKYWATCH_KEYSTONE",t.BREADCRUMB_ACADEMY_SECOND_FLOOR="BREADCRUMB_ACADEMY_SECOND_FLOOR",t.BREADCRUMB_ACADEMY_UNPLACED_KEYSTONES="BREADCRUMB_ACADEMY_UNPLACED_KEYSTONES",t.BREADCRUMB_ACADEMY_NO_KEYSTONES="BREADCRUMB_ACADEMY_NO_KEYSTONES",t.BREADCRUMB_ACADEMY_VISITED="BREADCRUMB_ACADEMY_VISITED",t.BREADCRUMB_EARTHTOWER_COMPLETED_ELEVATOR="BREADCRUMB_EARTHTOWER_COMPLETED_ELEVATOR",t.FIRST_TIME_PROMPT="FIRST_TIME_PROMPT",t.NOOT_TOWER_PROMPT="NOOT_TOWER_PROMPT",t.FEATURE_COOP_BATTLE="FEATURE_COOP_BATTLE",t.BREADCRUMB_COOP_BATTLE_START="BREADCRUMB_COOP_BATTLE_START",t.BREADCRUMB_COOP_PARTY_SELECT="BREADCRUMB_COOP_PARTY_SELECT",t.BREADCRUMB_COOP_CRYSTAL_INTRO="BREADCRUMB_COOP_CRYSTAL_INTRO",t.BREADCRUMB_SUMMERFEST_INTRO="BREADCRUMB_SUMMERFEST_INTRO",t.BREADCRUMB_FIRST_SUMMERFEST_WHEEL_CLICK="BREADCRUMB_FIRST_SUMMERFEST_WHEEL_CLICK",t.BREADCRUMB_FIRST_SUMMERFEST_STYLIST_CLICK="BREADCRUMB_FIRST_SUMMERFEST_STYLIST_CLICK",t.BREADCRUMB_FIRST_SUMMERFEST_NICKNAMER_CLICK="BREADCRUMB_FIRST_SUMMERFEST_NICKNAMER_CLICK",t.BREADCRUMB_STARLIGHT_INTRO="BREADCRUMB_STARLIGHT_INTRO",t.BREADCRUMB_PUMPKINFEST_INTRO="BREADCRUMB_PUMPKINFEST_INTRO",t.BREADCRUMB_WINTERFEST_INTRO="BREADCRUMB_WINTERFEST_INTRO",t.BREADCRUMB_SPRINGFEST_INTRO="BREADCRUMB_SPRINGFEST_INTRO",t.BREADCRUMB_FIRST_SPRINGFEST_DON_ZORRO_CLICK="BREADCRUMB_FIRST_SPRINGFEST_DON_ZORRO_CLICK",t.BREADCRUMB_FIRST_SPRINGFEST_HARRIET_HOOD_CLICK="BREADCRUMB_FIRST_SPRINGFEST_HARRIET_HOOD_CLICK",t.FEATURE_DUNGEONS="BREADCRUMB_FEATURE_DUNGEONS",t.BREADCRUMB_STARTED_CRYSTAL_CAVERNS="BREADCRUMB_STARTED_CRYSTAL_CAVERNS"}(e||(e={}))},function(t,i,n){"use strict";n.d(i,"a",(function(){return s}));var e=n(0),s=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(e.__extends)(i,t),i}(Phaser.Signal)},function(t,i,n){"use strict";n.d(i,"a",(function(){return s}));var e=n(0),s=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(e.__extends)(i,t),i}(Phaser.Point)},function(t,i,n){"use strict";n.d(i,"b",(function(){return e})),n.d(i,"a",(function(){return f}));var e,s=n(0),r=n(5),h=n(2),o=n(6),u=n(20),a=n(10),c=n(19),l=n(3);!function(t){t[t.UP=0]="UP",t[t.UP_RIGHT=45]="UP_RIGHT",t[t.RIGHT=90]="RIGHT",t[t.DOWN_RIGHT=135]="DOWN_RIGHT",t[t.DOWN=180]="DOWN",t[t.DOWN_LEFT=225]="DOWN_LEFT",t[t.LEFT=270]="LEFT",t[t.UP_LEFT=315]="UP_LEFT"}(e||(e={}));var f=function(t){function i(i,n,s,u,c,f,b,v,d){void 0===b&&(b=e.UP);var O=t.call(this,i,n,s.x,s.y)||this;O.isBlocked=!1,O.data={},O.canReTrigger=!1,O.callback=null,O.frameCount=0,O.fired=!1,O.data=s,O.user=u,O.path=c,O.canReTrigger=r.get(s,"canReTrigger",!1),O.callback=d?null:f;var m=r.get(s,"guideHandPathToX",s.x),p=r.get(s,"guideHandPathToY",s.y),g=b;l.b.isValid(g)||(g=s.x<50?s.y<50?e.UP_LEFT:s.y>670?e.DOWN_LEFT:e.LEFT:s.x>1230?s.y<50?e.UP_RIGHT:s.y>670?e.DOWN_RIGHT:e.RIGHT:s.y<50?e.UP:s.y>60?e.DOWN:e.LEFT);var y=O.add(h.a.instance.prodigy.create.sprite(0,0,"atlas-18","area-pointer"));y.anchor.setTo(.5,0),y.angle=g,y.inputEnabled=!0,y.events.onInputDown.add(O.moveTo.bind(O,m,p));var j=0;g>e.UP&&g<e.DOWN?j=-30:g>e.DOWN&&g<360&&(j=30);var _=0;return g>e.LEFT||g<e.RIGHT?_=30:g>e.RIGHT&&g<e.LEFT&&(_=-30),y.x=r.get(s,"arrowOffsetX",0),y.y=r.get(s,"arrowOffsetY",0),O.game.add.tween(y).to({x:y.x+j,y:y.y+_},400,o.a.Quadratic.InOut,!0,0,a.a.MAX_SAFE_INTEGER,!0),O.visible=!1,O.frameCount=0,O}return Object(s.__extends)(i,t),i.prototype.moveTo=function(t,i){this.user.setValidPath(this.path,t,i,null)},i.prototype.update=function(){if(t.prototype.update.call(this),!(this.user.evtProc||this.fired&&!this.canReTrigger))if(this.frameCount<=0){this.frameCount=5;var i=!1;l.b.isValid(this.data.r)&&u.a.distance(this.user.x,this.user.y,this.x,this.y)<=this.data.r||!l.b.isValid(this.data.r)&&l.b.isValid(this.data.w)&&this.user.x>=this.x-Math.floor(this.data.w/2)&&this.user.x<=this.x+Math.floor(this.data.w/2)&&this.user.y>=this.y-Math.floor(this.data.h/2)&&this.user.y<=this.y+Math.floor(this.data.h/2)?i=!this.fired:this.canReTrigger&&(this.fired=!1),i&&(this.fired=!0,l.b.isValid(this.callback)&&this.callback())}else this.frameCount--},i.prototype.process=function(t,i,n){return void 0===n&&(n=""),this.visible=!1,this.checkDistance(t,i,n)},i.prototype.setClosest=function(){this.visible=!0},i.prototype.checkDistance=function(t,i,n){if(!l.b.isValid(this.data.target)||!l.b.isValid(n))return null;if(t.ID+"-"+i.getTag()===n)return 1;var e=function(t,i,s){if(!l.b.isValid(s)||l.b.inArray(i,s))return null;if(n===s)return i.length+1;var r=s.split("-"),h=t.getZone(r[0]);if(!l.b.isValid(h))return null;for(var o=h.getMap(r[1]).locations,u=null,a=0;a<o.length;a++){var c=e(t,i.concat([s]),o[a]);(!l.b.isValid(u)||c<u&&l.b.isValid(c))&&(u=c)}return u};return e(h.a.instance.prodigy.world,[t.ID+"-"+i.getTag()],this.data.target)},i.prototype.getOverlay=function(){var t,i,n,e;l.b.isValid(this.data.r)?(t=this.x,i=this.y,n=e=this.data.r):l.b.isValid(this.data.rect)?(t=this.x,i=this.y,n=this.data.w,e=this.data.h):(t=this.x+(this.data.x<100?-Math.floor(.5*this.data.w):this.data.x>1180?Math.floor(.5*this.data.w):0),i=this.y+(this.data.y<100?-Math.floor(.5*this.data.h):this.data.y>620?Math.floor(.5*this.data.h):0),n=this.data.w*(this.data.x<100||this.data.x>1180?1:.5),e=this.data.h*(this.data.y<100||this.data.y>620?1:.5));var s=this.game.add.graphics(0,0);return s.beginFill(0,.75),this.data.rect?s.drawRect(t-.5*n,i-.5*e,n,e):s.drawEllipse(t,i,n,e),s},i}(c.a)},function(t,i,n){"use strict";n.d(i,"a",(function(){return s}));var e=n(3),s=function(){function t(t){this.current=null,this.noSkipFrames=!1,this.tweens=[],this.tweenVars={},this.onEndCallbacks=[],this.index=0,this.src=t}return t.prototype.start=function(t,i,n){this.current=null,this.index=0,this.startTime=e.b.isValid(t)?t:Date.now();for(var s=0;s<this.tweens.length;s++){var r=this.tweens[s];r.start=0===s?this.startTime:this.tweens[s-1].end,r.end=r.start+r.duration}this.noSkipFrames=!!e.b.isValid(n)&&n,this.onComplete=i},t.prototype.end=function(t){e.b.isValid(t)&&this.onEndCallbacks.push(t)},t.prototype.set=function(t,i,n,e){void 0===e&&(e=1),this.tweens.push({type:"set",tag:t,duration:i.length*n*e,delay:n,frames:i,lastUpdate:0})},t.prototype.delay=function(t){this.tweens.push({type:"delay",duration:t})},t.prototype.update=function(t){if(e.b.isValid(this.startTime))if(this.current&&e.b.isValid(this.current.frames)&&1===this.current.frames.length){if("set"!==this.current.type||e.b.isValid(this.tweenVars.next)){if(t>=this.tweenVars.next){this.tweenVars.next+=this.current.delay;for(var i=0;i<this.onEndCallbacks.length;i++)this.onEndCallbacks[i]()}}else this.tweenVars.next=this.current.start+this.current.delay,this.tweenVars.frame=0,this.src[this.current.tag]=this.current.frames[0];t>=this.current.end&&(this.current=null,e.b.isValid(this.onComplete)&&this.onComplete())}else{if(this.current){var n=Math.floor((t-this.current.start)/this.current.delay)*this.current.delay+this.current.start,s=t-this.current.delay,r=s-this.current.lastUpdate>this.current.delay;if(!this.noSkipFrames&&s<=this.current.lastUpdate||r)return"set"!==this.current.type||e.b.isValid(this.tweenVars.next)||(this.tweenVars.next=this.current.start+this.current.delay,this.tweenVars.frame=0,this.src[this.current.tag]=this.current.frames[0]),r&&(this.current.lastUpdate=n),null;if(this.current.lastUpdate=n,"set"===this.current.type)if(e.b.isValid(this.tweenVars.next)||(this.tweenVars.next=this.current.start+this.current.delay,this.tweenVars.frame=0,this.src[this.current.tag]=this.current.frames[0]),t>=this.current.end)this.src[this.current.tag]=this.current.frames[this.current.frames.length-1];else if(t>=this.tweenVars.next){if(this.tweenVars.next+=this.current.delay,this.tweenVars.frame++,this.tweenVars.frame>=this.current.frames.length){this.tweenVars.frame=0;for(i=0;i<this.onEndCallbacks.length;i++)this.onEndCallbacks[i]()}this.src[this.current.tag]=this.current.frames[this.tweenVars.frame]}t>=this.current.end&&(this.current=null,e.b.isValid(this.onComplete)&&this.onComplete())}this.current||(this.tweenVars={},this.index>=this.tweens.length?this.startTime=null:(this.current=this.tweens[this.index],this.index++))}},t}()},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t.FunnelBuyMemberItem="Buy-Member-Item",t.FunnelSecondWheelSpin="Second-Wheel-Spin",t.FunnelEnterDarkTower="Enter-Dark-Tower",t.FunnelCatchMorePets="Catch-More-Pets",t.FunnelOpenMemberChestBattle="Open-Member-Chest-Battle",t.FunnelOpenMemberChestWorld="Open-Member-Chest-World",t.FunnelEquipNewLockedItem="Equip-New-Locked-Item",t.FunnelEquipBackpackLockedItem="Equip-Backpack-Locked-Item",t.FunnelEquipCardLockedItem="Equip-Card-Locked-Item",t.FunnelCatchPetAgain="Catch-Pet-Again",t.FunnelUseBoost="Use-Boost",t.FunnelClickHUDButton="Click-HUD-Button",t.FunnelEvolutionMemberLock="Evolution-Member-Lock",t.FunnelTileScreen="Tile-Screen-Load",t.FunnelCharSelect="Char-Select-Load",t.FunnelPVEBattleScreen="PVE-Battle-Screen-Load",t.FunnelPVPBattleScreen="PVP-Battle-Screen-Load",t.FunnelVideoPlayer="Video-Player",t.FunnelTransitMap="Transit-First-Map",t.FunnelClickMemberDance="Click-Member-Dance",t.FunnelFireTitanCatapult="Fire-Titan-Catapult",t.FunnelSelectMemberNickname="Select-Member-Nickname",t.FunnelClickMemberBounty="Click-Member-Bounty",t.FunnelClickMemberBoxMail="Click-Member-Box-Mail",t.FunnelEquipLevelLockedItem="Equip-Level-Locked-Item",t.FunnelCatchUpToClass="Catch-up-to-Your-Class",t.FunnelClickWizardWatch="Click-Wizard-Watch-CTA",t.FunnelCatchMemberLockedPet="Catch-Member-Locked-Pet",t.FunnelLoginScreen="login_screen_funnel",t.StageClickItem="Click-Item",t.StageClickBuy="Click-Buy",t.StageClickMembership="Click-Membership",t.StageClickParentConfirmation="Click-Parent-Confirmation",t.StageClickSpinAgain="Click-Spin-Again",t.StageEnterTower="Enter-Tower",t.StageCatchPet="Catch-Pet",t.StageOpenChest="Open-Chest",t.StageEquipItem="Equip-Item",t.StageCatchPetFail="Catch-Pet-Fail",t.StageTryAgain="Try-Again",t.StageClickBoost="Click-Boost",t.StageClickStars="Click-Stars",t.StageClickButton="Click-Button",t.StageEvolutionSeeButton="Evolution-See-Button",t.StageEvolutionClickButton="Evolution-Click-Button",t.StageEvolutionEvolvePet="Evolve-Pet",t.StageEvolutionConverted="Evolution-Converted",t.StageTransitMap="Transit-Map",t.StageDanceStart="Dance",t.StageFireCatapult="Fire-Catapult",t.StageSelectNickname="Select-Nickname",t.StageClickBounty="Click-Bounty",t.StageEquipFromBackpack="Equip-From-Backpack",t.StageEquipFromPouch="Equip-From-Pouch",t.StageLoadStart="Load-Start",t.StageLoadEnd="Load-End",t.StageSaved="Character-Saved",t.StageVideoStart="Video-Start",t.StageVideoEnd="Video-Complete",t.StageCloseVideo="Close-Video",t.StageInsufficientCurrency="Insufficient-Currency",t.StageClickCTA="Click-CTA",t.StageSessionLoadGame="load_game",t.StageSessionLoadEnd="load_end",t.StageSessionLoadLogin="load_login",t.StageSessionLoadStart="load_start"}(e||(e={}))},function(t,i,n){"use strict";n.d(i,"a",(function(){return e}));var e=function(){function t(t,i,n,e,s,r,h,o,u,a,c,l,f,b){void 0===l&&(l=null),void 0===f&&(f=null),void 0===b&&(b=null),this.collectionMaps=null,this.zone=t,this.assets=i,this.ID=n,this.descKey=e,this.descCacheKey=e,this.req=s,this.area=r,this.areaCache=r,this.onStart=h,this.onProc=o,this.onComplete=u,this.reward=a,this.chain=c||!1,this.questGiver=l,this.questReceiver=f,this.alternateOnStart=b}return t.prototype.setup=function(t,i,n){return{}},t.prototype.start=function(t,i,n){return{}},t.prototype.process=function(t,i,n){},t.prototype.update=function(t,i,n){},t}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return c}));var e=n(0),s=n(1),r=n(2),h=n(12),o=n(66),u=n(54),a=n(3),c=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._initialAtlas="",i._initialFrame=null,i._sprite=null,i.onLoaded=new h.a,i}return Object(e.__extends)(i,t),Object.defineProperty(i.prototype,"sprite",{get:function(){return this._sprite},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"OnLoaded",{get:function(){return this.onLoaded},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.prototype.create.call(this),this._sprite=r.a.instance.prodigy.create.sprite(0,0),this.setRootContainer(this._sprite),this._initialAtlas&&this.setAsset(this._initialAtlas,this._initialFrame)},i.prototype.setAnchor=function(t,i){this._sprite.anchor.setTo(t,i)},i.prototype.tint=function(t){this._sprite.tint=t},i.prototype.setScale=function(t,i){this._sprite.scale.setTo(t,i)},i.prototype.getScale=function(){return this._sprite.scale},i.prototype.setAlpha=function(t){this._sprite.alpha=t},i.prototype.getWorld=function(){return this._sprite.world},i.prototype.getWidth=function(){return this._sprite.width},i.prototype.getHeight=function(){return this._sprite.height},i.prototype.getEvents=function(){return this._sprite.events},i.prototype.setInputEnabled=function(t){void 0===t&&(t=!0),this._sprite.inputEnabled=t},i.prototype.enableDragging=function(t,i,n,e){this._sprite.inputEnabled&&(this._sprite.input.enableDrag(t,i),a.b.isDefined(n)&&a.b.isDefined(e)&&this._sprite.input.enableSnap(n,e))},i.prototype.disableDragging=function(){this._sprite.input.disableDrag()},i.prototype.getBounds=function(){var t=this._sprite.getBounds();return new o.a(t.x,t.y,t.width,t.height)},i.prototype.resetToOrigin=function(){this._sprite.position.setTo(0,0)},i.prototype.setAsset=function(t,i){var n=this;if(this._sprite){this._targetSource=t,this._targetFrame=i;var e=this.getAssetLoader();e.isLoaded(t,u.a.Image)?this._sprite.key!==t?(this._sprite.loadTexture(t,i),this.onLoaded.dispatch()):i&&this.setFrameName(i):e.loadAssets([t],(function(){t===n._targetSource&&n.setAsset(t,n._targetFrame)}))}else this._initialAtlas=t,this._initialFrame=i},i.prototype.getAssetKey=function(){return this._sprite.key},i.prototype.getInputHandler=function(){return this._sprite.input},i.prototype.hasUniqueInstance=function(){return!0},i.prototype.setAngle=function(t){this._sprite.angle=t},i.prototype.setFrame=function(t){this._sprite.frame=t},i.prototype.setFrameName=function(t){this._sprite&&s.Utils.isDefined(this._sprite.key)?this._sprite.frameName=t:(this._initialFrame=t,this._targetFrame=t)},i.prototype.destroy=function(){null!==this._sprite&&this._sprite.destroy(),this.onLoaded.dispose(),t.prototype.destroy.call(this)},i.prototype.getDimensions=function(){return new s.Size(this._sprite.width,this._sprite.height)},i.prototype.getAssetLoader=function(){var t;return null!==(t=this.assetLoader)&&void 0!==t?t:r.a.instance.prodigy.gameContainer.get(s.EInjectionIdentifiers.AssetLoader)},Object(e.__decorate)([Object(s.injectComponentProperty)(s.EInjectionIdentifiers.AssetLoader),Object(e.__metadata)("design:type",Object)],i.prototype,"assetLoader",void 0),Object(e.__decorate)([Object(s.assetTag)(),Object(s.serializeString)(0,"atlas"),Object(e.__metadata)("design:type",String)],i.prototype,"_initialAtlas",void 0),Object(e.__decorate)([Object(s.serializeString)(0,"frame"),Object(e.__metadata)("design:type",String)],i.prototype,"_initialFrame",void 0),Object(e.__decorate)([Object(s.serializeSignal)(),Object(e.__metadata)("design:type",h.a)],i.prototype,"onLoaded",void 0),i=Object(e.__decorate)([Object(s.componentable)("Image")],i)}(s.RenderComponent)},function(t,i,n){"use strict";n.d(i,"a",(function(){return u}));var e=n(0),s=n(2),r=n(6),h=n(10),o=(n(8),n(3)),u=function(t){function i(i,n,e,r,h){var o=t.call(this,i,n,null,null,null,null,e,r,h)||this;return o.game=i,o.metricsManager=s.a.instance.prodigy.gameContainer.get("cbb-8a49"),o.metricsManager.objectCreated("Element"),o}return Object(e.__extends)(i,t),i.prototype.setRenderState=function(t,i){this.renderOnly=t,this.tintElement=i},i.prototype.showTooltip=function(t,i){if(this.hasTooltip()&&(this.tooltip.destroy(),this.tooltip=null),o.b.isValid(t)){this.tooltip=s.a.instance.prodigy.create.element(this,i);var n=this.tooltip.add(s.a.instance.prodigy.create.sprite(30,0,"atlas-18","tooltip"));n.scale.x=-1,n.alpha=.9,n.width=300,n.height=50,s.a.instance.prodigy.create.font(this.tooltip,90,11,t,{width:230,align:"center"}),n=this.tooltip.add(s.a.instance.prodigy.create.sprite(0,0,"atlas-21","type")),this.game.add.tween(n).to({x:10},1e3,r.a.Quadratic.InOut,!0,0,h.a.MAX_SAFE_INTEGER,!0)}},i.prototype.hasTooltip=function(){return o.b.isValid(this.tooltip)},i.prototype.highlight=function(t,i,n,e){void 0===i&&(i=0),void 0===n&&(n=0),void 0===e&&(e=400),this.isHighlighted()&&(this.arrow.destroy(),this.arrow=null),t&&(this.arrow=this.add(s.a.instance.prodigy.create.sprite(0,0,"atlas-21","help")),this.arrow.x=i+Math.floor(this.width/2),this.arrow.y=n-this.arrow.height+10,this.game.add.tween(this.arrow).to({y:this.arrow.y+25},e,r.a.Quadratic.InOut,!0,0,h.a.MAX_SAFE_INTEGER,!0))},i.prototype.isHighlighted=function(){return o.b.isValid(this.arrow)},i.prototype.destroy=function(i,n){this.unregisterGetElementListener(),this.cacheAsBitmap=!1,this.metricsManager&&(this.metricsManager.objectDestroyed("Element"),this.metricsManager=null),this.tooltip=null,this.arrow=null,t.prototype.destroy.call(this,i,n)},i.prototype.registerGetElementListener=function(){0},i.prototype.unregisterGetElementListener=function(){0},i.prototype.onGetUIElement=function(t){return o.b.isValid(t)&&this instanceof t?this:null},i.prototype.getInjectedValue=function(t){return s.a.instance.prodigy.gameContainer.get(t)},i}(n(230).a)},function(t,i,n){"use strict";n.d(i,"a",(function(){return r}));var e=n(0),s=n(13),r=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(e.__extends)(i,t),i.circumferencePoint=function(t,n,e,r,h){void 0===r&&(r=-1),void 0===h&&(h=!0);var o=r>0?.5*r:1,u=e;h||(u=i.degToRad(e));var a=new s.a;return a.x=t+o*Math.cos(u),a.y=n+o*Math.sin(u),a},i}(Phaser.Math)},function(t,i,n){"use strict";n.d(i,"a",(function(){return l}));var e=n(0),s=n(1),r=n(2),h=n(6),o=n(10),u=n(161),a=n(8),c=n(3),l=function(t){function i(i,n,e,s,h,o,u,a){var l=t.call(this,r.a.instance.prodigy.gameContainer)||this;return l.tag="",l.isScene=!1,l.nameKey="",l.x=0,l.y=0,l.battleBG="",l.isQuestHub=!1,l.locations=[],l.questParams={},l.mapMonsters=[],l.tag=n,l.nameKey=e,l.zoneName=i.ID+"-"+n,l.x=s,l.y=h,l.file="map-"+l.zoneName.toLowerCase(),l.onFaint=i.onFaint,l.zone=i,l.battleBG=i.battleBG,c.b.isValid(a)?l.file=a.toLowerCase():l.file="map-"+l.zoneName.toLowerCase(),l.isQuestHub=i.questHub.indexOf(n)>=0,l.assets=[l.file,"atlas-160","atlas-166","sfx-31"].concat(u),l.locations=o,l}return Object(e.__extends)(i,t),Object.defineProperty(i.prototype,"name",{get:function(){return this.getName()},enumerable:!0,configurable:!0}),i.prototype.getName=function(){return r.a.instance.prodigy.gameContainer.get(s.GameIdentifiers.LocalizationService).getText(this.nameKey)},i.prototype.getLocation=function(){return this.zoneName},i.prototype.setup=function(t,i,n){void 0===n&&(n={}),this.questParams=c.b.isValid(n)?n:{};var e=r.a.instance.prodigy.gameContainer.get("cbb-8a49"),h=e.timeToPlayMS;null!==h&&(s.Logger.log("TTP: "+h,s.LogLevel.Verbose),r.a.instance.prodigy.gameContainer.get("474-551d").create("Game-Load","Time-To-Play",void 0,void 0,void 0,""+h).broadcast(),e.timeToPlayMS=null),r.a.instance.prodigy.gameContainer.get("adf-10da").create("map-enter","progression",this.zone.name,this.zone.ID).broadcast();var o=r.a.instance.prodigy.bounty.hasBounty(this.zone.ID,this.tag);c.b.isValid(o)&&r.a.instance.prodigy.bounty.placeBounty(o,i,this),this.zone.hasDaily(this)&&c.b.isValid(this.zone.monsters)&&this.zone.placeDaily(this,t,i),this.game=t,this.screen=i,this.game.broadcaster.addAppListener(a.p.EnableDynamicLayer,this.toggleDynamicLayer.bind(this),this,null,!0)},i.prototype.start=function(t,i,n){var e=c.b.isValid(n)?n:this.zone.bgmID;r.a.instance.prodigy.audio.playBGM(e,!0),r.a.instance.prodigy.audio.resumeBGM()},i.prototype.process=function(t,i,n){},i.prototype.update=function(t){},i.prototype.getTag=function(){return this.tag},i.prototype.cleanup=function(){this.game?(this.game.broadcaster.removeAppListener(a.p.EnableDynamicLayer,this),t.prototype.cleanup.call(this)):s.Logger.log("Map cleanup called after map destroyed.",s.LogLevel.Warning)},i.prototype.processDynamicLayers=function(t,i){var n,s;try{for(var r=Object(e.__values)(this.dynamicSprites),h=r.next();!h.done;h=r.next()){var o=h.value;c.b.isValid(o.collisionTile)&&o.collisionTile?o.destroy():o.isAbove?(i.above.bringToTop(this.dynamicLayerContainers["element-"+o.dynamicToggle].above),this.dynamicLayerContainers["element-"+o.dynamicToggle].above.add(o)):(i.below.bringToTop(this.dynamicLayerContainers["element-"+o.dynamicToggle].below),this.dynamicLayerContainers["element-"+o.dynamicToggle].below.add(o))}}catch(u){n={error:u}}finally{try{h&&!h.done&&(s=r.return)&&s.call(r)}finally{if(n)throw n.error}}},i.prototype.addAreaEvent=function(t,i,n,e,s,h,o,u,a,l){return void 0===a&&(a=!1),void 0===l&&(l=!1),n.target=e,!c.b.isValid(o)&&r.a.instance.prodigy.classModeController.isClassMode()&&r.a.instance.prodigy.classModeController.isLockedZone(e)?(n.canReTrigger=!0,i.addAreaEvent(n,r.a.instance.prodigy.classModeController.onClassMode.bind(r.a.instance.prodigy.classModeController,e),u,a,l)):c.b.isValid(o)?i.addAreaEvent(n,o,u,a,l):i.addAreaEvent(n,r.a.instance.prodigy.world._.bind(r.a.instance.prodigy.world,e,s,h),u,a,l)},i.prototype.addChest=function(t,i,n,e,s,r,h,o){return c.b.isValid(this.questParams.enableChests)&&!this.questParams.enableChests?null:i.addChest(n,e,s,r,h,o)},i.prototype.addMonster=function(t,n,e,s,r,h,u,a,l,f){if(void 0===a&&(a=!1),void 0===l&&(l=null),void 0===f&&(f=!1),c.b.isValid(this.questParams.enableMonsters)&&!this.questParams.enableMonsters||c.b.isValid(this.questParams.overrideMonsterIDWithPippet)&&e===this.questParams.overrideMonsterIDWithPippet)return null;var b=c.b.copyObject(u);if(c.b.isValid(this.mapMonsters[e])||(this.mapMonsters[e]={}),!a&&this.mapMonsters[e].respawn>(new Date).getTime())return null;b.onEnd=c.b.isValid(b.onEnd)?b.onEnd:this.zoneName,b.onFaint=c.b.isValid(b.onFaint)?b.onFaint:this.onFaint,b.screen=c.b.isValid(b.screen)?b.screen:this.battleBG,c.b.isValid(this.mapMonsters[e].data)&&!f&&(b.encounter=[this.mapMonsters[e].data]);var v=n.addMonster(e,s,r,h,b,i.resetMonsterRespawn.bind(this,this.mapMonsters[e],b,o.a.get("GameConstants.Debug.MONSTER_RESPAWN_TIME")),c.b.isValid(this.mapMonsters[e].respawn),l);return this.mapMonsters[e].data=v.monsterData,delete this.mapMonsters[e].respawn,v},i.resetMonsterRespawn=function(t,i,n){t.monsterData=null,t.respawn=(new Date).getTime()+1e3*n,c.b.isValid(i)&&(t.data=null,c.b.isValid(i.onEnc)&&i.onEnc())},i.prototype.addPippet=function(t,i,n,e,s){var h=this.questParams.enableMonsters||!1;this.featureRequirements.meetsRequirements(u.a.FEATURE_REQUIREMENT_ID)&&c.b.isValid(r.a.instance.prodigy.world.pippetEncounterSpawn)&&this.zoneName===r.a.instance.prodigy.world.pippetEncounterSpawn.location&&!h&&(this.questParams.overrideMonsterIDWithPippet=c.b.isValid(n)?n:1,i.addPippet(n,e,s))},i.prototype.addBounty=function(t,n,e,s,r,h,o,u){void 0===u&&(u=!1);var a=c.b.copyObject(o);if(c.b.isValid(this.mapMonsters[e])||(this.mapMonsters[e]={}),!u&&this.mapMonsters[e].respawn>(new Date).getTime())return null;a.onEnd=c.b.isValid(a.onEnd)?a.onEnd:this.zoneName,a.onFaint=c.b.isValid(a.onFaint)?a.onFaint:this.onFaint,a.screen=c.b.isValid(a.screen)?a.screen:this.battleBG,c.b.isValid(this.mapMonsters[e].monsterData)&&(a.encounter=[this.mapMonsters[e].monsterData]);var l=n.addBounty(e,s,r,h,a,i.resetMonsterRespawn.bind(this,this.mapMonsters[e],null,5),c.b.isValid(this.mapMonsters[e].respawn));return this.mapMonsters[e].data=l.monsterData,delete this.mapMonsters[e].respawn,l},i.prototype.addWizard=function(t,i,n,e,s,r,h){r.onEnd=c.b.isValid(r.onEnd)?r.onEnd:this.zoneName,r.onFaint=c.b.isValid(r.onFaint)?r.onFaint:this.onFaint,r.screen=c.b.isValid(r.screen)?r.screen:this.battleBG;var o=i.addWizard(n,e,s,r);return null!==o&&(h&&o.flip(),c.b.isValid(this.questParams.enableWizards)&&!this.questParams.enableWizards&&(o.visible=!1)),o},i.prototype.addConstructedNPC=function(t,i,n,e,s,r,h,o){return c.b.isValid(this.questParams.hiddenNPCs)&&this.questParams.hiddenNPCs.indexOf(s)>-1?null:i.addConstructedNPC(n,e,s,r,h,o)},i.prototype.addCollisionZone=function(t,i,n,e,s){for(var r=t.path.size,h=Math.floor(e/r),o=Math.floor(s/r),u=Math.floor(i/r),a=Math.floor(n/r),c=u;c<u+h;c++)for(var l=a;l<a+o;l++)t.path.area[l][c]=0},i.prototype.init=function(i,n,e,s){return t.prototype.init.call(this,i,n,e,s)},i.prototype.validPathTo=function(t,i,n,e){var s=r.a.instance.prodigy.event.create();s.validPath(i.user,i.path,n,e),s.start()},i.prototype.playPortalEffectExit=function(t,i,n,e,s){var h=r.a.instance.prodigy.event.create();if(this.portalActive)h.enableInput(!1),h.path(this.screen.user,[{x:t,y:i}]),h.portalEffect(t,i,!1),h.enableInput(!0),h.function(r.a.instance.prodigy.world._.bind(r.a.instance.prodigy.world,n,e,s));else{this.landedOnPortal=!0,h.enableInput(!1),h.portalEffect(t,i,!1);var o=640-t,u=360-i,a=Math.sqrt(o*o+u*u);0===a&&(a=1,o=1),h.path(this.screen.user,[{x:80*o/a+t,y:80*u/a+i}]),h.set(this,"landedOnPortal",!1),h.set(this,"portalActive",!0),h.function(this.addAreaEvent.bind(this,this.game,this.screen,{x:t,y:i,w:100,h:80},n,e,s,this.playPortalEffectExit.bind(this,t,i,n,e,s))),h.enableInput(!0)}h.start()},i.prototype.playPortalEffectEnter=function(t,i,n,e){var s=r.a.instance.prodigy.event.create();this.portalActive||(s.enableInput(!1),s.portalEffect(t,i,!1),c.b.isValid(n)&&c.b.isValid(e)&&s.path(this.screen.user,[{x:n,y:e}]),s.set(this,"landedOnPortal",!1),s.set(this,"portalActive",!0),s.enableInput(!0),s.start())},i.prototype.showAllBounties=function(t,i){if(c.b.isValid(this.coord))for(var n=0;n<this.coord.length;n++){var e={ID:84,seed:Math.floor(100*Math.random()),complete:0};r.a.instance.prodigy.bounty.placeBountyHere(e,i,this,n)}},i.prototype.toggleDynamicLayer=function(t,i,n,e){var s=this;if(void 0===e&&(e=1),c.b.isValid(this.dynamicLayerContainers)){var r=n?1:0;c.b.isValid(this.dynamicLayerContainers["element-"+i])&&(t.add.tween(this.dynamicLayerContainers["element-"+i].above).to({alpha:r},c.b.isValid(e)?e:1,h.a.Linear.None).start(),t.add.tween(this.dynamicLayerContainers["element-"+i].below).to({alpha:r},c.b.isValid(e)?e:1,h.a.Linear.None).start()),c.b.isValid(this.dynamicLayerContainers["collision-"+i])&&(this.dynamicLayerContainers["collision-"+i].forEach((function(t){s.screen.area[t.y][t.x]=n?t.value:1})),this.screen.path.init(this.screen.area,this.screen.tileSize))}},Object(e.__decorate)([Object(s.injectProperty)("8b3-1932"),Object(e.__metadata)("design:type",Object)],i.prototype,"featureRequirements",void 0),i}(n(259).a)},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t[t.BREADCRUMB=0]="BREADCRUMB",t[t.FLOOR_AWARD_FLOATLINGS=1]="FLOOR_AWARD_FLOATLINGS",t[t.FLOOR_PUSH_FLOATLING=2]="FLOOR_PUSH_FLOATLING",t[t.FLOOR_SET_BLOCK_COUNT=3]="FLOOR_SET_BLOCK_COUNT",t[t.FLOOR_SET_DECORATION_POSITIONS=4]="FLOOR_SET_DECORATION_POSITIONS",t[t.FLOOR_SET_DECORATIONS=5]="FLOOR_SET_DECORATIONS",t[t.FLOOR_SET_EXTERNAL_BUILD=6]="FLOOR_SET_EXTERNAL_BUILD",t[t.FLOOR_SET_FRAME_ID=7]="FLOOR_SET_FRAME_ID",t[t.FLOOR_SET_HAS_SHROUD=8]="FLOOR_SET_HAS_SHROUD",t[t.FLOOR_SET_NUM_SPELLS=9]="FLOOR_SET_NUM_SPELLS",t[t.FLOOR_SET_ROOM_ID=10]="FLOOR_SET_ROOM_ID",t[t.FLOOR_SET_SKILL_ID=11]="FLOOR_SET_SKILL_ID",t[t.FLOOR_SET_STATE=12]="FLOOR_SET_STATE",t[t.FLOOR_START_BUILDING=13]="FLOOR_START_BUILDING",t[t.TOWER_CREATE_FLOOR=14]="TOWER_CREATE_FLOOR",t[t.TOWER_MOVE_FLOOR=15]="TOWER_MOVE_FLOOR",t[t.TOWER_PUSH_FLOOR=16]="TOWER_PUSH_FLOOR",t[t.TOWER_REMOVE_FLOOR=17]="TOWER_REMOVE_FLOOR",t[t.TOWER_SET_ACTIVE_TOWER=18]="TOWER_SET_ACTIVE_TOWER",t[t.TOWER_SET_INFINITY_TOWER=19]="TOWER_SET_INFINITY_TOWER",t[t.TOWER_SET_SIDEWALK_ID=20]="TOWER_SET_SIDEWALK_ID",t[t.TOWN_CREATE_INFINITY_TOWER=21]="TOWN_CREATE_INFINITY_TOWER",t[t.TOWN_CREATE_TOWER=22]="TOWN_CREATE_TOWER",t[t.TOWN_PUSH_TOWER=23]="TOWN_PUSH_TOWER",t[t.TOWN_REMOVE_TOWER=24]="TOWN_REMOVE_TOWER",t[t.TOWN_FIND_DESCENDED_FLOATLINGS_TOWER=25]="TOWN_FIND_DESCENDED_FLOATLINGS_TOWER",t[t.FLOATLING_SET_ELEMENT=26]="FLOATLING_SET_ELEMENT",t[t.FLOATLING_SET_EXPLORER_LEVEL=27]="FLOATLING_SET_EXPLORER_LEVEL",t[t.FLOATLING_SET_FLOOR_ASSOCIATION=28]="FLOATLING_SET_FLOOR_ASSOCIATION",t[t.FLOATLING_SET_GEAR_ELEMENT=29]="FLOATLING_SET_GEAR_ELEMENT",t[t.FLOATLING_SET_LAST_THROWN=30]="FLOATLING_SET_LAST_THROWN",t[t.FLOATLING_SET_PERSONALITY=31]="FLOATLING_SET_PERSONALITY",t[t.FLOATLING_SET_STATE=32]="FLOATLING_SET_STATE",t[t.TOWER_TOWN_FLOATLING_FLING_END=33]="TOWER_TOWN_FLOATLING_FLING_END",t[t.TOWER_TOWN_FLOATLING_FLING_START=34]="TOWER_TOWN_FLOATLING_FLING_START",t[t.TOWER_TOWN_INFINITY_TOWER_OPEN=35]="TOWER_TOWN_INFINITY_TOWER_OPEN",t[t.TOWER_TOWN_QUESTION_ANSWERED=36]="TOWER_TOWN_QUESTION_ANSWERED",t[t.TOWER_TOWN_SAVE_TOWN=37]="TOWER_TOWN_SAVE_TOWN",t[t.TOWER_TOWN_SET_CURRENT_TOWN=38]="TOWER_TOWN_SET_CURRENT_TOWN",t[t.TOWER_TOWN_SETTINGS_OPEN=39]="TOWER_TOWN_SETTINGS_OPEN",t[t.TOWER_TOWN_STORE_OPEN=40]="TOWER_TOWN_STORE_OPEN",t[t.EDUCATION_QUESTION_ANSWER=41]="EDUCATION_QUESTION_ANSWER",t[t.EDUCATION_QUESTION_ANSWER_CORRECT=42]="EDUCATION_QUESTION_ANSWER_CORRECT",t[t.EDUCATION_QUESTION_ANSWER_INCORRECT=43]="EDUCATION_QUESTION_ANSWER_INCORRECT",t[t.EDUCATION_QUESTION_INTERFACE_CLOSE=44]="EDUCATION_QUESTION_INTERFACE_CLOSE",t[t.EDUCATION_QUESTION_INTERFACE_OPEN=45]="EDUCATION_QUESTION_INTERFACE_OPEN",t[t.EDUCATION_SET_ALGORITHM=46]="EDUCATION_SET_ALGORITHM",t[t.EDUCATION_SKILL_LOCKED=47]="EDUCATION_SKILL_LOCKED",t[t.EDUCATION_SKILL_MASTERED=48]="EDUCATION_SKILL_MASTERED",t[t.EDUCATION_SKILL_UNLOCKED=49]="EDUCATION_SKILL_UNLOCKED"}(e||(e={}))},function(t,i,n){"use strict";n.d(i,"a",(function(){return v}));var e=n(0),s=n(1),r=n(2),h=n(6),o=n(12),u=n(8),a=n(7),c=n(3),l=n(79),f=n(42),b=n(85),v=function(t){function i(i,n,e,h,u){void 0===e&&(e=null),void 0===u&&(u=[]);var a=t.call(this,i,n)||this;return a.isModal=!0,a.isLoaded=!1,a.assetID=null,a.isNotificationCell=!1,a.background=null,a.uiElementTemplates=[],a.onClose=null,a.uiElements=[],a.uiRoot=null,a.configModifiers=null,a.onLoadCallbacks=[],a.configObj=null,a._onCreate=new o.a,c.b.isValid(r.a.instance.prodigy.notifications)&&r.a.instance.prodigy.notifications.clearNotifications(),a.background=r.a.instance.prodigy.create.element(a),a.configModifiers=c.b.isValid(h)?h:{},c.b.isValid(a.configModifiers.isModal)&&(a.isModal=a.configModifiers.isModal),c.b.isValid(e)&&(a.assetID=e),c.b.isValid(a.assetID)?a.startLoad(u.concat("atlas-157"),a.startLoadComplete.bind(a)):s.Logger.log("Config file for this UI has not been specified",s.LogLevel.Error),a.onLoadCallbacks=[],a}return Object(e.__extends)(i,t),Object.defineProperty(i.prototype,"onCreate",{get:function(){return this._onCreate},enumerable:!0,configurable:!0}),i.prototype.init=function(t){t.add(this),this.process()},i.prototype.close=function(){this.game&&r.a.instance.prodigy&&r.a.instance.prodigy.open.setActiveMenu();try{c.b.isValid(this.onClose)&&this.onClose.apply(this)}catch(t){s.Logger.log("Error in Menu Callback: "+t,s.LogLevel.Error)}c.b.isValid(this.game)&&r.a.instance.prodigy.open.close(this),this.destroy()},i.prototype.processConfigObj=function(){if(c.b.isValid(this.assetID)&&(this.configObj=a.a.getItem("ui",this.assetID).data),c.b.isValid(this.configModifiers)&&c.b.isValid(this.configObj.elements)){if(c.b.isValid(this.configModifiers.modifyProperty))for(var t=0;t<this.configModifiers.modifyProperty.length;t++){var i=this.configModifiers.modifyProperty[t];this.updateConfigProperty(this.configObj.elements,i.element,i.property,i.value)}if(c.b.isValid(this.configModifiers.addChildren))for(t=0;t<this.configModifiers.addChildren.length;t++){i=this.configModifiers.addChildren[t];this.addConfigChild(this.configObj.elements,i.parent,i.child)}if(c.b.isValid(this.configModifiers.modifyTemplateProperty)&&c.b.isValid(this.configObj.templates))for(t=0;t<this.configModifiers.modifyTemplateProperty.length;t++){i=this.configModifiers.modifyTemplateProperty[t];this.updateConfigProperty(this.configObj.templates,i.element,i.property,i.value)}}this.create(),this._onCreate.dispatch()},i.prototype.addTransparent=function(t){void 0===t&&(t=.75);var i=this.background.add(r.a.instance.prodigy.create.sprite(-10,-10,"atlas-18","overlay-small"));i.width=1300,i.height=740,i.alpha=t,i.inputEnabled=!0,r.a.instance.prodigy.gameContainer.get("b46-038d").setBlockType(i.input,l.a.REAR_OVERLAY)},i.prototype.create=function(){var t=c.b.isValid(this.configModifiers.backgroundAlpha)?this.configModifiers.backgroundAlpha:.75,i=!!this.game&&this.game.stage.smoothed;this.game&&(this.game.stage.smoothed=!0),this.addTransparent(t),this.createUIElements(this.configObj,this);for(var n=0;n<this.uiElements.length;n++)c.b.isValid(this.uiElements[n].name)&&(this[this.uiElements[n].name]=this.uiElements[n]);this.onLoad(),this.isModal&&r.a.instance.prodigy.open.hideActiveMenu(),r.a.instance.prodigy.open.setActiveMenu(this),this.process(),this.isNotificationCell||this.game.broadcaster.broadcast(u.s.StopPlayer),this.game.broadcaster.broadcast(u.z.MenuOpened,this.game,[this.assetID]),this.game&&(this.game.stage.smoothed=i)},i.prototype.queuePostCreateCallback=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];for(var n=0;n<t.length;n++)this.onLoadCallbacks.push(t[n])},i.prototype.findConfigElement=function(t,i){for(var n=0;n<t.length;n++){if(c.b.isValid(t[n].name)&&t[n].name===i)return t[n];if(c.b.isValid(t[n].children)){var e=this.findConfigElement(t[n].children,i);if(c.b.isValid(e))return e}}return null},i.prototype.updateConfigProperty=function(t,i,n,e){var r=this.findConfigElement(t,i);null!==r?r[n]=e:s.Logger.log("Config file for this UI does not have "+i+" element!",s.LogLevel.Error)},i.prototype.updateConfigModifierProperty=function(t,i,n){c.b.isValid(this.configModifiers)||(this.configModifiers={}),c.b.isValid(this.configModifiers.modifyProperty)||(this.configModifiers.modifyProperty=[]),this.configModifiers.modifyProperty.push({element:t,property:i,value:n})},i.prototype.addConfigChild=function(t,i,n){var e=this.findConfigElement(t,i);null!==e?c.b.isValid(e.children)?e.children.push(n):e.children=[n]:s.Logger.log("Config file for this UI does not have "+i+" element!",s.LogLevel.Error)},i.prototype.instantiateTemplate=function(t,i){for(var n=0;n<this.uiElementTemplates.length;n++)if(this.uiElementTemplates[n].name===t){for(var e=new b.a(this.game).createUIElements(new Array(this.uiElementTemplates[n]),i),r={},h=0;h<e.length;h++)r[e[h].name]=e[h];return r}return s.Logger.log("Could not find template with name: "+t,s.LogLevel.Verbose),null},i.prototype.update=function(){if(t.prototype.update.call(this),this.isLoaded){this.isLoaded=!1;var i=!!this.game&&this.game.stage.smoothed;this.game&&(this.game.stage.smoothed=!0),this.processConfigObj(),this.game&&(this.game.stage.smoothed=i)}},i.prototype.setCloseCallback=function(t){this.onClose=t},i.prototype.openTween=function(){if(c.b.isValid(this.uiRoot)){var t=this.uiRoot;t.pivot.x=t.width/2,t.pivot.y=t.height/2,t.x+=t.pivot.x,t.y+=t.pivot.y,t.scale.x=.1,t.scale.y=.1,t.alpha=0,this.game.add.tween(t.scale).to({x:1,y:1},200,h.a.Back.Out,!0).frameBased=!1,this.game.add.tween(t).to({alpha:1},120,"Linear",!0).frameBased=!1}},i.prototype.findUIElement=function(t){for(var i=null,n=0;n<this.uiElements.length;n++)if((i=this.uiElements[n]).name===t)return i;return s.Logger.log("Menu.findUIElement - couldn't find UIElement with name: "+t,s.LogLevel.Error),null},i.prototype.findElement=function(t,i){for(var n=null,e=0;e<this.uiElements.length;e++)if((n=this.uiElements[e]).name===i&&n instanceof t)return n;return s.Logger.log("Menu.findElement - Couldn't find UIElement with name: "+i+".",s.LogLevel.Error),null},i.prototype.debugDrawUIElementBounds=function(t){},i.prototype.setActive=function(t){this.visible=t,t&&this.process()},i.prototype.onDebugAutoClick=function(t){},i.prototype.process=function(t){void 0===t&&(t=null);var i=t;c.b.isValid(i)||(i=this,this.isModal&&c.b.isValid(this.game)&&r.a.instance.prodigy.textureMenu.clear());for(var n=0;n<i.children.length;n++)if(i.children[n]instanceof f.a&&!0===i.children[n].renderOnly){for(var e=0;e<i.children[n].images.length;e++){var s=i.children[n].images[e];r.a.instance.prodigy.textureMenu.renderXY(s,s.x+i.children[n].x,s.y+i.children[n].y),s.visible=!1}this.process(i.children[n])}},i.prototype.onLoad=function(){this.onLoadCallbacks.forEach((function(t){"function"==typeof t&&t()})),this.onLoadCallbacks=[]},i.prototype.startLoadComplete=function(){this.isLoaded=!0},i.prototype.startLoad=function(t,i){r.a.instance.prodigy.load.assets(t,i)},i.prototype.createUIElements=function(t,i){var n=new b.a(this.game);c.b.isValid(t.elements)&&(this.uiRoot=new f.a(this.game,i),this.uiRoot.populate({type:"UIELement",width:i.width,height:i.height}),this.uiElements=n.createUIElements(t.elements,this.uiRoot)),c.b.isValid(t.templates)&&(this.uiElementTemplates=t.templates)},i.prototype.getInjectedValue=function(t){return r.a.instance.prodigy.gameContainer.get(t)},i}(f.a)},function(t,i,n){"use strict";n.d(i,"c",(function(){return e})),n.d(i,"b",(function(){return s})),n.d(i,"a",(function(){return a}));var e,s,r=n(0),h=n(2),o=n(144),u=n(3);!function(t){t[t.Top=0]="Top",t[t.Middle=1]="Middle",t[t.Bottom=2]="Bottom"}(e||(e={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.STORE=1]="STORE",t[t.WHEEL=2]="WHEEL",t[t.EQUIP=3]="EQUIP",t[t.START=4]="START",t[t.FOLLOW=5]="FOLLOW",t[t.LEAVE=6]="LEAVE"}(s||(s={}));var a=function(){function t(t){this.game=null,this.onClose=null,this.eventQueue=[],this.dataProvider=null,this.current=null,this.currentDialogue=null,this._skipCounter=0,this._previousDialogueAudioTag=null,this._reenableInputOnClose=!0,this.game=t,this.dataProvider=new o.a}return Object.defineProperty(t.prototype,"skipCounter",{get:function(){return this._skipCounter},set:function(t){this._skipCounter=t},enumerable:!0,configurable:!0}),t.prototype.addEvents=function(t){var i;(i=this.eventQueue).push.apply(i,Object(r.__spread)(t))},t.prototype.start=function(t,i,n){void 0===t&&(t=!1),void 0===n&&(n=!0),this.currentDialogue?this._previousDialogueAudioTag=this.currentDialogue.dialogueConfig.dialogueData?this.currentDialogue.dialogueConfig.dialogueData.audio.tag:null:this._previousDialogueAudioTag=null,this.closeDialogue(!1),this.game.input.enabled=!t,this.onClose=i,this._reenableInputOnClose=n,h.a.instance.prodigy.notifications.setPaused(!0),this.next()},t.prototype.next=function(){if(this.eventQueue.length>0){if(this.current=this.eventQueue.splice(0,this.skipCounter+1)[this.skipCounter],this.skipCounter=0,Object.keys(this.current).length>0)if(u.b.isValid(this.current.callback))this.current.callback(),this.next();else{var t=[];if(u.b.isValid(this.current.dialogueData)&&(t.push(this.current.dialogueData.audio.tag),t.push(this.current.dialogueData.avatar.atlas)),u.b.isValid(this.currentDialogue)&&this.currentDialogue.game)this.currentDialogue.updateSchema(this.current,t);else if(this.currentDialogue=h.a.instance.prodigy.open.characterDialogue(this.current,this.next.bind(this),t),u.b.isValid(this._previousDialogueAudioTag)&&(!this.currentDialogue.dialogueConfig.dialogueData||this.currentDialogue.dialogueConfig.dialogueData.audio.tag!==this._previousDialogueAudioTag)){var i=this.game.cache.getSound(this._previousDialogueAudioTag);i&&!i.isDecoding&&this.game.cache.removeSound(this._previousDialogueAudioTag),this._previousDialogueAudioTag=null}}}else this.close(!1,!0)},t.prototype.closeDialogue=function(t){if(void 0===t&&(t=!1),this.game.input.enabled=this._reenableInputOnClose,u.b.isValid(this.currentDialogue)){if(t&&this.currentDialogue.dialogueConfig.dialogueData&&""!==this.currentDialogue.dialogueConfig.dialogueData.audio.tag){var i=this.game.cache.getSound(this.currentDialogue.dialogueConfig.dialogueData.audio.tag);i&&!i.isDecoding&&this.game.cache.removeSound(this.currentDialogue.dialogueConfig.dialogueData.audio.tag)}this.currentDialogue.close(),this.currentDialogue=null}},t.prototype.close=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),this.closeDialogue(i),this.eventQueue=[],u.b.isValid(this.onClose)&&!t&&this.onClose(),h.a.instance.prodigy.notifications.setPaused(!1)},t.runDialogueSequence=function(i,n,e){void 0===e&&(e=!0);var s=new t(h.a.instance.game);s.addEvents(i.map((function(t){return{dialogueData:s.dataProvider.get(t),blockInput:!0}}))),s.start(!0,n,e)},t}()},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t.Astral="astral",t.Earth="earth",t.Plant="plant",t.Storm="storm",t.Fire="fire",t.Wizard="wizard",t.Water="water",t.Ice="ice",t.Shadow="shadow",t.Mech="mech"}(e||(e={}))},function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n(0);n(508),e.__exportStar(n(403),i),e.__exportStar(n(509),i),e.__exportStar(n(510),i),e.__exportStar(n(511),i),e.__exportStar(n(512),i),e.__exportStar(n(513),i),e.__exportStar(n(524),i),e.__exportStar(n(266),i),e.__exportStar(n(525),i),e.__exportStar(n(527),i),e.__exportStar(n(528),i),e.__exportStar(n(529),i),e.__exportStar(n(201),i),e.__exportStar(n(530),i),e.__exportStar(n(533),i),e.__exportStar(n(535),i),e.__exportStar(n(538),i),e.__exportStar(n(548),i),e.__exportStar(n(429),i),e.__exportStar(n(567),i),e.__exportStar(n(573),i),e.__exportStar(n(575),i),e.__exportStar(n(579),i),e.__exportStar(n(405),i)},function(t,i,n){"use strict";n.d(i,"a",(function(){return a}));var e=n(20),s=n(10),r=n(7),h=n(56),o=n(189),u=n(3),a=function(){function t(){}return t.getStrengths=function(t){return this.weakList[t]},t.getWeaknesses=function(t){return this.strongList[t]},t.getElementsStrongAgainst=function(t){var i=[];for(var n in this.strongList)this.strongList[n].indexOf(t)>-1&&i.push(n);return i},t.isWeakAgainst=function(i,n){return!!u.b.isValid(t.weakList[i])&&t.weakList[i].indexOf(n)>-1},t.isStrongAgainst=function(i,n){return!!u.b.isValid(t.strongList[i])&&t.strongList[i].indexOf(n)>-1},t.xpRequiredForLevel=function(t){if(1===t)return 0;if(2===t)return 10;var i=t-2;return Math.round((1-Math.pow(this.xpConstant,i))/(1-this.xpConstant)*20+10)},t.levelFromStars=function(i){for(var n=1,s=1;s<=100&&i>=this.xpRequiredForLevel(s);s++)n=s;return e.a.clamp(n,t.MIN_LEVEL,t.MAX_LEVEL)},t.rollMissChance=function(i,n){void 0===n&&(n=0);var e=s.b.get("GameConstants.Battle.ENEMY_ACCURACY_OVERRIDE");if(u.b.isValid(e)&&e>=0)return Math.random()>=e;var r=u.b.clampedLerp(this.missDifficultyRange[0],this.missDifficultyRange[1],i/t.MAX_DIFFICULTY);return Math.random()<r+n},t.getCreatureHP=function(t,i){void 0===i&&(i=null);var n=t.getStatHealth(),e=u.b.isValid(i)?i:t.getLevel();return Math.floor(this.getHPFromParams(e,n))},t.getHPFromParams=function(t,i){var n=this.getLevel1Hp(i),e=this.getHpInc(i);return Math.ceil(n+(t-1)*e)},t.calculateDamagePVP=function(i,n,e,s,h){void 0===h&&(h=1);var o=this.calculateSpellDamage(i,n,e),u=r.a.getItem("spell",e).data,a={damage:o,criticalChance:0,elementAdvantage:t.getTypeAdvantage(u,n),attackElementType:u.element,nFactor:1,damageModifiers:0},c={damage:a.damage,critical:!1,elementAdvantage:a.elementAdvantage,nFactor:1,miss:!1},l=s*(this.randomBaseRange[1]-this.randomBaseRange[0])+this.randomBaseRange[0];return c.damage=o*(a.elementAdvantage+l+h),c.damage=Math.round(c.damage),c},t.calculateDamage=function(i,n,e,h,a){void 0===a&&(a=!0);var c=this.calculateSpellDamage(i,n,e),l=r.a.getItem("spell",e).data,f={damage:c,criticalChance:this.criticalChance,elementAdvantage:t.getTypeAdvantage(l,n),attackElementType:l.element,nFactor:1,damageModifiers:0};f=this.applyModifiers(f,h,i,n);var b=Math.random()<=f.criticalChance&&a?this.criticalBonus:0,v=a?Math.random()*(this.randomBaseRange[1]-this.randomBaseRange[0])+this.randomBaseRange[0]:0,d=0;i instanceof o.a&&(d=i.getDamageBonus()-1);var O={damage:f.damage,critical:b>0,elementAdvantage:f.elementAdvantage,nFactor:1,miss:!1};u.b.isValid(f.nFactor)&&(O.nFactor=f.nFactor);var m=s.b.get("GameConstants.Battle.ATTACK_DAMAGE_OVERRIDE");if(u.b.isValid(m))return O.damage=m,O;var p=u.b.isValid(n.modifiers.takenDamageMultiplier)?n.modifiers.takenDamageMultiplier:1;return O.damage=f.damage*(f.elementAdvantage+d+b+v+this.nFactorMap[f.nFactor]+f.damageModifiers+1)*p,O.damage=Math.round(O.damage),s.b.get("GameConstants.Build.KILL_GORE")&&!i.isOpponent&&(O.damage*=30),O},t.getLevel1Hp=function(t){return this.hpMidValue/this.hpStatRange*Math.pow(Math.pow(this.hpStatRange,.25),t-1)},t.getHpInc=function(t){return this.hpMidIncrement/this.hpStatRange*Math.pow(Math.pow(this.hpStatRange,.25),t-1)},t.calculateSpellDamage=function(t,i,n){var e=t.getStatPower(),s=t.getLevel(),h=u.b.isValid(r.a.getItem("spell",n).data.tier)?r.a.getItem("spell",n).data.tier:1,o=this.getLevel1Hp(e),a=this.getHpInc(e),c=1/this.hitsPerKillLevel1*o;return(c+c/(99/((o+99*a)/this.hitsPerKillLevel100/this.spellTierMultipliers[2]/c-1))*(s-1))*this.spellTierMultipliers[h-1]},t.getTypeAdvantage=function(i,n){return t.isStrongAgainst(i.element,n.getElement())?this.typeAdvantageBonus:t.isWeakAgainst(i.element,n.getElement())?this.typeDisadvantageBonus:0},t.applyModifiers=function(t,i,n,e){var s,h,o,a,c=n.modifiers,l=e.modifiers;if(u.b.isValid(c)){if(u.b.isValid(c.potion)&&0!==c.potion)"critical"===(f=r.a.getItem("item",c.potion).data).element?t.criticalChance=2===f.potency?1:.5:"damage"===f.element&&(t.damageModifiers+=.1*f.potency);u.b.isValid(c.damage)&&(t.damageModifiers+=c.damage-1),t.elementAdvantage*=null!==(h=null===(s=c.elementalAdvantageMultipliers)||void 0===s?void 0:s.outgoing)&&void 0!==h?h:1}if(u.b.isValid(l)){var f;if(u.b.isValid(l.potion)&&0!==l.potion)if("elemental"===(f=r.a.getItem("item",l.potion).data).subType){var b=u.b.convertLegacyElements(f.element);t.attackElementType!==b&&"all"!==b||(t.elementAdvantage-=.1*f.potency)}u.b.isValid(l.ignoreElement)&&l.ignoreElement>0&&(t.elementAdvantage=Math.min(t.elementAdvantage,0)),t.elementAdvantage*=null!==(a=null===(o=l.elementalAdvantageMultipliers)||void 0===o?void 0:o.incoming)&&void 0!==a?a:1}return u.b.isValid(i)&&(u.b.isValid(i.dmgMod)&&(t.damageModifiers+=i.dmgMod),u.b.isValid(i.nFactor)&&(t.nFactor=i.nFactor)),t},t.getBestAttack=function(t,i,n,e){if(t.length<=0)return null;for(var s=[],r=0;r<t.length;r++)s[r]={dmg:this.calculateSpellDamage(i,n,t[r]),ID:t[r]};s.sort((function(t,i){return i.dmg-t.dmg}));var h=s[s.length-1].ID;for(r=0;r<s.length;r++)if(Math.random()>e){h=s[r].ID;break}return h},t.getEnemyLevel=function(i,n){return e.a.clamp(Math.round(((this.hpMidValue+this.hpMidIncrement*(i-1))/this.difficultyHitsToKill[n]*3-this.hpMidValue)/this.hpMidIncrement)+1,t.MIN_LEVEL,t.MAX_LEVEL)},t.getAllOutAttackDamage=function(i,n){var e=1;return e=n instanceof h.a?t.allOutAttackBossDamage[n.aoaTier][i.getLiving().length]:t.allOutAttackDamage[n.aoaTier][i.getLiving().length],u.b.isValid(n.modifiers.takenDamageMultiplier)&&(e*=n.modifiers.takenDamageMultiplier),{damage:n.getMaxHearts()*e,critical:!1,elementAdvantage:0,nFactor:1,miss:!1}},t.MAX_LEVEL=100,t.MIN_LEVEL=1,t.ALL_OUT_ATTACK_ENERGY_COST=10,t.MAX_DIFFICULTY=10,t.AI_SWITCH_COOLDOWN=1,t.criticalChance=.05,t.criticalBonus=.15,t.typeAdvantageBonus=.2,t.typeDisadvantageBonus=-.2,t.randomBaseRange=[-.01,.01],t.nFactorMap=[-1,0,0,.15,.3,.5,1,1.5,1.5,1.5,1.5],t.hitsPerKillLevel1=3,t.hitsPerKillLevel100=3,t.spellTierMultipliers=[1,1.2,1.4],t.missDifficultyRange=[.35,.25],t.difficultyHitsToKill={0:4,1:3.6,2:3.5,3:3.4,4:3.3,5:3.2,6:3.1,7:3,8:3,9:3,10:3},t.xpConstant=1.042,t.hpMidValue=500,t.hpMidIncrement=100,t.hpStatRange=1.25,t.hpMaxStat=9,t.strongList={fire:["ice","earth","plant","ice & fire"],water:["fire","ice & fire"],earth:["water"],plant:["water"],storm:["water"],mech:["water"],ice:["storm","mech"],shadow:["fire","water","earth","plant","storm","mech","ice"],wizard:["shadow"],astral:["shadow"]},t.weakList={fire:["water","fire","shadow"],water:["earth","plant","storm","mech","water","shadow"],earth:["fire","ice & fire","earth","plant","shadow"],plant:["fire","ice & fire","plant","earth","shadow"],storm:["ice","ice & fire","storm","mech","shadow"],mech:["ice","ice & fire","mech","storm","shadow"],ice:["fire","ice & fire","ice","shadow"],shadow:["wizard","astral"],wizard:[],astral:[]},t.allOutAttackDamage={1:{1:.34,2:.67,3:1},2:{1:.2,2:.3,3:.4}},t.allOutAttackBossDamage={1:{1:.2,2:.3,3:.5},2:{1:.2,2:.3,3:.4}},t}()},function(t,i,n){"use strict";n.d(i,"b",(function(){return e})),n.d(i,"a",(function(){return T}));var e,s=n(0),r=n(2),h=n(6),o=n(12),u=n(20),a=n(68),c=(n(10),n(8)),l=n(3),f=function(){function t(t){this.target={x:-1,y:-1},this.lastTargetBroadcasted={x:-1,y:-1},this.lastUpdateCount=0,this.isMainPlayer=!1,this.screen=null,this.onStopPlayerBound=null,this.creatureContainer=null,this.game=t}return t.prototype.setup=function(t,i,n){this.screen=t,this.creatureContainer=i,this.isMainPlayer=n,this.isMainPlayer&&(this.game.broadcaster.addAppListener(c.s.MovePlayer,this.onMovePlayer.bind(this),this),this.game.broadcaster.addAppListener(c.s.StopPlayer,this.onStopPlayer.bind(this),this),this.game.broadcaster.addAppListener(c.s.GetTarget,this.onGetTarget.bind(this),this),this.onStopPlayerBound=this.onStopPlayer.bind(this),document.addEventListener("visibilitychange",this.onStopPlayerBound,!1))},t.prototype.destroy=function(){this.isMainPlayer&&(this.game.broadcaster.removeAppListener(c.s.MovePlayer,this),this.game.broadcaster.removeAppListener(c.s.StopPlayer,this),this.game.broadcaster.removeAppListener(c.s.GetTarget,this),document.removeEventListener("visibilitychange",this.onStopPlayerBound,!1)),this.creatureContainer=null,this.game=null,this.screen=null,this.onStopPlayerBound=null},t.prototype.update=function(){if(r.a.instance.prodigy.updateCount%t.UPDATE_INTERVAL==0){if(-1===this.target.x&&-1===this.target.y&&(this.creatureContainer.x>0||this.creatureContainer.y>0)){var i=this.screen.path.xyToTile(this.creatureContainer.x,this.creatureContainer.y);this.target.x=i.x,this.target.y=i.y}this.broadcastPosition()}},t.prototype.broadcastPosition=function(){if(this.isMainPlayer&&!this.creatureContainer.evtProc&&(this.lastTargetBroadcasted.x!==this.target.x||this.lastTargetBroadcasted.y!==this.target.y)&&r.a.instance.prodigy.updateCount-this.lastUpdateCount>t.EMIT_MESSAGE&&(u.a.distanceSq(this.target.x,this.target.y,this.lastTargetBroadcasted.x,this.lastTargetBroadcasted.y)>t.DISTANCE_THRESHOLD||r.a.instance.prodigy.updateCount-this.lastUpdateCount>2*t.EMIT_MESSAGE)){this.lastUpdateCount=r.a.instance.prodigy.updateCount,this.lastTargetBroadcasted.x=this.target.x,this.lastTargetBroadcasted.y=this.target.y;var i=r.a.instance.prodigy.gameContainer.get("506-bf49"),n=r.a.instance.prodigy.gameContainer.get("447-4630").player;i.emitMessage({action:"move",data:{userID:n.userID,target:this.target}})}},t.prototype.onGetTarget=function(t){return void 0===t&&(t=!1),t?{x:this.creatureContainer.x,y:this.creatureContainer.y}:this.target},t.prototype.onFindPath=function(t){if(this.game&&l.b.isValid(t)){var i=this.screen.path.xyToTile(t[0].x,t[0].y);this.creatureContainer.setPath(t,this.screen.path.getCallback(i.x,i.y,this.isMainPlayer)),this.broadcastPosition()}},t.prototype.setNewTarget=function(t,i){if(this.screen.path.isNodeOpen(t,i)){var n=this.screen.path.tileToXY(t,i);this.creatureContainer.x<=0&&this.creatureContainer.y<=0?(this.creatureContainer.x=n.x,this.creatureContainer.y=n.y,l.b.isValid(this.creatureContainer.follow)&&(this.creatureContainer.follow.x=n.x,this.creatureContainer.follow.y=n.y-1)):this.target.x===t&&this.target.y===i||this.screen.path.findPath(this.creatureContainer.x,this.creatureContainer.y,n.x,n.y,this.onFindPath.bind(this),this.isMainPlayer),this.target.x=t,this.target.y=i}},t.prototype.onMovePlayer=function(t,i){var n=this.screen.path.xyToTile(t,i);return!!this.screen.path.isNodeOpen(n.x,n.y)&&(this.target.x=n.x,this.target.y=n.y,this.screen.path.findPath(this.creatureContainer.x,this.creatureContainer.y,t,i,this.onFindPath.bind(this),this.isMainPlayer),!0)},t.prototype.onStopPlayer=function(){if(this.screen.isMapScreen){var t=this.screen.path.xyToTile(this.creatureContainer.x,this.creatureContainer.y);this.target.x=t.x,this.target.y=t.y,this.creatureContainer.stand(),this.creatureContainer.stopTweens()}},t.DISTANCE_THRESHOLD=4,t.EMIT_MESSAGE=120,t.UPDATE_INTERVAL=200,t}(),b=n(19),v=n(99),d=n(7),O=n(52),m=n(78),p=n(1),g=n(233),y=n(13),j=n(234),_=n(235),w=n(33),E=function(t){function i(i,n,e){var s=t.call(this,i,n)||this;return s.emoteData=null,s.emoteElement=null,s.setEmoteData(e),s}return Object(s.__extends)(i,t),i.prototype.setEmoteData=function(t){l.b.isValid(t)&&(this.emoteData=t,r.a.instance.prodigy.create.sprite(0,0,"default-emote-"+this.emoteData.ID,null,{x:.5,y:.5},this.recolour.bind(this)),w.a.cacheAsset(this.game,"default-emote-"+this.emoteData.ID,w.a.commonAssetsCached))},i.prototype.recolour=function(t){if(this.exists&&l.b.isValid(this.parent)&&l.b.isValid(this.parent.data)){var i=new j.a(this.game,null,t.texture.baseTexture.width,t.texture.baseTexture.height);i.draw(t.key),i.update();var n=d.a.getItem("eyeColor",this.parent.data.eyeColor).data.colors;i.processPixelRGB(this.pixelColorReplace,{baseColor:[85,85,85,255],newColor:n}),"2.4.4"===Phaser.VERSION?this.textureGenerated(i,t,i.generateTexture("recolour")):i.generateTexture("recolour",this.textureGenerated.bind(this,i,t))}},i.prototype.textureGenerated=function(t,i,n){var e=this.game.cache.getFrameData(i.key,2)||{frames:[]};e.getFrames&&(e=l.b.frameDataToFrameJson(e.getFrames())),this.game.cache.addTextureAtlas("recolour-atlas","",n.baseTexture.source,e,g.a.TEXTURE_ATLAS_JSON_HASH),t.clear(),t.game.canvasPool?t.game.canvasPool.removeByCanvas(t.canvas):_.a.removeByCanvas(t.canvas),t.destroy();var s=this.emoteData.metadata.assets.default.offSet;r.a.instance.prodigy.create.sprite(s.x,s.y,"recolour-atlas",null,new y.a(.5,.5),this.playEmote.bind(this))},i.prototype.pixelColorReplace=function(t){return t.r===this.baseColor[0]&&t.g===this.baseColor[1]&&t.b===this.baseColor[2]&&(t.r=this.newColor[0][0],t.g=this.newColor[0][1],t.b=this.newColor[0][2]),t},i.prototype.playEmote=function(t){t.scale.set(-1,1),t.smoothed=!0,this.emoteAnimation=t.animations.add("emote",null,2,!0),this.emoteAnimation.onLoop.add(this.stopEmote,this),this.emoteAnimation.onComplete.add(this.endEmote,this),t.play("emote");var i=this.parent,n=i.eyes;this.emoteElement=r.a.instance.prodigy.create.element(i.sprites,i.fixedIKPositions.head.x,i.fixedIKPositions.head.y),p.Utils.toggleDisplayObjSettings(i.headElement,!0),i.headSprites.visible=!1,i.headElement.visible=!1,n.visible=!1,this.emoteElement.addChild(i.head),i.head.addChild(i.eyes),i.head.addChild(t),i.head.addChild(i.hair),i.hat&&!i.hideHat&&i.head.addChild(i.hat)},i.prototype.stopEmote=function(t,i){5===i.loopCount&&(i.loop=!1)},i.prototype.endEmote=function(t){var i=this.parent;if(i.eyes.visible=!0,i.headSprites.visible=!0,i.headElement.visible=!0,i.head.removeChildren(),i.headElement.addChild(i.head),i.headElement.addChild(i.eyes),i.headElement.addChild(i.hair),i.hat&&!i.hideHat){i.headElement.addChild(i.hat);for(var n=0;n<i.headElement.children.length;++n)p.Utils.toggleDisplayObjSettings(i.headElement.children[n],!1)}t.destroy(),this.emoteElement.destroy(),this.emoteElement=null},i}(b.a),I=n(323),A=function(){function t(t,i,n){this.game=t,this.x=i-10,this.y=n-10,this.animate()}return t.prototype.animate=function(){for(var t=0;t<10;t++)this.addStar(80*t+50*Math.random(),9===t)},t.prototype.finish=function(){this.game.broadcaster.broadcast(c.g.Done,this.game,null)},t.prototype.addStar=function(t,i){var n=r.a.instance.prodigy.create.sprite(this.x+20*Math.random(),this.y+20*Math.random(),"atlas-19","user-star");n.anchor.setTo(.5,.5),n.scale.setTo(0,0),n.angle+=Math.round(90*Math.random()),this.game.broadcaster.broadcast(c.t.AddChild,this.game,[n,"overlay"]);var e=.3*Math.random(),s=this.game.add.tween(n.scale).to({x:1,y:1},200,h.a.Quadratic.Out).delay(t),o=this.game.add.tween(n.scale).to({x:1.3,y:1.3},250,h.a.Quadratic.InOut),u=this.game.add.tween(n.scale).to({x:e+1,y:e+1},250,h.a.Quadratic.InOut),a=this.game.add.tween(n.scale).to({x:0,y:0},200,h.a.Quadratic.In);a.onComplete.add(this.onStarComplete.bind(this,n),n),i&&a.onComplete.add(this.finish.bind(this),this),s.chain(o),o.chain(u),u.chain(a),this.game.add.tween(n).to({y:10*Math.random()+90},900,h.a.Quadratic.In).delay(t).start(),this.game.add.tween(n).to({x:40*Math.random()+279},900,h.a.Quadratic.Out).delay(t).start(),s.start()},t.prototype.onStarComplete=function(t){t.kill()},t}();!function(t){t[t.Walk=0]="Walk",t[t.Stand=1]="Stand",t[t.Moonwalk=2]="Moonwalk",t[t.Attack=3]="Attack",t[t.Stopped=4]="Stopped"}(e||(e={}));var T=function(t){function i(i,n,e,s,h,u){var a,c=t.call(this,i,n)||this;if(c.walkSpeed=1.5,c.ran=!1,c._onLoad=new o.a,c.nameText=null,c.chatText=null,c.complete=!1,c.captured=null,c.potionIcon=null,c.potencyIcon=null,c.statusEffects=null,c.onPathFound=new o.a,c.onStopped=new o.a,c.locomotion=null,c.speed=10,c.fxQueue=0,c.pairs=null,c.evtProc=!1,c.castDelay=0,c.walkIntoBattle=!0,c.battleShy=!1,c.P=null,c.source=e,c.setScale=l.b.isValid(s)?s:1,c.x=Math.floor(h),c.y=Math.floor(u),c.ran=c.source.data.hp<=0,c.sprites=r.a.instance.prodigy.create.element(c,0,0),c.indicatorE=r.a.instance.prodigy.create.element(c),c.P=r.a.instance.prodigy.gameContainer.get("ca9-4f6d"),null===(a=c.source.modifiers)||void 0===a?void 0:a.barrier){var f=c.source.modifiers.barrier;c.barrierSprite=r.a.instance.prodigy.create.sprite(0,0,"atlas-141","1",{x:.5,y:.5},c.addBarrierSpritesheet.bind(c,"deflect")),c.barrierSpriteBreak=r.a.instance.prodigy.create.sprite(0,0,"atlas-142","1",{x:.5,y:.5},c.addBarrierSpritesheet.bind(c,"break")),c.barrierSpriteSpark=r.a.instance.prodigy.create.sprite(-165*f.scale.x,19*f.scale.y,"atlas-143","1",{x:.5,y:.5},c.addBarrierSpritesheet.bind(c,"spark")),c.add(c.barrierSprite),c.add(c.barrierSpriteBreak),c.add(c.barrierSpriteSpark)}var b=1===s?-130:-230;return e instanceof O.a&&(b=-150),c.nameText=r.a.instance.prodigy.create.nameFont(c,0,b,""),e instanceof O.a&&c.showName(),c.chatText=r.a.instance.prodigy.create.nameFont(c,0,b,""),c.chatText.FillColor="#FFB600",c.chatText.TextObject.inputEnabled=!1,c.showChat(!1),c.onDestroy.add(c.stopListeners,c),c.initListeners(),m.a.isEnabled()&&(c.updateElementPosition(c.worldPosition.x,c.worldPosition.y),c.updateElementAttribute("data-name",c.source.getName())),c}return Object(s.__extends)(i,t),Object.defineProperty(i.prototype,"OnLoad",{get:function(){return this._onLoad},enumerable:!0,configurable:!0}),i.prototype.showName=function(t){void 0===t&&(t=null);var i=null;i=l.b.isValid(t)?t:this.source.getName(),l.b.isValid(i)&&(this.nameText.setText(i),this.nameText.Active=!0,this.nameText.TextObject.active=!0)},i.prototype.hideName=function(){this.nameText.Active=!1,this.nameText.TextObject.active=!1,this.nameText.TextObject.inputEnabled=!1},i.prototype.showChat=function(t){this.chatText.Active=t,this.chatText.TextObject.active=t},i.prototype.float=function(t){l.b.isValid(this.floatTween)?t||(this.sprites.y=this.sprites.oldY,this.floatTween.stop(),delete this.floatTween):t&&(this.sprites.oldY=this.sprites.y,this.sprites.y=this.sprites.y-10,this.floatTween=this.game.add.tween(this.sprites).to({y:"-20"},1400,h.a.Quadratic.InOut).to({y:"20"},1400,h.a.Quadratic.InOut).loop(),this.floatTween.start())},i.prototype.chat=function(t,i,n){if(this.game){var e=t+12;this.chatBubble?this.chatBubble.setID(e):this.chatBubble=r.a.instance.prodigy.effects.chatBubble(this,e,i,n)}},i.prototype.startChat=function(t){var i=this;if(l.b.isValid(this.game)){var n=this.P.getPhrase(t);l.b.isValid(n)&&(l.b.isValid(this.timer)&&window.clearInterval(this.timer),this.hideName(),this.showChat(!0),this.game.add.tween(this.chatText.GameObject.legacyTransform.group).to({y:this.nameText.GameObject.legacyTransform.y-10},500,h.a.Quadratic.Out).to({y:this.nameText.GameObject.legacyTransform.y},500,h.a.Quadratic.In).start(),this.chatText.setText('"'+n+'"'),this.timer=window.setInterval((function(){i.endChat()}),5e3))}},i.prototype.endChat=function(){l.b.isValid(this.timer)&&window.clearInterval(this.timer),this.timer=null,this.chatText.Active=!1,this.showName()},i.prototype.hop=function(t,i,n,e){void 0===t&&(t=100),void 0===i&&(i=null),void 0===n&&(n=0),void 0===e&&(e=20);var s=this.game.add.tween(this).to({y:this.y-e},t,h.a.Quadratic.Out).to({y:this.y},t,h.a.Quadratic.In).start();this.game.add.tween(this).to({x:this.x+Math.floor(n/2)},t,h.a.Linear.None).to({x:this.x+n},t,h.a.Linear.None).start(),l.b.isValid(i)&&s.onComplete.addOnce(i)},i.prototype.setPath=function(t,i,n){if(l.b.isValid(t)&&l.b.isValid(this.game)){this.stopTweens();for(var e=l.b.isValid(n)?n:this.walkSpeed,s=null,r=null,o=this.x,a=this.y,c=t.length-1;c>=0;c--){var f=t[c];l.b.isValid(f.x)||(f.x=o),l.b.isValid(f.y)||(f.y=a);var b=u.a.distance(f.x,f.y,o,a);if(0!==b){l.b.isValid(s)||(s=this.game.add.tween(this),r=this.game.add.tween(this.sprites.scale));var v=Math.abs(this.sprites.scale.x);s.to({x:f.x,y:f.y},6*b/e,h.a.Linear.None),r.to({x:f.x>o?v:-v},1,h.a.Linear.None),r.to({},6*b/e-100,h.a.Linear.None),o=f.x,a=f.y}}if(l.b.isValid(s)){var d=1,O=function(){0==--d&&l.b.isValid(i)&&i(t)};s.onComplete.addOnce(this.stand,this),s.onComplete.addOnce(O),l.b.isValid(this.onPathFound)&&this.onPathFound.dispatch(t),this.walk(),s.start(),this.moveTween=s,l.b.isValid(r)&&(++d,r.onComplete.addOnce(O),r.start())}else l.b.isValid(i)&&i(t),this.stand()}},i.prototype.setValidPath=function(t,i,n,e,s){var r=this;void 0===s&&(s=!0),t.findPath(this.x,this.y,i,n,(function(t){r.setPath(t,e)}),s)},i.prototype.walk=function(){this.mode!==e.Walk&&(this.mode=e.Walk,this.playAll("walk"))},i.prototype.flip=function(){this.sprites.scale.x=-this.sprites.scale.x},i.prototype.faceToward=function(t){var i=Math.abs(this.sprites.scale.x);this.sprites.scale.x=t>this.x?i:-i},i.prototype.stand=function(){this.mode!==e.Stand&&(this.mode=e.Stand,this.playAll("stand"),this.x=Math.round(this.x),this.y=Math.round(this.y))},i.prototype.playAll=function(t){for(var i=this.sprites.length,n=0;n<i;++n)this.play(this.sprites.children[n],t)},i.prototype.play=function(t,i){if((t instanceof v.a||t instanceof a.a)&&t.play(i,this.speed),t instanceof PIXILegacy.DisplayObjectContainer)for(var n=t.children,e=0;e<n.length;++e)this.play(n[e],i)},i.prototype.stopTweens=function(){l.b.isValid(this.game)&&(this.game.tweens.removeFrom(this,!1),this.game.tweens.removeFrom(this.sprites),l.b.isValid(this.onStopped)&&this.onStopped.dispatch())},i.prototype.stopMoveTween=function(){l.b.isValid(this.game)&&(l.b.isValid(this.moveTween)&&(this.game.tweens.remove(this.moveTween),this.moveTween=null),l.b.isValid(this.onStopped)&&this.onStopped.dispatch())},i.prototype.stopAllAnimations=function(){if(this.mode!==e.Stopped){this.mode=e.Stopped;for(var t=this.sprites.length,i=0;i<t;++i)this.stopAnimation(this.sprites.children[i])}},i.prototype.stopAnimation=function(t){(t instanceof v.a||t instanceof a.a)&&t.animations.stop(null,!0)},i.prototype.startLoad=function(){this.outOfDate=!1},i.prototype.initListeners=function(){this.game.broadcaster.addAppListener(c.e.LevelUp,this.onCreatureLevelUp.bind(this),this,this.source),this.game.broadcaster.addAppListener(c.e.StarsAdded,this.onStarsAdded.bind(this),this,this.source),this.game.broadcaster.addAppListener(c.g.Done,this.onFxAnimationDone.bind(this),this,this.game)},i.prototype.stopListeners=function(){this.game.broadcaster.removeAppListener(c.e.LevelUp,this,this.source),this.game.broadcaster.removeAppListener(c.e.StarsAdded,this,this.source),this.game.broadcaster.removeAppListener(c.g.Done,this,this.game),this.game.broadcaster.removeAppListener(c.b.PopupClosed,this,this)},i.prototype.enableLocomotion=function(t,i){if(!l.b.isValid(this.locomotion)){var n=r.a.instance.prodigy.gameContainer.get("447-4630").player;this.locomotion=new f(this.game),this.locomotion.setup(t,i,this.source===n)}},i.prototype.setNewTarget=function(t,i){l.b.isValid(this.locomotion)&&this.locomotion.setNewTarget(t,i)},i.prototype.setHitbox=function(t){var i,n;this._hitbox=t?{xOffset:null!==(i=t.xOffset)&&void 0!==i?i:0,yOffset:null!==(n=t.yOffset)&&void 0!==n?n:0,width:t.width,height:t.height}:null},i.prototype.reload=function(t){this.outOfDate=!0,this.loadedCallback=t},i.prototype.update=function(){t.prototype.update.call(this),!this.loading&&this.outOfDate&&this.startLoad()},i.prototype.emote=function(t,i,n){void 0===i&&(i=100),void 0===n&&(n=!1);var e=d.a.getItem("emote",t);if(l.b.isValid(this.chatBubble)&&this.chatBubble.destroy(),l.b.isValid(this.game)&&l.b.isValid(e))if(e.data.isAnimated){if(l.b.isValid(this.animatedEmote)&&l.b.isValid(this.animatedEmote.emoteAnimation)&&this.animatedEmote.emoteAnimation.isPlaying)return this.animatedEmote.emoteAnimation.stop(!0,!0),void this.animatedEmote.setEmoteData(e);this.animatedEmote=new E(this.game,this,e)}else l.b.isValid(this.animatedEmote)&&this.animatedEmote.emoteAnimation.isPlaying&&this.animatedEmote.emoteAnimation.stop(!0,!0),this.chatBubble=r.a.instance.prodigy.effects.chatBubble(this,t,i,n);var s=r.a.instance.prodigy.gameContainer.get("447-4630").player;if(this.source===s){var h=l.b.isValid(e.data)&&l.b.isValid(e.data.name)?e.data.name:t.toString();r.a.instance.prodigy.gameContainer.get("adf-10da").create("emote-used","progression","emote",h).broadcast()}},i.prototype.moonwalk=function(){this.mode!==e.Moonwalk&&(this.mode=e.Moonwalk,this.playAll("walk"))},i.prototype.attack=function(){this.mode!==e.Attack&&(this.mode=e.Attack)},i.prototype.damaged=function(){},i.prototype.isDefeated=function(){return this.source.isKnockedOut()||this.captured},i.prototype.isFacingLeft=function(){return this.sprites.scale.x<0},i.prototype.addOnClick=function(t){for(var i=0;i<this.sprites.length;i++)this.sprites.children[i].inputEnabled=!0,this.sprites.children[i].events.onInputDown.add(t.bind(this))},i.prototype.onFxAnimationDone=function(){this.fxQueue>0&&(this.fxQueue--,0===this.fxQueue&&this.game.broadcaster.broadcast(c.e.AnimationDone,this.source,[]))},i.prototype.onStarsAdded=function(){!0===this.game.broadcaster.broadcast(c.b.GetIsRunning,this.game)&&(this.fxQueue++,this.flyingStars=new A(this.game,this.x,this.y-(this.height-35)))},i.prototype.onCreatureLevelUp=function(t,i){"TileScreen"!==this.game.state.current&&this.fxQueue++},i.prototype.doBarrierAnimation=function(){this.barrierSprite.alpha=1,this.barrierSpriteSpark.alpha=1,this.barrierSprite.play("deflect"),this.barrierSpriteSpark.play("spark")},i.prototype.doBarrierBreakAnimation=function(){this.barrierSpriteBreak.alpha=1,this.barrierSpriteSpark.alpha=1,this.barrierSpriteBreak.play("break"),this.barrierSpriteSpark.play("spark")},i.prototype.addBarrierSpritesheet=function(t,i){i.alpha=0;var n=this.source.modifiers.barrier;i.x+=n.offset.x,i.y+=n.offset.y,i.scale.setTo(n.scale.x,n.scale.y),i.smoothed=!1,i.animations.add(t,null,10,!1),i.animations.getAnimation(t).onComplete.add((function(){i.alpha=0}),this)},i.prototype.displayDamage=function(t,i,n){this.getSource().modifiers.barrier&&(this.getSource().getCurrentHearts()>0?this.doBarrierAnimation():(this.doBarrierBreakAnimation(),t.damage=9999,t.critical=!0,this.retreat())),this.healthOverlay.showDamage(t,i,n)},i.prototype.createHealthBar=function(){return l.b.isValid(this.nameText)&&this.hideName(),this.healthOverlay=new I.a(this.game,this),this.healthOverlay},i.prototype.doPuppetBreakAnimation=function(t){this.healthOverlay.doPuppetBreakAnimation(t)},i.prototype.getHitboxWidth=function(){return this._hitbox?this._hitbox.width:Math.abs(this.sprites.width)},i.prototype.getHitboxHeight=function(){return this._hitbox?this._hitbox.height:Math.abs(this.sprites.height)},i.prototype.getHitboxLeft=function(){return this._hitbox?this._hitbox.xOffset-.5*this._hitbox.width:this.sprites.left},i.prototype.getHitboxTop=function(){return this._hitbox?this._hitbox.yOffset-this._hitbox.height:this.sprites.top},i.prototype.getTargetingOffset=function(){return 0},i.prototype.destroy=function(){l.b.isValid(this.timer)&&window.clearInterval(this.timer),this.timer=null,this.P=null,l.b.isValid(this.locomotion)&&(this.locomotion.destroy(),this.locomotion=null),this.onPathFound.dispose(),this.onStopped.dispose(),t.prototype.destroy.call(this)},i.prototype.getSource=function(){return this.source},i.prototype.retreat=function(t){},i.prototype.shouldPlayRetreatOnDefeat=function(){return!1},i.className="CreatureContainer",i}(b.a)},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t.Static="static",t.Video="video",t.Alternative="alternative"}(e||(e={}))},function(t,i,n){"use strict";n.d(i,"a",(function(){return u}));var e=n(1),s=n(477),r=(n(10),n(46)),h=n(84),o=n(3),u=function(){function t(){}return t.isMobile=function(){return t.isTablet()||"mobile"===this._bowserParsedData.platform.type},t.init=function(){"orientation"in screen&&screen.orientation.addEventListener("change",t.onDeviceRotation.bind(t))},t.isTablet=function(){return"tablet"===this._bowserParsedData.platform.type},t.isChrome=function(){return"Chrome"===this._bowserParsedData.browser.name},t.isChromium=function(){return"Chromium"===this._bowserParsedData.browser.name},t.isIpadOS=function(){return"iPadOS"===t.getOsName()},t.isIOS=function(){return"iOS"===this._bowserParsedData.os.name||!(t.isAndroid()||!o.b.isValid(window.navigator.platform))&&(window.navigator.platform.indexOf("iPhone")>=0||window.navigator.platform.indexOf("iPad")>=0||window.navigator.platform.indexOf("iPod")>=0)},t.isSafari=function(){return"Safari"===this._bowserParsedData.browser.name},t.isAndroid=function(){return"Android"===this._bowserParsedData.os.name},t.isEdge=function(){return window.navigator.userAgent.indexOf("Edge")>-1},t.isOpera=function(){return window.navigator.userAgent.indexOf("OPR")>-1||window.navigator.userAgent.indexOf("Opera")>-1},t.getMetricsPlatformName=function(){var i="web";return t.isIOS()?i="ios":t.isMobile()&&(i="android"),i},t.getBrowserType=function(){return this._bowserParsedData.browser.name},t.getBrowserVersion=function(){var t=this._bowserParsedData.browser.version;return e.Utils.isDefined(t)?t:"unknown"},t.nativeAppVersion=function(){return"1"===o.b.getUrlVariable("iosApp")?1:"1"===o.b.getUrlVariable("nativeApp")&&2},t.isNativeApp=function(){return!1!==t.nativeAppVersion()},t.isNativeIOSApp=function(){return this.isNativeApp()&&this.isIOS()},t.isNativeAndroidApp=function(){return this.isNativeApp()&&this.isAndroid()&&!this.isNativeAmazonApp()},t.isFireOS=function(){return"Fire OS"===t.getOsDistribution()||"Amazon"===t.deviceAtlasParsedData.manufacturer},t.isNativeAmazonApp=function(){var t=window.expoReleaseChannel,i=!1;return o.b.isValid(t)&&(i=t.indexOf("amazon")>-1),i},t.getIOSVersion=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return parseInt(t[1],10)}return null},t.getDeviceModel=function(){if(o.b.isValid(t.deviceModel)&&t.deviceModel.length>0)return t.deviceModel;var i,n=navigator.userAgent,e=o.b.isValid(window.navigator.platform)?window.navigator.platform:"";if(n.indexOf("GT-I9000")>=0?i="Samsung-Galaxy-S":n.indexOf("GT-I9100")>=0?i="Samsung-Galaxy-S2":n.indexOf("GT-I9300")>=0||n.indexOf("SCH-I535")>=0||n.indexOf("SGH-I747")>=0?i="Samsung-Galaxy-S3":n.indexOf("GT-I9500")>=0||n.indexOf("GT-I9550")>=0||n.indexOf("GT-I9505")>=0?i="Samsung-Galaxy-S4":n.indexOf("SM-G900")>=0?i="Samsung-Galaxy-S5":n.indexOf("SM-G920")>=0?i="Samsung-Galaxy-S6":n.indexOf("SM-G925")>=0?i="Samsung-Galaxy-S6-Edge":n.indexOf("SM-G930")>=0?i="Samsung-Galaxy-S7":n.indexOf("SM-G950")>=0?i="Samsung-Galaxy-S8":n.indexOf("SM-G955")>=0?i="Samsung-Galaxy-S8+":n.indexOf("SM-G960")>=0?i="Samsung-Galaxy-S9":n.indexOf("SM-G965")>=0?i="Samsung-Galaxy-S9+":n.indexOf("SM-G935")>=0?i="Samsung-Galaxy-S7-Edge":n.indexOf("SM-T350")>=0||n.indexOf("SM-T550")>=0||n.indexOf("SM-T380")>=0?i="Samsung-Galaxy-Tab-A":n.indexOf("GT-N8013")>=0||n.indexOf("GT-N7000")>=0||n.indexOf("GT-i9220")>=0?i="Samsung-Galaxy-Note-1":n.indexOf("GT-N7100")>=0||n.indexOf("SCH-I605")>=0||n.indexOf("SGH-T889")>=0||n.indexOf("SGH-I317")>=0?i="Samsung-Galaxy-Note-2":n.indexOf("SM-N900")>=0||n.indexOf("SM-W900")>=0||n.indexOf("GT-N9000")>=0?i="Samsung-Galaxy-Note-3":n.indexOf("SM-N910")>=0?i="Samsung-Galaxy-Note-4":n.indexOf("SM-N920")>=0?i="Samsung-Galaxy-Note-5":n.indexOf("SM-N930")>=0?i="Samsung-Galaxy-Note-6":n.indexOf("SM-N940")>=0?i="Samsung-Galaxy-Note-7":n.indexOf("SM-N950")>=0||n.indexOf("GT-N5110")>=0?i="Samsung-Galaxy-Note-8":n.indexOf("SM-N960")>=0?i="Samsung-Galaxy-Note-9":n.indexOf("SM-J320")>=0?i="Samsung-Galaxy-J3":n.indexOf("SM-J710")>=0||n.indexOf("SM-J700")>=0||n.indexOf("SM-G610")>=0||n.indexOf("SM-J730")>=0?i="Samsung-Galaxy-J7":n.indexOf("SM-A520")>=0||n.indexOf("SM-A500")>=0?i="Samsung-A5":n.indexOf("SM-G903")>=0?i="Samsung-S5-Neo":n.indexOf("KFTT")>=0||n.indexOf("KFSOWI")>=0?i="Kindle-Fire-Hd-7":n.indexOf("KFASWI")>=0?i="Amazon-Fire-Hd-7":n.indexOf("XT1033")>=0||n.indexOf("XT1032")>=0||n.indexOf("XT1034")>=0||n.indexOf("XT1028")>=0||n.indexOf("XT1031")>=0||n.indexOf("XT1068")>=0||n.indexOf("XT1039")>=0?i="Motorola-Moto-G":n.indexOf("XT1052")>=0||n.indexOf("XT1058")>=0||n.indexOf("XT1049")>=0||n.indexOf("XT1053")>=0||n.indexOf("XT1097")>=0||n.indexOf("XT1095")>=0?i="Motorola-Moto-Z":n.indexOf("vivo 1724")>=0?i="Vivo-Y71":n.indexOf("Lenovo A7000")>=0?i="Lenovo-A7000":n.indexOf("LG K20")>=0?i="LG-K20":n.indexOf("LG-H811")>=0||n.indexOf("LG-H815")>=0?i="LG-G4":n.indexOf("RS988")>=0||n.indexOf("LG-H830")>=0?i="LG-G5":n.indexOf("Redmi Note 4")>=0||n.indexOf("NRD90M")>=0?i="Redmi Note 4":n.indexOf("Idea Tab")>=0||n.indexOf("S6000-F")>=0?i="Idea Tab":n.indexOf("iPhone")>=0||e.indexOf("iPhone")>=0?i="iPhone":n.indexOf("iPad")>=0||e.indexOf("iPad")>=0?i="iPad":(n.indexOf("iPod")>=0||e.indexOf("iPod")>=0)&&(i="iPod"),void 0===i){var s=void 0,r=e;s=t.isIOS()?"iOS":t.isAndroid()?"Android":"Desktop",n.indexOf("CrOS")>=0?r="Chromebook":o.b.isValid(r)&&0!==r.length||(r="Unknown"),i=s+"-"+r}var h=t.getDeviceModelFromLocalStorage();return h&&(i=i+":"+h,t.deviceModel=i),i},t.parseDeviceInformationFromLocalStorage=function(){if(t.deviceAtlasParsedData)return t.deviceAtlasParsedData;var i=JSON.parse(localStorage.getItem("device-information"));return t.deviceAtlasParsedData=i||{osName:"",osVersion:"",osiOS:void 0,osAndroid:void 0,osDistribution:"",browserName:"",browserVersion:"",vendor:"",model:"",yearReleased:"",manufacturer:"",marketingName:"",mobileDevice:void 0,isTablet:void 0,primaryHardwareType:""},t.deviceAtlasParsedData},t.getDeviceModelFromLocalStorage=function(){if(t.deviceModel&&t.deviceModel.indexOf(":")>-1)return"";var i=JSON.parse(localStorage.getItem("device-information"));return i?(t.deviceAtlasParsedData=i,i.marketingName?(i.manufacturer+" "+i.marketingName).trimLeft():i.model):t.DEVICE_UNKNOWN},t.getDeviceHardwareType=function(){if(t.deviceHardwareType)return t.deviceHardwareType;var i=JSON.parse(localStorage.getItem("device-information"));return(null==i?void 0:i.primaryHardwareType)?(t.deviceHardwareType=i.primaryHardwareType,t.deviceHardwareType):t.DEVICE_UNKNOWN},t.getOsDistribution=function(){var i=t.parseDeviceInformationFromLocalStorage();return(null==i?void 0:i.osDistribution)?i.osDistribution:"unknown"},t.getOsName=function(){var i=t.parseDeviceInformationFromLocalStorage();return(null==i?void 0:i.osName)?i.osName:"unknown"},t.onDeviceRotation=function(){e.Logger.log("onDeviceRotation: "+screen.orientation.type,e.LogLevel.Verbose),t.rotationEvent.dispatch(screen.orientation.type.startsWith("landscape"))},t.isDeprecatedIOS=function(){var i=!1,n=screen.availWidth,e=screen.availHeight;return t.isIOS()&&((n<=768&&e<=1024||n<=1024&&e<=768)&&window.devicePixelRatio<2&&(i=!0),(n<=320&&e<=480||n<=480&&e<=320)&&(i=!0)),i},t.whenReady=function(t,i){Phaser.Device.whenReady(t,i)},t._bowserParsedData=s.parse(window.navigator.userAgent),t.deviceAtlasParsedData=void 0,t.DEVICE_UNKNOWN="Unknown",t.rotationEvent=new e.SignalLegacy,t.PERFORMANCE_WARNING_CONFIG=new h.a("BUTTON_OKAY_CAPITAL",null,r.b.Medium,500,"WARNING","WARNING_DEVICE_PERFORMANCE",void 0,void 0,void 0,74),t}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return s}));var e=n(0),s=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(e.__extends)(i,t),i}(Phaser.TileSprite)},function(t,i,n){"use strict";n.d(i,"a",(function(){return o}));var e=n(5),s=n(478),r=n(370),h=n(3),o=function(){function t(){}return t.integerInRange=function(i,n){return Math.floor(t.realInRange(i,n))},t.realInRange=function(t,i,n){return h.b.isValid(n)?new r.a([n]).realInRange(t,i):Math.random()*(i-t)+t},t.seededRandom=function(t){return s(t)()},t.seededRange=function(t,i,n){return Math.floor(this.seededRandom(n)*(i-t+1)+t)},t.normalDistribution=function(t,i){for(var n=0,e=0;e<6;e++)n+=Math.random();return t+(n/=6)*(i-t+1)},t.weightedArrayElement=function(t,i){var n=0,s=[];if(!h.b.isValid(e.find(t,(function(t){return t.weight<=0})))&&t.length>0){for(var r=Math.round(1/(e.minBy(t,"weight").weight/100)),o=0;o<t.length;o++)h.b.isValid(t[o].weight)&&(n+=t[o].weight*r),s.push(n);var u=this.realInRange(0,n,i);for(o=0;o<t.length;o++)if(u<s[o])return t[o]}return null},t.weightedSample=function(t,i){var n=e.map(t,i),s=Math.random()*e.sum(n),r=0;return t[e.findIndex(n,(function(t){return s<(r+=t)}))]},t.getUniqueRandomNumbers=function(t,i,n){var s=i-t,r=[];r.length=s;for(var h=0;h<s;++h)r[h]=t+h;return e.shuffle(r).splice(0,n)},t}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return r}));var e=n(2),s=n(3),r=function(){function t(){}return t.cacheAssets=function(i,n,e){for(var s=0;s<n.length;++s)t.cacheAsset(i,n[s],e)},t.cacheAsset=function(t,i,n){var r=e.a.instance.prodigy.gameContainer.get("d3c-0d33");if(!r||!1!==r.getValue("removeAssets")){var h=e.a.instance.prodigy.assets.getAsset(i);if(h)switch(h.type){case"spine":n[i+"Atlas"]=!0,n[(s.b.isValid(h.filename)?h.filename:i)+".png"]=!0;default:n[i]=!0}}},t.commonAssetsCached={"atlas-160":!0,"game-data":!0,"map-pathing":!0,"bgm-2":!0,"bgm-1":!0,"spine-70":!0,"spine-70Atlas":!0,"spine-85":!0,"spine-85Atlas":!0,"spine-23":!0,"spine-23Atlas":!0,"spine-22":!0,"spine-22Atlas":!0,"atlas-22":!0,"atlas-17":!0,"spine-pet-rescue.png":!0,"spine-bam-aoa-button.png":!0,"atlas-19":!0,"spine-character-shine.png":!0,"spine-xpbar.png":!0,"general-gift-box":!0,"atlas-164":!0,"atlas-151":!0,"atlas-168":!0,"atlas-179":!0,"icon-currency-1":!0,"atlas-157":!0,"atlas-81":!0,"atlas-180":!0,"bgm-3":!0,"atlas-50":!0,"spine-11":!0,"spine-11Atlas":!0,"spine-morph-marble.png":!0,"atlas-159":!0,"atlas-27":!0,"spine-120":!0,"sfx-8":!0,"sfx-22":!0,"sfx-23":!0,"sfx-24":!0,"sfx-26":!0,"sfx-33":!0,"sfx-19":!0,"sfx-32":!0,"spine-120Atlas":!0,"spine-sparkle-worldmap.png":!0,"icon-mini-member-b":!0,"atlas-24":!0,"atlas-10":!0,"atlas-8":!0,"atlas-12":!0,"atlas-144":!0,"atlas-145":!0,"atlas-21":!0,"atlas-148":!0,"atlas-149":!0,"atlas-166":!0,"atlas-167":!0,"atlas-169":!0,"sfx-31":!0,"atlas-9":!0,"atlas-18":!0,"atlas-161":!0,"sfx-18":!0,"spine-242":!0},t.zoneAssetsCached={},t}()},function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n(589);i.AnalyticService=e.AnalyticService,i.sendEvent=e.sendEvent;var s=n(444);i.DataFactory=s.DataFactory;var r=n(223);i.Event=r.Event;var h=n(80);i.EventEnum=h.EventEnum;var o=n(224);i.Factory=o.Factory;var u=n(635);i.Mapper=u.Mapper;var a=n(636);i.AnonymousEvent=a;var c=n(637);i.ApiEvent=c;var l=n(638);i.GameEvent=l;var f=n(660);i.EducationEvent=f;var b=n(666);i.WebEvent=b},function(t,i,n){"use strict";n.d(i,"a",(function(){return A}));var e=n(0),s=n(2),r=n(10),h=n(3),o=n(104),u=n(7),a=n(86),c=n(5),l=function(){function t(){this.updated=!1,this.data={progress:{}}}return t.prototype.init=function(t){c.isEmpty(t)||(this.data=t)},t.prototype.getDataAndClear=function(){return this.updated=!1,this.data},t.prototype.set=function(t,i){this.data[t]=i,this.updated=!0},t.prototype.get=function(t){return this.data[t]},t.prototype.increment=function(t,i){var n=this.get(t);this.set(t,i+(h.b.isValid(n)?n:0))},t.prototype.getProgress=function(t){return c.get(this.data.progress,""+t,0)},t.prototype.complete=function(t){h.b.isValid(this.data.progress)||(this.data.progress=[]),h.b.isValid(this.data.progress[t])?this.data.progress[t]++:this.data.progress[t]=1,this.updated=!0},t}(),f=n(317),b=n(189),v=n(69),d=n(319),O=function(){function t(){this.data={bg:{active:1,own:[1]},items:{},currentHouseTag:"suburbs"},this.updated=!1}return t.prototype.getDataAndClear=function(){return this.updated=!1,this.data},t.prototype.getItems=function(){return this.data.items},t.prototype.setItems=function(t){h.b.isValid(t)&&(h.b.isValid(t.items)||(t.items=this.data.items),h.b.isValid(t.bg)||(t.bg=this.data.bg),h.b.isValid(t.currentHouseTag)||(t.currentHouseTag=this.data.currentHouseTag),this.data=t,h.b.isValid(this.data.active)||(this.add(17),this.add(3),this.add(18),this.add(18),this.add(14),this.add(1),this.add(13),this.data.active=[],this.setActive(17,480,160,1,0,0,0,0),this.setActive(3,400,160,1,0,0,0,0),this.setActive(18,440,100,1,0,0,0,0),this.setActive(18,840,100,1,0,0,0,0),this.setActive(14,880,240,1,0,0,0,0),this.setActive(1,880,140,1,0,0,0,0),this.setActive(13,640,80,1,0,0,0,0)))},t.prototype.add=function(t){var i=this.data.items[t];h.b.isValid(i)||(i=this.data.items[t]={N:0,A:[]}),i.N<9&&i.N++,this.updated=!0},t.prototype.getSortedActive=function(){var t=[];if(!h.b.isValid(this.data.active))return t;for(var i in this.data.items)for(var n=0;n<this.data.active.length;n++){var e=this.data.active[n];e.ID===parseInt(i)&&t.push(e)}return t.sort((function(t,i){return t.z-i.z})),t},t.prototype.setAllInactive=function(){this.data.active=[],this.updated=!0},t.prototype.setActive=function(t,i,n,e,s,r,o,u){var a=this.data.items[t];if(h.b.isValid(a)&&a.N>this.getActive(t)){var c={ID:t,x:i,y:n,dx:s,dy:r,z:e,anchorY:o,r:u,stack:[]};return this.data.active.push(c),this.updated=!0,c}return null},t.prototype.updateActive=function(t,i,n,e,s,r,h,o,u){for(var a=0;a<this.data.active.length;a++){var c=this.data.active[a];c===t&&(c.ID=i,c.x=n,c.y=e,c.z=s,c.dx=r,c.dy=h,c.anchorY=o,c.r=u)}this.updated=!0},t.prototype.setInactive=function(t){h.b.removeFromArray(t,this.data.active),this.updated=!0},t.prototype.getCurrentHouseTag=function(){return this.data.currentHouseTag},t.prototype.setCurrentHouseTag=function(t){this.data.currentHouseTag=t,this.updated=!0},t.prototype.getBackground=function(){return h.b.isValid(this.data.bg.active)?this.data.bg.active:1},t.prototype.getOwned=function(t){return c.get(this.data.items[t],"N",0)},t.prototype.getItemCount=function(){return c.size(this.data.items)},t.prototype.getActiveCount=function(){return c.size(this.data.active)},t.prototype.getUnplacedItems=function(){var t=[];for(var i in this.data.items){var n=this.getActive(parseInt(i));n<this.data.items[i].N&&t.push({ID:parseInt(i),N:this.data.items[i].N-n})}return t},t.prototype.hasMaxQuantityOfItem=function(t){var i=this.data.items[t];return!!i&&i.N>=9},t.prototype.getActive=function(t){var i=0;if(h.b.isValid(this.data.active))for(var n=0;n<this.data.active.length;n++)this.data.active[n].ID===t&&i++;return i},t}(),m=n(320),p=n(26),g=n(9),y=n(32),j=function(t){function i(i){var n=t.call(this)||this;return n._name=null,n.updated=!1,n.playerService=null,n.playerService=i,n.generateRandom(),n.name=new p.NameData,n}return Object(e.__extends)(i,t),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),i.prototype.init=function(i){t.prototype.init.call(this,i);var n=this.playerService.getAppearance(i);n&&(this.name=n.getName())},i.prototype.setGender=function(i){t.prototype.setGender.call(this,i),this.updated=!0},i.prototype.setHair=function(i,n){t.prototype.setHair.call(this,i,n),this.updated=!0},i.prototype.setFace=function(i){t.prototype.setFace.call(this,i),this.updated=!0},i.prototype.setEyeColor=function(i){t.prototype.setEyeColor.call(this,i),this.updated=!0},i.prototype.setSkinColor=function(i){t.prototype.setSkinColor.call(this,i),this.updated=!0},i.prototype.getData=function(){return{name:{first:h.b.isValid(this.name)?this.name.getFirstName():null,middle:h.b.isValid(this.name)?this.name.getMiddleName():null,last:h.b.isValid(this.name)?this.name.getLastName():null,nick:h.b.isValid(this.name)?this.name.getNickname():null},gender:this.gender,hair:{color:this.hairColor,style:this.hairStyle},skinColor:this.skinColor,eyeColor:this.eyeColor,face:this.face}},i.prototype.getDataAndClear=function(){return this.updated=!1,this.getData()},i.prototype.getName=function(){return this.name},i.prototype.setName=function(t){this.name=t,this.updated=!0},i.prototype.randomize=function(){this.setGender(Math.random()>.5?"male":"female"),this.setHair(u.a.getRandomItem("hair").ID,u.a.getRandomItem("hairColor").ID),this.setSkinColor(u.a.getRandomItem("skinColor").ID),this.setEyeColor(u.a.getRandomItem("eyeColor").ID),this.setFace("male"===this.getGender()?c.sample([1,2,3,4,5,6,8,9,15,16]):y.a.integerInRange(1,18));var t=new p.NameData;t.setFirstName(a.a.getRandomFirstName(this.gender)),t.setMiddleName(a.a.getRandomMiddleName()),t.setLastName(a.a.getRandomLastName()),this.setName(t)},i.prototype.generateRandom=function(){this.setName(null),this.setGender(Math.random()<.5?"female":"male"),this.setHair(Math.floor(8*Math.random())+("male"===this.getGender()?16:1),Math.floor(16*Math.random())+1),this.setSkinColor(Math.floor(5*Math.random()+1)),this.setEyeColor(Math.floor(15*Math.random()+1)),this.setFace("male"===this.getGender()?4:12)},i=Object(e.__decorate)([Object(g.injectable)(),Object(e.__metadata)("design:paramtypes",[p.PlayerService])],i)}(n(232).a),_=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.updated=!1,i}return Object(e.__extends)(i,t),i.prototype.setFollow=function(i){t.prototype.setFollow.call(this,i),this.updated=!0},i.prototype.setHat=function(i,n,e){void 0===n&&(n=!0),void 0===e&&(e=!0),t.prototype.setHat.call(this,i),n&&(h.b.isValid(i)&&i>0?this.handleItemEquip(i,"hat",e):this.handleItemUnequip())},i.prototype.setOutfit=function(i,n,e){void 0===n&&(n=!0),void 0===e&&(e=!0),t.prototype.setOutfit.call(this,i),n&&(h.b.isValid(i)&&i>0?this.handleItemEquip(i,"outfit",e):this.handleItemUnequip())},i.prototype.setWeapon=function(i,n,e){void 0===n&&(n=!0),void 0===e&&(e=!0),t.prototype.setWeapon.call(this,i),n&&(h.b.isValid(i)&&i>0?this.handleItemEquip(i,"weapon",e):this.handleItemUnequip())},i.prototype.setSpellRelic=function(i,n,e){void 0===n&&(n=!0),void 0===e&&(e=!0),t.prototype.setSpellRelic.call(this,i),n&&(h.b.isValid(i)&&i>0?this.handleItemEquip(i,"spellRelic",e):this.handleItemUnequip())},i.prototype.setBoots=function(i,n,e){void 0===n&&(n=!0),void 0===e&&(e=!0),t.prototype.setBoots.call(this,i),n&&(h.b.isValid(i)&&i>0?this.handleItemEquip(i,"boots",e):this.handleItemUnequip())},i.prototype.setMount=function(i,n,e){void 0===n&&(n=!0),void 0===e&&(e=!0),t.prototype.setMount.call(this,i),n&&(h.b.isValid(i)&&i>0?this.handleItemEquip(i,"mount",e):this.handleItemUnequip())},i.prototype.getDataAndClear=function(){return this.updated=!1,this.getData()},i.prototype.clearData=function(){this.follow=null,this.hat=null,this.outfit=null,this.weapon=null,this.spellRelic=null,this.boots=null,this.mount=null},i.prototype.randomize=function(){this.outfit=u.a.getRandomItem("outfit").ID,this.hat=u.a.getRandomItem("hat").ID,this.weapon=u.a.getRandomItem("weapon").ID,this.spellRelic=u.a.getRandomItem("spellRelic").ID},i.prototype.unequipLevelLockedItems=function(){this.unequipLevelLockedItem("follow",this.follow),this.unequipLevelLockedItem("hat",this.hat),this.unequipLevelLockedItem("outfit",this.outfit),this.unequipLevelLockedItem("weapon",this.weapon),this.unequipLevelLockedItem("spellRelic",this.spellRelic),this.unequipLevelLockedItem("boots",this.boots),this.unequipLevelLockedItem("mount",this.mount)},i.prototype.unequipLevelLockedItem=function(t,i){var n=u.a.getItem(t,i),e=s.a.instance.prodigy.gameContainer.get("447-4630").player;if(h.b.isValid(n)&&h.b.isValid(n.data.lockLevel)&&e.getLevel()<n.data.lockLevel)switch(t){case"follow":this.setFollow(null);break;case"hat":this.setHat(null);break;case"outfit":this.setOutfit(null);break;case"weapon":this.setWeapon(null);break;case"spellRelic":this.setSpellRelic(null);break;case"boots":this.setBoots(null);break;case"mount":this.setMount(null)}},i.prototype.handleItemEquip=function(t,i,n){void 0===n&&(n=!0),this.updated=!0;var e=u.a.getItem(i,t).data;n&&s.a.instance.prodigy.gameContainer.get("05e-818d").create(i,c.get(e,"name",""),t).broadcast()},i.prototype.handleItemUnequip=function(){this.updated=!0},i}(n(318).a),w=function(){function t(){this.data={},this.updated=!1}return t.hasEntryForMonster=function(t,i){if(!h.b.isValid(t))return!1;for(var n=0;n<t.length;n++)if(t[n].ID===i)return!0;return!1},t.prototype.defeatMonster=function(i,n,e){if(h.b.isValid(this.data[i])){if(h.b.isValid(n.req))for(var s=0;s<n.req.length;s++)"pet"===n.req[s].type&&(this.data[i].M||(this.data[i].M=[]),t.hasEntryForMonster(this.data[i].M,n.req[s].ID)||this.data[i].M.push({ID:n.req[s].ID,N:0}));if(h.b.isValid(this.data[i].M))for(s=0;s<this.data[i].M.length;s++){var r=this.data[i].M[s];r.ID===e&&r.N++}}},t.prototype.defeatBoss=function(t){h.b.isValid(this.data[t])&&(this.data[t].B=1)},t.prototype.setQuests=function(t){this.data=t},t.prototype.getDataAndClear=function(){return this.updated=!1,this.data},t}(),E=function(){function t(){this.data={tutorial:{},world:{},zone:{}},this._updated=!1,this._dungeonStates={}}return Object.defineProperty(t.prototype,"updated",{get:function(){var t=this._updated;if(!t)for(var i in this._dungeonStates)if(this._dungeonStates[i].updated){t=!0;break}return t},set:function(t){this._updated=t},enumerable:!0,configurable:!0}),t.prototype.setData=function(t){if(this.data=t,h.b.isValid(this.data.zone))for(var i in this.data.zone)h.b.isValid(this.data.zone[i].quest)&&h.b.isValid(this.data.zone[i].quest.gameID)&&(this.data.zone[i].quest.ID=this.data.zone[i].quest.gameID,delete this.data.zone[i].quest.gameID)},t.prototype.getDataAndClear=function(){for(var t in this._updated=!1,this._dungeonStates)this._dungeonStates[t].getDataAndClear();return this.data},t.prototype.set=function(t,i){if(h.b.isValid(t)){for(var n=t.split("-"),e=this.data,s=0;s<n.length;s++)h.b.isValid(e[n[s]])||(e[n[s]]={}),s===n.length-1?e[n[s]]=i:e=e[n[s]];this._updated=!0}},t.prototype.get=function(t){if(h.b.isValid(t)){for(var i=t.split("-"),n=this.data,e=0;e<i.length;e++){if(!h.b.isValid(n[i[e]]))return null;n=n[i[e]]}return n}return null},t.prototype.getCompletedQuests=function(t){var i=this.get("zone-"+t+"-quest-ID");return h.b.isValid(i)?i-1:-1},t.prototype.getZoneVars=function(t,i,n){var e=this.get("zone-"+i),r=s.a.instance.prodigy.world.getZone(i),o=0;if(h.b.isValid(e)&&h.b.isValid(r.states))for(var u=0;u<r.states.length;u++){r.states[u].indexOf(n)>=0&&h.b.isValid(e[u])&&e[u]>0&&o++}return o},t.prototype.getDungeonState=function(t,i){var n=this._dungeonStates[i];if(!n){n=s.a.instance.prodigy.gameContainer.resolve(t),this._dungeonStates[i]=n;var e=this.getDungeonSchema(i);e?n.setData(e):(e=n.getInitializationData(),this.data.dungeons[i]=e,n.setData(e,!0))}return n},t.prototype.getDungeonSchema=function(t){return this.data.dungeons||(this.data.dungeons={},this._updated=!0),this.data.dungeons[t]},t}(),I=function(){function t(){this.data={zones:{},menus:{}},this.updated=!1}return t.prototype.getDataAndClear=function(){return this.updated=!1,this.data},t.prototype.setData=function(t){h.b.isValid(t.zones)||(t.zones={}),h.b.isValid(t.menus)||(t.menus={}),this.data=t},t.prototype.getMenuValue=function(t){return this.getValue("menus",t.menu,t.ID)},t.prototype.setMenuValue=function(t,i){this.setValue("menus",t.menu,t.ID,i)},t.prototype.setValue=function(t,i,n,e){void 0===n&&(n=0),void 0===e&&(e=1),h.b.isValid(this.data[t][i])||(this.data[t][i]=[]),this.data[t][i][n]!==e&&(this.data[t][i][n]=e,this.updated=!0)},t.prototype.getValue=function(t,i,n){if(void 0===n&&(n=0),!h.b.isValid(this.data[t][i]))return 0;var e=this.data[t][i];return h.b.isValid(e[n])?e[n]:0},t}(),A=function(t){function i(i){var n=t.call(this,i)||this;return n.tutorial=null,n.kennel=null,n.encounters=null,n.quests=null,n.house=null,n.backpack=null,n.achievements=null,n.state=null,n.Y=!1,n.userID=0,n.appearanceChanged=!1,n.chatID=null,n.emoteID=null,n.danceID=null,n.grade=null,n.world=null,n.coOpTeam=null,n.earlyBirdLastChance=!1,n.transformID=null,n.currentVideoSkillId=null,n._isFocusModeEnabled=!1,n.appearance=new j(s.a.instance.prodigy.gameContainer.get("150-9ac2")),n.equipment=new _,n.backpack=new f.a,n.achievements=new l,n.encounters=new d.a(s.a.instance.prodigy.gameContainer.get("6e9-a610")),n.kennel=new m.a(n,n.encounters,s.a.instance.prodigy.gameContainer.get("6e9-a610")),n.quests=new w,n.state=new E,n.house=new O,n.house.setItems(n.house.data),n.tutorial=new I,n}return Object(e.__extends)(i,t),Object.defineProperty(i.prototype,"isFocusModeEnabled",{get:function(){return this._isFocusModeEnabled},enumerable:!0,configurable:!0}),i.prototype.createRandom=function(){this.equipment.setHat(u.a.getRandomItem("hat").ID),this.equipment.setWeapon(u.a.getRandomItem("weapon").ID),this.equipment.setOutfit(u.a.getRandomItem("outfit").ID)},i.prototype.canCatch=function(){return!1},i.prototype.getID=function(){return this.userID},i.prototype.init=function(i){return!!t.prototype.init.call(this,i)&&(h.b.isValid(i.userID)?this.userID=i.userID:h.b.isValid(i.id)&&(this.userID=parseInt(i.id)),h.b.isValid(i.data)&&(this.data=h.b.getObject(i.data)),h.b.isValid(i.pets)&&this.kennel.populateKennel(h.b.getObject(i.pets)),h.b.isValid(i.tutorial)&&this.tutorial.setData(h.b.getObject(i.tutorial)),h.b.isValid(i.state)&&this.state.setData(h.b.getObject(i.state)),this.house.setItems(h.b.isValid(i.house)?h.b.getObject(i.house):this.house.data),h.b.isValid(i.inventory)&&(this.backpack.setItems(h.b.getObject(i.inventory)),this.backpack.consumeLegacyBounties()),h.b.isValid(i.quests)&&this.quests.setQuests(h.b.getObject(i.quests)),h.b.isValid(i.achievements)&&this.achievements.init(h.b.getObject(i.achievements)),h.b.isValid(i.isMember)&&this.setMembership(i),i.appearance&&i.appearance.morph&&(this.getPlayerData().playerTransformation={transformType:i.appearance.morph.type,transformID:i.appearance.morph.ID}),this.encounters.setData(i.encounters),i.isTowerTownEnabled&&(this._isFocusModeEnabled=!0),this.name=s.a.instance.prodigy.gameContainer.resolve(a.a),this.name.init(this.appearance.getName(),this.appearance.getGender()),!0)},i.prototype.initFromProtobuf=function(t){var i=null,n=null;t.appearance&&(i={hair:{style:t.appearance.hair.styleID,color:t.appearance.hair.colorID},eyeColor:t.appearance.eyeColorID,skinColor:t.appearance.skinColorID,gender:t.appearance.gender,face:t.appearance.faceID},t.appearance.morph&&(n={transformType:""!==t.appearance.morph.type?t.appearance.morph.type:null,transformID:t.appearance.morph.ID>0?t.appearance.morph.ID:null}));var e=null;t.equipment&&(e={boots:t.equipment.bootsID>0?t.equipment.bootsID:null,hat:t.equipment.hatID>0?t.equipment.hatID:null,weapon:t.equipment.weaponID>0?t.equipment.weaponID:null,outfit:t.equipment.outfitID>0?t.equipment.outfitID:null});var s=null;t.name&&(s={first:t.name.first>0?t.name.first:null,middle:t.name.middle>0?t.name.middle:null,last:t.name.last>0?t.name.last:null,nick:t.name.nick>0?t.name.nick:null},i?i.name=s:i={name:s}),this.init({appearance:i,equipment:e,data:{level:t.level,team:t.team,playerTransformation:n},isMember:t.member,userID:t.userID})},i.prototype.hasMembership=function(){return this.Y},i.prototype.setMembership=function(t){h.b.isValid(t)?this.Y=1===t.isMember:this.Y=!0},i.prototype.transformPlayer=function(t,i,n){if(void 0===n&&(n=0),t===o.a.Player)this.getPlayerData().playerTransformation=null;else{var e=r.a.get("GameConstants.MorphMarbles.MORPH_DURATION_OVERRIDE");h.b.isValid(e)||(e=n),this.getPlayerData().playerTransformation={transformType:t,transformID:i,maxTime:e,timeRemaining:e}}},i.prototype.isPlayerTransformed=function(){return!!this.getPlayerData().playerTransformation},i.prototype.getAttacks=function(t){return void 0===t&&(t=null),h.b.isValid(this.getPlayerData().spellbook)?this.getPlayerData().spellbook.length<6&&(this.getPlayerData().spellbook=this.getAllAttacks().splice(0,6)):this.getPlayerData().spellbook=this.getAllAttacks().splice(0,6),h.b.isValid(t)?v.a.getAttacksOfType(this.getPlayerData().spellbook,t):this.getPlayerData().spellbook},i.prototype.getAllAttacks=function(){var t=v.a.getAttacksFromCurve(i.LEVEL_CURVE,1,this.getLevel());if(h.b.isValid(this.getPlayerData().spells))for(var n=0;n<this.getPlayerData().spells.length;n++)h.b.inArray(t,this.getPlayerData().spells[n])||t.push(this.getPlayerData().spells[n]);return t},i.prototype.getNumAttacks=function(){return this.getAllAttacks().length},i.prototype.getNumRelics=function(){return this.backpack.getItemCount(["spellRelic"])},i.prototype.getBaseMaxHearts=function(i){return t.prototype.getMaxHearts.call(this,i)+200},i.prototype.setDefault=function(t){"male"===t?(this.appearance.setHair(19,Math.floor(5*Math.random()+1)),this.appearance.setFace(4)):(this.appearance.setHair(5,Math.floor(5*Math.random()+1)),this.appearance.setFace(12)),this.appearance.setGender(t),this.appearance.setEyeColor(Math.floor(5*Math.random()+1)),this.appearance.setSkinColor(Math.floor(5*Math.random()+1)),this.equipment.setHat(0)},i.prototype.getLevelingCurve=function(t){void 0===t&&(t=null);for(var n=[],e=0;e<i.LEVEL_CURVE.length;e++){var s=i.LEVEL_CURVE[e];s.lvl===t&&n.push(s)}return n},i.prototype.getAllowsHouseVisitors=function(){return!!h.b.isValid(this.getPlayerData().allowsHouseVisitors)&&this.getPlayerData().allowsHouseVisitors},i.prototype.getPlayerData=function(){return this.data},i.prototype.setEnergy=function(t){this.data.energy=t},i.prototype.getGold=function(){var t,i=h.b.validateInt(null===(t=this.getPlayerData())||void 0===t?void 0:t.gold,0);return i<0&&(i=0),i},i.prototype.getTowerProgress=function(){var t;return h.b.validateInt(null===(t=this.getPlayerData())||void 0===t?void 0:t.tower,0)},i.prototype.getBattles=function(){return h.b.validateInt(this.getPlayerData().battleCounter,0)},i.prototype.getWins=function(){return h.b.validateInt(this.getPlayerData().win,0)},i.prototype.getLosses=function(){return h.b.validateInt(this.getPlayerData().loss,0)},i.prototype.setAllowsHouseVisitors=function(t){this.getPlayerData().allowsHouseVisitors=t},i.prototype.hasMaxQuantityOfItem=function(t,i){return["currency","follow","hat","outfit","boots","weapon","item"].indexOf(t)>-1?this.backpack.hasMaxQuantityOfItem(t,i):"dorm"===t&&this.house.hasMaxQuantityOfItem(i)},i.LEVEL_CURVE=[{lvl:1,a:31},{lvl:5,a:32},{lvl:12,a:33},{lvl:22,a:34},{lvl:38,a:35},{lvl:52,a:36}],i}(b.a)},function(t,i,n){"use strict";n.d(i,"a",(function(){return b}));var e=n(0),s=n(1),r=(n(680),n(2)),h=function(){function t(t,i){this._internalEmitter=t,i&&(this._internalEmitter.particleClass=i)}return Object.defineProperty(t.prototype,"renderType",{get:function(){return this._internalEmitter.renderType},set:function(t){this._internalEmitter.renderType=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"graph",{get:function(){return this._internalEmitter.graph},set:function(t){this._internalEmitter.graph=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._internalEmitter.enabled},set:function(t){this._internalEmitter.enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"manualUpdate",{get:function(){return this._internalEmitter.manualUpdate},set:function(t){this._internalEmitter.manualUpdate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollSpeed",{get:function(){return this._internalEmitter.scrollSpeed},set:function(t){this._internalEmitter.scrollSpeed=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"force",{get:function(){return this._internalEmitter.force},set:function(t){this._internalEmitter.force=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onEmit",{get:function(){return this._internalEmitter.onEmit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onComplete",{get:function(){return this._internalEmitter.onComplete},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onKill",{get:function(){return this._internalEmitter.onKill},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timerEvent",{get:function(){return this._internalEmitter.timerEvent},set:function(t){this._internalEmitter.timerEvent=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"list",{get:function(){return this._internalEmitter.list},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pool",{get:function(){return this._internalEmitter.pool},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batch",{get:function(){return this._internalEmitter.batch},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wells",{get:function(){return this._internalEmitter.wells},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this._internalEmitter.total},set:function(t){this._internalEmitter.total=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alive",{get:function(){return this._internalEmitter.alive},set:function(t){this._internalEmitter.alive=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dead",{get:function(){return this._internalEmitter.dead},set:function(t){this._internalEmitter.dead=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timer",{get:function(){return this._internalEmitter.timer},set:function(t){this._internalEmitter.timer=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this._internalEmitter.renderer},set:function(t){this._internalEmitter.renderer=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"particleClass",{get:function(){return this._internalEmitter.particleClass},set:function(t){this._internalEmitter.particleClass=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this._internalEmitter.paused},set:function(t){this._internalEmitter.paused=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._internalEmitter.parent},set:function(t){this._internalEmitter.parent=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"internalEmitter",{get:function(){return this._internalEmitter},enumerable:!0,configurable:!0}),t.prototype.getRenderImage=function(){return this._internalEmitter.renderer.display},t.prototype.addToWorld=function(t){this._internalEmitter.addToWorld(t)},t.prototype.emit=function(t,i,n,e){this._internalEmitter.emit(t,i,n,e)},t.prototype.init=function(t,i,n){this._internalEmitter.init(t,i,n)},t.prototype.createGravityWell=function(t,i,n,e,s){return this._internalEmitter.createGravityWell(t,i,n,e,s)},t.prototype.seed=function(t){return this._internalEmitter.seed(t)},t.prototype.emitDelayed=function(t,i,n,e,s){return this._internalEmitter.emitDelayed(t,i,n,e,s)},t.prototype.emitParticle=function(t,i,n,e){return this._internalEmitter.emitParticle(t,i,n,e)},t.prototype.update=function(){return this._internalEmitter.update()},t.prototype.updateFrequency=function(t,i,n,e){return this._internalEmitter.updateFrequency(t,i,n,e)},t.prototype.forEach=function(t,i){for(var n=[],e=2;e<arguments.length;e++)n[e-2]=arguments[e];this._internalEmitter.forEach(t,i,n)},t.prototype.forEachNew=function(t,i){for(var n=[],e=2;e<arguments.length;e++)n[e-2]=arguments[e];this._internalEmitter.forEachNew(t,i,n)},t.prototype.getParticle=function(t){return this._internalEmitter.getParticle(t)},t.prototype.debug=function(t,i){this._internalEmitter.debug(t,i)},t.prototype.destroy=function(){this._internalEmitter.destroy()},t}(),o=function(){function t(){this._particleStorm=r.a.instance.game.addPlugin(Phaser.ParticleStorm)}return t.prototype.addData=function(t,i){return this._particleStorm.addData(t,i),this},t.prototype.getData=function(t){return this._particleStorm.getData(t)},t.prototype.createEmitter=function(t,i,n){return new h(this._particleStorm.createEmitter(t,i,n))},t.prototype.createLineZone=function(t,i,n,e){return this._particleStorm.createLineZone(t,i,n,e)},t.prototype.removeEmitter=function(t){this._particleStorm.removeEmitter(t)},t.prototype.clearData=function(t){this._particleStorm.clearData(t)},t}(),u=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(e.__extends)(i,t),i}(Phaser.Game),a=n(10),c=n(3),l=function(){function t(t){this.callbacks={},this.listeners={},this.broadcastIdCount=0,this.game=t}return t.prototype.clear=function(){var t;for(var i in this.callbacks)for(var n in this.callbacks[i]){for(t=0;this.callbacks[i][n].length>t;)this.callbacks[i][n].persistent?t++:this.callbacks[i][n].pop();0===t&&(this.callbacks[i][n]=void 0,delete this.callbacks[i][n])}for(var i in this.listeners)for(var e in this.listeners[i]){for(t=0;this.listeners[i][e].length>t;)this.listeners[i][e].persistent?t++:this.listeners[i][e].pop();0===t&&(this.listeners[i][e]=void 0,delete this.listeners[i][e])}},t.prototype.addAppListener=function(t,i,n,e,r){void 0===r&&(r=null);var h=c.b.isValid(e)?e:this.game;c.b.isValid(t)&&c.b.isValid(i)&&c.b.isValid(n)||s.Logger.log("addAppListener - Invalid arguments",s.LogLevel.Error),h=this.hashContext(h),void 0===this.callbacks[h]&&(this.callbacks[h]={}),void 0===this.listeners[h]&&(this.listeners[h]={}),void 0===this.callbacks[h][t]&&(this.callbacks[h][t]=[]),void 0===this.listeners[h][t]&&(this.listeners[h][t]=[]),this.callbacks[h][t].push(i),this.listeners[h][t].push(n),this.callbacks[h][t].persistent=c.b.isValid(r),this.listeners[h][t].persistent=c.b.isValid(r)},t.prototype.removeAppListener=function(t,i,n){var e=c.b.isValid(n)?n:this.game;if(c.b.isValid(t)){if(e=this.hashContext(e),void 0!==this.callbacks[e]&&void 0!==this.callbacks[e][t]&&void 0!==this.listeners[e]&&void 0!==this.listeners[e][t]){for(var r=0;r<this.callbacks[e][t].length;r++)c.b.isValid(i)&&this.listeners[e][t][r]!==i||(this.callbacks[e][t].splice(r,1),this.listeners[e][t].splice(r,1),r--);0===this.callbacks[e][t].length&&delete this.callbacks[e][t],0===this.listeners[e][t].length&&delete this.listeners[e][t]}}else s.Logger.log("removeAppListener - Invalid arguments",s.LogLevel.Error)},t.prototype.broadcast=function(t,i,n){var e=c.b.isValid(i)?i:this.game;c.b.isValid(t)||s.Logger.log("removeAppListener - Invalid arguments",s.LogLevel.Error),e=this.hashContext(e);var r=this.callbacks[e],h=this.listeners[e];if(void 0===r||void 0===r[t]||void 0===h||void 0===h[t])return null;if(1===r[t].length)return r[t][0].apply(h[t][0],n);for(var o={listeners:[],output:[]},u=h[t].slice(),a=r[t].slice(),l=0;l<a.length;l++)o.listeners.push(u[l]),o.output.push(a[l].apply(u[l],n));return o},t.prototype.hashContext=function(t){return"string"!=typeof t?(void 0===t.broadcastId&&(t.broadcastId=this.broadcastIdCount,this.broadcastIdCount++),"bId"+t.broadcastId):t},t}(),f=function(){function t(t){this.randomDataGenerator=t}return t.prototype.frac=function(t){this.randomDataGenerator.sow([t]);var i=this.randomDataGenerator.frac();return this.randomDataGenerator.sow([Date.now()*Math.random()]),i},t.prototype.pick=function(t,i){this.randomDataGenerator.sow([i]);var n=this.randomDataGenerator.pick(t);return this.randomDataGenerator.sow([Date.now()*Math.random()]),n},t.prototype.shuffleArray=function(t,i){for(var n,e=t.length;0!==e;){n=Math.floor(this.frac(i+e)*e),e--;var s=t[n];t[n]=t[e],t[e]=s}return t},t}(),b=function(t){function i(i){var n=t.call(this,i)||this;return n.clientVersion="undefined",n.versioned=!1,n._consoleLogger=new s.ConsoleLogger,s.Logger.addLogger(n._consoleLogger),n}return Object(e.__extends)(i,t),i.prototype.init=function(){this._consoleLogger.setColoredLogsEnabled(!this.device.ie),this.broadcaster=new l(this),this.seededRandom=new f(this.rnd),this.frameWorkManager=new s.FrameWorkManager(a.a.TARGET_FPS_60_MS)},i.prototype.boot=function(){t.prototype.boot.call(this),this.forceSingleUpdate=!0,this.time.desiredFps=144},i.prototype.initPlugins=function(){this.add.plugin(PhaserSpine.SpinePlugin),this.particleSystem=new o},i.prototype.addPlugin=function(t){return this.add.plugin(t)},i.prototype.update=function(i){var n,e;null===(n=this._stats)||void 0===n||n.begin(),this.frameWorkManager.markFrameStart(),t.prototype.update.call(this,i),this.postUpdate(i),this.frameWorkManager.markFrameEnd(),null===(e=this._stats)||void 0===e||e.end()},i.prototype.postUpdate=function(t){r.a.instance.prodigy.load.postUpdate(t)},i.prototype.toggleFpsGraph=function(){0},i}(u)},function(t,i,n){"use strict";n.d(i,"a",(function(){return m}));var e=n(0),s=n(1),r=n(5),h=n(2),o=n(144),u=n(48),a=n(7),c=n(32),l=n(71),f=n(3),b=n(16),v=n(85),d=n(29),O=n(167),m=function(t){function i(i,n,e,s,r,o,u){var a=this,c=h.a.instance.prodigy.gameContainer.get("447-4630").player;c.memberPrompt=!0;var b=[],v=0;if(f.b.isValid(u))b.push(u);else if(o)b.push("congrats"),b.push("amazingThings");else{var O=h.a.instance.prodigy.gameContainer.get("447-4630").player;O.hasMembership()||0!==O.backpack.hasItem("mount",1)||b.push("cloudMount"),b.push("monthlyPackage"),b.push("amazingThings")}return f.b.isValid(r)&&(v=b.length-1),(a=t.call(this,i,n,11,b,null,["atlas-128","atlas-171"],v)||this).promotedAd=r,a.analyticEvents=f.b.isValid(s)?s:{conversionFunnelName:"",conversionFunnelMetadata:""},a.hideSignup=c.hasMembership()&&!l.a.hasStartedTrial(c),a.analyticEvents.conversionStaticOrVideo=d.a.Static,a.setCloseCallback(e),a}return Object(e.__extends)(i,t),i.prototype.preprocess=function(){this.queuePostCreateCallback(this.playRandomNootCongrats.bind(this)),t.prototype.preprocess.call(this)},i.prototype.close=function(){h.a.instance.prodigy.audio.stopVoice(),t.prototype.close.call(this)},i.prototype.setup=function(){this.loadAds(),f.b.isValid(this.leftArrowSprite)&&this.leftArrowSprite.flipHorizontally(),t.prototype.setup.call(this)},i.prototype.setCallbacks=function(){this.buttonCallbacks.signUpButton=this.onMembershipButtonClick.bind(this,f.b.isValid(this.sourceOverride)?this.sourceOverride:"MemberButton"),this.buttonCallbacks.closeButton=this.close.bind(this),t.prototype.setCallbacks.call(this)},i.prototype.loadAds=function(){if(this.availableIndices=this.getFilteredIconArray().map((function(t,i){return i})),f.b.isValid(this.promotedAd))for(var t=0;t<i.featureIconConfigs.length;t++)if(r.isEqual(this.promotedAd,i.featureIconConfigs[t])){this.currentConfigIndex=t;break}this.adIcons=[],f.b.isValid(this.currentConfigIndex)&&(this.adIcons.push(this.availableIndices[this.currentConfigIndex]),this.availableIndices.splice(this.currentConfigIndex,1)),this.adIcons=this.adIcons.concat(r.sampleSize(this.availableIndices,15))},i.prototype.playRandomNootCongrats=function(){if("congrats"===this.pageSets[0]){var t=c.a.integerInRange(184,190),i=(new o.a).getLegacy("noot",t);h.a.instance.prodigy.load.assets(i.audio.tag,(function(){h.a.instance.prodigy.audio.playVoice(i.audio.tag,null,i.audio.s,i.audio.d)}))}},i.prototype.onMembershipButtonClick=function(t){var i=h.a.instance.prodigy.gameContainer.get("447-4630").player;if(!i.hasMembership()||l.a.hasStartedTrial(i)){if(h.a.instance.prodigy.gameContainer.get("adf-10da").create("member-ad","conversion","membership",t).broadcast(),h.a.instance.prodigy.gameContainer.get("adf-10da").create("membership","conversion","membership-info",t).broadcast(),f.b.isValid(this.analyticEvents))h.a.instance.prodigy.gameContainer.get("506-bf49").sendConversionFunnelEvent(this.analyticEvents.conversionFunnelName,b.a.StageClickMembership,this.analyticEvents.conversionFunnelMetadata,this.analyticEvents.conversionStaticOrVideo);h.a.instance.prodigy.gameContainer.get("474-551d").create(this.analyticEvents.conversionFunnelName,b.a.StageClickMembership).broadcast();var n=i.isPlayingAtSchool();h.a.instance.prodigy.open.isMenuOpen(O.a)||(h.a.instance.prodigy.audio.stopVoice(),h.a.instance.prodigy.open.membershipParent(this,!n,null,null,this.analyticEvents))}},i.prototype.onPageLoaded=function(){if(t.prototype.onPageLoaded.call(this),this.hideSignup&&f.b.isValid(this.page.signUpButton)&&(this.page.signUpButton.visible=!1),"monthlyPackage"===this.pageName){var i=h.a.instance.prodigy.gameContainer.get("447-4630").player;this.page[this.pageName].children[4].visible=!i.hasMembership()}else"playAtHome"===this.pageName||"playMemberAtHome"===this.pageName?f.b.isValid(this.promotedAd)&&this.page[this.pageName].children[5].setText(this.getFlavourText()):"amazingThings0"===this.pageName?this.renderFeatureIcons(0,this.page[this.pageName].children[4]):"amazingThings1"===this.pageName?(this.renderFeatureIcons(3,this.page[this.pageName].children[4]),this.renderFeatureIcons(6,this.page[this.pageName].children[5])):"amazingThings2"===this.pageName&&(this.renderFeatureIcons(9,this.page[this.pageName].children[4]),this.renderFeatureIcons(12,this.page[this.pageName].children[5]));if("amazingThings0"===this.pageName){var n=this.page[this.pageName].children[3];this.generateGearIcons(6,n)}"memberLockedPets"===this.pageName&&f.b.isValid(this.spineMonsterConfig)&&new v.a(this.game).createUIElements([this.spineMonsterConfig],this.page.spineBG);h.a.instance.prodigy.audio.stopVoice()},i.prototype.generateGearIcons=function(t,i){for(var n=null,e=[{category:"boots",count:0},{category:"hat",count:0},{category:"outfit",count:0},{category:"weapon",count:0}],s=[],o=0;o<e.length;o++)for(var c=a.a.getCategoryItems(e[o].category),l=0;l<c.length;l++)(n=c[l]).category=e[o].category,1===r.get(n,"data.member",0)&&(f.b.isValid(n.data.memberAd)||r.get(n,"data.memberAd",0)>0)&&(s.push(n),e[o].count++);var b=r.sampleSize(s,t);for(o=0;o<t;o++){var v=this.onMembershipButtonClick.bind(this,b[o].ID),d=h.a.instance.prodigy.create.item(i,102*o+20,60,{ID:b[o].ID,type:b[o].category},u.a.IconNoBackground,v),O=h.a.instance.prodigy.create.sprite(0,0,"atlas-18","empty");O.alpha=0,O.width=d.width,O.height=d.height,O.inputEnabled=!0,O.events.onInputDown.add(this.onMembershipButtonClick.bind(this,"MemberButton")),d.add(O)}},i.prototype.renderFeatureIcons=function(t,n,e,s){void 0===e&&(e=3),void 0===s&&(s=19);for(var r=h.a.instance.prodigy.gameContainer.get("447-4630").player,o=t;o<this.adIcons.length&&o<t+e;o++){var u=void 0,a=this.adIcons[o];u=i.featureIconConfigs[a],2===o&&(u=i.MEMBER_BOX,0===r.backpack.hasItem("mount",1)&&Math.random()>=.5&&(u=i.CLOUD_MOUNT)),h.a.instance.prodigy.create.button(n,(s+166)*(o-t),0,"atlas-128",u.frameName,this.onMembershipButtonClick.bind(this,u.trackingEvent))}},i.prototype.getFilteredIconArray=function(){var t=this;return i.featureIconConfigs.filter((function(i){if(!f.b.isValid(i.splitTestLanes))return!0;var n=h.a.instance.prodigy.gameContainer.get("447-4630").player;return f.b.inTestGroups.apply(t,[n,i.splitTestLanes])}))},i.prototype.getFlavourText=function(){for(var t=h.a.instance.prodigy.gameContainer.get(s.GameIdentifiers.LocalizationService),n=t.getText("PLAY_AT_HOME_PLACEHOLDER"),e=0;e<i.flavourTextSources.length;e++)this.promotedAd===i.flavourTextSources[e]&&(n=t.getText(i.flavourTextSources[e].flavourText));return n},i.prototype.setUIConfig=function(t){this.spineMonsterConfig=t},i.prototype.nextPage=function(){t.prototype.nextPage.call(this),h.a.instance.prodigy.gameContainer.get("adf-10da").create("member-ad-browse","conversion","membership",this.pageName).broadcast()},i.prototype.prevPage=function(){t.prototype.prevPage.call(this),h.a.instance.prodigy.gameContainer.get("adf-10da").create("member-ad-browse","conversion","membership",this.pageName).broadcast()},i.DEFAULT={frameName:"icons/iconbox-TEST",trackingEvent:"Feature-MemberChests"},i.MEMBER_HUD={frameName:"icons/iconbox-TEST",trackingEvent:"Feature-MemberChests",flavourText:"PLAY_AT_HOME_MEMBER_HUD"},i.NOT_MEMBER_HUD={frameName:"icons/iconbox-TEST",trackingEvent:"Feature-MemberChests",flavourText:"PLAY_AT_HOME_NOT_MEMBER_HUD"},i.TWILIGHT_WHEEL={frameName:"icons/iconbox-TEST",trackingEvent:"Feature-MemberChests",flavourText:"PLAY_AT_HOME_TWILIGHT_WHEEL"},i.MEMBER_BOUNTY={frameName:"icons/iconbox-TEST",trackingEvent:"Feature-MemberChests",flavourText:"PLAY_AT_HOME_MEMBER_BOUNTY"},i.MEMBER_CHESTS={frameName:"icons/member-chests",trackingEvent:"Feature-MemberChests",flavourText:"PLAY_AT_HOME_MEMBER_CHESTS"},i.BUDDIES={frameName:"icons/cute-and-cool-buddies",trackingEvent:"Feature-Buddies",flavourText:"PLAY_AT_HOME_BUY_ITEM"},i.HOUSE_ITEMS={frameName:"icons/special-house-furniture",trackingEvent:"Feature-HouseItems",flavourText:"PLAY_AT_HOME_BUY_ITEM"},i.NEW_HOUSE={frameName:"icons/new-house",trackingEvent:"Feature-NewHouse",flavourText:"PLAY_AT_HOME_BUY_ITEM"},i.MORE_GOLD={frameName:"icons/more-gold",trackingEvent:"Feature-MoreGold",flavourText:"PLAY_AT_HOME_MORE_GOLD"},i.MORE_EXP={frameName:"icons/level-faster",trackingEvent:"Feature-LevelFaster",flavourText:"PLAY_AT_HOME_MORE_EXP"},i.MORE_EXP_CLASS_LEADERS={frameName:"icons/level-faster",trackingEvent:"Feature-LevelFaster",flavourText:"PLAY_AT_HOME_MORE_EXP_CLASS_LEADERS"},i.WHEEL_SPIN={frameName:"icons/more-spins",trackingEvent:"Feature-MoreSpins",flavourText:"PLAY_AT_HOME_WHEEL_SPIN"},i.MEMBER_PETS={frameName:"icons/catch-more-pets",trackingEvent:"Feature-MorePets",flavourText:"PLAY_AT_HOME_MEMBER_PETS"},i.CATCH={frameName:"icons/second-catch",trackingEvent:"Feature-SecondCatchChance"},i.BOOSTS={frameName:"icons/minigame-boosts",trackingEvent:"Feature-MinigameBoosts"},i.STYLE={frameName:"icons/cool-new-styles",trackingEvent:"Feature-NewStyles",flavourText:"PLAY_AT_HOME_BUY_ITEM"},i.TOWER={frameName:"icons/climb-the-dark-tower",trackingEvent:"Feature-DarkTower",flavourText:"PLAY_AT_HOME_TOWER"},i.POTIONS={frameName:"icons/potions",trackingEvent:"Feature-PowerfulPotions",flavourText:"PLAY_AT_HOME_BUY_ITEM"},i.DANCE={frameName:"icons/dab-dance",trackingEvent:"Feature-Dab",flavourText:"PLAY_AT_HOME_DANCE"},i.CLOUD_MOUNT={frameName:"icons/cloud-mount",trackingEvent:"Feature-CloudMount"},i.MEMBER_BOX={frameName:"icons/memberbox-popup-icon",trackingEvent:"memberbox"},i.MORPH_MARBLE={frameName:"icons/morph-marble",trackingEvent:"Feature-MorphMarble",flavourText:"PLAY_AT_HOME_BUY_ITEM"},i.BUY_ITEM={frameName:"icons/iconbox-TEST",trackingEvent:"PremiumItems",flavourText:"PLAY_AT_HOME_BUY_ITEM"},i.PREMIUM_ITEM={frameName:"icons/iconbox-TEST",trackingEvent:"PremiumItems",flavourText:"PLAY_AT_HOME_PREMIUM_ITEM"},i.VISIT_HOUSE={frameName:"icons/friends-visit-house",trackingEvent:"Feature-VisitHouse"},i.BIGGER_ROSTER={frameName:"icons/iconbox-TEST",trackingEvent:"BiggerRoster"},i.NICKNAME={frameName:"icons/iconbox-TEST",trackingEvent:"Nickname",flavourText:"PLAY_AT_HOME_NICKNAME"},i.EVOLVE_PETS={frameName:"icons/evolve-pets",trackingEvent:"Nickname",flavourText:"PLAY_AT_HOME_EVOLVE_PETS"},i.flavourTextSources=[i.MEMBER_HUD,i.NOT_MEMBER_HUD,i.BUY_ITEM,i.MORPH_MARBLE,i.BUDDIES,i.STYLE,i.HOUSE_ITEMS,i.NEW_HOUSE,i.POTIONS,i.PREMIUM_ITEM,i.MEMBER_CHESTS,i.MORE_EXP,i.WHEEL_SPIN,i.TWILIGHT_WHEEL,i.EVOLVE_PETS,i.DANCE,i.MEMBER_BOUNTY,i.NICKNAME,i.MEMBER_PETS,i.TOWER,i.MORE_EXP_CLASS_LEADERS,i.MORE_GOLD],i.featureIconConfigs=[i.MEMBER_CHESTS,i.TOWER,i.BUDDIES,i.MORE_GOLD,i.MORE_EXP,i.WHEEL_SPIN,i.MEMBER_PETS,i.CATCH,i.BOOSTS,i.STYLE,i.HOUSE_ITEMS,i.NEW_HOUSE,i.POTIONS,i.DANCE,i.MORPH_MARBLE,i.EVOLVE_PETS],i}(n(250).a)},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t.DefaultItemsReceived="DefaultItemsReceived",t.TutorialCompleted="TutorialComplete",t.ShroudTutorialFirstTime="ShroudTutorialFirstTime",t.ShroudTutorialCompleted="ShroudTutorialCompleted",t.FlingUnlocked="FlingUnlocked",t.FlingTutorialComplete="FlingTutorialComplete",t.StoreFirstPurchaseComplete="StoreFirstPurchaseComplete",t.DefaultFramesReceived="DefaultFramesReceived",t.StubbornShadowTutorialOneCompleted="StubbornShadowTutorialOneCompleted",t.StubbornShadowTutorialTwoCompleted="StubbornShadowTutorialTwoCompleted"}(e||(e={}))},function(t,i,n){"use strict";n.d(i,"b",(function(){return e})),n.d(i,"a",(function(){return O}));var e,s=n(0),r=n(1),h=n(5),o=n(2),u=n(12),a=n(3),c=n(18),l=n(132),f=n(199),b=n(324),v=n(214),d=n(277);!function(t){t[t.none=0]="none",t[t.flippedVertically=1073741824]="flippedVertically",t[t.flippedHorizontally=2147483648]="flippedHorizontally",t[t.flippedDiagonally=536870912]="flippedDiagonally",t[t.all=-536870912]="all"}(e||(e={}));var O=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.onMapLoaded=new u.a,i}var n;return Object(s.__extends)(i,t),n=i,Object.defineProperty(i.prototype,"OnMapLoaded",{get:function(){return this.onMapLoaded},enumerable:!0,configurable:!0}),i.prototype.loadMap=function(t,i,e,h,o){var u=this;n.loadMapFile(t).then((function(t){return Object(s.__awaiter)(u,void 0,void 0,(function(){return Object(s.__generator)(this,(function(i){return[2,n.loadTilesets(t)]}))}))})).then((function(t){return u.parseMap(i,t,e,h,o)})).catch((function(t){r.Logger.log("TMXMapLoader: "+t,r.LogLevel.Warning)})).then((function(i){return Object(s.__awaiter)(u,void 0,void 0,(function(){return Object(s.__generator)(this,(function(n){return this.optimizeMapLayer(i,h),this.optimizeMapLayer(i,o),this.onMapLoaded.dispatch(t),[2]}))}))}))},i.loadMapFileFromUrl=function(t){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(i){return o.a.instance.prodigy.assets.assets[t]={type:"json",fullURL:t},[2,n.loadMapFile(t)]}))}))},i.loadMapFile=function(t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var i;return Object(s.__generator)(this,(function(n){return i=o.a.instance.game,o.a.instance.prodigy.load.isFileLoaded(t)?[2,i.cache.getJSON(t)]:[2,new Promise((function(n){o.a.instance.prodigy.load.assets([t],(function(e,s){n(i.cache.getJSON(t))}))}))]}))}))},i.loadTilesets=function(t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var i,n,e;return Object(s.__generator)(this,(function(s){for(i=t.tilesets.map((function(t){return t.name})),o.a.instance.game,n=!0,e=0;e<i.length;++e)if(!o.a.instance.prodigy.load.isFileLoaded(i[e])){n=!1;break}return n?[2,Promise.resolve(t)]:[2,new Promise((function(n){o.a.instance.prodigy.load.assets(i,(function(){n(t)}))}))]}))}))},i.prototype.parseMap=function(t,i,n,e,s){for(var r=t.addComponent(b.a),h=0;h<i.layers.length;++h){var o=i.layers[h],u=o.visible,c=e;if(a.b.isValid(o.properties)&&(a.b.isValid(o.properties.isAbove)?c=s:a.b.isValid(o.properties.content)&&(c=n),a.b.isValid(o.properties.reference)&&(u=!1)),u)for(var l=this.createLayer(c,o,i.tilesets),f=0;f<l.length;++f)r.addTile(l[f])}return r},i.prototype.createLayer=function(t,i,n){var e=new r.GameObject(t);return e.name=i.name,e.addComponent(r.LegacyTransform),a.b.isValid(i.objects)?this.createObjectLayer(e,i,n):this.createTiledLayer(e,i,n)},i.prototype.createObjectLayer=function(t,i,n){for(var e=[],s=0;s<i.objects.length;s++){var r=i.objects[s],o=h.get(i,"properties.dynamicToggle",-1),u=this.createTile(t,r.gid,r.x,r.y,n,o,null);a.b.isValid(u)&&(u.GameObject.legacyTransform.group.position.setTo(r.x+20,r.y-20),u.GameObject.findComponent(c.a).setAnchor(.5,.5),e.push(u))}return e},i.prototype.createTiledLayer=function(t,i,n){for(var e=a.b.isValid(i.properties)&&i.properties.useAnimDuration,s=h.get(i,"properties.dynamicToggle",-1),r=[],o=0,u=0;u<i.height;++u)for(var c=0;c<i.width;++c){var l=this.createTile(t,i.data[o++],40*c,40*u,n,s,e);a.b.isValid(l)&&r.push(l)}return r},i.prototype.createTile=function(t,i,s,u,b,O,m){if(void 0===m&&(m=!1),!this.GameObject)return null;var p=i,g=0!=(p&e.flippedHorizontally),y=0!=(p&e.flippedVertically),j=0!=(p&e.flippedDiagonally);p&=~e.all;var _=n.getTileset(b,p);if(!a.b.isValid(_)||!a.b.isValid(p))return null;p-=_.firstgid;var w=new r.GameObject(t);w.name="TMX tile",w.addComponent(r.LegacyTransform),w.legacyTransform.group.position.setTo(s,u);var E=h.get(_,["tiles",p],null),I=w.addComponent(c.a);Object.defineProperty(I,"assetLoader",{get:function(){return{isLoaded:function(t){return o.a.instance.prodigy.load.isFileLoaded(t)}}}}),I.setAsset(_.name+"A",""+p);var A=a.b.isValid(E)&&a.b.isValid(E.animation);if(A){for(var T=[],D=0;D<E.animation.length;++D)T.push(""+E.animation[D].tileid);if(m){var S=w.addComponent(f.a);for(D=0;D<E.animation.length;++D)S.animationData.push({frame:""+E.animation[D].tileid,duration:E.animation[D].duration});S.playAnimation()}else{var C=w.addComponent(l.a);C.createAnimationSequence("tmx_animation",T,4,!0),C.playAnimation("tmx_animation",!0)}}w.addComponent(v.a).rotate(y,g,j);var N=w.addComponent(d.a);return a.b.isValid(O)&&(N.HasToggleGroup=O>-1,N.GroupID=O,N.IsAnimated=A),N},i.getTileData=function(t,i){var s=t;s&=~e.all;var r=n.getTileset(i,s);return a.b.isValid(r)&&a.b.isValid(s)?{tileset:r,id:s-=r.firstgid,transform:t&e.all}:null},i.getTileset=function(t,i){for(var n=0;n<t.length;n++){var e=t[n];if(i>=e.firstgid&&i<e.firstgid+e.tilecount)return e}return null},i.prototype.optimizeMapLayer=function(t,i){if(this.GameObject){var n=i.legacyTransform.group.width,e=i.legacyTransform.group.height,h=new r.GameObject;h.addComponent(r.LegacyTransform);for(var u=[],a=Object(s.__spread)(i.children),c=0;c<a.length;++c){for(var l=a[c].children,f=l.length-1;f>-1;--f){var b=l[f].findComponent(d.a);null!==b&&b.IsStatic&&(u.push(b),l[f].parent=h)}0===a[c].children.length&&a[c].destroy()}if(u.length>0&&n>0&&n>0){var v=h.legacyTransform.group.left,O=h.legacyTransform.group.top,m=o.a.instance.game.add.renderTexture(n,e);m.renderRawXY(h.legacyTransform.group,-v,-O,!0);var p=o.a.instance.prodigy.create.spriteLite(v,O,m);i.legacyTransform.group.addAt(p,0),t.OnDestroy.addOnce((function(){p.destroy(),m.destroy(!0)}))}h.destroy()}},i.prototype.destroy=function(){this.onMapLoaded.dispose(),t.prototype.destroy.call(this)},i.TILE_SIZE=40,i=n=Object(s.__decorate)([Object(r.componentable)("TMXMapLoader")],i)}(r.InjectableComponent)},function(t,i,n){"use strict";n.d(i,"a",(function(){return e})),n.d(i,"b",(function(){return h}));var e,s=n(0),r=n(1);!function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"}(e||(e={}));var h=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._headerMessageText=null,i._bodyMessageText=null,i._indicatorArrowVertical=null,i._indicatorArrowHorizontal=null,i._leftSideBorderOffset=0,i._rightSideBorderOffset=0,i}return Object(s.__extends)(i,t),i.prototype.postCreate=function(){this.GameObject.active=!1,this._cachedTextPositionYHeader=this._headerMessageText.GameObject.legacyTransform.group.position.y,this._cachedTextPositionYBody=this._bodyMessageText.GameObject.legacyTransform.group.position.y,this._cachedTextPositionYAverage=.5*(this._cachedTextPositionYHeader+this._cachedTextPositionYBody),this._leftSideBorderOffset=this._bodyMessageText.GameObject.legacyTransform.group.position.x,this._rightSideBorderOffset=this._background.GameObject.legacyTransform.width-this._bodyMessageText.GameObject.legacyTransform.group.position.x},i.prototype.initializeText=function(t,i,n){this._bodyMessageText.text=t,r.Utils.isDefined(i)&&0!==i.length?(this._headerMessageText.text=i,this._bodyMessageText.GameObject.legacyTransform.group.position.y=this._cachedTextPositionYBody):(this._headerMessageText.text="",this._bodyMessageText.GameObject.legacyTransform.group.position.y=this._cachedTextPositionYAverage),this.resizeSlicedGraphic(this._background,this.getBackgroundWidth(),this._background.GameObject.legacyTransform.height);var e=this.GameObject.active;this.GameObject.active=!0,this.GameObject.legacyTransform.anchorX=this.GameObject.legacyTransform.anchorX,this.GameObject.legacyTransform.anchorY=this.GameObject.legacyTransform.anchorY,this.GameObject.active=e},i.prototype.resizeSlicedGraphic=function(t,i,n){t.GameObject.legacyTransform.group.remove(t.elementsGroup),t.GameObject.legacyTransform.group.cacheAsBitmap=!1,t.elementsGroup.destroy(),t._rootContainer=null,t.elementsGroup=null,t.GameObject.legacyTransform.group.getChildAt(0).width=i,t.GameObject.legacyTransform.group.getChildAt(0).height=n,t.create()},i.prototype.getBackgroundWidth=function(){var t=Math.max(this._headerMessageText.TextObject.width,this._bodyMessageText.TextObject.width);return this._leftSideBorderOffset+t+this._rightSideBorderOffset},i.prototype.setIndicatorArrow=function(t,i,n){void 0===i&&(i=.5),void 0===n&&(n=.5);var s=this.GameObject.legacyTransform;switch(t){case e.UP:this._indicatorArrowHorizontal.destroy(),this.setArrow(t,this._indicatorArrowVertical,1,this.getBackgroundWidth()*i,0),this.setAnchor(s,i,0);break;case e.DOWN:this.setArrow(t,this._indicatorArrowVertical,-1,this.getBackgroundWidth()*i,this._cachedGameObjectHeight),this.setAnchor(s,i,1),this._indicatorArrowHorizontal.destroy();break;case e.LEFT:this._indicatorArrowVertical.destroy(),this.setArrow(t,this._indicatorArrowHorizontal,-1,2,this._cachedGameObjectHeight*n),this.setAnchor(s,0,n);break;case e.RIGHT:this._indicatorArrowVertical.destroy(),this.setArrow(t,this._indicatorArrowHorizontal,1,this.getBackgroundWidth()-2,this._cachedGameObjectHeight*n),this.setAnchor(s,1,n);break;default:this._indicatorArrowVertical.destroy(),this._indicatorArrowHorizontal.destroy()}},i.prototype.setArrow=function(t,i,n,s,r){t===e.UP||t===e.DOWN?i.legacyTransform.group.scale.y=n:i.legacyTransform.group.scale.x=n,i.legacyTransform.group.position.set(s,r)},i.prototype.setAnchor=function(t,i,n){t.anchorX=i,t.anchorY=n},Object(s.__decorate)([Object(r.objectSerializable)("headerMessageText"),Object(s.__metadata)("design:type",r.Text)],i.prototype,"_headerMessageText",void 0),Object(s.__decorate)([Object(r.objectSerializable)("bodyMessageText"),Object(s.__metadata)("design:type",r.Text)],i.prototype,"_bodyMessageText",void 0),Object(s.__decorate)([Object(r.objectSerializable)("background"),Object(s.__metadata)("design:type",r.SlicedGraphic)],i.prototype,"_background",void 0),Object(s.__decorate)([Object(r.objectSerializable)("indicatorArrow"),Object(s.__metadata)("design:type",r.GameObject)],i.prototype,"_indicatorArrowVertical",void 0),Object(s.__decorate)([Object(r.objectSerializable)("indicatorArrowHorizontal"),Object(s.__metadata)("design:type",r.GameObject)],i.prototype,"_indicatorArrowHorizontal",void 0),i}(r.Component)},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t.QuestionAnswered="question_answered",t.PlayerAttacked="player_attacked",t.TitanAttacked="titan_attacked",t.TitanDefeated="titan_defeated",t.PlayersDefeated="players_defeated",t.StartCoOpTitanMatch="start_co_op_titan",t.StartDebugCoOpTitanMatch="start_co_op_titan_debug",t.HostHeartbeat="co_op_host_heartbeat",t.CreateTeam="create_co_op_team",t.RequestJoinTeam="request_co_op_team_join",t.JoinTeam="join_co_op_team",t.JoinTeamFailed="join_co_op_team_failed",t.TeamUpdated="co_op_team_updated",t.TeamDisbanded="co_op_team_disbanded",t.PlayerLeftTeam="co_op_player_left_team",t.SyncHealth="co_op_health_sync",t.PlayerRejoinTeam="co_op_player_rejoin_team"}(e||(e={}))},function(t,i,n){"use strict";n.d(i,"a",(function(){return f}));var e=n(0),s=n(5),r=n(2),h=n(6),o=n(10),u=n(230),a=n(8),c=n(78),l=n(3),f=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.name="",e.layoutElement=null,e.dimensionPlaceholderImage=null,e.metricsManager=r.a.instance.prodigy.gameContainer.get("cbb-8a49"),e.metricsManager.objectCreated("UIElement"),e.onDestroy.add(e.handleUIDestroy.bind(e)),e}return Object(e.__extends)(i,t),i.prototype.handleUIDestroy=function(){this.metricsManager.objectDestroyed("UIElement")},i.prototype.processRelativeFields=function(t,i){l.b.isValid(t.relativeWidth)&&(t.width=Math.floor(i.width*t.relativeWidth)),l.b.isValid(t.relativeHeight)&&(t.height=Math.floor(i.height*t.relativeHeight)),l.b.isValid(t.relativeX)?t.x=Math.floor(i.width*t.relativeX):l.b.isValid(t.x)||(t.x=0),l.b.isValid(t.relativeY)?t.y=Math.floor(i.height*t.relativeY):l.b.isValid(t.y)||(t.y=0),l.b.isValid(t.scaleX)&&(this.scale.x=t.scaleX),l.b.isValid(t.scaleY)&&(this.scale.y=t.scaleY),l.b.isValid(t.visible)&&(this.visible=t.visible)},i.prototype.populate=function(t){var i=0,n=0;l.b.isValid(t.name)&&(this.name=t.name),(l.b.isValid(t.width)&&t.width>this.width||l.b.isValid(t.height)&&t.height>this.height)&&(l.b.isValid(this.dimensionPlaceholderImage)&&this.dimensionPlaceholderImage.destroy(),this.dimensionPlaceholderImage=r.a.instance.prodigy.create.image(0,0,"atlas-18","empty"),this.dimensionPlaceholderImage.alpha=0,this.add(this.dimensionPlaceholderImage),l.b.isValid(t.width)&&(this.dimensionPlaceholderImage.width=t.width),l.b.isValid(t.height)&&(this.dimensionPlaceholderImage.height=t.height)),l.b.isValid(t.anchorX)&&(i=-Math.floor(t.anchorX*this.width)),l.b.isValid(t.anchorY)&&(n=-Math.floor(t.anchorY*this.height)),l.b.isValid(t.x)&&(this.x=t.x),l.b.isValid(t.y)&&(this.y=t.y),this.x+=i,this.y+=n,c.a.isEnabled()&&(this.updateElementPosition(this.worldPosition.x,this.worldPosition.y),this.updateElementAttribute("data-name",Object(s.get)(this,"name","")))},i.prototype.postPopulate=function(){},i.prototype.setActive=function(t){this.isActive=t;for(var i=0;i<this.children.length;i++)l.b.isValid(this.children[i].setActive)&&this.children[i].setActive(t)},i.prototype.setVisible=function(t){this.visible=t},i.prototype.highlight=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.isHighlighted()&&(this.arrow.destroy(),this.arrow=null),t&&(this.arrow=this.add(r.a.instance.prodigy.create.sprite(0,0,"atlas-21","help")),this.arrow.x=i+Math.floor(this.width/2),this.arrow.y=n-this.arrow.height+10,this.game.add.tween(this.arrow).to({y:this.arrow.y+25},400,h.a.Quadratic.InOut,!0,0,o.a.MAX_SAFE_INTEGER,!0))},i.prototype.isHighlighted=function(){return l.b.isValid(this.arrow)},i.prototype.debugDrawBounds=function(t){},i.prototype.addChild=function(i){var n=t.prototype.addChild.call(this,i);return l.b.isValid(this.game)&&this.game.broadcaster.broadcast(a.z.ChildAdded,this),n},i.prototype.removeChild=function(i){var n=t.prototype.removeChild.call(this,i);return l.b.isValid(this.game)&&this.game.broadcaster.broadcast(a.z.ChildRemoved,this),n},i.className="UIElement",i}(u.a)},function(t,i,n){"use strict";n.d(i,"a",(function(){return a}));var e=n(0),s=n(1),r=n(2),h=n(12),o=n(141),u=n(3),a=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.spine=null,i._spineKey=null,i._alphaOnLoad=1,i._isLoaded=!1,i.onLoaded=new h.a,i}return Object(e.__extends)(i,t),Object.defineProperty(i.prototype,"alpha",{get:function(){return this.spine.alpha},set:function(t){this.spine.alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isLoaded",{get:function(){return this._isLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"OnLoaded",{get:function(){return this.onLoaded},enumerable:!0,configurable:!0}),i.prototype.create=function(){var i=this;t.prototype.create.call(this),this.onLoaded.addOnce((function(){i.alpha=i._alphaOnLoad})),this._rootGroup=r.a.instance.game.add.group(void 0,this.GameObject.name),this.setRootContainer(this._rootGroup),this._spineKey&&this.setAsset(this._spineKey)},i.prototype.setAsset=function(t){var i,n=this;if(this._rootGroup){if(u.b.isValid(this.spine)&&this.spine.destroy(),u.b.isValid(t)){this._isLoaded=!1;var e=r.a.instance.game.cache;e.checkJSONKey(t)&&e.checkTextKey(t+"Atlas")&&(null===(i=o.a.getImageList(t))||void 0===i?void 0:i.every(e.checkImageKey.bind(e)))?this.updateSpineObject(t):r.a.instance.prodigy.load.assets([t],(function(){n.updateSpineObject(t)}))}}else this._spineKey=t},i.prototype.destroy=function(){u.b.isValid(this.spine)&&(this.spine.destroy(),this.spine=null),this._rootGroup.destroy(),this.onLoaded.dispose(),this._isLoaded=!1,t.prototype.destroy.call(this)},i.prototype.getDimensions=function(){return this.spine?new s.Size(this.spine.width,this.spine.height):s.Size.ZERO},i.prototype.getSpine=function(){return this.spine},i.prototype.updateSpineObject=function(t){if(u.b.isValid(this.spine)&&this.spine.destroy(),this.GameObject){this.spine=r.a.instance.game.add.spine(0,0,t),this._rootGroup.add(this.spine),this.spine.smoothed=!1;var i=this.spine.skeleton.findSlot("input_hitbox");u.b.isValid(i)&&(i.currentSprite.visible=!1),this._isLoaded=!0,this.onLoaded.dispatch()}},i.prototype.toggleBone=function(t,i){if(this.getSpine()){var n=this.getSpine().skeletonData;if(!n.findBone(t))return;n.findBone(t).scaleX=i?1:1e-4,n.findBone(t).scaleY=i?1:1e-4,this.getSpine().setToSetupPose()}else s.Logger.log("Couldn't find the spine to toggle the bone!",s.LogLevel.Error)},Object(e.__decorate)([Object(s.assetTag)(),Object(s.serializeString)(0,"asset"),Object(e.__metadata)("design:type",String)],i.prototype,"_spineKey",void 0),Object(e.__decorate)([Object(s.serializeNumber)(0,"alpha"),Object(e.__metadata)("design:type",Number)],i.prototype,"_alphaOnLoad",void 0),Object(e.__decorate)([Object(s.serializeSignal)(),Object(e.__metadata)("design:type",h.a)],i.prototype,"onLoaded",void 0),i=Object(e.__decorate)([Object(s.componentable)("Spine")],i)}(s.RenderComponent)},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t[t.Complete=0]="Complete",t[t.UnderConstruction=1]="UnderConstruction",t[t.SkillLocked=2]="SkillLocked",t[t.RooftopMastery=3]="RooftopMastery",t[t.TowerRoof=4]="TowerRoof",t[t.ChooseLook=5]="ChooseLook",t[t.QuickReno=6]="QuickReno",t[t.MoveFloor=7]="MoveFloor"}(e||(e={}))},function(t,i,n){"use strict";n.d(i,"a",(function(){return a}));var e=n(20),s=n(25),r=n(27),h=n(115),o=n(7),u=n(3),a=function(){function t(){}return t.getEvolutionLVL=function(t){var i=null==t?void 0:t.data.curve.find((function(t){return t.evolveID}));return null==i?void 0:i.lvl},t.getEvolutionID=function(t){var i=null==t?void 0:t.data.curve.find((function(t){return t.evolveID}));return null==i?void 0:i.evolveID},t.hasEvolutionID=function(t,i){return!!(null==i?void 0:i.data.curve.find((function(i){return i.evolveID===t})))},t.findPreviousEvolution=function(t,i){var n=this;return i.find((function(i){return n.hasEvolutionID(null==t?void 0:t.ID,i)}))},t.findNextEvolution=function(t){var i=this.getEvolutionID(t);return u.b.isValid(i)?o.a.getItem("pet",i):null},t.GetEvolutionaryLine=function(t){for(var i=o.a.getCategoryItems("pet"),n=[t.ID],e=this.findNextEvolution(t);e;)n.push(e.ID),e=this.findNextEvolution(e);for(e=this.findPreviousEvolution(t,i);e;)n.unshift(e.ID),e=this.findPreviousEvolution(e,i);return n},t.hasValidOrdinal=function(t){var i;return u.b.isValid(null===(i=t.data)||void 0===i?void 0:i.ordinal)&&t.data.ordinal>0},t.isPetOnTeam=function(t){return u.b.isValid(t.team)},t.getElementType=function(t){return t.data.element===s.a.Mech?s.a.Storm:t.data.element===s.a.Earth?s.a.Plant:t.data.element},t.getPetDisplayName=function(t,i,n){var e,s=null!==(e=null==i?void 0:i.nickname)&&void 0!==e?e:t.name;return u.b.isValid(n)&&s.length>n&&(s=s.substr(0,n)+"..."),s},t.isPetEpic=function(t){return Boolean(t>=125&&t<=133)},t.isPetStater=function(t){return h.a.STARTER_PETS.includes(t)},t.isPetACrystalMonster=function(t){return h.a.CRYSTAL_MONSTERS.includes(t)},t.getPetLevel=function(t){return u.b.isValid(t.level)?e.a.clamp(t.level,1,100):1},t.getPetMaxHealth=function(i){var n=o.a.getItem("pet",i.ID);return r.a.getHPFromParams(t.getPetLevel(i),n.data.statHealth)},t.getPetCurrentHealth=function(t){return u.b.isValid(null==t?void 0:t.hp)?t.hp:this.getPetMaxHealth(t)},t}()},function(t,i,n){"use strict";n.d(i,"b",(function(){return e})),n.d(i,"a",(function(){return c}));var e,s=n(0),r=n(2),h=n(23),o=n(1),u=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._rootObject=null,i._header=null,i._body=null,i._footer=null,i}return Object(s.__extends)(i,t),Object.defineProperty(i.prototype,"rootObject",{get:function(){return this._rootObject},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footer",{get:function(){return this._footer},enumerable:!0,configurable:!0}),Object(s.__decorate)([Object(o.objectSerializable)("rootObject"),Object(s.__metadata)("design:type",o.GameObject)],i.prototype,"_rootObject",void 0),Object(s.__decorate)([Object(o.objectSerializable)("header"),Object(s.__metadata)("design:type",o.GameObject)],i.prototype,"_header",void 0),Object(s.__decorate)([Object(o.objectSerializable)("body"),Object(s.__metadata)("design:type",o.GameObject)],i.prototype,"_body",void 0),Object(s.__decorate)([Object(o.objectSerializable)("footer"),Object(s.__metadata)("design:type",o.GameObject)],i.prototype,"_footer",void 0),i=Object(s.__decorate)([Object(o.componentable)("DialogBasePrefab")],i)}(o.Component),a=n(188);!function(t){t[t.Small=16]="Small",t[t.Medium=20]="Medium",t[t.Large=93]="Large",t[t.Banner=95]="Banner"}(e||(e={}));var c=function(t){function i(i,n,e){void 0===e&&(e=new a.a);var s=t.call(this,i,n,200,{},["atlas-179","atlas-180","atlas-181"])||this;return s._dialogConfig=null,s.prefabRoot=null,s._prefabComponent=null,s._prefabLoader=null,s._dialogConfig=e,s.isModal=!0,s._prefabLoader=r.a.instance.prodigy.gameContainer.get("367-b794"),s}return Object(s.__extends)(i,t),i.prototype.create=function(){t.prototype.create.call(this);var i=this._prefabLoader.load(this._dialogConfig.size);this._prefabComponent=i.findComponentInChildren(u),this.prefabRoot.add(i.legacyTransform.group),this._prefabComponent.rootObject.legacyTransform.group.width=this._dialogConfig.width,this.background.visible=this._dialogConfig.bgTransparency,this.createHeader(),this.createBody(),this.createFooter()},i}(h.a)},function(t,i,n){"use strict";function e(t,i,n,e){var s={timer:void 0,lastArgs:[]},r=function(){for(var e=this,r=[],h=0;h<arguments.length;h++)r[h]=arguments[h];s.lastArgs=r,s.timer?(clearTimeout(s.timer),s.timer=setTimeout((function(){i||n.apply(e,s.lastArgs),s.timer=void 0}),t)):(i&&n.apply(this,s.lastArgs),s.timer=setTimeout((function(){i||n.apply(e,s.lastArgs),s.timer=void 0}),t))};return e&&(r=r.bind(e)),r.options=s,r}function s(t,i,n,s){var r;Object.defineProperty(n,s,{configurable:!0,enumerable:!1,get:function(){return r},set:function(n){r=e(t,i,n,this)}})}function r(t,i,n){var s=n.value;return n.value=e(t,i,s),n}function h(t,i){for(var n=[],e=2;e<arguments.length;e++)n[e-2]=arguments[e];if(0===n.length)throw new Error("function applied debounce decorator should be a method");if(1===n.length)throw new Error("method applied debounce decorator should have valid name");var h=n[0],o=n[1],u=3===n.length&&n[2]?n[2]:Object.getOwnPropertyDescriptor(h,o);if(u)return r(t,i,u);s(t,i,h,o)}Object.defineProperty(i,"__esModule",{value:!0}),i.cancel=function(t){t&&t.options&&clearTimeout(t.options.timer)},i.debounce=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=500,e=!0;if(t.length&&("number"==typeof t[0]||"object"==typeof t[0]&&void 0!==t[0].leading)){"number"==typeof t[0]&&(n=t[0]);var s=void 0;return"object"==typeof t[0]&&void 0!==t[0].leading&&(s=t[0]),t.length>1&&"object"==typeof t[1]&&void 0!==t[1].leading&&(s=t[1]),s&&(e=s.leading),function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return h.apply(void 0,[n,e].concat(t))}}return h.apply(void 0,[n,e].concat(t))}},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t[t.Key=0]="Key",t[t.View=1]="View",t[t.Icon=2]="Icon",t[t.IconNoBackground=3]="IconNoBackground",t[t.Store=4]="Store",t[t.Inventory=5]="Inventory",t[t.Card=6]="Card",t[t.Info=7]="Info",t[t.StylistCard=8]="StylistCard",t[t.Buy=9]="Buy",t[t.Equip=10]="Equip",t[t.Item=11]="Item"}(e||(e={}))},function(t,i,n){"use strict";n.d(i,"a",(function(){return r}));var e=n(5),s=n(4),r=function(){function t(){}return t.determineJustLocked=function(t,i){return!this.isSkillLocked(t)&&this.isSkillLocked(i)},t.determineJustUnlocked=function(t,i){return this.isSkillLocked(t)&&!this.isSkillLocked(i)},t.determineJustMastered=function(t,i){return!this.isSkillMastered(t)&&this.isSkillMastered(i)},t.shouldHaveShroud=function(t){return this.isSkillLocked(t)},t.shouldHaveStubbornShadow=function(t,i){return!this.isSkillMastered(t)&&!this.isSkillLocked(t)&&this.isBlockCountIsAtMaximumAllowed(i)&&this.isSkillCorrectCountAtBlockCountMaximum(t)},t.getBlockDiscrepancy=function(t,i){var n=t.totalCorrectCount-i.blockCount,e=s.a.MAX_SMART_BLOCKS-i.blockCount;return e<n?e:n},t.determineNewBlockCount=function(t,i){if(!t)return s.a.MAX_SMART_BLOCKS;var n=this.getBlockDiscrepancy(t,i)+i.blockCount;return this.isSkillMastered(t)||this.isBlockCountIsAtMaximumAllowed(n)?s.a.MAX_SMART_BLOCKS:n},t.isBlockCountIsAtMaximumAllowed=function(t){return t>=s.a.MAX_SMART_BLOCKS},t.isSkillCorrectCountAtBlockCountMaximum=function(t){return t.totalCorrectCount>=s.a.MAX_SMART_BLOCKS},t.getCurrentSkillByGrade=function(t,i){var n=this;return Object(e.first)(this.getSkillsByGrade(t,i).filter((function(t){return!n.isSkillMastered(t)&&!n.isSkillLocked(t)})))},t.getSkillsByGrade=function(t,i){return t.filter((function(t){return t.grade===i}))},t.getSkillsMasteredByGrade=function(t,i){var n=this;return Object(e.orderBy)(t.filter((function(t){return n.isSkillMastered(t)})),["dateMastered"]).filter((function(t){return t.grade===i}))},t.getPendingSkillsByGrade=function(t,i){var n=this;return t.filter((function(t){return!n.isSkillMastered(t)&&t.grade===i}))},t.getSkillById=function(t,i){return Object(e.find)(t,["ID",i])},t.answersToUnlock=function(t){return t.lock},t.isAvailable=function(t){return t.isAvailable},t.isSkillMastered=function(t){return t.hasBeenMastered},t.isSkillLocked=function(t){return t.lock>0},t.hasMaximumTheta=function(t){return t.theta===s.a.THETA_MAXIMUM},t.hasMinimumTheta=function(t){return t.theta===s.a.THETA_MINIMUM},t.isSkillIdMobileFriendly=function(t,i){return!Object(e.includes)(i,t)},t}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return e}));var e=function(){function t(){}return t.BACKSPACE=8,t.ENTER=13,t.SPACEBAR=32,t.ESC=27,t.TAB=9,t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.A="A".charCodeAt(0),t.D="D".charCodeAt(0),t.S="S".charCodeAt(0),t.W="W".charCodeAt(0),t}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return u}));var e=n(0),s=n(2),r=n(6),h=n(31),o=n(3),u=function(t){function i(i,n,e,s,r,h){void 0===r&&(r=0),void 0===h&&(h=0);var o=t.call(this,i,n,"",r,h,[],e,s)||this;return o.zoneName=null,o.isScene=!0,o.isScene=!0,o.loadingData={fadeIn:!0,time:1,fadeOut:!0,save:!1},o}return Object(e.__extends)(i,t),i.prototype.setup=function(i,n,e){this.zone.hideFollow(n),n.walkEnabled=!1,n.user.clickEnabled=!1,n.menuBar.show(!1),s.a.instance.prodigy.notifications.stopFriendTimer(),s.a.instance.prodigy.notifications.clearNotifications(),t.prototype.setup.call(this,i,n,e)},i.prototype.start=function(i,n,e){t.prototype.start.call(this,i,n,e)},i.prototype.end=function(t,i){},i.prototype.enterScene=function(t,i,n){this.sceneTop=i.menus.add(new h.a(t,0,-50,1280,50,"atlas-161","overlay-small")),this.sceneBot=i.menus.add(new h.a(t,0,720,1280,50,"atlas-161","overlay-small"));var e=t.add.tween(this.sceneTop).to({y:0},1e3,r.a.Quadratic.Out).start();o.b.isValid(n)&&e.onComplete.add(n),t.add.tween(this.sceneBot).to({y:670},1e3,r.a.Quadratic.Out).start(),i.user.unmount()},i.prototype.cleanup=function(){this.sceneTop&&(this.sceneTop.destroy(),this.sceneTop=null),this.sceneBot&&(this.sceneBot.destroy(),this.sceneBot=null),t.prototype.cleanup.call(this)},i}(n(21).a)},function(t,i,n){"use strict";n.d(i,"a",(function(){return h}));var e=n(0),s=n(2),r=n(321),h=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(e.__extends)(i,t),i.prototype.init=function(i){return!!t.prototype.init.call(this,i)&&(this.name=s.a.instance.prodigy.gameContainer.resolve(r.a),this.name.init(i.name),!0)},i.prototype.getBamSpells=function(t){return[]},i.prototype.getStatPower=function(){return 5},i.prototype.getStatHealth=function(){return 5},i}(n(69).a)},function(t,i,n){"use strict";n.d(i,"a",(function(){return d}));var e=n(0),s=n(1),r=n(5),h=n(2),o=n(27),u=n(8),a=n(67),c=n(3),l=n(7),f=n(77),b=n(69),v=n(35),d=function(t){function i(i,n){var e=t.call(this,i)||this;return e.nickname=null,e.setData(n),e}return Object(e.__extends)(i,t),i.prototype.assignRandomSpells=function(){if(c.b.isValid(this.source.foreignSpellPools)){this.data.foreignSpells=[];for(var t=r.map(this.source.nativeSpells,(function(t){return t.spell})),i=0;i<this.source.foreignSpellPools.length;i++){var n=this.source.foreignSpellPools[i];n=r.difference(n,t),n=r.uniq(n),this.data.foreignSpells.push(r.sample(n.length>0?n:this.source.foreignSpellPools[i]))}}else s.Logger.log(this.getName()+": failed to assign random spells",s.LogLevel.Warning)},i.prototype.setData=function(i){if(t.prototype.setData.call(this,i),c.b.isValid(this.data)){this.data.ID=c.b.isValid(i.ID)?i.ID:i.gameID,this.nickname=this.data.nickname,delete this.data.R;var n=l.a.getItem("pet",this.data.ID);this.source=n.data,c.b.isValid(n.metadata.assets.default)&&(this.source.assetType=n.metadata.assets.default.type),this.type=this.source.life,this.immortal=i.immortal}},i.prototype.canCatch=function(){return!(this.game.state.getCurrentState()!==this.game.state.states.Battle||!this.game.state.states.Battle.mods.bounty)||!c.b.isValid(this.nickname)},i.prototype.getAttacks=function(t){void 0===t&&(t=null);for(var i=[],n=this.getBamSpells(),e=0;e<n.length;e++)n[e].locked||c.b.isValid(t)&&l.a.getItem("spell",n[e].ID).data.element!==t||i.push(n[e].ID);return i},i.prototype.getBamSpells=function(t){var i;void 0===t&&(t=this.getLevel()),c.b.isValid(this.data.levelCaught)||(this.data.levelCaught=null!==(i=this.data.level)&&void 0!==i?i:1),c.b.isValid(this.data.foreignSpells)||this.assignRandomSpells();var n=this.source.nativeSpells;if(!c.b.isValid(n)){s.Logger.log(this.getName()+": Invalid nativeSpells, reassigning from curve",s.LogLevel.Warning);var e=b.a.getAttacksFromCurve(l.a.getItemData("pet",this.getID()).curve,1,100);e=e.slice(0,2),n=[{spell:c.b.spellConversion({ID:e[0]}),tierLevels:[0,15,40]},{spell:c.b.spellConversion({ID:e[1]}),tierLevels:[5,20,45]}]}return[this.getNativeSpell(0,n[0].spell,t),this.getNativeSpell(1,n[1].spell,t),this.getForeignSpell(2,this.data.foreignSpells[0],t),this.getForeignSpell(3,this.data.foreignSpells[1],t)]},i.prototype.getNativeSpell=function(t,n,e){var s=i.getSpellEvolutionLevels(t,n),r=a.b.getSpellTierAtLevel(e,s);return{ID:a.b.getNextTierSpell(n,r-1).ID,locked:r<=0,type:a.a.Native,unlockLevel:s[0]}},i.prototype.getForeignSpell=function(t,n,e){var s=i.getSpellEvolutionLevels(t,n),r=a.b.getSpellTierAtLevel(e,s),h=i.getUnlockLevelForeignSpell(this.data.levelCaught,t,e);return{ID:a.b.getNextTierSpell(n,r-1).ID,locked:r<=0||e<h,type:a.a.Foreign,unlockLevel:h}},i.getUnlockLevelNativeSpell=function(t,n){return i.getSpellEvolutionLevels(t,n)[0]},i.getUnlockLevelForeignSpell=function(t,i,n){var e=5-Math.max(0,Math.floor((t-1)/20));return 3===i&&(e+=n<=50?2:1),Math.min(t+e,100)},i.getSpellEvolutionLevels=function(t,i){var n,e=[1,1,2,3];l.a.getItem("spell",i).data.targetType===f.a.AOE?(n=v.a.getAoeEvolutions())[0]+=e[t]:n=v.a.getSingleShotEvolutions();for(var s=1;s<n.length;s++)n[s]+=e[t];return n},i.prototype.getMaxHearts=function(t){var i=c.b.isValid(t)?t:this.getLevel(),n=Math.min(Math.floor(o.a.getCreatureHP(this,i)),b.a.MAX_HEARTS);return Math.round(n*this.modifiers.maxHearts)},i.prototype.evolve=function(t,i){var n=c.b.isValid(i)?i:this.getLevel();c.b.isValid(this.data.evolve)||(this.data.evolve=[]),this.data.evolve.push({ID:this.data.ID,lvl:n}),this.data.ID=t,this.source=l.a.getItem("pet",this.data.ID).data,h.a.instance.prodigy.gameContainer.get("447-4630").player.encounters.addToPetTimesRescued(t),this.type=this.source.life,this.game.broadcaster.broadcast(u.e.Evolved,null,[this])},i.prototype.getID=function(){return this.data.ID},i.prototype.getName=function(){return c.b.isValid(this.nickname)?this.nickname:this.source.name},i.prototype.getFirstName=function(){return this.source.name},i.prototype.getElement=function(){return this.source.element},i.prototype.generate=function(t,i){var n=Math.max(1,t-i);this.data.stars=b.a.starsToLevel(n),this.data.level=n},i.prototype.getLevelingCurve=function(t){for(var i=[],n=[],e=l.a.getItem("pet",this.getID()).data.curve,s=0;s<e.length;s++){var r=e[s];c.b.isValid(r.evolveID)&&c.b.isValid(r.lvl)||c.b.isValid(r.e)&&r.lvl<=t?n.push(r):r.lvl===t&&i.push(r)}return n.concat(i)},i.prototype.getDrops=function(){return t.prototype.getDrops.call(this).concat({type:"gold",N:100},l.a.getItemDrops(this.data.drops))},i.prototype.getStatPower=function(){return c.b.isValid(this.source.statPower)?this.source.statPower:5},i.prototype.getStatHealth=function(){return c.b.isValid(this.source.statHealth)?this.source.statHealth:5},i}(b.a)},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t[t.JSON=0]="JSON",t[t.Image=1]="Image",t[t.Atlas=2]="Atlas",t[t.Music=3]="Music",t[t.Sound=4]="Sound",t[t.Spine=5]="Spine"}(e||(e={}))},function(t,i,n){"use strict";n.d(i,"a",(function(){return a}));var e=n(0),s=n(1),r=n(5),h=n(12),o=n(3),u=n(43),a=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.onAnimationComplete=new h.a,i._initialAnimation=null,i._loopAnimation=!0,i._isLoaded=!1,i}return Object(e.__extends)(i,t),Object.defineProperty(i.prototype,"OnAnimationComplete",{get:function(){return this.onAnimationComplete},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isLoaded",{get:function(){return this._isLoaded},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.prototype.create.call(this),this._isLoaded=!1;var i=this.GameObject.findComponent(u.a);i&&(i.getSpine()?this.onLoaded():i.OnLoaded.addOnce(this.onLoaded,this,0))},i.prototype.onLoaded=function(){this._isLoaded=!0,this._initialAnimation&&this.playAnimation(this._initialAnimation,this._loopAnimation)},i.prototype.playAnimation=function(t,i){var n=this;if(!this._isLoaded)return this._initialAnimation=t,void(this._loopAnimation=i);var e=this.getSpineComponent();if(e&&r.get(e,"spine.state.tracks[0].animation.name")!==t){var s=e.getSpine();s?(s.onComplete.removeAll(this),i?s.onComplete.add((function(){n.onAnimationComplete.dispatch()}),this):s.onComplete.addOnce((function(){n.onAnimationComplete.dispatch()}),this),s.lastTime=Date.now(),s.setToSetupPose(),s.setAnimationByName(0,t,i),s.state.apply(s.skeleton)):e.OnLoaded.addOnce(this.playAnimation,this,0,t,i)}},i.prototype.stopAnimation=function(){var t=this.getSpineComponent();if(null!==t){var i=t.getSpine();i.onComplete.removeAll(this),i.setToSetupPose()}},i.prototype.applySkin=function(t){var i=this.getSpineComponent();if(null!==i){var n=i.getSpine(),e=n.skeleton.data.findSkin(t);n.setSkin(e);for(var s=n.skeleton.slots,r=0;r<s.length;++r){var h=s[r].data.attachmentName;o.b.isValid(h)&&e.getAttachment(r,h)&&s[r].setToSetupPose()}}},i.prototype.buildSkin=function(t,i){var n,s=this.getSpineComponent();null!==s&&(n=s.getSpine()).createCombinedSkin.apply(n,Object(e.__spread)([t],i))},i.prototype.destroy=function(){var i=this.getSpineComponent();null!==i&&i.getSpine().onComplete.removeAll(this),this.onAnimationComplete.dispose(),t.prototype.destroy.call(this)},i.prototype.getSpineComponent=function(){var t,i=null===(t=this.GameObject)||void 0===t?void 0:t.findComponent(u.a);return i&&i.getSpine()?i:null},Object(e.__decorate)([Object(s.serializeString)(0,"animation"),Object(e.__metadata)("design:type",String)],i.prototype,"_initialAnimation",void 0),Object(e.__decorate)([Object(s.serializeBoolean)(),Object(e.__metadata)("design:type",Boolean)],i.prototype,"_loopAnimation",void 0),i=Object(e.__decorate)([Object(s.componentable)("SpineAnimator")],i)}(s.Component)},function(t,i,n){"use strict";n.d(i,"a",(function(){return h}));var e=n(0),s=n(67),r=n(3),h=function(t){function i(i,n){var e=t.call(this,i)||this;return e.showHealthBar=!1,e.data.level=n.level,e.source=n,e}return Object(e.__extends)(i,t),i.prototype.getAttacks=function(t){return this.source.attacks||[]},i.prototype.getMaxHearts=function(){return this.source.maxHP},i.prototype.getName=function(){return this.source.name},i.prototype.getElement=function(){return this.source.element},i.prototype.getID=function(){return this.source.ID},i.prototype.getStarReward=function(){return r.b.isValid(this.source.starBonus)?this.source.starBonus:t.prototype.getStarReward.call(this)},i.prototype.canCatch=function(){return!1},i.prototype.chooseAction=function(t,i,n,e,s,r){return!1},i.prototype.getBamSpells=function(t){for(var i=this.getAttacks(),n=[],e=0;e<i.length;e++)n.push({ID:i[e],locked:!1,type:s.a.Native});return n},i.prototype.getStatPower=function(){return 5},i.prototype.getStatHealth=function(){return 5},i.prototype.getAssets=function(){var t=this.getID();return t>0?["default-boss-"+t]:[]},i}(n(69).a)},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t.MathTower="MathTower",t.DefaultItems="DefaultItems",t.Storage="Storage",t.StorageSerializer="StorageSerializer",t.StoreManager="StoreManager",t.BreadcrumbManager="TowerTownBreadcrumbManager",t.Education="Education",t.DialogueFactory="DialogueFactory",t.Events="Events"}(e||(e={}))},function(t,i,n){"use strict";n.d(i,"a",(function(){return a}));var e=n(0),s=n(1),r=n(2),h=(n(8),n(7)),o=n(78),u=n(3),a=function(t){function i(n,e,s,a,c,l){void 0===c&&(c={}),void 0===l&&(l=null);var f=t.call(this,n,e,s,a)||this;f.icon=null,f.selected=!1,f.callback=null,f.btnGroup=null,f.bg=null,f.text=null,f.iconSide=null,f.isActive=!0,f.callback=l,f.btnGroup=r.a.instance.prodigy.create.element(f,0,0);var b=c,v=u.b.isValid(b.size)?b.size:i.SMALL,d=null;switch(v){case i.CONFIRM:d="btn-med-confirm";break;case i.TALL:d="btn-tall";break;case i.MED:d="btn-med";break;case i.MINI:d="btn-mini";break;case i.LG:d="btn-lg";break;case i.GRADE:d="btn-grade";break;default:d="btn-small"}var O=u.b.isValid(b.text)?b.text:"";f.name=O;var m=0,p=u.b.isValid(b.textY)?b.textY:0,g=v-85,y=u.b.isValid(b.atlas)?b.atlas:h.a.getIconAtlas(b.icon),j=b.icon,_=u.b.isValid(b.needsMemberIcon)&&b.needsMemberIcon;if(f.iconSide=b.iconSide,f.bg=r.a.instance.prodigy.create.sprite(0,0,"atlas-18",d),f.btnGroup.add(f.bg),u.b.isValid(j)?(f.icon=f.btnGroup.add(r.a.instance.prodigy.create.sprite(0,0,y,j)),f.setIcon(j),m="right"===b.iconSide?10:f.icon.width+15,g=f.bg.width-25-f.icon.width):(g=v-20,m=10),f.text=r.a.instance.prodigy.create.font(f.btnGroup,m,p,""+O,{size:36,fontID:9,width:g,align:"center"}),_){var w=r.a.instance.prodigy.create.sprite(0,0,"atlas-21","mail-member");w.x=f.bg.width-w.width/2,w.y=-w.height/2,f.btnGroup.add(w)}return f.bg.inputEnabled=!0,f.bg.events.onInputDown.add(f.onDown,f),f.bg.events.onInputUp.add(f.onUp,f),f.bg.events.onInputOver.add(f.onOver,f),f.bg.events.onInputOut.add(f.onOut,f),f.onDestroy.add(f.handleDestroy.bind(f)),o.a.isEnabled()&&(f.updateElementAttribute("data-text",O),f.updateElementPosition(f.worldPosition.x,f.worldPosition.y)),f}return Object(e.__extends)(i,t),i.prototype.setActive=function(){this.isActive=!0,this.bg.tint=16777215,this.tintActive()},i.prototype.setInactive=function(){this.isActive=!1,this.bg.tint=5789784,this.icon&&(this.icon.tint=5789784)},i.prototype.select=function(){this.selected=!0,this.bg.tint=7447253,this.icon&&(this.icon.tint=7447253)},i.prototype.deselect=function(){this.selected=!1,this.bg.tint=16777215,this.tintActive()},i.prototype.setIcon=function(t){this.icon.frameName=u.b.isString(t)?t:null,this.icon.x="right"===this.iconSide?this.bg.width-this.icon.width-10:10,this.icon.y=-Math.floor((this.icon.height-50)/2),"btn-tall"===this.bg.frameName&&(this.icon.x=Math.floor((100-this.icon.width)/2),this.icon.y=Math.floor((200-this.icon.height)/2))},i.prototype.setEnabled=function(t){this.isActive=t,this.alpha=this.isActive?1:.5},i.prototype.setText=function(t){this.text.setText(t)},i.prototype.onDown=function(){this.isActive&&(r.a.instance.prodigy.audio.playSFX(18,"pop"),u.b.isValid(this.callback)&&this.callback(),this.btnGroup.y=0)},i.prototype.onUp=function(){this.isActive&&(this.btnGroup.y=-3)},i.prototype.onOver=function(){this.isActive&&(this.btnGroup.y=-3)},i.prototype.onOut=function(){this.isActive&&(this.btnGroup.y=0)},i.prototype.tintActive=function(){this.icon&&(this.icon.tint=16777215)},i.prototype.handleDestroy=function(){0},i.prototype.onDebugAutoClick=function(t){0},i.createNextButton=function(t,i,n,e,h){return r.a.instance.prodigy.create.textButton(i,n,e,{icon:"next",iconSide:"right",text:r.a.instance.prodigy.gameContainer.get(s.GameIdentifiers.LocalizationService).getText("BUTTON_NEXT")},h)},i.createCloseButton=function(t,i,n,e,h){return r.a.instance.prodigy.create.textButton(i,n,e,{icon:"close",text:r.a.instance.prodigy.gameContainer.get(s.GameIdentifiers.LocalizationService).getText("BUTTON_CLOSE")},h)},i.createYesButton=function(t,i,n,e,h){return r.a.instance.prodigy.create.textButton(i,n,e,{icon:"yes",text:r.a.instance.prodigy.gameContainer.get(s.GameIdentifiers.LocalizationService).getText("BUTTON_YES")},h)},i.createNoButton=function(t,i,n,e,h){return r.a.instance.prodigy.create.textButton(i,n,e,{icon:"close",text:r.a.instance.prodigy.gameContainer.get(s.GameIdentifiers.LocalizationService).getText("BUTTON_NO")},h)},i.className="TextButton",i.MINI=100,i.SMALL=200,i.TALL=100.1,i.MED=300,i.CONFIRM=301,i.LG=350,i.GRADE=80,i}(n(19).a)},function(t,i,n){"use strict";n.d(i,"a",(function(){return r}));var e=n(0),s=n(1),r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.loggingTag=null,i}return Object(e.__extends)(i,t),i.prototype.setTag=function(t){this.loggingTag=t},i.prototype.logMessage=function(t){null!==this.loggingTag&&(this.getInjectedValue("ENABLE_"+this.loggingTag+"_LOGGING")&&s.Logger.log("("+this.loggingTag+") - "+t,s.LogLevel.Verbose))},i}(s.InjectableClass)},function(t,i,n){"use strict";n.d(i,"a",(function(){return o}));var e=n(0),s=n(9),r=n(12),h=n(145),o=function(){function t(){this._player=null,this.onStatChanged=new r.a}return Object.defineProperty(t.prototype,"player",{get:function(){return this._player},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OnStatChanged",{get:function(){return this.onStatChanged},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){this._player=hack.player=t},t.prototype.getPlayer=function(){return this._player},t.prototype.logout=function(){this._player&&(this._player.saveEnabled=!1,this._player=null)},t.prototype.getFirstName=function(){return this.player.appearance.name.getFirstName()},t.prototype.getMiddleName=function(){return this.player.appearance.name.getMiddleName()},t.prototype.getLastName=function(){return this.player.appearance.name.getLastName()},t.prototype.getNickname=function(){return this.player.appearance.name.getNickname()},t.prototype.getAppearance=function(){var t=this.player.appearance,i=this.player.equipment;return{face:t.getFace(),hair:{style:t.getHair().style,color:t.getHair().color},hat:i.getHat(),skin:t.getSkinColor(),eyeColor:t.getEyeColor(),gender:t.getGender(),outfit:i.getOutfit(),weapon:i.getWeapon()}},t.prototype.getStars=function(){return this.player.getPlayerData().stars},t.prototype.getUserID=function(){return this.player.userID},t.prototype.getLevel=function(){return this.player.getLevel()},t.prototype.getBaseHearts=function(){return this.player.getBaseMaxHearts(this.getLevel())},t.prototype.addStars=function(t){var i=this.player.data.stars,n=this.getLevel(),e=this.getBaseHearts();this.player.addStars(t),this.dispatchStatChange(h.a.Stars,this.player.data.stars,i);var s=this.getLevel();if(s>n){this.dispatchStatChange(h.a.Level,s,n),this.dispatchStatChange(h.a.MaxHearts,this.getBaseHearts(),e);for(var r=this.player.getBamSpells(n),o=this.player.getBamSpells(s),u=0;u<r.length;++u)r[u].locked&&!o[u].locked?this.dispatchStatChange(h.a.Spell,o[u].ID,null):r[u].ID!==o[u].ID&&this.dispatchStatChange(h.a.Spell,o[u].ID,r[u].ID)}},t.prototype.setSavingEnabled=function(t){this.player.saveEnabled=t},t.prototype.isMember=function(){return this.player.hasMembership()},t.prototype.hasParentLinkedEmail=function(){return this.player.hasValidatedParentEmail()},t.prototype.giveItem=function(t,i,n){void 0===n&&(n=1),this.player.backpack.add(t,i,!1,n)},t.prototype.dispatchStatChange=function(t,i,n){n!==i&&this.onStatChanged.dispatch(t,i,n)},t=Object(e.__decorate)([Object(s.injectable)()],t)}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return u}));var e=n(0),s=n(2),r=n(8),h=n(3),o=n(19),u=function(t){function i(i,n,e,r,o){var u=t.call(this,i,n,e,r)||this;return u.buttons=[],u.renderTexture=null,u.background=null,u.renderImage=null,u.page=0,u.disableModeSet=!1,h.b.isValid(s.a.instance.prodigy.notifications)&&s.a.instance.prodigy.notifications.clearNotifications(),u.renderTexture=o,u.background=s.a.instance.prodigy.create.element(u),u.renderTexture.clear(),u.renderImage=u.add(s.a.instance.prodigy.create.image(0,0,u.renderTexture)),u.renderImage.inputEnabled=!0,u}return Object(e.__extends)(i,t),i.prototype.create=function(){s.a.instance.prodigy.open.setActiveRenderMenu(this),this.process(),this.game.broadcaster.broadcast(r.s.StopPlayer)},i.prototype.setMode=function(t){if(h.b.isValid(this.buttons))for(var i=0;i<this.buttons.length;i++)this.buttons[i].setActive(t!==i)},i.prototype.setActive=function(t){this.visible=t,t&&(h.b.isValid(this.game)&&h.b.isValid(s.a.instance.prodigy.notifications)&&s.a.instance.prodigy.notifications.clearNotifications(),this.process()),this.disableModeSet||this.setMode(h.b.isValid(this.page)?this.page:0)},i.prototype.addTransparent=function(t){void 0===t&&(t=.5);var i=this.background.add(s.a.instance.prodigy.create.sprite(-10,-10,"atlas-18","overlay-small"));i.width=1300,i.height=740,i.alpha=t},i.prototype.createBaseSetup=function(t,i,n,e,r,o,u,a){this.disableModeSet=o;var c=s.a.instance.prodigy.create.element(this,(1280-40*t)/2,(720-40*i)/2);c.setRenderState(!0),s.a.instance.prodigy.create.panel(c,0,0,t,i,n);var l,f,b="banner",v=null,d=0;if(h.b.isValid(r)&&r.length>0&&(d=3*r.length+6),h.b.isValid(a)&&h.b.isValid(a.banner)&&(b=a.banner.frameName,v={atlasID:a.banner.atlasID},d=a.banner.width),h.b.isValid(r)&&r.length>0)s.a.instance.prodigy.create.panel(c,40,40,d,2,b,v);else if(h.b.isValid(u)){var O=s.a.instance.prodigy.create.panel(c,40,40,18,2,b);s.a.instance.prodigy.create.font(O,200,15,u,{size:36,fontID:9})}var m={x:-40,y:-10};if(h.b.isValid(a)&&h.b.isValid(a.closeButton)?(l=a.closeButton.key,f=a.closeButton.frameName,m=a.closeButton.offset):(l="atlas-21",f="close"),s.a.instance.prodigy.create.button(this,c.x+40*t+m.x,c.y+m.y,l,f,this.close.bind(this)),this.buttons=[],h.b.isValid(r)&&r.length>0){var p={x:0,y:0},g={x:0,y:0};h.b.isValid(a)&&h.b.isValid(a.buttons)&&(p=a.buttons.offset,g=a.buttons.iconOffset),h.b.isValid(e)&&(c.add(s.a.instance.prodigy.create.sprite(g.x+80,-10,"atlas-21","menu-crest")),""!==e&&s.a.instance.prodigy.create.font(c,g.x+80,70,e,{width:140,align:"center"}));for(var y=0;y<r.length;y++)this.buttons.push(s.a.instance.prodigy.create.advButton(this,c.x+p.x+240+120*y,c.y+30,r[y],this.setMode.bind(this,y)))}return c},i.prototype.init=function(t){t.add(this),this.process()},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];h.b.isValid(this.game)&&h.b.isValid(s.a.instance.prodigy)&&s.a.instance.prodigy.open.setActiveRenderMenu();try{h.b.isValid(this.onClose)&&this.onClose.apply(this,t)}catch(n){}h.b.isValid(this.game)&&s.a.instance.prodigy.open.close(this),this.destroy()},i.prototype.startLoad=function(t,i){s.a.instance.prodigy.load.assets(t,i)},i.prototype.process=function(){this.renderTexture.clear(),this.background.visible=!0,this.renderTexture.renderXY(this.background,0,0,!0),this.background.visible=!1;for(var t=0;t<this.children.length;t++)if(this.children[t]instanceof o.a){var i=this.children[t];i.tintElement&&i.setAllChildren("tint",10066329),i.renderOnly?(i.visible=!0,this.renderTexture.renderXY(i,i.x,i.y),i.visible=!1):i.visible=!0}},i.prototype.hideActiveElements=function(){for(var t=0;t<this.children.length;t++){var i=this.children[t];i!==this.background&&(i instanceof o.a&&(i.visible=!1))}},i}(o.a)},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.ACHIEVEMENTS=1]="ACHIEVEMENTS",t[t.ITEMRARE=2]="ITEMRARE",t[t.MEMBERSHIP=3]="MEMBERSHIP",t[t.STOREPURCHASE=4]="STOREPURCHASE",t[t.MEMBERBOX=5]="MEMBERBOX",t[t.PARENTREWARD=6]="PARENTREWARD",t[t.ITEMGENERIC=7]="ITEMGENERIC",t[t.LAMPLIGHTPURCHASE=8]="LAMPLIGHTPURCHASE",t[t.ITEMWHEEL=9]="ITEMWHEEL",t[t.QUESTIONSANSWERED=10]="QUESTIONSANSWERED"}(e||(e={}))},function(t,i,n){"use strict";n.d(i,"a",(function(){return c}));var e=n(1),s=n(2),r=n(225),h=n(295),o=n(272),u=n(0),a=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(u.__extends)(i,t),i.prototype.postCreate=function(){t.prototype.postCreate.call(this),this._cachedGameObjectHeight=this.GameObject.legacyTransform.height},i.prototype.initializeText=function(i,n){t.prototype.initializeText.call(this,i,n),this.GameObject.active=!0},i.prototype.close=function(){this.GameObject.active=!1},i=Object(u.__decorate)([Object(e.componentable)("ToolTipSpeech")],i)}(n(40).b),c=function(){function t(){}return t.displayToolTipAuto=function(i,n,e){var s=t.setToolTip(r.a,i,n,t.TOOLTIP_AUTO);return t.updateBaseDisplay(s,e),s.close(),s.startTimer(),s},t.displayToolTipManual=function(i,n,s){var r=t.setToolTip(o.a,i,n,t.TOOLTIP_MANUAL),h=e.Utils.isDefined(s.proceedButtonCallback);return h?(r.setProceedButtonVisibility(!0),r.setCallback(s.proceedButtonCallback)):r.setProceedButtonVisibility(!1),t.updateBaseDisplay(r,s,h),e.Utils.isDefined(s.arrowXRelPos)||e.Utils.isDefined(s.arrowYRelPos)?r.setIndicatorArrow(s.arrowDirection,s.arrowXRelPos,s.arrowYRelPos):r.setIndicatorArrow(s.arrowDirection,.5,null),r},t.displayToolTipSpeech=function(i,n,e){var s=t.setToolTip(a,i,n,t.TOOLTIP_SPEECH);return t.updateBaseDisplay(s,e),s.setIndicatorArrow(e.arrowDirection,e.arrowXRelPos,e.arrowYRelPos),s},t.displayToolTipCustomManual=function(i,n,e,s){var r=t.setToolTip(o.a,i,n,e);return r.setProceedButtonVisibility(!1),t.updateBaseDisplay(r,s),r.setIndicatorArrow(s.arrowDirection,s.arrowXRelPos,s.arrowYRelPos),r},t.displayToolTipButtonGrid=function(i,n,s,r,o,u){void 0===o&&(o=!0);var a=t.setToolTip(h.a,i,n,r);return a.GameObject.active=o,t.updateBaseDisplay(a,s),e.Utils.isDefined(s.arrowDirection)&&a.setIndicatorArrow(s.arrowDirection,s.arrowXRelPos,s.arrowYRelPos),e.Utils.isDefined(u)&&u.length>0&&a.setCallbacks(u),a},t.updateBaseDisplay=function(t,i,n){t.initializeText(i.bodyText,i.headerText,n),e.Utils.isDefined(i.xPosition)&&(t.GameObject.legacyTransform.group.position.x=i.xPosition),e.Utils.isDefined(i.yPosition)&&(t.GameObject.legacyTransform.group.position.y=i.yPosition)},t.setToolTip=function(t,i,n,e){return i||s.a.instance.prodigy.gameContainer.get("367-b794").load(e,n).findComponentInChildren(t)},t.TOOLTIP_AUTO=10,t.TOOLTIP_MANUAL=11,t.TOOLTIP_SPEECH=108,t}()},function(t,i,n){"use strict";n.d(i,"b",(function(){return l})),n.d(i,"a",(function(){return b}));var e,s=n(0),r=n(25),h=n(4),o=n(22),u=n(7),a=n(3),c=function(){function t(){}return t.getFloatlingAssetID=function(t,i){a.b.isValid(this.floatlingSpineIDs)||this.findFloatlingSpineIDs();var n=h.a.ELEMENT_STRINGS.indexOf(t);return-1===n?0:this.floatlingSpineIDs[n][i+1]},t.findFloatlingSpineIDs=function(){var t=this;this.floatlingSpineIDs={};for(var i=0;i<h.a.ELEMENT_STRINGS.length;i++)this.floatlingSpineIDs[i]={};u.a.getItemsWithFilter("spine",(function(t){return!0})).forEach((function(i){var n=i.data.name;if(a.b.isValid(n)&&0===n.indexOf("spine-npc-floatling-")){n=n.split("-")[3];for(var e=0;e<h.a.ELEMENT_STRINGS.length;e++)0===n.indexOf(h.a.ELEMENT_STRINGS[e])&&(t.floatlingSpineIDs[e][n.substr(n.length-1)]=i.ID)}}))},t}();!function(t){t[t.Stubborn=0]="Stubborn",t[t.Shy=1]="Shy",t[t.Socialite=2]="Socialite",t[t.ChillDude=3]="ChillDude"}(e||(e={}));var l,f=n(127);!function(t){t[t.Wandering=0]="Wandering",t[t.Awake=1]="Awake",t[t.Asleep=2]="Asleep",t[t.Floating=3]="Floating",t[t.ScaredAway=4]="ScaredAway"}(l||(l={}));var b=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._state=l.Asleep,i._gearElement=0,i._explorerLevel=0,i._lastThrown=0,i._floor=null,i._personality=e.ChillDude,i._element=r.a.Fire,i}return Object(s.__extends)(i,t),Object.defineProperty(i.prototype,"state",{get:function(){return this._state},set:function(t){this._state!==t&&(this._state=t,this.notifyUpdate(o.a.FLOATLING_SET_STATE))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gearElement",{get:function(){return this._gearElement},set:function(t){this._gearElement=t,this.notifyUpdate(o.a.FLOATLING_SET_GEAR_ELEMENT)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"explorerLevel",{get:function(){return this._explorerLevel},set:function(t){this._explorerLevel=t,this.notifyUpdate(o.a.FLOATLING_SET_EXPLORER_LEVEL)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lastThrown",{get:function(){return this._lastThrown},set:function(t){this._lastThrown=t,this.updateState(),this.notifyUpdate(o.a.FLOATLING_SET_LAST_THROWN)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"floor",{get:function(){return this._floor},set:function(t){this._floor=t,this.notifyUpdate(o.a.FLOATLING_SET_FLOOR_ASSOCIATION)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"element",{get:function(){return this._element},set:function(t){this._element=t,this.notifyUpdate(o.a.FLOATLING_SET_ELEMENT)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"personality",{get:function(){return this._personality},set:function(t){this._personality=t,this.notifyUpdate(o.a.FLOATLING_SET_PERSONALITY)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"spineID",{get:function(){return"spine-"+c.getFloatlingAssetID(this.element,this.explorerLevel)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"researchPointID",{get:function(){return"researchpoint-sm-"+this.element},enumerable:!0,configurable:!0}),i.prototype.updateState=function(){this.state!==l.Floating&&this.state!==l.ScaredAway&&(this.lastThrown<=Date.now()-h.a.MS_DAY?this.state!==l.Wandering&&(this.state=l.Awake):this.state=l.Asleep)},i.organizeFloatlings=function(t){var i=new Map;return h.a.ELEMENT_STRINGS.forEach((function(t){i.set(t,[])})),t.forEach((function(t){for(var n=!1,e=0;e<i.get(t.element).length;e++)if(t.explorerLevel>i.get(t.element)[e].explorerLevel){i.get(t.element).splice(e,0,t),n=!0;break}n||i.get(t.element).push(t)})),i},i}(f.a)},function(t,i,n){"use strict";n.d(i,"a",(function(){return h}));var e=n(0),s=n(2),r=n(3),h=function(t){function i(i,n,e,r,h){void 0===r&&(r=0),void 0===h&&(h=0);var o,u=t.call(this,i,n)||this;for(u.initialized=!1,u.components=[],u.metricsManager=s.a.instance.prodigy.gameContainer.get("cbb-8a49"),u.metricsManager.objectCreated("GameObject"),o=0;o<e.length;o++)u.addComponent(e[o],!1);for(o=0;o<e.length;o++)e[o].create();return u.x=r,u.y=h,u.onDestroy.add(u.handleGameObjectDestroy.bind(u)),u}return Object(e.__extends)(i,t),i.prototype.handleGameObjectDestroy=function(){this.metricsManager.objectDestroyed("GameObject")},i.prototype.update=function(){for(var t=0;t<this.components.length;t++){var i=this.components[t];r.b.isValid(i.update)&&i.update()}},i.prototype.addComponent=function(t,i){var n,s;if(void 0===i&&(i=!0),!r.b.isValid(t.gameObject)&&r.b.isValid(this.game)){if(t.hasUniqueInstance())try{for(var h=Object(e.__values)(this.components),o=h.next();!o.done;o=h.next()){if(o.value.constructor===t.constructor)return}}catch(u){n={error:u}}finally{try{o&&!o.done&&(s=h.return)&&s.call(h)}finally{if(n)throw n.error}}this.components.push(t),t.gameObject=this,i&&t.create()}},i.prototype.findComponent=function(t){var i,n;try{for(var s=Object(e.__values)(this.components),r=s.next();!r.done;r=s.next()){var h=r.value;if(h instanceof t)return h}}catch(o){i={error:o}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return null},i.prototype.hasComponent=function(t){return r.b.isValid(this.findComponent(t))},i.prototype.removeComponent=function(t){for(var i=0;i<this.components.length;++i)if(this.components[i]===t){this.components.splice(i,1);break}},i.prototype.destroy=function(){for(var i=0;i<this.components.length;++i)r.b.isValid(this.components[i].destroy)&&this.components[i].destroy();t.prototype.destroy.call(this)},i}(n(70).a)},function(t,i,n){"use strict";n.d(i,"a",(function(){return s}));var e=n(0),s=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(e.__extends)(i,t),i}(Phaser.Rectangle)},function(t,i,n){"use strict";n.d(i,"a",(function(){return e})),n.d(i,"b",(function(){return o}));var e,s=n(5),r=n(7),h=n(3);!function(t){t.Native="native",t.Foreign="foreign",t.Weapon="weapon",t.SpellRelic="spellRelic"}(e||(e={}));var o=function(){function t(){}return t.getSpellDataAtLevel=function(t,i,n){var e=this.getSpellTierAtLevel(t,n);return this.getNextTierSpell(i,e-1)},t.getSpellTierAtLevel=function(t,i){var n=s.sortBy(i);return s.sortedLastIndex(n,t)},t.getNextTierSpell=function(t,i){for(var n=r.a.getItem("spell",t),e=0;e<i&&h.b.isValid(n.data.nextTierID);e++)n=r.a.getItem("spell",n.data.nextTierID);return n},t}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return s}));var e=n(0),s=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(e.__extends)(i,t),i}(Phaser.Image)},function(t,i,n){"use strict";n.d(i,"a",(function(){return f}));var e=n(1),s=n(5),r=n(2),h=n(20),o=n(25),u=n(27),a=n(8),c=n(3),l=n(7),f=function(){function t(t){this.immortal=!1,this.justLeveled=!1,this.starsEarned=0,this.data={},this.modifiers=null,this.type="B",this.source=null,this.game=null,this.inPVP=!1,this.catchAttempt=0,this.starsToProcess=0,this.starsRewardBase=100,this.starsReward=100,this.pvpHP=0,this.isOpponent=!1,this.showHealthBar=!0,this.onHPChange=new e.SignalLegacy,this.aoaTier=1,this.game=t,this.resetModifiers()}return Object.defineProperty(t.prototype,"team",{get:function(){return this.data.team},set:function(t){this.data.team=t},enumerable:!0,configurable:!0}),t.prototype.removeTeam=function(){delete this.data.team},t.prototype.init=function(t){return c.b.isValid(t)},t.prototype.createDataClone=function(){var t=new this.constructor(this.game);return t.setData(s.cloneDeep(this.data)),t},t.prototype.setData=function(t){this.data=t},t.getHeartsFromCurve=function(i,n,e){var s=t.HP_BONUS[i];return 20*(Math.floor((s+20)*e/100)-Math.floor((s+20)*(n-1)/100))},t.getLevelPercent=function(i){var n=t.levelFromStars(i);if(n>=100)return 1;var e=t.starsToLevel(n+1),s=t.starsToLevel(n);return(i-s)/(e-s)},t.getAttacksFromCurve=function(t,i,n){for(var e=[],s=0;s<t.length;s++){var r=t[s];r.lvl>=i&&r.lvl<=n&&c.b.isValid(r.a)&&e.push(r.a)}return e},t.getEvolutionsFromCurve=function(t,i,n){for(var e=[],s=!1,r=0;r<t.length;r++){var h=t[r],o=null;c.b.isValid(h.evolveID)?(o=h.evolveID,s=!0):c.b.isValid(h.e)&&(o=h.e),h.lvl>=i&&h.lvl<=n&&c.b.isValid(o)&&e.push(h)}if(s)for(r=e.length;r-- >0;)c.b.isValid(e[r].e)&&e[r].e>0&&e.splice(r,1);return e},t.getAttacksOfType=function(t,i){void 0===i&&(i=null);for(var n=[],e=0;e<t.length;e++){var r=l.a.getItem("spell",t[e]);null!==i&&s.get(r,"data.element","")!==i||n.push(t[e])}return n},t.starsToLevel=function(t){return u.a.xpRequiredForLevel(t)},t.levelFromStars=function(t){return u.a.levelFromStars(t)},t.enemiesPerLevel=function(t){return Math.max(0,Math.floor(Math.pow(1.7,.085*t)+.8))},t.prototype.resetModifiers=function(){this.modifiers={maxHearts:1,damage:1,miss:0,ignoreElement:0,potion:null,barrier:null}},t.prototype.getDataAndClear=function(){return this.data},t.prototype.getID=function(){return 0},t.prototype.canCatch=function(){return!1},t.prototype.getAttacks=function(t){return[1]},t.prototype.evolve=function(t,i){e.Logger.log("You're calling evolve on a Creature subclass that hasn't overridden the evolve function",e.LogLevel.Verbose)},t.prototype.isKnockedOut=function(){return this.getCurrentHearts()<=0},t.prototype.diffAttackSlots=function(t){for(var i=[],n=this.getCurrentBamSpells(),e=this.getBamSpells(t),r=0;r<n.length;r++)s.isEqual(n[r],e[r])||i.push({oldID:n[r].ID,newID:e[r].ID,newlyUnlocked:n[r].locked&&!e[r].locked});return i},t.prototype.getAvailableEvolutions=function(){var i=this.getLevel(),n=t.getEvolutionsFromCurve(this.getLevelingCurve(i),1,i),e=this.getID(),r=[];n.sort((function(t,i){return t.lvl-i.lvl}));var h=s.findIndex(n,(function(t){return t.evolveID===e}));h<=-1&&(h=s.findIndex(n,(function(t){return t.e===e})));var o=h+1;return o>=0&&o<n.length&&(r=n.slice(o,n.length)),r},t.prototype.getCurrentHearts=function(){var t=0;return this.inPVP?(c.b.isValid(this.pvpHP)||(this.pvpHP=this.getMaxHearts()),t=this.pvpHP):c.b.isValid(this.data.hp)?(this.data.hp>this.getMaxHearts()&&(this.data.hp=this.getMaxHearts()),t=this.data.hp):t=this.getMaxHearts(),c.b.validateInt(t,this.getMaxHearts())},t.prototype.getMaxHearts=function(i){var n=c.b.isValid(i)?i:this.getLevel();return Math.min(Math.floor(u.a.getCreatureHP(this,n)),t.MAX_HEARTS)},t.prototype.getBaseMaxHearts=function(t){return this.getMaxHearts(t)},t.prototype.updateModifier=function(t,i){"potion"===t?this.modifiers.potion=i:"barrier"===t?this.modifiers.barrier=i:c.b.isValid(this.modifiers[t])&&(this.modifiers[t]+=i,this.modifiers[t]<=0&&(this.modifiers[t]=.01))},t.prototype.registerIncomingAttack=function(t,i,n,e){},t.prototype.changeCurrentHeartsPercent=function(t){var i=Math.round(this.getMaxHearts()*t);this.changeCurrentHearts(i)},t.prototype.changeCurrentHearts=function(t,i){void 0===i&&(i=0);var n=this.getCurrentHearts(),e=n+t;e=h.a.clamp(e,i,this.getMaxHearts()),this.inPVP?this.pvpHP=Math.round(e):this.data.hp=Math.round(e),this.onHPChange.dispatch(this,e-n)},t.prototype.processStars=function(){this.starsToProcess>0?this.addStars(this.starsToProcess):this.game.broadcaster.broadcast(a.e.AnimationDone,this)},t.prototype.addStars=function(i,n,e){if(void 0===n&&(n=!1),void 0===e&&(e=!1),n)return!1;if(this.isOpponent)return!1;var s=Math.round(i),h=!1;this.starsToProcess=0;var o=this.getLevel();if(this.game.broadcaster.broadcast(a.e.StarsAdded,this,null),o>=100)return!1;if(c.b.isValid(this.data.stars)?this.data.stars+=s:this.data.stars=s,e||(this.starsEarned+=s),this.data.level=t.levelFromStars(this.data.stars),o!==this.data.level){var u=this.data.level-o;if(u>0){var f=r.a.instance.prodigy.gameContainer.get("447-4630").player;this.data===f.data&&this.data.ID===f.data.ID?r.a.instance.prodigy.gameContainer.get("adf-10da").create("level_up","progression").setCustom({isMemberStars:e,stars:i}).broadcast():c.b.isValid(l.a.getItem("pet",this.getID()))&&r.a.instance.prodigy.gameContainer.get("adf-10da").create("pet-level-up","progression",null,this.getName()).setCustom({pet_level:this.getLevel(),rarity:l.a.getItem("pet",this.getID()).data.rarity}).broadcast()}this.justLeveled=!0,h=!0,this.game.broadcaster.broadcast(a.e.LevelUp,this,[u])}return h},t.prototype.getStarsToLevel=function(){var i=this.getStars(),n=this.getLevel()>=100?this.getLevel():this.getLevel()+1,e=t.starsToLevel(n);return Math.max(0,e-i)},t.prototype.getPercentToLevel=function(){if(this.getLevel()>=100)return 1;var i=t.starsToLevel(this.getLevel()),n=t.starsToLevel(this.getLevel()+1);return(this.getStars()-i)/(n-i)},t.prototype.getStars=function(){var t;return c.b.isValid(this.data.stars)||(this.data.stars=0),c.b.validateInt(null===(t=this.data)||void 0===t?void 0:t.stars,0)},t.prototype.getStarRewardByDamage=function(t){var i=this.getMaxHearts(this.getLevel()),n=this.getCurrentHearts(),e=0,s=t;return s>=n?(s=n,(e=Math.floor(this.starsRewardBase*(s/i)))<this.starsReward&&(e=this.starsReward)):e=Math.floor(this.starsRewardBase*(s/i)),e<=0&&(e=1),this.starsReward-=e,e},t.prototype.getStarReward=function(){return 0},t.prototype.getLevel=function(){return Math.min(c.b.validateInt(this.data.level,u.a.MIN_LEVEL),u.a.MAX_LEVEL)},t.prototype.getLevelingCurve=function(t){return[]},t.prototype.getElement=function(){return o.a.Wizard},t.prototype.getDamageBonus=function(){return 0},t.prototype.getDrops=function(){return[]},t.prototype.getName=function(){return c.b.isValid(this.name)?this.name.getName():""},t.prototype.getNameWithoutNickname=function(){return c.b.isValid(this.name)?this.name.getNameWithoutNickname():""},t.prototype.getFirstName=function(){return c.b.isValid(this.name)?this.name.getFirstName():""},t.prototype.getCurrentBamSpells=function(){return this.getBamSpells(this.getLevel())},t.prototype.getSpellAssets=function(){return s.flatMap(this.getCurrentBamSpells(),(function(t){return l.a.getItem("spell",t.ID).metadata.assets}))},t.MAX_HEARTS=5e4,t.HP_BONUS={"A+":4,A:3,"A-":2,"B+":1,B:0,"B-":-1,"C+":-2,C:-3,"C-":-4},t}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return s}));var e=n(0),s=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(e.__extends)(i,t),i}(Phaser.Group)},function(t,i,n){"use strict";n.d(i,"a",(function(){return h}));var e=n(5),s=n(2),r=n(3),h=function(){function t(){}return t.isTrialEnabled=function(t){return!s.a.instance.prodigy.gameContainer.get("d3c-0d33").getValue("disableTrialMembership",!0)},t.isOutsideSchoolHours=function(i){if(!t.isTrialEnabled(i))return!1;var n=new Date(s.a.instance.prodigy.timeManager.getLocalTimeMs());return 0===n.getDay()||6===n.getDay()||!r.b.isDateWithinSchoolHours(n)},t.isEligible=function(i){return!i.hasMembership()&&(i.hasValidatedParentEmail()&&i.getPlayerData().hasOwnProperty("trialStartDate")||t.hasStartedTrial(i))},t.hasStartedTrial=function(i){return!!t.isTrialEnabled(s.a.instance.game)&&(r.b.isValid(i.getPlayerData().trialStartDate)&&i.getPlayerData().trialStartDate!==new Date(0).toISOString())},t.isExpired=function(i,n,h){var o=s.a.instance.prodigy.gameContainer.get("d3c-0d33").getValue("parentAttachTrial",null),u=e.get(o,"trialLengthDays",7);return h>r.b.addDays(t.getPlayerStartDate(n),u)},t.setTrialStartDate=function(t,i){t.getPlayerData().trialStartDate=i.toISOString(),t.updated=!0},t.getPlayerStartDate=function(i){var n=t.hasStartedTrial(i)?i.getPlayerData().trialStartDate:"0";return new Date(n)},t.getSplitTestEndDate=function(t){var i=s.a.instance.prodigy.gameContainer.get("d3c-0d33").getValue("parentAttachTrial",null);return r.b.isValid(i)?new Date(i.endDate):new Date(0)},t.removeReward=function(t){t.backpack.hasItem("mount",1)>0&&(t.backpack.consume("mount",1),t.equipment.setMount(null))},t.removeTrialData=function(t){delete t.getPlayerData().trialStartDate,t.updated=!0},t.disableTrial=function(i){t.removeReward(i),t.endedFlag=!0,t.removeTrialData(i)},t.playerCanSeeTrial=function(t,i){var n=s.a.instance.prodigy.gameContainer.get("d3c-0d33").getValue("parentAttachTrial",null);return!n||!n.exclusionLanes||!r.b.inTestGroups(i,n.exclusionLanes)},t.endedFlag=!1,t}()},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t.Win="win",t.Loss="loss",t.Draw="draw",t.Timeout="timeout",t.Run="run"}(e||(e={}))},function(t,i,n){"use strict";n.d(i,"a",(function(){return e})),n.d(i,"b",(function(){return V}));var e,s=n(0),r=n(1),h=n(5),o=n(2),u=n(6),a=n(70),c=n(10),l=n(81),f=n(329),b=n(25),v=n(121),d=n(7),O=n(28),m=n(323),p=function(t){function i(i,n,e,s,r){var h=t.call(this,i,n,e,s,r)||this;return h._currentElement=b.a.Shadow,h._aoeDamageDisplayContainers=[],h}return Object(s.__extends)(i,t),i.prototype.setup=function(){this.cacheBoss(),this._sprite=o.a.instance.prodigy.create.element(this.sprites,0,0),this._spine=this.game.add.spine(0,0,i.SPINE_TAGS[b.a.Shadow]),this.idle(),this._sprite.add(this._spine),this.complete=!0,this._onLoad.dispatch(),this._flashSpine=this.game.add.spine(0,0,"spine-295"),this.game.state.states.Battle.groupFarFront.addChild(this._flashSpine),this.setHitbox(d.a.getItem("boss",this.source.getID()).metadata.assets.default.hitbox);for(var t=0;t<3;++t)this._aoeDamageDisplayContainers[t]=new m.a(this.game,this);this._aoeDamageDisplayContainers[1].offset={x:V.HORIZONTAL_TEAM_OFFSET,y:-V.VERTICAL_TEAM_OFFSET},this._aoeDamageDisplayContainers[2].offset={x:V.HORIZONTAL_TEAM_OFFSET,y:V.VERTICAL_TEAM_OFFSET}},i.prototype.switchElement=function(t,n,e){return void 0===e&&(e=!0),Object(s.__awaiter)(this,void 0,void 0,(function(){var h,u,a;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return t===this._currentElement?[3,4]:(h=this.game.state.states.Battle,u=i.SPINE_TAGS[this._currentElement],this._currentElement=t,n?[4,this.fadeOut()]:[3,2]);case 1:s.sent(),s.label=2;case 2:return a=this._spine,e&&(this._sprite.remove(this._spine,!0),o.a.instance.prodigy.load.removeSpine(u)),[4,Promise.all([new Promise((function(n){o.a.instance.prodigy.load.assets(i.SPINE_TAGS[t],n)})),r.PromiseUtil.timeout(500)])];case 3:if(s.sent(),this._spine=this.game.add.spine(0,0,i.SPINE_TAGS[t]),this._sprite.add(this._spine),e||(this._sprite.remove(a,!0),o.a.instance.prodigy.load.removeSpine(u)),h.rightStatusUI.setElement(t),n)return[2,this.fadeIn()];s.label=4;case 4:return[2]}}))}))},i.prototype.idle=function(){this._spine.setAnimationByName(0,"idle",!0)},i.prototype.attack=function(){O.a.prototype.attack.call(this),this._spine.setAnimationByName(0,"attack",!1),this._spine.addAnimationByName(0,"idle",!0),this._spine.setToSetupPose()},i.prototype.fadeOut=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t=this;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return this._spine.setAnimationByName(0,"changeOut",!1),this._flashSpine.x=this.x+i.FLASH_OFFSET.x,this._flashSpine.y=this.y+i.FLASH_OFFSET.y,this._flashSpine.setAnimationByName(0,"changeOut",!1),this._flashSpine.visible=!0,[4,Promise.all([new Promise((function(i){t._spine.onComplete.addOnce(i)})),new Promise((function(i){t._flashSpine.onComplete.addOnce(i)}))])];case 1:return n.sent(),[2]}}))}))},i.prototype.fadeIn=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t=this;return Object(s.__generator)(this,(function(i){return this._spine.setAnimationByName(0,"changeIn",!1),this._spine.addAnimationByName(0,"idle",!0),this._spine.setToSetupPose(),this._flashSpine.setAnimationByName(0,"changeIn",!1),this._flashSpine.onComplete.addOnce((function(){t._flashSpine.visible=!1})),[2,new Promise((function(i){t._spine.onComplete.addOnce(i)}))]}))}))},i.prototype.die=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t=this;return Object(s.__generator)(this,(function(i){return this._spine.setAnimationByName(0,"death",!1),[2,new Promise((function(i){t._spine.onComplete.addOnce(i)}))]}))}))},i.prototype.resurrect=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,e,h=this;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return[4,new Promise((function(t){o.a.instance.prodigy.load.assets(i.SPINE_TAGS[b.a.Shadow],t)}))];case 1:s.sent(),t=function(){v.a.radialCloud(h.game,h,i.SAND_CLOUD_OFFSET.x,i.SAND_CLOUD_OFFSET.y,i.SAND_CLOUD_RADIUS,"atlas-205","purple-cloud"),v.a.radialCloud(h.game,h,i.SAND_CLOUD_OFFSET.x,i.SAND_CLOUD_OFFSET.y,i.SAND_CLOUD_RADIUS,"atlas-205","purple-cloud")},n=!1,e=i.SAND_CLOUD_COUNT,s.label=2;case 2:return e>0||!n?(t(),e===i.SAND_CLOUD_COUNT-i.SAND_CLOUD_BOSS_SPAWN&&this.switchElement(b.a.Shadow,!1,!1).then((function(){n=!0})),[4,r.PromiseUtil.timeout(i.SAND_CLOUD_INTERVAL)]):[3,5];case 3:s.sent(),s.label=4;case 4:return--e,[3,2];case 5:return this._spine.setAnimationByName(0,"reveal",!1),[2,new Promise((function(t){h._spine.onComplete.addOnce((function(){h._spine.setAnimationByName(0,"idle",!0),t()}))}))]}}))}))},i.prototype.showAoeDamage=function(t,i){for(var n=t.damage,e=Math.floor(n/3),s=n-2*e,r=0;r<3;++r)this._aoeDamageDisplayContainers[r].showDamage(h.merge({},t,{damage:2!==r?e:s}),!1,0===r?i:void 0)},i.SAND_CLOUD_RADIUS=900,i.SAND_CLOUD_COUNT=40,i.SAND_CLOUD_BOSS_SPAWN=30,i.SAND_CLOUD_OFFSET={x:50,y:-100},i.SAND_CLOUD_INTERVAL=50,i.FLASH_OFFSET={x:0,y:-150},i.SPINE_TAGS={shadow:"default-boss-18",fire:"spine-285",water:"spine-286",plant:"spine-287",ice:"spine-288",storm:"spine-289"},i}(l.a),g=n(330),y=function(t){function i(i,n,e,s,r){return t.call(this,i,n,e,s,r)||this}return Object(s.__extends)(i,t),i.prototype.setup=function(){this.cacheBoss();var t=o.a.instance.prodigy.create.element(this.sprites,0,0);this._spine=this.game.add.spine(0,0,"default-boss-20"),this.idle(),t.add(this._spine),this.complete=!0,this._onLoad.dispatch(),this.setHitbox(d.a.getItem("boss",this.source.getID()).metadata.assets.default.hitbox)},i.prototype.idle=function(){this._spine.setAnimationByName(0,"idle",!0),this._spine.setToSetupPose()},i.prototype.attack=function(){O.a.prototype.attack.call(this),this._spine.setAnimationByName(0,"attack",!1),this._spine.addAnimationByName(0,"idle",!0),this._spine.setToSetupPose()},i}(l.a),j=function(t){function i(i,n,e,s,r){return t.call(this,i,n,e,s,r)||this}return Object(s.__extends)(i,t),i.prototype.setup=function(){this.cacheBoss();var t=o.a.instance.prodigy.create.element(this.sprites,0,0);this.spine=this.game.add.spine(0,0,"default-boss-15"),this.idle(),t.add(this.spine),this.showName("Old One"),this.nameText.GameObject.legacyTransform.y=-430,this.nameText.GameObject.legacyTransform.x-=10,this.visible=!0},i.prototype.idle=function(){this.spine.setAnimationByName(0,"idle",!0),this.spine.setToSetupPose()},i.prototype.attack=function(){O.a.prototype.attack.call(this),this.spine.setAnimationByName(0,"attack",!1),this.spine.addAnimationByName(0,"idle",!0),this.spine.setToSetupPose()},i}(l.a),_=function(t){function i(i,n,e,s,r){return t.call(this,i,n,e,s,r)||this}return Object(s.__extends)(i,t),i.prototype.startLoad=function(){this.outOfDate=!1,this.loading=!0,o.a.instance.prodigy.load.assets(["spine-15"],this.setup.bind(this))},i.prototype.setup=function(){this.cacheBoss();var t=o.a.instance.prodigy.create.element(this.sprites,0,0);this.spine=this.game.add.spine(0,0,"spine-15"),this.visible=!0,this.idle(),t.add(this.spine),this.complete=!0,this.loading=!1},i.prototype.idle=function(){this.spine.setAnimationByName(0,"idle",!0),this.spine.setToSetupPose()},i.prototype.attack=function(){O.a.prototype.attack.call(this),this.spine.setAnimationByName(0,"attack",!1),this.spine.addAnimationByName(0,"idle",!0),this.spine.setToSetupPose()},i}(l.a),w=n(215),E=n(240),I=n(91),A=n(257),T=n(8),D=n(56),S=n(371),C=n(279),N=n(352),x=n(353),R=n(372),M=n(373),L=n(354),P=n(374),k=n(355),B=n(356),U=n(357),G=n(181),F=n(254),H=n(189),K=n(53),z=n(35),W=n(314),Y=n(3);!function(t){t[t.Middle=0]="Middle",t[t.Back=1]="Back",t[t.Front=2]="Front"}(e||(e={}));var V=function(){function t(i,n,e,s,o,u,a,l){var f=this;this.team=[],this.enableComboAnimations=!0,this.bossTeam=!1,this.offScreenX=0,this.offScreenY=0,this.onScreenX=0,this.onScreenY=0,this.y=0,this.currentEnergy=0,this.maxEnergy=10,this.playerEnergySource=null,this.onEnergyChangeStart=new r.SignalLegacy,this.onCurrentMemberSwitch=new r.SignalLegacy,this.onCurrentMemberHPChange=new r.SignalLegacy,this.onMoveCreatureOut=new r.SignalLegacy,this.onMoveCreatureIn=new r.SignalLegacy,this.onCreatureRanAway=new r.SignalLegacy,this._creatureContainerPosition=[],this.game=i,this.presortTeam(e),this.playerControlled=s,this.offScreenX=o,this.offScreenY=u,this.onScreenX=a,this.onScreenY=l;for(var b=0;b<e.length&&!(b>=t.MAX_TEAM_COUNT);b++)this.team.push(this.makeContainer(b,e[b],this.offScreenX));this.playerEnergySource=t.findFirstPlayer(this.team),this.registerSignals(),this.playerControlled&&h.forEach(this.team,(function(t){t instanceof I.a&&t.cacheAssets()})),c.b.get("GameConstants.Battle.SHOW_HITBOXES")&&this.team.forEach((function(t,i){t.loading?t.OnLoad.addOnce((function(){f.drawBounds(i)})):f.drawBounds(i)}))}return t.prototype.makeContainer=function(i,n,e){var s,r,u,a=this;if(1===i?(r=this.offScreenY-t.VERTICAL_TEAM_OFFSET,s=this.game.state.getCurrentState().groupBack):2===i?(r=this.offScreenY+t.VERTICAL_TEAM_OFFSET,s=this.game.state.getCurrentState().groupFront):(r=this.offScreenY,s=this.game.state.getCurrentState().groupMiddle),n instanceof z.a){var c=o.a.instance.prodigy.create.player(s,n,1,e,r);c.forceWeaponVisual=!0,c.loadedCallback=function(){c.hideName(),c.createHealthBar().getOverlay().scale.x=a.playerControlled?1:-1},u=c}else if(n instanceof H.a){var l=o.a.instance.prodigy.create.character(s,n,1,e,r);l.forceWeaponVisual=!0,l.loadedCallback=function(){l.hideName(),l.createHealthBar().getOverlay().scale.x=a.playerControlled?1:-1},u=l}else if(n instanceof K.a){var b=o.a.instance.prodigy.create.monster(s,n,2,e,r,!1);if(!this.playerControlled)o.a.instance.prodigy.gameContainer.get("447-4630").player.encounters.addToPetTimesBattled(n.data.ID);b.loadedCallback=function(t){h.includes([130,131,132,133],t.source.data.ID)&&(t.battleScale=1),t.sprites.scale.x=t.battleScale,t.sprites.scale.y=t.battleScale,t.width=Math.round(t.width),t.height=Math.round(t.height),t.hideName(),t.createHealthBar().getOverlay().scale.x=a.playerControlled?1:-1,a.playerControlled||t.getSource().assignRandomSpells()},u=b}else if(n instanceof x.a)u=o.a.instance.prodigy.create.cloudBoss(s,n,e,r,n.source.element),this.bossTeam=!0;else if(n instanceof N.a){var v=o.a.instance.prodigy.create.bonfireBoss(s,n,e,r);this.bossTeam=!0,v.scale.x=.75,v.scale.y=.75,u=v}else if(n instanceof B.a){var d=new j(this.game,s,n,e-400,r);d.flip(),this.bossTeam=!0,u=d}else if(n instanceof U.a){var O=new _(this.game,s,n,e-400,r);O.scale.x=.5,O.scale.y=.5,this.bossTeam=!0,u=O}else if(n instanceof L.a)u=o.a.instance.prodigy.create.forestBoss(s,n,e,r),this.bossTeam=!0;else if(n instanceof F.a){var m=new w.a(this.game,s,n,e,r);m.flip(),this.bossTeam=!0,u=m}else if(n instanceof k.a)u=o.a.instance.prodigy.create.shiverchillBoss(s,n,e-350,r),this.bossTeam=!0;else if(n instanceof S.a){u=g=o.a.instance.prodigy.create.aspenFrostBoss(s,n,e,r),n.setBossContainer(g),this.bossTeam=!0}else if(n instanceof C.a)u=new f.a(this.game,s,n,e,r);else if(n instanceof P.a){(g=new y(this.game,s,n,e,r)).flip(),u=g,n.setBossContainer(g),this.bossTeam=!0}else if(n instanceof M.a){(g=new E.a(this.game,s,n.bossCharacter,1,e,r,!1,!0,!1,!1)).createHealthBar().getOverlay().scale.x=-1,u=g,n.setBossContainer(g)}else if(n instanceof G.b)u=o.a.instance.prodigy.create.shadowWyrmBoss(s,n,e-350,r),n.setBossContainer(u),this.bossTeam=!0;else if(n instanceof R.a){var g;(g=new p(this.game,s,n,e,r)).flip(),u=g,n.setBossContainer(g),n.setTeam(this),this.bossTeam=!0}else if(n instanceof D.a){v=o.a.instance.prodigy.create.boss(s,n,e,r);this.bossTeam=!0,Y.b.isValid(n.source.spriteOffsetY)&&(v.sprites.y+=n.source.spriteOffsetY),Y.b.isValid(n.source.spriteOffsetX)&&(v.sprites.x+=n.source.spriteOffsetX),Y.b.isValid(n.source.battleScale)&&(v.sprites.scale.x=n.source.battleScale,v.sprites.scale.y=n.source.battleScale),u=v}return u.startLoad(),u.flip(),u.pairs=[],u.visible=!1,u.getSource().isOpponent=!this.playerControlled,u.getSource().starsEarned=0,this.bossTeam&&u.createHealthBar(),u},t.findFirstPlayer=function(t){var i=t.find((function(t){return t instanceof A.a}));return Y.b.isValid(i)?i.source:null},t.prototype.getCurrentEnergy=function(){return this.currentEnergy},t.prototype.getMaxEnergy=function(){return this.maxEnergy},t.prototype.changeEnergy=function(t){this.currentEnergy=Math.min(this.currentEnergy+t,this.maxEnergy),this.currentEnergy<0&&(r.Logger.log("Energy at "+this.currentEnergy+" below 0. Clamping.",r.LogLevel.Error),this.currentEnergy=0),this.playerControlled&&t<0&&(o.a.instance.prodigy.battle.battleStats.energyCost-=t),this.onEnergyChangeStart.dispatch(this.currentEnergy),this.updatePlayerEnergy()},t.prototype.setEnergy=function(t){this.currentEnergy=Math.min(t,this.maxEnergy),this.onEnergyChangeStart.dispatch(this.currentEnergy),this.updatePlayerEnergy()},t.prototype.updatePlayerEnergy=function(){Y.b.isValid(this.playerEnergySource)&&this.playerEnergySource.setEnergy(this.getCurrentEnergy())},t.prototype.registerSignals=function(){for(var t=0;t<this.team.length;t++){this.team[t].getSource().onHPChange.add(this.onTeamMemberHPChange,this)}},t.prototype.unregisterCreatureSignals=function(t){t.onHPChange.remove(this.onTeamMemberHPChange,this)},t.prototype.unregisterAllSignals=function(){for(var t=0;t<this.team.length;t++)this.unregisterCreatureSignals(this.team[t].getSource());this.onEnergyChangeStart.dispose(),this.onCurrentMemberSwitch.dispose(),this.onCurrentMemberHPChange.dispose(),this.onMoveCreatureOut.dispose(),this.onMoveCreatureIn.dispose()},t.prototype.onTeamMemberHPChange=function(t,i){t===this.getCurrent().source&&this.onCurrentMemberHPChange.dispatch(t,i)},t.prototype.getTeamSize=function(){return Math.min(t.MAX_TEAM_COUNT,this.team.length)},t.prototype.isIdInBattle=function(t){for(var i=0;i<this.getTeamSize();i++)if(this.team[i]instanceof I.a&&this.team[i].source.data.ID===t&&!this.team[i].getSource().isKnockedOut())return!0;return!1},t.prototype.getContainerOfTeamId=function(t){for(var i=0;i<this.getTeamSize();i++)if(this.team[i]instanceof I.a&&this.team[i].source.data.ID===t&&!this.team[i].getSource().isKnockedOut())return this.team[i];return null},t.prototype.moveTeamIn=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){var i,n,h,o;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:n=this.getTeamSize()-1,s.label=1;case 1:if(!(n>=0))return[3,5];s.label=2;case 2:return this.team[n].complete?[3,4]:[4,r.PromiseUtil.timeout(10)];case 3:return s.sent(),[3,2];case 4:return--n,[3,1];case 5:for(i=this.onRightSide()?t.HORIZONTAL_TEAM_OFFSET:-t.HORIZONTAL_TEAM_OFFSET,n=0;n<this.getTeamSize()&&!(n>=t.MAX_TEAM_COUNT);n++)this.team[n].getSource().isKnockedOut()||((h=this.team[n]).visible=!0,o=this.onScreenX+(n===e.Middle?0:i),h.walkIntoBattle?h.speed=10:h.x=o,this.team[n].setPath([{x:o,y:h.y}]));return this.enableComboAnimations&&(this.game.broadcaster.broadcast(T.b.PvpComboMeterMoveIn,this,[]),this.enableComboAnimations=!1),this.onCurrentMemberSwitch.dispatch(this.getCurrent().source),[2]}}))}))},t.prototype.onRightSide=function(){return this.offScreenX>=1280},t.prototype.movePlayerIn=function(t,i){Y.b.isValid(i)&&(i.complete?(this.team[0]=i,this.getCurrent().visible=!0,this.getCurrent().speed=10,this.onCurrentMemberSwitch.dispatch(this.getCurrent().source),this.enableComboAnimations&&(this.game.broadcaster.broadcast(T.b.PvpComboMeterMoveIn,this,[]),this.enableComboAnimations=!1),this.getCurrent().walkIntoBattle?(this.getCurrent().speed=10,this.getCurrent().setPath([{x:this.onScreenX,y:this.getCurrent().y}],t)):(this.getCurrent().x=this.onScreenX,this.getCurrent().y=this.onScreenY,this.getCurrent().setPath([{x:this.onScreenX,y:this.getCurrent().y}],t)),this.onMoveCreatureIn.dispatch()):this.game.time.events.add(10,this.movePlayerIn.bind(this,t,i)))},t.prototype.movePlayerOut=function(t,i){i.speed=30,i.setPath([{x:this.offScreenX+(this.offScreenX<0?-40:40),y:i.y}],t,4),i===this.getCurrent()&&this.onMoveCreatureOut.dispatch()},t.prototype.swapPlayerIn=function(t,i){var n=this.team[t];this.jumpAnimation(n,this.onScreenX,this.onScreenY,i),this.swapCurrent(t),this.onCurrentMemberSwitch.dispatch(this.getCurrent().source)},t.prototype.swapPlayerOut=function(t,i){this.jumpAnimation(this.getCurrent(),t,i)},t.prototype.swapCurrent=function(t){var i=this.getCurrent();this.team[0]=this.team[t],this.team[t]=i},t.prototype.jumpAnimation=function(t,i,n,e){var s=Math.min(t.y,n)-75;this.game.add.tween(t).to({x:i},500,u.a.Linear.None,!0);var r=this.game.add.tween(t).to({y:n},250,u.a.Quadratic.In,!1);r.onComplete.add((function(){t.parent.sort("y",a.a.SORT_ASCENDING)})),Y.b.isValid(e)&&r.onComplete.add(e),this.game.add.tween(t).to({y:s},250,u.a.Quadratic.Out,!0).chain(r)},t.prototype.fakeSwap=function(t,i,n){this.jumpAnimation(t,i.x,i.y),this.jumpAnimation(i,t.x,t.y,n)},t.prototype.swapPlayersHop=function(t,i){var n=this.team[i];if(this.getCurrent()&&!this.getCurrent().isDefeated()){var e=n.parent;this.getCurrent().parent.add(n),e.add(this.getCurrent()),this.swapPlayerOut(n.x,n.y),this.swapPlayerIn(i,t)}else this.game.state.getCurrentState().groupMiddle&&this.game.state.getCurrentState().groupMiddle.add(n),this.swapPlayerIn(i,t);if(this.playerControlled){var s=this.team[i];o.a.instance.prodigy.gameContainer.get("adf-10da").create("battle-switch","progression","battle",s.getSource().getName()).setCustom({level:s.getSource().getLevel(),health:s.getSource().getStatHealth()}).broadcast()}this.onCurrentMemberSwitch.dispatch(this.getCurrent().source)},t.prototype.failRun=function(i){var n=this,e=function(i,e){for(var s=0;s<n.getTeamSize()&&!(s>=t.MAX_TEAM_COUNT);s++){var r=n.team[s];r.speed=10,0===s?r.setPath([{x:r.x+200,y:null}],e):r.setPath([{x:r.x+200,y:null}])}};o.a.instance.prodigy.audio.playSFX(8,"run"),this.getCurrent().speed=40;for(var s=0;s<this.getTeamSize()&&!(s>=t.MAX_TEAM_COUNT);s++)0===s?this.team[s].setPath([{x:this.team[s].x-200,y:null}],e.bind(this,this.team[s],i),4):this.team[s].setPath([{x:this.team[s].x-200,y:null}],e.bind(this,this.team[s],void 0),4)},t.prototype.runAway=function(t,i){if(void 0===t&&(t=this.getCurrent()),!t.captured){t.ran=!0;var n=function(){i&&i()};if(this.onCreatureRanAway.dispatch(t.source),t.shouldPlayRetreatOnDefeat())t.retreat(n);else if(this.bossTeam){var e=this.game.add.tween(t).to({alpha:0},500,u.a.Linear.None);e.onComplete.add(n),e.start()}else o.a.instance.prodigy.audio.playSFX(8,"run"),t.speed=40,t.flip(),t.moonwalk(),this.game.time.events.add(500,this.movePlayerOut.bind(this,n,t),this)}},t.prototype.rescue=function(i){var n=this;this.getCurrent().captured=!0,this.getCurrent().doPuppetBreakAnimation((function(){n.game.state.states.Battle.groupFront.add(n.getCurrent()),o.a.instance.prodigy.audio.playSFX(8,"run"),n.getCurrent().speed=40,n.getCurrent().moonwalk(),n.game.add.tween(n.getCurrent()).to({x:n.getCurrent().x+20},1500,u.a.Linear.None,!0).onComplete.add((function(){n.getCurrent().speed=30,n.getCurrent().setPath([{x:-100,y:n.onScreenY+t.VERTICAL_TEAM_OFFSET+n.getCurrent().height/4},{x:380,y:n.onScreenY+t.VERTICAL_TEAM_OFFSET+n.getCurrent().height/4}],i,4)}),n)}))},t.prototype.runAwayTeam=function(i){if(!Y.b.isValid(this.getCurrent().captured))if(this.bossTeam)this.game.add.tween(this.getCurrent()).to({alpha:0},500,u.a.Linear.None).start();else{o.a.instance.prodigy.audio.playSFX(8,"run");for(var n=0;n<this.getTeamSize()&&!(n>=t.MAX_TEAM_COUNT);n++)this.team[n].speed=40,this.team[n].flip(),this.team[n].moonwalk(),this.team[n].ran=!0,this.game.time.events.add(500,this.movePlayerOut.bind(this,null,this.team[n]),this);Y.b.isValid(i)&&this.game.time.events.add(500,i,this)}},t.prototype.runAwayDefeated=function(t){for(var i=this.getUnRun(),n=!1,e=0;e<i.length;e++)this.runAway(i[e],n?null:t),n||(n=!0)},t.prototype.pairOpponent=function(t){Y.b.inArray(this.getCurrent().pairs,t)||this.getCurrent().pairs.push(t)},t.prototype.getNextId=function(){for(var t,i=0;i<this.getTeamSize();i++)if((t=this.team[i])&&!t.isDefeated())return i;return 0},t.prototype.chooseNextCandidate=function(t){for(var i=null,n=null,e=0;e<this.getTeamSize();e++){var s=this.team[e];if(Y.b.isValid(s)&&!s.isDefeated()){var r=o.a.instance.prodigy.battle.battleScore(s,t,!0,1);(!Y.b.isValid(n)||r>n)&&(i=e,n=r)}}return i},t.prototype.getDrops=function(){for(var t=this,i=[],n=0;n<this.getTeamSize();n++)this.team[n].getSource().isKnockedOut()&&!this.team[n].captured&&(i=i.concat(this.team[n].getSource().getDrops()));var e=o.a.instance.prodigy.skin.getActiveFestivals();for(n=0;n<e.length;++n){var r=e[n].getBattleDrops();i.unshift.apply(i,Object(s.__spread)(r.map((function(i){return Object(s.__assign)(Object(s.__assign)({},i),{N:i.N*t.team.length})}))))}return i},t.prototype.isDefeated=function(){for(var t=this.getTeamSize(),i=0;i<t;i++)if(!this.team[i].isDefeated())return!1;return!0},t.prototype.getDefeated=function(){for(var t=[],i=0;i<this.getTeamSize();i++)this.team[i].getSource().isKnockedOut()&&!this.team[i].captured&&t.push(this.team[i].source);return t},t.prototype.getUnRun=function(){return h.filter(this.team,(function(t){return t.getSource().isKnockedOut()&&!t.captured&&!t.ran}))},t.prototype.getCurrent=function(){var t;return null!==(t=this.getContainerAtOverriddenPosition(e.Middle))&&void 0!==t?t:this.team[0]},t.prototype.getCurrentSource=function(){return this.getCurrent().source},t.prototype.getCreatures=function(t){var i,n;void 0===t&&(t=!1);var e=[];try{for(var r=Object(s.__values)(this.team),h=r.next();!h.done;h=r.next()){var o=h.value;o.captured&&!t||e.push(o.source)}}catch(u){i={error:u}}finally{try{h&&!h.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return e},t.prototype.getLiving=function(){for(var t=[],i=this.getTeamSize(),n=0;n<i;n++)this.team[n].isDefeated()||t.push(this.team[n].getSource());return t},t.prototype.isBoss=function(t){if(Y.b.isValid(t))return t instanceof l.a||t instanceof g.a;for(var i=0;i<this.getTeamSize();i++)if(this.isBoss(this.team[i]))return!0;return!1},t.prototype.showHearts=function(){for(var t=0;t<this.getTeamSize();t++)if(this.isBoss(this.team[t])&&!this.team[t].getSource().source.showHP)return!1;return!0},t.prototype.presortTeam=function(t){if(t[0]&&t[0].isKnockedOut()){var i=t[1]&&!t[1].isKnockedOut()?1:2,n=t[0];t[0]=t[i],t[i]=n}},t.prototype.replaceCreature=function(i,n){var e;this.team[i]?(e=this.team[i].x,this.unregisterCreatureSignals(this.team[i].getSource()),this.team[i].destroy()):e=this.onScreenX+(0===i?0:t.VERTICAL_TEAM_OFFSET);var s=this.makeContainer(i,n,e);window.setTimeout((function(){s.sprites.scale.x=-Math.abs(s.sprites.scale.x)}),2e3),s.visible=!0,this.team[i]=s},t.prototype.drawBounds=function(t){var i=16711680;t===e.Back?i=65280:t===e.Front&&(i=255);var n=this.team[t],s=new PIXILegacy.Rectangle(n.getHitboxLeft(),n.getHitboxTop(),n.getHitboxWidth(),n.getHitboxHeight());W.a.drawBounds(this.game,n.sprites,s,i)},t.prototype.destroy=function(){this.unregisterAllSignals(),this.game=null,this.playerEnergySource=null,h.forEach(this.team,(function(t){t.destroy()})),this.team=[]},t.prototype.getTeamPositionForContainer=function(t){var i=this.getOverriddenPositionForContainer(t);return i?i.position:this.team.indexOf(t)},t.prototype.overrideTeamPositionForContainer=function(t,i){var n=this.getOverriddenPositionForContainer(t);n?n.position=i:this._creatureContainerPosition.push({container:t,position:i})},t.prototype.getContainerAtOverriddenPosition=function(t){var i;return null===(i=this._creatureContainerPosition.find((function(i){return i.position===t})))||void 0===i?void 0:i.container},t.prototype.resetContainerOverriddenPosition=function(t){var i=this._creatureContainerPosition.findIndex((function(i){return i.container===t}));i>-1&&this._creatureContainerPosition.splice(i,1)},t.prototype.resetOverriddenPositions=function(){this._creatureContainerPosition=[]},t.prototype.getOverriddenPositionForContainer=function(t){return this._creatureContainerPosition.find((function(i){return i.container===t}))},t.MAX_TEAM_COUNT=3,t.HORIZONTAL_TEAM_OFFSET=130,t.VERTICAL_TEAM_OFFSET=110,t}()},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t[t.Local=0]="Local",t[t.QABox=1]="QABox",t[t.Dev=2]="Dev",t[t.Staging=3]="Staging",t[t.Production=4]="Production"}(e||(e={}))},function(t,i,n){"use strict";n.d(i,"a",(function(){return c}));var e=n(1),s=n(5),r=n(2),h=n(242),o=n(33),u=n(93),a=n(3),c=function(){function t(t){this.states=[],this.maps={},this.quests={},this.scenes={},this.monsters={},this.bgmID=3,this.debugBounties=!1,this.battleBG="",this.game=t}return Object.defineProperty(t.prototype,"Guardian",{get:function(){return this.guardian},enumerable:!0,configurable:!0}),t.prototype.getMap=function(t){return this.maps[t]},t.prototype.getScene=function(t){return this.scenes[t]},t.prototype.getDailyQuestDescription=function(t){return{}},t.prototype.teleport=function(t,i,n,e,s){var h=this.getMap(t);if(a.b.isValid(h)){this._teleportData={mapKey:t,map:h,x:i,y:n,data:e,ld:s};var o=this.ID+"-"+this._teleportData.mapKey;r.a.instance.prodigy.gameContainer.get("447-4630").player.setZone(o),r.a.instance.prodigy.world.setCurrentMap(o),this.game.state.states.TileScreen.initMap(this._teleportData.map,this,this._teleportData.x,this._teleportData.y),this.createLoadingData(),r.a.instance.prodigy.start("TileScreen",this.loadingData,this._teleportData.data)}},t.prototype.createLoadingData=function(){this.loadingData=this._teleportData.ld||{},this.loadingData.assets=this.loadingData.assets||[],this.loadingData.assets=this.loadingData.assets.concat(["map-pathing"]).concat(this._teleportData.map.assets),this.loadingData.assets=this.loadingData.assets.concat(r.a.instance.prodigy.skin.getAssets(this._teleportData.map.zoneName));var t=this.getCurrentQuest();a.b.isValid(t)&&(this.loadingData.assets=this.loadingData.assets.concat(t.assets)),this.cacheZoneAssets(this.loadingData.assets),this.loadingData.title=a.b.isValid(this.loadingData.title)?this.loadingData.title:this._teleportData.map.getName(),this.loadingData.x=this._teleportData.x,this.loadingData.y=this._teleportData.y},t.prototype.teleportLoad=function(){var t=this,i=this.game.state.getCurrentState(),n=this.game.state.states.Loading;i.fadeOut?i.fadeOut(!0,(function(){n.startLoading(t.loadingData)})):n.startLoading(this.loadingData)},t.prototype.playScene=function(t){var i=this.getScene(t);a.b.isValid(i)?this.initScene(i):e.Logger.log("Scene: "+t+" was not found in Zone: "+this.ID,e.LogLevel.Warning)},t.prototype.initScene=function(t,i){void 0===i&&(i={}),this.game.state.states.TileScreen.initScene(t,this);var n=t.loadingData;n.assets=[],n.assets=n.assets.concat(["map-pathing"]).concat(t.assets),n.title=t.name,n=s.merge(n,i),this.cacheZoneAssets(n.assets),r.a.instance.prodigy.gameContainer.get("447-4630").player.playerContainer.unmount(),r.a.instance.prodigy.start("TileScreen",n)},t.prototype.init=function(t,i,n){},t.prototype.handleLeaving=function(t){return!1},t.prototype.setup=function(t,i,n){var e=this.getCurrentQuest();return n.questParams={},a.b.isValid(e)&&!n.isScene?e.setup(t,i,n):null},t.prototype.start=function(t,i,n){var e=this.getCurrentQuest();a.b.isValid(e)&&e.start(t,i,n)},t.prototype.update=function(t,i,n){var e=this.getCurrentQuest();a.b.isValid(e)&&e.update(t,i,n)},t.prototype.cleanup=function(){r.a.instance.prodigy.load.removeAssets(),this.game.time.events.removeAll(),this.loadingData=null},t.prototype.process=function(t,i,n){a.b.isValid(this.monsters)&&(a.b.isValid(this.getState("daily"))?a.b.getDate()!==this.getState("daily").date&&this.setState("daily",{date:a.b.getDate(),flags:[1,1,1,1,1],rewards:this.getState("daily").rewards}):this.setState("daily",{date:a.b.getDate(),flags:[1,1,1,1,1],rewards:0}));var e=this.getCurrentQuest();a.b.isValid(e)&&e.process(t,i,n)},t.prototype.getQuest=function(t){return this.quests[t]},t.prototype.getCurrentQuest=function(){var t=this.getQuestState();return a.b.isValid(t)?this.getQuest(t.ID):null},t.prototype.getState=function(t){var i=-1,n=r.a.instance.prodigy.gameContainer.get("447-4630").player;if("quest"!==t)for(var e=0;e<this.states.length;e++)this.states[e]===t&&(i=e);else i=t;return-1===i?null:n.state.get("zone-"+this.ID+"-"+i)},t.prototype.setState=function(t,i){var n=-1;if("quest"!==t)for(var e=0;e<this.states.length;e++)this.states[e]===t&&(n=e);else n=t;if(-1===n)return null;r.a.instance.prodigy.gameContainer.get("447-4630").player.state.set("zone-"+this.ID+"-"+n,i)},t.prototype.getQuestState=function(){return this.getState("quest")},t.prototype.getRemainingQuestAreas=function(t){var i=this.getQuestState(),n=this.getQuest(t);if(a.b.isValid(i)&&a.b.isValid(n)){if(a.b.isValid(n.getRemainingQuestAreas))return n.getRemainingQuestAreas();if(a.b.isValid(n.collectionMaps)){var e=[];for(var s in n.collectionMaps){n.collectionMaps[s].filter((function(t){return!a.b.isValid(i.state[t])||1!==i.state[t]})).length>0&&e.push(this.ID+"-"+s)}return e}return n.area}},t.prototype.startQuest=function(t){var i=this.getQuestState();if(a.b.isValid(i)||(i={ID:1}),i.ID!==t)return null;var n=this.getQuest(i.ID);return i.req=a.b.copyObject(n.req),i.state=a.b.copyObject(n.state)||{},i.seq=0,r.a.instance.prodigy.gameContainer.get("447-4630").player.state.set("zone-"+this.ID+"-quest",i),n},t.prototype.isQuestStarted=function(t){var i=this.getQuestState();return!(!a.b.isValid(i)||!a.b.isValid(i.req)||i.ID!==t)},t.prototype.isQuestComplete=function(t){if(!this.isQuestStarted(t))return!1;var i=this.getQuestState(),n=this.getQuest(t),e=r.a.instance.prodigy.gameContainer.get("447-4630").player;return this.getQuestState().ID===t&&(!("pet"===i.req.type&&i.req.N>0)&&(!("clear"===i.req.type&&i.req.N>0)&&(!(a.b.inArray(["item","weapon","hat","outfit","boots","key"],i.req.type)&&e.backpack.hasItem(i.req.type,i.req.ID)<i.req.N)&&(("state"!==i.req.type||e.state.get(i.req.state)===i.req.target)&&(("zone"!==i.req.type||e.data.zone===n.area[0])&&(("zstate"!==i.req.type||i.req.N===this.getState(i.req.ID))&&(!("zgteState"===i.req.type&&this.getState(i.req.ID)<i.req.N)&&!("seq"===i.req.type&&i.req.N!==i.seq))))))))},t.prototype.completeQuest=function(t){if(!this.isQuestStarted(t))return!1;var i=this.getQuestState();if(i.ID!==t)return!1;var n=r.a.instance.prodigy.gameContainer.get("447-4630").player;return"item"!==i.req.type||i.req.K||n.backpack.consume(i.req.type,i.req.ID,i.req.N),n.state.set("zone-"+this.ID+"-quest",{ID:i.ID+1}),r.a.instance.prodigy.gameContainer.get("474-551d").create("quest",a.b.validateString([this.name,this.ID]),t).broadcast(),!0},t.prototype.isQuestProcessed=function(t){return this.isQuestStarted(t)&&this.isQuestComplete(t)&&this.getQuestState().proc},t.prototype.processQuest=function(t){this.isQuestStarted(t)&&this.isQuestComplete(t)&&r.a.instance.prodigy.gameContainer.get("447-4630").player.state.set("zone-"+this.ID+"-quest-proc",1)},t.prototype.isOnQuest=function(t){var i=this.getQuestState();return a.b.isValid(i)&&i.ID===t},t.prototype.getCurrentQuestID=function(){var t=this.getQuestState();return a.b.isValid(t)?t.ID:0},t.prototype.defeatMonster=function(t,i,n,e){var s=this.getQuestState();if(a.b.isValid(s)&&a.b.isValid(s.req)){var h=a.b.isValid(s.req.U)&&s.req.U,o=r.a.instance.prodigy.gameContainer.get("447-4630").player;("pet"===s.req.type&&s.req.ID===t&&h===n||"clear"===s.req.type&&h===n)&&(s.req.N--,n&&(s.state[i]=1),o.state.updated=!0)}},t.prototype.isOnSequence=function(t,i){var n=this.getQuestState();return!(!a.b.isValid(n)||n.ID!==t||!a.b.isValid(n.req)||n.seq!==i)},t.prototype.isSequenceComplete=function(t,i){var n=this.getQuestState();return a.b.isValid(n)&&n.ID===t&&n.seq>i},t.prototype.completeSequence=function(t,i){var n=this.getQuestState();a.b.isValid(n)&&n.ID===t&&a.b.isValid(n.req)&&n.seq===i&&(n.seq++,r.a.instance.prodigy.gameContainer.get("447-4630").player.state.updated=!0)},t.prototype.getDailyMaps=function(){var t=[];for(var i in this.maps)t.push(i);return t},t.prototype.hasDaily=function(t){if(a.b.isValid(this.getState("daily"))){var i=new u.a(this.getState("daily").date),n=this.getDailyMaps();if(a.b.isValid(n))for(var e=0;e<5;e++)if(n[Math.floor(i.jumpFromStart(e)*(n.length-1))]===t.tag&&0!==this.getState("daily").flags[e])return!0}return!1},t.prototype.testQuest=function(t,i,n){r.a.instance.prodigy.gameContainer.get("447-4630").player.state.data.zone[this.ID]={};for(var e=1;e<t;e++)this.startQuest(e),this.completeQuest(e);i&&this.startQuest(t);for(e=0;e<n;e++)this.completeSequence(t,e)},t.prototype.placeDaily=function(t,i,n){},t.prototype.hasDailyQuestExpired=function(){return!a.b.isValid(this.getState("dailyQuest"))||this.getState("dailyQuest").dateId!==a.b.getDateId()},t.prototype.startNewDailyQuest=function(t,i){for(var n=[],e=0;e<i;e++)n.push(!1);this.setState("dailyQuest",{questId:t,dateId:a.b.getDateId(),questState:n}),r.a.instance.prodigy.gameContainer.get("447-4630").player.getUpdatedData()},t.prototype.isDailyQuestComplete=function(){if(!a.b.isValid(this.getState("dailyQuest")))return!1;if(this.getState("dailyQuest").dateId!==a.b.getDateId())return!1;for(var t=this.getState("dailyQuest").questState,i=0;i<t.length;i++)if(!t[i])return!1;return!0},t.prototype.updateDailyQuest=function(t){if(a.b.isValid(this.getState("dailyQuest"))){var i=this.getState("dailyQuest").questState;i[t]=!0,this.setState("dailyQuest",{questId:this.getState("dailyQuest").questId,dateId:this.getState("dailyQuest").dateId,questState:i})}},t.prototype.getRemainingQuestObjectives=function(){for(var t=0,i=this.getState("dailyQuest").questState,n=0;n<i.length;n++)i[n]||t++;return t},t.prototype.hideFollow=function(t){var i=r.a.instance.prodigy.gameContainer.get("447-4630").player;t.removeFollow(i.userID)},t.patrol=function(i,n,e){i instanceof h.a&&i.encountered||i.setPath(n,t.patrol.bind(t,i,n,e),e)},t.prototype.getBattle=function(t,i,n,e,s){var h={intro:i,catch:!1,run:!1,screen:t.zone.battleBG};return a.b.isValid(n.screen)&&(h.screen=n.screen),a.b.isValid(n.starMod)&&(h.starMod=n.starMod),a.b.isValid(n.drops)&&(h.drops=n.drops),a.b.isValid(n.difficulty)&&(h.difficulty=n.difficulty),a.b.isValid(n.events)&&(h.events=n.events),a.b.isValid(n.opponent)?(h.opponent=n.opponent,h.pets=n.pets):a.b.isValid(n.boss)?h.boss=n.boss:h.pets=n.pets,r.a.instance.prodigy.battle.start.bind(r.a.instance.prodigy.battle,h,null,e,s,this.onFaint)},t.prototype.getBattleMods=function(){return null},t.prototype.cacheZoneAssets=function(i){a.b.isValid(t._previousID)?t._previousID!==this.ID&&(o.a.zoneAssetsCached={},t._previousID=this.ID):t._previousID=this.ID,o.a.cacheAssets(this.game,i,o.a.zoneAssetsCached);for(var n=0;n<i.length;++n){var e=i[n];e.startsWith("tileset-")&&o.a.cacheAsset(this.game,e+"A",o.a.zoneAssetsCached)}},t}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return a}));var e=n(0),s=n(6),r=n(12),h=n(251),o=n(3),u=n(68),a=function(t){function i(i,n,e,s,h,o,u){var a=t.call(this,i,n,e,s,h,o,u)||this;return a.indicatorImage=null,a.onShowIndicator=new r.a,a._indicatorDisabled=!1,a}return Object(e.__extends)(i,t),i.prototype.showIndicator=function(t,i,n){var e,s;void 0===i&&(i="atlas-21"),void 0===n&&(n="exclamation"),t&&(null===(e=this.indicatorImage)||void 0===e?void 0:e.key)===i&&(null===(s=this.indicatorImage)||void 0===s?void 0:s.frame)===n||o.b.isValid(this.indicatorImage)&&(this.indicatorImage.destroy(),this.indicatorImage=null),this._indicatorDisabled||!t||o.b.isValid(this.indicatorImage)||(this.indicatorImage=new u.a(this.game,0,0,i,n),this.indicatorImage.anchor.setTo(.5,0),this.addChild(this.indicatorImage),this.onShowIndicator.dispatch())},i.prototype.setIndicatorPos=function(t){if(o.b.isValid(this.indicatorImage)){this.indicatorImage.x=t-this.x,this.indicatorImage.y=-this.indicatorImage.height;var i=400-(new Date).getTime()%400;this.game.add.tween(this.indicatorImage).to({y:this.indicatorImage.y-10},400,s.a.Quadratic.InOut,!0,i,-1,!0)}},i.prototype.disableIndicator=function(){o.b.isValid(this.indicatorImage)&&(this.indicatorImage.destroy(),this.indicatorImage=null),this._indicatorDisabled=!0},i.prototype.handleDestroy=function(){o.b.isValid(this.indicatorImage)&&(this.indicatorImage.destroy(),this.indicatorImage=null),this.onShowIndicator.dispose(),this.onShowIndicator=null,t.prototype.handleDestroy.call(this)},i}(h.a)},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t.Single="single",t.AOE="aoe",t.None="none"}(e||(e={}))},function(t,i,n){"use strict";n.d(i,"a",(function(){return h}));var e=n(1),s=n(5),r=n(186),h=function(){function t(){}return t.log=function(t,i){e.Logger.log("Automation Util: "+t,i)},t.getObjects=function(){return this._objects},t.enable=function(){this._enabled=!0,this.log("DOM elements enabled",e.LogLevel.Verbose)},t.disable=function(){this._enabled=!1,this.log("DOM elements disabled",e.LogLevel.Verbose)},t.isEnabled=function(){return this._enabled},t.createElement=function(t,i,n,s){try{var r=document.createElement("div"),h=t+"--"+i;return this.updateElementAttributes(r,{class:t+" "+h+" QA","data-x":String(n),"data-y":String(s)}),r}catch(o){this.log("Could not create element -- "+o.message,e.LogLevel.Error)}},t.updateElementAttributes=function(t,i){var n=this;Object.keys(i).forEach((function(e){n.updateElementAttribute(t,e,i[e])}))},t.updateElementAttribute=function(t,i,n){try{t.setAttribute(i,n)}catch(s){this.log("Could not update element attribute: "+i,e.LogLevel.Warning)}},t.removeElement=function(t,i){try{i.parentNode.removeChild(i),Object(s.pull)(this._objects,t)}catch(n){this.log("Could not remove element from the DOM. Maybe it no longer exists?",e.LogLevel.Warning)}},t.updateElementPosition=function(t,i,n){this.updateElementAttributes(t,{"data-x":String(Math.ceil(i)),"data-y":String(Math.ceil(n))})},t.addElementClass=function(t,i){var n=t.getAttribute("class");this.updateElementAttribute(t,"class",n+" "+r.a.toKebabCase(i))},t.stageElement=function(t,i,n){try{n?n.appendChild(i):document.body.appendChild(i),this._objects.push(t)}catch(s){this.log("Could not stage element -- "+s.message,e.LogLevel.Error)}},t.highlightElements=function(){var t=this;this._objects.forEach((function(i,n){var r=i.getElement(),h=Object(s.get)(i.parent,"_element",!1);r.style.position="absolute",r.style.zIndex=String(n),r.style.top=String(i.worldPosition.y)+"px",r.style.left=String(i.worldPosition.x)+"px",r.style.width="20px",r.style.height="20px",r.style.backgroundColor=h?"#0000ff":"#29E7FF",r.style.borderRadius="60px",r.style.border="3px solid #ffffff",r.addEventListener("click",(function(){var n=console.log;t.log("Object Details",e.LogLevel.Info),n(i,r,i.getChildElements(),e.LogLevel.Info)}))}))},t._enabled=!1,t._objects=[],t}()},function(t,i,n){"use strict";var e;n.d(i,"a",(function(){return e})),function(t){t[t.DEFAULT=1]="DEFAULT",t[t.LOCOMOTION=2]="LOCOMOTION",t[t.LOBBY=4]="LOBBY",t[t.SYSTEM_INFO=8]="SYSTEM_INFO",t[t.REAR_OVERLAY=16]="REAR_OVERLAY",t[t.AIMING_OVERLAY=32]="AIMING_OVERLAY"}(e||(e={}))},function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),function(t){t.EducationLessonEncounter="education_lesson_encounter_v3",t.EducationQuestionInterface="education_question_interface_v3",t.GameAvatar="game_avatar_v3",t.GameDiscovery="game_discovery_v3",t.GameBattle="game_battle_v3",t.GameSessionEnd="game_session_end_v3",t.GameComplete="game_complete_v3",t.GameQuestion="game_question_v3",t.GameSocial="game_social_v3",t.GameSessionStart="game_session_start_v3",t.GameSink="game_sink_v3",t.GameSource="game_source_v3",t.WebMembership="web_membership",t.AnonymousGameComplete="anonymous_game_complete_v3",t.AnonymousGameDiscovery="anonymous_game_discovery",t.AnonymousWebMembership="anonymous_membership",t.ApiStudentAttachedToParent="api_student_attached_to_parent",t.ApiMembershipCreated="api_membership_created",t.ApiCancelMembership="api_cancel_membership",t.ApiMembershipAssign="api_membership_assign"}(i.EventEnum||(i.EventEnum={}))},function(t,i,n){"use strict";n.d(i,"a",(function(){return a}));var e=n(0),s=n(1),r=n(2),h=n(7),o=n(33),u=n(3),a=function(t){function i(n,e,s,r,h){var o=t.call(this,n,e,s,2,r,h)||this;return o.game=n,o.source=s,o.assets=i.getAssets(o.source),o.walkIntoBattle=!1,o}return Object(e.__extends)(i,t),i.prototype.startLoad=function(){t.prototype.startLoad.call(this),this.loading=!0,this.assets=this.getListOfAssets(),r.a.instance.prodigy.load.assets(this.assets,this.setup.bind(this))},i.prototype.setup=function(t,i){if(u.b.isValid(this.game)&&i&&u.b.isValid(this.assets)){this.cacheBoss(),this.sprites.removeAll(!0);var n,e=this.assets[0];n=r.a.instance.prodigy.assets.getImageBounds(e),this.body=r.a.instance.prodigy.create.sprite(0,0,e),this.sprites.add(this.body),this.body.x=-n[0],this.body.y=-n[3];var s=null;try{this.sprites.callAll("animations.add","animations","walk",[0,1,2,3,4,5,6,7],10,!0,!0),this.sprites.callAll("animations.add","animations","stand",[0,1,2,3,4,5,6,7],10,!0,!0),s=this.body.animations.add("attack",[8,9,10,11,12,13,14,15],10)}catch(o){this.sprites.callAll("animations.add","animations","walk",[0],10,!0,!0),this.sprites.callAll("animations.add","animations","stand",[0],10,!0,!0),s=this.body.animations.add("attack",[0],10)}s.onComplete.add(this.stand,this),this.sprites.callAll("play",null,"stand"),this.setHitbox(h.a.getItem("boss",this.source.getID()).metadata.assets.default.hitbox),this.complete=!0,this.loading=!1,this._onLoad.dispatch()}},i.prototype.attack=function(){try{t.prototype.attack.call(this),this.sprites.callAll("play",null,"attack")}catch(i){s.Logger.log("Error trying to play BossContainer Attack animation",s.LogLevel.Error)}},i.prototype.getListOfAssets=function(){return i.getAssets(this.source)},i.getAssets=function(t){return t.getAssets()},i.prototype.cacheBoss=function(){o.a.cacheAssets(this.game,this.getListOfAssets(),o.a.zoneAssetsCached)},i}(n(28).a)},function(t,i,n){"use strict";n.d(i,"a",(function(){return e}));var e={XP_BONUS:{frameName:"icons/small-star-boost",trackingEvent:"XPBonus-Icon-Click"},BUDDY:{frameName:"icons/get-fox-buddy",trackingEvent:"Buddy-Icon-Click"},APPLES:{frameName:"icons/get-free-apples",trackingEvent:"Apples-Icon-Click"},TRACKING_EVENT_MOBILE:"Mobile-Message-Displayed",TRACKING_EVENT_SIGN_UP:"Signup-Button-Click",TRACKING_EVENT_PLAY_ONLY:"Signup-Button-Play",TRACKING_EVENT_LINK_PARENT:"Signup-Button-LinkParent",TRACKING_EVENT_POPUP_SHOWN:"Popup-Shown",TRACKING_EVENT_SCHOOL_HOURS:"School-Hours-Message-Displayed",TRACKING_EVENT_RECEIVED_REWARDS:"Parent-Benefits-Rewards-Received",MESSAGE_MOBILE:"PARENT_LINK_MOBILE_MESSAGE",MESSAGE_POST_CLICK:"PARENT_LINK_POST_CLICK",MESSAGE_SCHOOL_HOURS:"PARENT_LINK_SCHOOL_HOURS",ATLAS:"atlas-132",DESCRIPTION_TEXT_BG_HEIGHT_PERCENT:.25,REWARD_ICONS_BG_HEIGHT_PERCENT:.5,LINK_ACCOUNT_BG_HEIGHT_PERCENT:.88,CLOSE_BTN_OFFSET:{x:-10,y:10},BODY_TEXT_OFFSET:{x:40,y:0},ICON_TWEEN_TIME_MS:125,ICON_TWEEN_DELAY_MS:125,ICON_TWEEN_AMOUNT_Y:20,SUCCESS_POPUP_CONFIG:{headerText:"PARENTAL_LINK_TITLE_SUCCESS",bodyText:"PARENT_LINK_SUCCESS_BODY",showCloseButton:!1},INFO_POPUP_CONFIG:{headerText:"PARENTAL_LINK_TITLE",bodyText:"PARENT_LINK_INFO_BODY",showCloseButton:!0},AT_SCHOOL_POPUP_CONFIG:{headerText:"PARENTAL_LINK_TITLE",bodyText:"PARENTAL_LINK_CONTENT_SCHOOL",showCloseButton:!0},INFO_POPUP_SETTINGS_CONFIG:{headerText:"PARENTAL_LINK_TITLE",bodyText:"PARENT_LINK_INFO_BODY",showCloseButton:!0}}},function(t,i,n){"use strict";n.d(i,"a",(function(){return l}));var e=n(3),s=n(117),r=n(0),h=n(2),o=n(66),u=function(t){function i(i,n){return t.call(this,i,n)||this}return Object(r.__extends)(i,t),i.prototype.create=function(){t.prototype.create.call(this),this.sprite=h.a.instance.game.add.sprite(0,0,"","",this.gameObject),this.updateSource()},i.prototype.postLoad=function(t,i){i&&this.sprite.alive&&(this.updateSpriteSource(),this.onLoaded.dispatch())},i.prototype.setAnchor=function(t,i){this.sprite.anchor.set(t,i)},i.prototype.setScale=function(t,i){this.sprite.scale.set(t,i)},i.prototype.getScale=function(){return this.sprite.scale},i.prototype.getWorld=function(){return this.sprite.world},i.prototype.getWidth=function(){return this.sprite.width},i.prototype.getHeight=function(){return this.sprite.height},i.prototype.setAlpha=function(t){this.sprite.alpha=t},i.prototype.draggingStopped=function(){this.resetAfterDrag&&(this.gameObject.x+=this.sprite.x,this.gameObject.y+=this.sprite.y,this.sprite.x=0,this.sprite.y=0)},i.prototype.getEvents=function(){return this.sprite.events},i.prototype.setInputEnabled=function(t){void 0===t&&(t=!0),e.b.isValid(this.sprite)?(this.sprite.inputEnabled=!0,t?this.sprite.events.onDragStop.add(this.draggingStopped,this,-99):this.sprite.events.onDragStop.remove(this.draggingStopped,this)):this.onLoaded.addOnce(this.setInputEnabled,this,0,t)},i.prototype.enableDragging=function(t,i,n,e){this.sprite.inputEnabled&&(this.sprite.input.enableDrag(t,i),void 0!==n&&void 0!==e&&this.sprite.input.enableSnap(n,e))},i.prototype.disableDragging=function(){this.sprite.inputEnabled&&this.sprite.input.disableDrag()},i.prototype.getBounds=function(){var t=this.sprite.getBounds();return new o.a(t.x,t.y,t.width,t.height)},i.prototype.resetToOrigin=function(){this.sprite.x=0,this.sprite.y=0},i.prototype.setAsset=function(t,i){"singleImage"===i.type&&(this.source=t,this.metadata=i,this.updateSource())},i.prototype.updateSource=function(){h.a.instance.game.cache.checkImageKey(this.source)?(this.updateSpriteSource(),this.onLoaded.dispatch()):h.a.instance.prodigy.load.assets([this.source],this.postLoad.bind(this))},i.prototype.updateSpriteSource=function(){this.sprite.loadTexture(this.source),e.b.isValid(this.metadata.frame)&&(this.sprite.frame=this.metadata.frame)},i.prototype.getInputHandler=function(){return e.b.isValid(this.sprite)?this.sprite.input:null},i.prototype.setAngle=function(t){this.sprite.angle=t},i}(n(98).a),a=n(10),c=function(t){function i(i,n){return t.call(this,i,n)||this}return Object(r.__extends)(i,t),i.prototype.setAsset=function(t,i){if("spritesheet"===i.type){this.source=t,this.metadata=i,this.sprite.animations.stop();for(var n=0;n<this.sprite.animations._anims.length;++n)this.sprite.animations._anims[n].destroy();this.sprite.animations._anims={},this.updateSource()}},i.prototype.updateSpriteSource=function(){if(t.prototype.updateSpriteSource.call(this),this.hasAnimations())for(var i=Object.keys(this.metadata.animations),n=0;n<i.length;++n)this.sprite.animations.add(i[n],this.metadata.animations[i[n]].frames,this.metadata.animations[i[n]].frameRate,this.metadata.animations[i[n]].loop)},i.prototype.hasAnimations=function(){return e.b.isValid(this.metadata.animations)},i.prototype.getAnimationLength=function(t){var i=this.metadata.animations[t];return e.b.isValid(i)?i.frames.length:0},i.prototype.playAnimation=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=0),e.b.isValid(this.metadata.animations[t])&&(null!==this.sprite.animations.getAnimation(t)?(this.sprite.animations.play(t,this.metadata.animations[t].frameRate,i),this.sprite.animations.currentAnim.setFrame(Math.floor(n),!0)):this.onLoaded.addOnce(this.playAnimation,this,-a.a.MAX_SAFE_INTEGER,t,i,n))},i}(u),l=function(){function t(){}return t.createRenderer=function(t,i){switch(i.type){case"spine":return new s.a(t,i);case"singleImage":return new u(t,i);case"spritesheet":return new c(t,i);default:return new u(t,i)}},t.createRendererWithItem=function(i,n,s){var r=null;return r=e.b.isValid(s.type)?i+"-"+n:"icon-"+i+"-"+n,t.createRenderer(r,s)},t}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return s}));var e=n(0),s=function(t){function i(i,n,e,s,r,h,o,u,a,c,l,f){void 0===i&&(i="DEFAULT");var b=t.call(this,e,s,r,h,o)||this;return b.defaultBody=18,b.defaultHeader=17,b.deafultFooter=19,b._buttonText=i,b._buttonCallback=n,b._graphicSource=u,b._graphicFrame=a,b._headerPrefabID=c,b._footerPrefabID=l,b._bodyPrefabID=f,b}return Object(e.__extends)(i,t),Object.defineProperty(i.prototype,"buttonText",{get:function(){return this._buttonText},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buttonCallback",{get:function(){return this._buttonCallback},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"graphicSource",{get:function(){return this._graphicSource},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"graphicFrame",{get:function(){return this._graphicFrame},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"headerPrefabID",{get:function(){return void 0!==this._headerPrefabID?this._headerPrefabID:this.defaultHeader},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footerPrefabID",{get:function(){return void 0!==this._footerPrefabID?this._footerPrefabID:this.deafultFooter},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bodyPrefabID",{get:function(){return void 0!==this._bodyPrefabID?this._bodyPrefabID:this.defaultBody},enumerable:!0,configurable:!0}),i}(n(188).a)},function(t,i,n){"use strict";n.d(i,"a",(function(){return B}));var e,s=n(1),r=n(3),h=n(95),o=n(0),u=n(70),a=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.currentToggleState=0,i.stateGraphics=[],i.buttonToggleGraphic=null,i}return Object(o.__extends)(i,t),i.prototype.populate=function(i){t.prototype.populate.call(this,i);var n={anchorX:0,anchorY:0,relativeX:0,relativeY:0,type:"Graphic",name:"buttonToggleGraphic",atlasID:i.atlasID,frameName:0===i.defaultToggleState?i.frameNameOff:i.frameNameOn};r.b.isValid(i.children)?i.children.unshift(n):i.children=[n],this.currentToggleState=i.defaultToggleState,this.stateGraphics=[{frameName:i.frameNameOff},{frameName:i.frameNameOn}]},i.prototype.postPopulate=function(){t.prototype.postPopulate.call(this),this.updateToggleImage()},i.prototype.setOnClickCallback=function(t){var i=this;this.onClickCallback=function(){i.toggleState(),i.updateToggleImage(),r.b.isValid(t)&&t(i.currentToggleState)}},i.prototype.toggleState=function(){this.currentToggleState=1-this.currentToggleState},i.prototype.updateToggleImage=function(){this.setGraphicFrameName(this.stateGraphics[this.currentToggleState])},i.prototype.setGraphicFrameName=function(t){r.b.isValid(this.buttonToggleGraphic)||(this.buttonToggleGraphic=this.iterate("name","buttonToggleGraphic",u.a.RETURN_CHILD)),this.buttonToggleGraphic.setImageFrameName(t.frameName)},i}(h.a),c=n(120),l=n(274),f=n(135),b=n(155),v=n(8),d=n(42),O=function(t){function i(i,n,e){var s=t.call(this,i,n)||this;return s.dirty=!0,s.layoutType=null,s.alignment="top",s.spacing=0,s.startOffset=0,s.ignoreInvisible=!1,s.layoutType=e.type,r.b.isValid(e.alignment)&&(s.alignment=e.alignment),r.b.isValid(e.spacing)&&(s.spacing=e.spacing),r.b.isValid(e.offset)&&(s.startOffset=e.offset),r.b.isValid(e.ignoreInvisible)&&(s.ignoreInvisible=e.ignoreInvisible),s.game.broadcaster.addAppListener(v.z.ChildAdded,s.parentModified.bind(s),s,s.parent,!1),s.game.broadcaster.addAppListener(v.z.ChildRemoved,s.parentModified.bind(s),s,s.parent,!1),s.calculateChildren(),s}return Object(o.__extends)(i,t),i.prototype.calculateChildren=function(){this.dirty=!1,"vertical"===this.layoutType?this.alignVertical():"horizontal"===this.layoutType&&this.alignHorizontal()},i.prototype.alignVertical=function(){var t=this.startOffset;"center"===this.alignment?t+=Math.round((this.parent.height-this.getContentHeight())/2):"bottom"===this.alignment&&(t+=Math.round(this.parent.height-this.getContentHeight()));for(var i=0;i<this.parent.children.length;i++)if(this.parent.children[i]instanceof d.a&&this.parent.children[i].visible){if(this.ignoreInvisible&&!this.parent.children[i].visible)continue;this.parent.children[i]instanceof h.a&&(this.parent.children[i].defaultY=t),this.parent.children[i].y=t,t+=this.parent.children[i].height+this.spacing}},i.prototype.alignHorizontal=function(){var t=this.startOffset;"center"===this.alignment?t+=Math.round((this.parent.width-this.getContentWidth())/2):"right"===this.alignment&&(t+=this.parent.width-this.getContentWidth());for(var i=0;i<this.parent.children.length;i++)if(this.parent.children[i]instanceof d.a&&this.parent.children[i].visible){if(this.ignoreInvisible&&!this.parent.children[i].visible)continue;this.parent.children[i].x=t,t+=this.parent.children[i].width+this.spacing}},i.prototype.getContentHeight=function(){for(var t=(this.parent.children.length-1)*this.spacing,i=0;i<this.parent.children.length;i++)if(this.parent.children[i]instanceof d.a&&this.parent.children[i].visible){if(this.ignoreInvisible&&!this.parent.children[i].visible)continue;t+=this.parent.children[i].height}return t},i.prototype.getContentWidth=function(){for(var t=(this.parent.children.length-1)*this.spacing,i=0;i<this.parent.children.length;i++)if(this.parent.children[i]instanceof d.a&&this.parent.children[i].visible){if(this.ignoreInvisible&&!this.parent.children[i].visible)continue;t+=this.parent.children[i].width}return t},i.prototype.preUpdate=function(){this.active&&(t.prototype.preUpdate.call(this),this.dirty&&this.calculateChildren())},i.prototype.parentModified=function(){this.dirty=!0},i.prototype.destroy=function(){this.game.broadcaster.removeAppListener(v.z.ChildAdded,this.parentModified.bind(this),this.parent),this.game.broadcaster.removeAppListener(v.z.ChildRemoved,this.parentModified.bind(this),this.parent),t.prototype.destroy.call(this)},i}(u.a),m=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.populate=function(i){t.prototype.populate.call(this,i),this.mask=this.game.add.graphics(0,0),this.mask.beginFill(0),this.mask.drawRect(0,0,this.width,this.height),this.mask.endFill(),this.add(this.mask)},i}(d.a),p=n(183),g=n(2),y=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i}(Phaser.InputHandler),j=n(13),_=n(66),w=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.viewHeight=0,e.scrollBar=null,e.contents=null,e.maxScrollDist=0,e.viewWidth=0,e.contentsArray=[],e.clickDragThreshold=4,e.maxDistanceThisScroll=0,e.lastPointerPosition=new j.a,e.dirty=!1,e.mouseWheelPixelDistance=20,e.contentsName=null,e.enableTouchScroll=!1,e.rectMask=null,e.scrollStartPos=null,e.onDestroy.add(e.stopListeners.bind(e)),e}return Object(o.__extends)(i,t),i.prototype.populate=function(i){t.prototype.populate.call(this,i),this.viewHeight=this.height,this.viewWidth=this.width,this.setupScrollWheel(),r.b.isValid(i.scrollContentsName)&&(this.contentsName=i.scrollContentsName),r.b.isValid(i.enableTouchScroll)?this.enableTouchScroll=i.enableTouchScroll:s.Logger.log('Scroll view needs a property named "scrollContentsName" which points to the view to scroll',s.LogLevel.Error)},i.prototype.postPopulate=function(){for(var t=0;t<this.children.length;t++)if(this.children[t].name===this.contentsName){this.contents=this.children[t];break}this.setupMask(),this.calculateMaxScrollDist(),this.setupVisibleIndices()},i.prototype.linkScrollBar=function(t){this.scrollBar=t,this.scrollBar.onDragUpdateCallbacks.push(this.setToScrollPercent.bind(this)),this.scrollBar.setThumbRatio(this.viewHeight/this.contents.height)},i.prototype.calculateMaxScrollDist=function(){var t=Math.max(0,this.contents.height/this.viewHeight-1);this.maxScrollDist=this.viewHeight*t},i.prototype.setToScrollPercent=function(t){this.contents.y=Math.round(this.maxScrollDist*Math.min(Math.max(t,0),1)*-1),r.b.isValid(this.scrollBar)&&this.scrollBar.setPercent(Math.abs(this.contents.y)/this.maxScrollDist),this.dirty=!0},i.prototype.setupVisibleIndices=function(){for(var t=0;t<this.contents.children.length;t++)this.contents.children[t]instanceof d.a&&this.contentsArray.push(this.contents.children[t]);this.dirty=!0},i.prototype.update=function(){t.prototype.update.call(this),this.dirty&&(this.updateScrollVisibility(),this.dirty=!1);var i=g.a.instance.game.input.mousePointer;i&&(this.simulateMouseAction(i,0),i.position.clone(this.lastPointerPosition))},i.prototype.clearScrollView=function(){for(;this.contentsArray.length>0;)this.contentsArray.pop().destroy()},i.prototype.setupScrollWheel=function(){this.game.broadcaster.addAppListener(v.m.OnMouseWheel,this.scrollWheelListener.bind(this),this,"Input",!1)},i.prototype.stopListeners=function(){this.game.broadcaster.removeAppListener(v.m.OnMouseWheel,this,"Input"),this.rectMask&&this.rectMask.input.destroy()},i.prototype.scrollWheelListener=function(){if(!(this.maxScrollDist<=0)){var t=this.game.input.mouse.wheelDelta*this.mouseWheelPixelDistance+this.contents.y;this.setToScrollPercent(-1*t/this.maxScrollDist)}},i.prototype.updateScrollVisibility=function(){for(var t=new PIXILegacy.Rectangle(this.x,this.y,this.viewWidth,this.viewHeight),i=new _.a(t.x,t.y,t.width,t.height),n=0;n<this.contentsArray.length;n++){var e=this.contentsArray[n],s=new _.a(e.x+this.contents.x,e.y+this.contents.y,1,e.height);this.checkOverlap(s,i)?this.contentsArray[n].setAllChildren("visible",!0,!0):this.contentsArray[n].setAllChildren("visible",!1,!0)}},i.prototype.stopDrag=function(t){y.prototype.stopDrag.call(this.rectMask.input,t),this.scrollStartPos=null,this.maxDistanceThisScroll<=this.clickDragThreshold&&(this.simulateMouseAction(t,1),this.simulateMouseAction(t,2)),this.maxDistanceThisScroll=0},i.prototype.checkOverlap=function(t,i){return _.a.intersects(t,i)},i.prototype.setupMask=function(){if(this.rectMask=this.game.add.graphics(0,0),this.add(this.rectMask),this.rectMask.beginFill(0),this.rectMask.drawRect(this.x,this.y,this.viewWidth,this.viewHeight),this.rectMask.endFill(),this.contents.mask=this.rectMask,this.enableTouchScroll){this.rectMask.inputEnabled=!0;var t=this.rectMask.input;t.enableDrag(!1),t.allowVerticalDrag=!0,t.updateDrag=this.dragView.bind(this),t.stopDrag=this.stopDrag.bind(this)}},i.prototype.dragView=function(t){if(!(this.maxScrollDist<=0)){r.b.isValid(this.scrollStartPos)||(this.scrollStartPos=this.contents.y);var i=t.y-t.positionDown.y,n=this.scrollStartPos+i;this.maxDistanceThisScroll=Math.max(this.maxDistanceThisScroll,Math.abs(i)),n<-1*this.maxScrollDist?n=-1*this.maxScrollDist:n>0&&(n=0),this.contents.y=Math.round(n),r.b.isValid(this.scrollBar)&&this.scrollBar.setPercent(Math.abs(this.contents.y)/this.maxScrollDist),this.dirty=!0}},i.prototype.simulateMouseAction=function(t,i,n){var e,s;void 0===n&&(n=this.contentsArray);try{for(var r=Object(o.__values)(n),u=r.next();!u.done;u=r.next()){var a=u.value,l=0===i,f=a instanceof h.a||a instanceof c.a?a:null,b=this.elementContains(a,t.position);if(f){var v=f.state;if(l)b&&"over"!==v?f.onOver():b||f.onOut();else if(b)switch(i){case 1:f.onDown();break;case 2:f.onUp()}}else(a.alpha>0&&a.children&&l||b)&&this.simulateMouseAction(t,i,a.children)}}catch(d){e={error:d}}finally{try{u&&!u.done&&(s=r.return)&&s.call(r)}finally{if(e)throw e.error}}},i.prototype.elementContains=function(t,i){var n=t.getBounds();return _.a.containsPoint(new _.a(n.x,n.y,n.width,n.height),i)},i}(d.a),E=n(160),I=n(78),A=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.sprites=[],i.boundsWidth=1280,i.fontSize=20,i.textAlignment="center",i.fontID=10,i.fontName="",i.lineHeight=null,i.monoSpace=10,i.iconOffsetY=0,i.forceUpperCase=!1,i.numberOfLines=1,i.verticalAlign="top",i.tint=16777215,i.icon=null,i}return Object(o.__extends)(i,t),i.prototype.populate=function(i){t.prototype.populate.call(this,i),this.sprites=[],this.boundsWidth=r.b.isValid(i.width)?i.width:1280,this.fontSize=r.b.isValid(i.fontSize)?i.fontSize:20,this.textAlignment=r.b.isValid(i.horizontalAlignment)?i.horizontalAlignment:"center",this.fontID=r.b.isValid(i.fontID)?i.fontID:10,this.fontName="atlas-"+this.fontID,this.lineHeight=i.lineHeight,this.monoSpace=i.monoSpace,this.iconOffsetY=r.b.isValid(i.iconOffsetY)?i.iconOffsetY:0,this.forceUpperCase=!!r.b.isValid(i.forceUpperCase)&&i.forceUpperCase,this.numberOfLines=1,this.verticalAlign=r.b.isValid(i.verticalAlignment)?i.verticalAlignment:"top",this.tint=r.b.isValid(i.tint)?parseInt(i.tint):16777215,r.b.isValid(i.text)?this.setText(i.text):r.b.isValid(i.textKey)&&this.setText(g.a.instance.prodigy.gameContainer.get(s.GameIdentifiers.LocalizationService).getText(i.textKey))},i.prototype.setText=function(t){if(r.b.isValid(this.game)){var i=t;this.forceUpperCase&&(i=i.toUpperCase());for(var n=0,e=null,s=0,h=0,o=0,u=[],a=0;a<this.sprites.length;a++)this.sprites[a].kill();r.b.isValid(this.icon)&&this.icon.destroy(),this.numberOfLines=1;for(var c=0;c<i.length;c++){var l=i.charCodeAt(c),f=null;if(91!==l){if(93===l)f=e,e=null;else if(r.b.isValid(e)){n++,e+=i[c];continue}a=c-n;var b=r.b.isValid(this.monoSpace)?this.monoSpace:10;if(a>=this.sprites.length){var v=g.a.instance.prodigy.create.sprite(s,h,this.fontName);this.add(v),this.sprites.push(v)}else this.sprites[a].revive();if(this.sprites[a].tint=this.tint,this.sprites[a].x=s,this.sprites[a].y=h,r.b.isValid(f)?(-1!==f.indexOf("icon-")?(this.icon=g.a.instance.prodigy.icon.createIcon(s,h,f,null,null,40,40),this.add(this.icon),this.sprites[a]=this.icon):("atlas-21"!==this.sprites[a].key&&this.sprites[a].loadTexture("atlas-21"),this.sprites[a].frameName=f),this.sprites[a].y+=this.iconOffsetY):(this.sprites[a].key!==this.fontName&&this.sprites[a].loadTexture(this.fontName),10!==l&&(this.sprites[a].frameName=l+"-"+this.fontSize)),32===l||c===i.length-1||10===l){var d=0===this.fontSize?26:this.fontSize,O=r.b.isValid(this.lineHeight)?this.lineHeight:d+5;if(s>=this.boundsWidth){var m=s;s=0,h+=O;for(var p=o;p<=a;p++)this.sprites[p].x=s,this.sprites[p].y=h,"atlas-21"===this.sprites[p].key&&(this.sprites[p].y+=(this.sprites[p].height-d)/2),s+=r.b.isValid(this.monoSpace)?this.monoSpace:this.sprites[p].width;u.push(m-s),this.numberOfLines++,"center"===this.textAlignment&&(s-=b)}else 10===l&&(this.sprites[a].kill(),h+=O,s=0,this.numberOfLines++);o=a+1,32===l&&(s+=b)}10!==l&&(s+=r.b.isValid(this.monoSpace)?this.monoSpace:this.sprites[a].width),c===i.length-1&&u.push(s)}else n++,e=""}if("left"!==this.textAlignment){var y=-1,j=0;for(c=-1,a=0;a<this.sprites.length;a++){y!==(v=this.sprites[a]).y&&(y=v.y,c++,r.b.isValid(u[c])&&("center"===this.textAlignment?j=Math.floor((this.boundsWidth-u[c])/2):"right"===this.textAlignment&&(j=Math.floor(this.boundsWidth-u[c])))),v.x+=j}}if(r.b.isValid(this.verticalAlign)&&"top"!==this.verticalAlign&&r.b.isValid(this.sprites[0])){var _=0,w=this.sprites[0].height*this.numberOfLines;"center"===this.verticalAlign?_=Math.round((this.height-w)/2):"bottom"===this.verticalAlign&&(_=Math.round(this.height-w));for(a=0;a<this.sprites.length;a++)this.sprites[a].y+=_}I.a.isEnabled()&&(this.updateElementAttribute("data-text",t),this.updateElementPosition(this.worldPosition.x,this.worldPosition.y))}},i.className="Text",i}(d.a),T=function(){function t(){}return t.floodFillImages=function(t,i,n,e,s,r){var h=[],o=r[0],u=g.a.instance.prodigy.create.image(n.x,n.y,s,o),a=u.width,c=u.height;u.destroy();for(var l=Math.max(1,Math.ceil((e.x-n.x)/a)),f=Math.max(1,Math.ceil((e.y-n.y)/c)),b=0;b<l;b++)for(var v=0;v<f;v++)o=r[Math.floor(Math.random()*r.length)],u=i.add(g.a.instance.prodigy.create.image(n.x+b*a,n.y+v*c,s,o)),h.push(u);return h},t}();!function(t){t.Middle="-middle",t.Left="-left",t.Right="-right",t.BottomLeft="-bottomLeft",t.BottomRight="-bottomRight"}(e||(e={}));var D,S=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.images=[],i.text=null,i.slicedGroup=null,i.slicedSprites=null,i}return Object(o.__extends)(i,t),i.prototype.populate=function(i){t.prototype.populate.call(this,i),this.slicedGroup&&this.slicedGroup.destroy(),this.slicedGroup=g.a.instance.prodigy.create.element(this,0,0),this.slicedSprites=g.a.instance.prodigy.create.element(this.slicedGroup,0,0);var n=r.b.isValid(i.baseFrameName)?i.baseFrameName:"",e=r.b.isValid(i.atlasID)?i.atlasID:144,h="";r.b.isValid(i.text)?h=i.text:r.b.isValid(i.textKey)&&(h=g.a.instance.prodigy.gameContainer.get(s.GameIdentifiers.LocalizationService).getText(i.textKey)),this.createBanner("atlas-"+e,n,h,i.isThreeSlice)},i.prototype.createBanner=function(t,i,n,r){this.text=new A(this.game,this);var h=r?0:68;if(r){var o=this.add(g.a.instance.prodigy.create.image(0,0,t,""+i+e.Left)),u=this.add(g.a.instance.prodigy.create.image(0,0,t,""+i+e.Middle));u.scale.setTo((this.width-(o.x+2*o.width))/u.width,1),u.smoothed=!1,u.x=o.x+o.width;var a=this.add(g.a.instance.prodigy.create.image(u.x+u.width,0,t,""+i+e.Right));this.images.push(o),this.images.push(u),this.images.push(a),this.slicedSprites.add(o),this.slicedSprites.add(u),this.slicedSprites.add(a)}else{var c=this.add(g.a.instance.prodigy.create.image(0,40,t,""+i+e.BottomLeft)),l=c.width;this.images.push(c),this.slicedSprites.add(c),c=this.add(g.a.instance.prodigy.create.image(this.width-l,40,t,""+i+e.BottomRight)),this.images.push(c),this.slicedSprites.add(c),l=(c=this.add(g.a.instance.prodigy.create.image(h,0,t,""+i+e.Left))).width,this.images.push(c),this.slicedSprites.add(c),c=this.add(g.a.instance.prodigy.create.image(this.width-l-h,0,t,""+i+e.Right)),this.images.push(c),this.slicedSprites.add(c);var f=T.floodFillImages(this.game,this,{x:l+h,y:0},{x:this.width-l-h,y:0},t,[""+i+e.Middle]);this.images=this.images.concat(f);for(var b=0;b<f.length;++b)this.slicedSprites.add(f[b])}var v={type:"Text",name:"bannerText",anchorX:.5,anchorY:0,relativeX:.5,relativeY:r?-.13:0,relativeWidth:(this.width-2*h)/this.width-.05,height:80,text:n,fontID:157,fontSize:0,horizontalAlignment:"center",verticalAlignment:"center",forceUpperCase:!0,lineHeight:35};this.addChild(this.text),this.text.processRelativeFields(v,{width:this.width,height:this.height}),this.text.populate(v),this.game.renderType!==Phaser.WEBGL&&s.Utils.cacheAsBitmap(this.slicedGroup)},i.prototype.setText=function(t){r.b.isValid(this.text)&&this.text.setText(t)},i.prototype.destroy=function(i,n){this.slicedGroup&&(this.slicedGroup.cacheAsBitmap=!1),t.prototype.destroy.call(this,i,n)},i}(E.a);!function(t){t.Top="-top",t.Bottom="-bottom",t.Left="-left",t.Right="-right",t.Middle="-middle",t.TopLeft="-topLeft",t.TopRight="-topRight",t.BottomLeft="-bottomLeft",t.BottomRight="-bottomRight"}(D||(D={}));var C=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.images=[],i.sliceType="",i.slicedGroup=null,i.slicedSprites=null,i.isVertical=!1,i.rotateSprites=!1,i}return Object(o.__extends)(i,t),i.prototype.populate=function(i){t.prototype.populate.call(this,i),this.slicedGroup&&this.slicedGroup.destroy(),this.slicedGroup=g.a.instance.prodigy.create.element(this,0,0),this.slicedSprites=g.a.instance.prodigy.create.element(this.slicedGroup,0,0);var n=r.b.isValid(i.baseFrameName)?i.baseFrameName:"";if(this.atlasID=r.b.isValid(i.atlasID)?i.atlasID:144,this.isVertical=!!r.b.isValid(i.isVertical)&&i.isVertical,this.rotateSprites=!r.b.isValid(i.rotateSprites)||i.rotateSprites,r.b.isValid(i.sliceType)?this.sliceType=i.sliceType:s.Logger.log("SlicedGraphic.populate - no sliceType provided for SlicedGraphic named: "+this.name+". This SlicedGraphic won't render.",s.LogLevel.Error),this.createImage("atlas-"+this.atlasID,n),r.b.isValid(i.tint))for(var e=0;e<this.images.length;e++)this.images[e].tint=i.tint;this.cacheSlicedAsBitmap()},i.prototype.createImage=function(t,i){"three"===this.sliceType?this.create3SlicedImages(t,i):"threeScale"===this.sliceType?this.create3SlicedImagesScaled(t,i):"nine"===this.sliceType?this.create9SlicedImages(t,i):"nineScale"===this.sliceType?this.create9SlicedImagesScaled(t,i):s.Logger.log("SlicedGraphic.populate - no definition for sliceType: "+this.sliceType+" for SlicedGraphic named: "+this.name+". This SlicedGraphic won't render.",s.LogLevel.Error),this.disableSmoothing()},i.prototype.resize=function(t,i){s.Utils.toggleDisplayObjSettings(this.slicedGroup,!0);for(var n=0;n<this.images.length;n++)this.images[n].x=0,this.images[n].y=0,this.images[n].scale.x=1,this.images[n].scale.y=1;if("nineScale"===this.sliceType){var e={width:this.images[0].width,height:this.images[0].height};this.images[0].x=0,this.images[0].y=0,this.images[1].x=t-e.width,this.images[1].y=0,this.images[2].x=t-e.width,this.images[2].y=i-e.height,this.images[3].x=0,this.images[3].y=i-e.height;var r=this.images[1].x-e.width,h=this.images[3].y-e.height;this.images[4].x=e.width,this.images[4].y=0,this.images[4].scale.x=r/this.images[4].width,this.images[5].x=e.width,this.images[5].y=this.images[2].y,this.images[5].scale.x=r/this.images[5].width,this.images[6].x=0,this.images[6].y=e.height,this.images[6].scale.y=h/this.images[6].height,this.images[7].x=this.images[1].x,this.images[7].y=e.height,this.images[7].scale.y=h/this.images[7].height,this.images[8].x=e.width,this.images[8].y=e.height,this.images[8].scale.x=r/this.images[8].width,this.images[8].scale.y=h/this.images[8].height}else if("threeScale"===this.sliceType){var o=this.images[0].width;if(this.isVertical)this.images[2].y=o,this.images[1].y=i-o,this.images[2].scale.x=(this.images[1].y-o+1)/this.images[2].width;else{var u=this.images[0].width;this.images[2].x=u,this.images[1].x=t-u,this.images[2].scale.x=(this.images[1].x-u+1)/this.images[2].width}}this.cacheSlicedAsBitmap()},i.prototype.setActive=function(i){var n=i?16777215:5789784;s.Utils.toggleDisplayObjSettings(this.slicedGroup,!0);for(var e=0;e<this.images.length;e++)this.images[e].tint=n;this.cacheSlicedAsBitmap(),t.prototype.setActive.call(this,i)},i.prototype.setClickable=function(t,i,n,e){if(r.b.isValid(t)){this.slicedGroup.cacheAsBitmap=!1,s.Utils.toggleDisplayObjSettings(this.slicedSprites,!0);for(var h=null,o=0;o<this.images.length;o++)(h=this.images[o]).inputEnabled=!0,t&&h.events.onInputDown.add(t),i&&h.events.onInputUp.add(i),n&&h.events.onInputOver.add(n),e&&h.events.onInputOut.add(e)}},i.prototype.getTopImageFrames=function(t){return[""+t+D.Top]},i.prototype.getBottomImageFrames=function(t){return[""+t+D.Bottom]},i.prototype.getLeftImageFrames=function(t){return[""+t+D.Left]},i.prototype.getRightImageFrames=function(t){return[""+t+D.Right]},i.prototype.getMiddleImageFrames=function(t){return[""+t+D.Middle]},i.prototype.createTopImages=function(t,i,n,e){for(var s=T.floodFillImages(this.game,this,t,i,n,[""+e+D.Top]),r=0;r<s.length;++r)this.slicedSprites.add(s[r]);return s},i.prototype.createBottomImages=function(t,i,n,e){for(var s=T.floodFillImages(this.game,this,t,i,n,[""+e+D.Bottom]),r=0;r<s.length;++r)this.slicedSprites.add(s[r]);return s},i.prototype.createLeftImages=function(t,i,n,e){for(var s=T.floodFillImages(this.game,this,t,i,n,[""+e+D.Left]),r=0;r<s.length;++r)this.slicedSprites.add(s[r]);return s},i.prototype.createRightImages=function(t,i,n,e){for(var s=T.floodFillImages(this.game,this,t,i,n,[""+e+D.Right]),r=0;r<s.length;++r)this.slicedSprites.add(s[r]);return s},i.prototype.createMiddleImages=function(t,i,n,e){for(var s=T.floodFillImages(this.game,this,t,i,n,[""+e+D.Middle]),r=0;r<s.length;++r)this.slicedSprites.add(s[r]);return s},i.prototype.create9SlicedImages=function(t,i){var n=this.add(g.a.instance.prodigy.create.image(0,0,t,""+i+D.TopLeft)),e={width:n.width,height:n.height};this.images.push(n),this.slicedSprites.add(n),n=this.add(g.a.instance.prodigy.create.image(this.width-e.width,0,t,""+i+D.TopRight)),this.images.push(n),this.slicedSprites.add(n),n=this.add(g.a.instance.prodigy.create.image(this.width-e.width,this.height-e.height,t,""+i+D.BottomRight)),this.images.push(n),this.slicedSprites.add(n),n=this.add(g.a.instance.prodigy.create.image(0,this.height-e.height,t,""+i+D.BottomLeft)),this.images.push(n),this.slicedSprites.add(n),this.images=this.images.concat(this.createTopImages({x:e.width,y:0},{x:this.width-e.width,y:0},t,i)),this.images=this.images.concat(this.createBottomImages({x:e.width,y:this.height-e.height},{x:this.width-e.width,y:this.height-e.height},t,i)),this.images=this.images.concat(this.createLeftImages({x:0,y:e.height},{x:0,y:this.height-e.height},t,i)),this.images=this.images.concat(this.createRightImages({x:this.width-e.width,y:e.height},{x:this.width-e.width,y:this.height-e.height},t,i)),this.images=this.images.concat(this.createMiddleImages({x:e.width,y:e.height},{x:this.width-e.width,y:this.height-e.height},t,i))},i.prototype.create9SlicedImagesScaled=function(t,i){var n=this.add(g.a.instance.prodigy.create.image(0,0,t,""+i+D.TopLeft)),e={width:n.width,height:n.height};this.images.push(n),this.slicedSprites.add(n),n=this.add(g.a.instance.prodigy.create.image(this.width-e.width,0,t,""+i+D.TopRight)),this.images.push(n),this.slicedSprites.add(n),n=this.add(g.a.instance.prodigy.create.image(this.width-e.width,this.height-e.height,t,""+i+D.BottomRight)),this.images.push(n),this.slicedSprites.add(n),n=this.add(g.a.instance.prodigy.create.image(0,this.height-e.height,t,""+i+D.BottomLeft)),this.images.push(n),this.slicedSprites.add(n);var s=this.images[1].x-e.width,r=this.images[3].y-e.height,h=this.add(g.a.instance.prodigy.create.image(e.width,0,t,""+i+D.Top));h.scale.x=s/h.width;var o=this.add(g.a.instance.prodigy.create.image(e.width,this.images[2].y,t,""+i+D.Bottom));o.scale.x=s/o.width;var u=this.add(g.a.instance.prodigy.create.image(0,e.height,t,""+i+D.Left));u.scale.y=r/u.height;var a=this.add(g.a.instance.prodigy.create.image(this.images[1].x,e.height,t,""+i+D.Right));a.scale.y=r/a.height;var c=this.add(g.a.instance.prodigy.create.image(e.width,e.height,t,""+i+D.Middle));c.scale.x=s/c.width,c.scale.y=r/c.height,this.images.push(h),this.slicedSprites.add(h),this.images.push(o),this.slicedSprites.add(o),this.images.push(u),this.slicedSprites.add(u),this.images.push(a),this.slicedSprites.add(a),this.images.push(c),this.slicedSprites.add(c)},i.prototype.create3SlicedImages=function(t,i){var n=g.a.instance.prodigy.create.image(0,0,t,""+i+D.Left);this.isVertical&&(n.y=this.height-n.height),this.add(n);var e=n.width;if(this.images.push(n),this.slicedSprites.add(n),n=g.a.instance.prodigy.create.image(this.width-e,0,t,""+i+D.Right),this.isVertical&&(n.x=0),this.add(n),this.images.push(n),this.slicedSprites.add(n),this.isVertical){this.images=this.images.concat(this.createMiddleImages({x:0,y:n.height},{x:0,y:this.height-n.height},t,i));for(var s=0;s<this.images.length;s++)this.images[s].angle=270,this.images[s].y+=this.images[s].height}else this.images=this.images.concat(this.createMiddleImages({x:e,y:0},{x:this.width-e,y:0},t,i))},i.prototype.create3SlicedImagesScaled=function(t,i){if(this.isVertical)if(this.rotateSprites){var n=(s=this.add(g.a.instance.prodigy.create.image(0,0,t,i+"-left"))).width;s.angle=90,this.images.push(s),this.slicedSprites.add(s),(s=this.add(g.a.instance.prodigy.create.image(0,this.height-n,t,i+"-right"))).angle=90,this.images.push(s),this.slicedSprites.add(s),(e=this.add(g.a.instance.prodigy.create.image(0,n,t,i+"-middle"))).angle=90,this.images.push(e),this.slicedSprites.add(e),e.scale.x=(s.y-n)/e.width}else{n=(s=this.add(g.a.instance.prodigy.create.image(0,0,t,i+"-left"))).height;this.images.push(s),this.slicedSprites.add(s),s=this.add(g.a.instance.prodigy.create.image(0,this.height-n,t,i+"-right")),this.images.push(s),this.slicedSprites.add(s);var e=this.add(g.a.instance.prodigy.create.image(0,n,t,i+"-middle"));this.images.push(e),this.slicedSprites.add(e),e.scale.y=(s.y-n)/e.height}else{var s,r=(s=this.add(g.a.instance.prodigy.create.image(0,0,t,""+i+D.Left))).width;this.images.push(s),this.slicedSprites.add(s),s=this.add(g.a.instance.prodigy.create.image(this.width-r,0,t,""+i+D.Right)),this.images.push(s),this.slicedSprites.add(s);e=this.add(g.a.instance.prodigy.create.image(r,0,t,""+i+D.Middle));this.images.push(e),this.slicedSprites.add(e),e.scale.x=(s.x-r)/e.width}},i.prototype.disableSmoothing=function(){for(var t=0;t<this.images.length;t++)this.images[t].smoothed=!1},i.prototype.setFrameName=function(t){for(var i=0;i<this.images.length;i++)r.b.isValid(this.images[i].frameName)&&(this.images[i].frameName=t+this.images[i].frameName.substr(this.images[i].frameName.lastIndexOf("-"),this.images[i].frameName.length))},i.prototype.cacheSlicedAsBitmap=function(){this.game.renderType===Phaser.WEBGL||"three"!==this.sliceType&&"nine"!==this.sliceType||s.Utils.cacheAsBitmap(this.slicedGroup)},i.prototype.destroy=function(i,n){this.slicedGroup&&(this.slicedGroup.cacheAsBitmap=!1),t.prototype.destroy.call(this,i,n)},i}(E.a),N=n(187),x=n(196),R=n(275),M=n(276),L=n(316),P=n(89),k=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(i,t),i.prototype.getTopImageFrames=function(i){return t.prototype.getTopImageFrames.call(this,i).concat([""+i+D.Top+"-alt"])},i.prototype.getBottomImageFrames=function(i){return t.prototype.getBottomImageFrames.call(this,i).concat([""+i+D.Bottom+"-alt"])},i.prototype.getLeftImageFrames=function(i){return t.prototype.getLeftImageFrames.call(this,i).concat([""+i+D.Left+"-alt"])},i.prototype.getRightImageFrames=function(i){return t.prototype.getRightImageFrames.call(this,i).concat([""+i+D.Right+"-alt"])},i.prototype.getMiddleImageFrames=function(i){return t.prototype.getMiddleImageFrames.call(this,i).concat([""+i+D.Middle+"-alt",""+i+D.Middle+"-alt2",""+i+D.Middle+"-alt3"])},i.prototype.createTopImages=function(i,n,e,s){var r=t.prototype.createTopImages.call(this,i,n,e,s);return this.generateNotchReplacements(r,""+s+D.Top+"-notch"),r},i.prototype.createBottomImages=function(i,n,e,s){var r=t.prototype.createBottomImages.call(this,i,n,e,s);return this.generateNotchReplacements(r,""+s+D.Bottom+"-notch"),r},i.prototype.createLeftImages=function(i,n,e,s){var r=t.prototype.createLeftImages.call(this,i,n,e,s);return this.generateNotchReplacements(r,""+s+D.Left+"-notch"),r},i.prototype.createRightImages=function(i,n,e,s){var r=t.prototype.createRightImages.call(this,i,n,e,s);return this.generateNotchReplacements(r,""+s+D.Right+"-notch"),r},i.prototype.generateNotchReplacements=function(t,i){for(var n=Math.floor(3*Math.random()),e=0;e<n;e++)t[Math.floor(Math.random()*t.length)].frameName=i},i}(C),B=function(){function t(t){this.game=null,this.game=t}return t.parseJSON=function(t){try{return JSON.parse(t)}catch(i){s.Logger.log("Error parsing config file",s.LogLevel.Error)}},t.prototype.createUIElements=function(i,n){for(var e=null,h=null,o=null,u=[],a=n.width,c=n.height,f=0;f<i.length;f++)(e=i[f]).experiment&&!l.a.areRequirementsMet(e.experiment)||(l.a.processExperimentVariables(e),r.b.isValid(e.type)?(h=t.ELEMENTS[e.type],r.b.isValid(h)||(h=t.ELEMENTS.UIElement,s.Logger.log("UIParser.createUIElements - parser has no definition for element of type: "+e.type+".  Creating UIElement instead.",s.LogLevel.Error)),(o=new h(this.game,n)).processRelativeFields(e,{width:a,height:c}),o.populate(e),u.push(o),r.b.isValid(e.children)&&(u=u.concat(this.createUIElements(e.children,o))),r.b.isValid(e.layoutConfig)&&(o.layoutElement=new O(this.game,o,e.layoutConfig)),o.postPopulate()):s.Logger.log("UIParser.createUIElements - element is missing type field.  Skipping.",s.LogLevel.Error));return u},t.ELEMENTS={UIElement:d.a,Text:A,Button:h.a,ButtonToggle:a,PhaserButtonWrapper:c.a,Graphic:f.a,Mask:m,SlicedGraphic:C,SlicedBanner:S,WoodSlicedPanel:k,Slider:N.a,TabButton:M.a,Tab:R.a,ScrollView:w,ScrollBar:p.a,WebFontText:P.a,SpineUI:x.a,InputFieldElement:b.a,VideoGraphic:L.a},t}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return c}));var e=n(0),s=n(26),r=n(1),h=n(9),o=n(5),u=n(3),a=n(7),c=function(){function t(t){this.data=null,this.gender=null,this.localizer=null,this.localizer=t}var i;return i=t,t.prototype.init=function(t,i){this.data=t,this.gender=i},t.prototype.initFromProtobuf=function(t,i){this.data=new s.NameData,this.data.setFirstName(t.first>0?t.first:null),this.data.setMiddleName(t.middle>0?t.middle:null),this.data.setLastName(t.last>0?t.last:null),this.data.setNickname(t.nick>0?t.nick:null),this.gender=i},t.prototype.getName=function(){return this.validateNameData(),null===this.data.getNickname()?this.getFullName():a.a.getItem("nickname",this.data.getNickname()).data.value.replace("{first}",a.a.getItem("name",this.data.getFirstName()).data.value).replace("{middle}",a.a.getItem("name",this.data.getMiddleName()).data.value).replace("{last}",a.a.getItem("name",this.data.getLastName()).data.value)},t.prototype.getNameWithoutNickname=function(){return this.validateNameData(),this.getFullName()},t.prototype.getFirstName=function(){this.validateNameData();var t=this.data.getFirstName();return t>0?a.a.getItem("name",t).data.value:this.localizer.getText("NAME_APPRENTICE")},t.prototype.generateRandomName=function(){this.data=new s.NameData,this.data.setFirstName(i.getRandomFirstName(this.gender)),this.data.setMiddleName(i.getRandomMiddleName()),this.data.setLastName(i.getRandomLastName())},t.prototype.getFullName=function(){if(u.b.isValid(this.data.getFirstName())){var t=a.a.getItem("name",this.data.getFirstName()).data.value;if(u.b.isValid(this.data.getMiddleName())&&u.b.isValid(null===this.data.getLastName())){var i=""+a.a.getItem("name",this.data.getMiddleName()).data.value+a.a.getItem("name",this.data.getLastName()).data.value;return t+" "+o.capitalize(i)}return t}return this.localizer.getText("NAME_APPRENTICE")},t.prototype.validateNameData=function(){var t=this;if(this.data&&this.data.isValid()){u.b.isValid(this.data.getFirstName())&&0===a.a.getItemsWithFilter("name",(function(i){return 0===i.data.type&&i.ID===t.data.getFirstName()})).length&&this.data.setFirstName(i.getRandomFirstName(this.gender));var n=this.data.getMiddleName(),e=this.data.getLastName(),s=this.data.getNickname();null===n||null===e?(this.data.setMiddleName(null),this.data.setLastName(null),this.data.setNickname(null)):(0===a.a.getItemsWithFilter("name",(function(i){return 0===i.data.type&&i.ID===t.data.getFirstName()})).length&&this.data.setFirstName(i.getRandomFirstName(this.gender)),0===a.a.getItemsWithFilter("name",(function(t){return 1===t.data.type&&t.ID===n})).length&&this.data.setMiddleName(i.getRandomMiddleName()),0===a.a.getItemsWithFilter("name",(function(t){return 2===t.data.type&&t.ID===e})).length&&this.data.setLastName(i.getRandomLastName()),u.b.isValid(s)&&0===a.a.getItemsWithFilter("nickname",(function(t){return t.ID===s})).length&&this.data.setNickname(null))}else this.generateRandomName()},t.getRandomFirstName=function(t){return o.sample(o.filter(a.a.data.name,(function(i){return i.data.gender===("female"===t?1:2)&&0===i.data.type}))).ID},t.getRandomMiddleName=function(){return o.sample(o.filter(a.a.data.name,(function(t){return 1===t.data.type}))).ID},t.getRandomLastName=function(){return o.sample(o.filter(a.a.data.name,(function(t){return 2===t.data.type}))).ID},t.prototype.getData=function(){return this.data},t=i=Object(e.__decorate)([Object(h.injectable)(),Object(e.__param)(0,Object(h.inject)(r.GameIdentifiers.LocalizationService)),Object(e.__metadata)("design:paramtypes",[r.BaseLocalizer])],t)}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return o}));var e=n(0),s=n(1),r=n(9),h=n(5),o=function(){function t(t){this._updated=!1,this._data=null,this._currentPlayer=null,this._currentPlayer=t}return Object.defineProperty(t.prototype,"updated",{get:function(){return this._updated},enumerable:!0,configurable:!0}),t.prototype.getInitializationData=function(){return{persistentData:{bossesStatus:0}}},t.prototype.getDataAndClear=function(){return this._updated=!1,this._data},t.prototype.setData=function(t,i){void 0===i&&(i=!1),t&&(this._data=t,this._updated=this._updated||i)},t.prototype.getCurrentMap=function(){var t;return null!==(t=this.getRunSchema().currentMap)&&void 0!==t?t:null},t.prototype.setCurrentMap=function(t){this.getRunSchema().currentMap=t,this._updated=!0},t.prototype.getLevel=function(){var t;return null!==(t=this.getRunSchema().level)&&void 0!==t?t:1},t.prototype.isRunStarted=function(){return!(h.isEmpty(this.getRunSchema())&&h.isEmpty(this.getPhaseSchema()))},t.prototype.setCheckpoint=function(t,i,n){this.getPhaseSchema().checkpoint={index:t,location:{x:i.x,y:i.y},facingDirection:n},this._updated=!0},t.prototype.getCheckpointIndex=function(){var t,i;return null!==(i=null===(t=this.getPhaseSchema().checkpoint)||void 0===t?void 0:t.index)&&void 0!==i?i:-1},t.prototype.getCheckpointLocation=function(){var t,i;return null!==(i=null===(t=this.getPhaseSchema().checkpoint)||void 0===t?void 0:t.location)&&void 0!==i?i:null},t.prototype.getFacingDirection=function(){var t,i;return null!==(i=null===(t=this.getPhaseSchema().checkpoint)||void 0===t?void 0:t.facingDirection)&&void 0!==i?i:1},t.prototype.getCompletedRuns=function(){var t;return null!==(t=this.getPersistentSchema().completedRuns)&&void 0!==t?t:0},t.prototype.setCompletedRuns=function(t){this.getPersistentSchema().completedRuns=t,this._updated=!0},t.prototype.setPersistentBossesStatus=function(t){this.getPersistentSchema().bossesStatus=t,this._updated=!0},t.prototype.getPersistentBossesStatus=function(){var t;return null!==(t=this.getPersistentSchema().bossesStatus)&&void 0!==t?t:0},t.prototype.setRunBossesStatus=function(t){this.getRunSchema().bossesStatus=t,this._updated=!0},t.prototype.getRunBossesStatus=function(){var t;return null!==(t=this.getRunSchema().bossesStatus)&&void 0!==t?t:0},t.prototype.getSeed=function(){var t;return null!==(t=this.getRunSchema().seed)&&void 0!==t?t:0},t.prototype.setMapObjectCompleted=function(t,i){var n=this.getMapObjectsID(t),e=this.getPhaseSchema(),r=e.mapObjectStatus;r||(r={},e.mapObjectStatus=r),r[n.objectsIndex]=i?s.BitField.setBit(r[n.objectsIndex],n.bit):s.BitField.clearBit(r[n.objectsIndex],n.bit),this._updated=!0},t.prototype.isMapObjectCompleted=function(t){var i=this.getPhaseSchema().mapObjectStatus;if(i){var n=this.getMapObjectsID(t),e=i[n.objectsIndex];return!!s.Utils.isDefined(e)&&s.BitField.isBitSet(e,n.bit)}return!1},t.prototype.setConditionActive=function(t,i){var n=this.getPhaseSchema();n.conditionStatus||(n.conditionStatus={}),n.conditionStatus[t]=i},t.prototype.isConditionActive=function(t){var i=this.getPhaseSchema();return!!i.conditionStatus&&i.conditionStatus[t]},t.prototype.getActiveConditions=function(){var t=this.getPhaseSchema();return t.conditionStatus?Object.keys(t.conditionStatus).filter((function(i){return t.conditionStatus[i]})):[]},t.prototype.startDungeonRun=function(){var t=this.getRunSchema();t.bossesStatus=0,t.currentMap=null,t.level=this._currentPlayer.getLevel(),t.seed=Date.now(),this.resetPhaseData()},t.prototype.resetPhaseData=function(){this._data?(this._data.phaseData={},this._updated=!0):s.Logger.log("Dungeon was reset without having data initialized",s.LogLevel.Warning)},t.prototype.resetRunData=function(){this._data?(this._data.runData={},this.resetPhaseData(),this._updated=!0):s.Logger.log("Dungeon was reset without having data initialized",s.LogLevel.Warning)},t.prototype.resetAllData=function(){this._data?(this._data.persistentData={},this.resetPhaseData(),this.resetRunData(),this._updated=!0):s.Logger.log("Dungeon was reset without having data initialized",s.LogLevel.Warning)},t.prototype.isValid=function(){var t=this.getRunSchema();return s.Utils.isDefined(t.seed)&&s.Utils.isDefined(t.currentMap)},t.prototype.getMapObjectsID=function(t){var i=Math.floor(t/32);return{objectsIndex:i,bit:t-32*i}},t.prototype.getPersistentSchema=function(){return this._data.persistentData||(this._data.persistentData={}),this._data.persistentData},t.prototype.getRunSchema=function(){return this._data.runData||(this._data.runData={}),this._data.runData},t.prototype.getPhaseSchema=function(){return this._data.phaseData||(this._data.phaseData={}),this._data.phaseData},t=Object(e.__decorate)([Object(r.injectable)(),Object(e.__param)(0,Object(r.inject)("447-4630")),Object(e.__metadata)("design:paramtypes",[Object])],t)}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return d}));var e=n(0),s=n(1),r=n(12),h=n(7),o=n(3),u=n(208),a=n(209),c=n(210),l=n(211),f=n(212),b=n(178),v=n(213),d=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.onAppearanceLoaded=new r.a,i.requestedHair=null,i.skinColorID=null,i.hair=null,i.isHairDirty=!1,i.face=null,i.isFaceDirty=!1,i.head=null,i.isHeadDirty=!1,i.hat=null,i.isHatDirty=!1,i.neck=null,i.isNeckDirty=!1,i.outfit=null,i.isOutfitDirty=!1,i.weapon=null,i.isWeaponDirty=!1,i}return Object(e.__extends)(i,t),Object.defineProperty(i.prototype,"HairID",{get:function(){return null!==this.hair?this.hair.ID:null},set:function(t){if(null!==this.hair){this.requestedHair=t;var i=this.validateHairForHat(this.HatID,t);this.isHairDirty=this.isHairDirty||this.hair.ID!==i,this.hair.ID=i}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"FaceID",{get:function(){return null!==this.face?this.face.ID:null},set:function(t){null!==this.face&&(this.isFaceDirty=this.isFaceDirty||this.face.ID!==t,this.face.ID=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"SkinColor",{get:function(){return this.skinColorID},set:function(t){if(this.skinColorID=t,null!==this.head&&(this.isHeadDirty=this.isHeadDirty||this.head.ColorID!==t,this.head.ColorID=t),null!==this.neck&&(this.isNeckDirty=this.isNeckDirty||this.neck.ColorID!==t,this.neck.ColorID=t),null!==this.face){var i=h.a.getItem("skinColor",t);null!==i&&(this.isFaceDirty=this.isFaceDirty||this.face.ColorID!==i.metadata.faceColor,this.face.ColorID=i.metadata.faceColor)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"HairColor",{get:function(){return null!==this.hair?this.hair.ColorID:null},set:function(t){null!==this.hair&&(this.isHairDirty=this.isHairDirty||this.hair.ColorID!==t,this.hair.ColorID=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"EyeColor",{get:function(){return null!==this.face?this.face.EyeColorID:null},set:function(t){null!==this.face&&(this.isFaceDirty=this.isFaceDirty||this.face.EyeColorID!==t,this.face.EyeColorID=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"HatID",{get:function(){return null!==this.hat?this.hat.ID:null},set:function(t){if(null!==this.hat&&(this.isHatDirty=this.isHatDirty||this.hat.ID!==t,this.hat.ID=t,null!==this.hair)){var i=this.validateHairForHat(t,this.requestedHair);this.isHairDirty=this.isHairDirty||this.hair.ID!==i,this.hair.ID=i}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"OutfitID",{get:function(){return null!==this.outfit?this.outfit.ID:null},set:function(t){null!==this.outfit&&(this.isOutfitDirty=this.isOutfitDirty||this.outfit.ID!==t,this.outfit.ID=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Gender",{get:function(){return null!==this.outfit?this.outfit.Gender:null},set:function(t){null!==this.outfit&&(this.isOutfitDirty=this.isOutfitDirty||this.outfit.Gender!==t,this.outfit.Gender=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"WeaponID",{get:function(){return null!==this.weapon?this.weapon.ID:null},set:function(t){null!==this.weapon&&(this.isWeaponDirty=this.isWeaponDirty||this.weapon.ID!==t,this.weapon.ID=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Hair",{get:function(){return this.hair},set:function(t){this.hair=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Face",{get:function(){return this.face},set:function(t){this.face=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Head",{get:function(){return this.head},set:function(t){this.head=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Hat",{get:function(){return this.hat},set:function(t){this.hat=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Neck",{get:function(){return this.neck},set:function(t){this.neck=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Outfit",{get:function(){return this.outfit},set:function(t){this.outfit=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Weapon",{get:function(){return this.weapon},set:function(t){this.weapon=t},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.prototype.create.call(this),this._appearanceData&&this.setAppearance(this._appearanceData)},i.prototype.setAppearance=function(t){null!==this.head&&(this.head.ID=1),null!==this.neck&&(this.neck.ID=1),this.FaceID=t.face,this.HatID=o.b.isValid(t.hat)?t.hat:null,this.HairID=t.hair.style,this.HairColor=t.hair.color,this.SkinColor=t.skin,this.EyeColor=t.eyeColor,this.OutfitID=o.b.isValid(t.outfit)?t.outfit:1,this.Gender=t.gender,this.WeaponID=o.b.isValid(t.weapon)?t.weapon:null,this.updateAppearance()},i.prototype.updateAppearance=function(){var t=this,i=[];this.isFaceDirty&&null!==this.face&&(i.push(this.face.updateAttribute()),this.isFaceDirty=!1),this.isHairDirty&&null!==this.hair&&(i.push(this.hair.updateAttribute()),this.isHairDirty=!1,this.hair.GameObject.active=null!==this.hair.ID),this.isHatDirty&&null!==this.hat&&(i.push(this.hat.updateAttribute()),this.isHatDirty=!1,this.hat.GameObject.active=null!==this.hat.ID),this.isHeadDirty&&null!==this.head&&(i.push(this.head.updateAttribute()),this.isHeadDirty=!1),this.isNeckDirty&&null!==this.neck&&(i.push(this.neck.updateAttribute()),this.isNeckDirty=!1),this.isOutfitDirty&&null!==this.outfit&&(i.push(this.outfit.updateAttribute()),this.isOutfitDirty=!1),this.isWeaponDirty&&null!==this.weapon&&(i.push(this.weapon.updateAttribute()),this.isWeaponDirty=!1,this.weapon.GameObject.active=null!==this.weapon.ID),Promise.all(i).then((function(){t.onAppearanceLoaded.dispatch()}))},i.prototype.getAppearanceAssets=function(){var t=[];return this.hat&&null!==this.HatID&&t.push("player-hat-"+this.HatID),this.hair&&t.push(this.hair.getCacheKey()),this.face&&t.push(this.face.getCacheKey()),this.head&&t.push(this.head.getCacheKey()),this.outfit&&t.push(this.Gender+"-outfit-"+this.OutfitID),this.weapon&&this.WeaponID>0&&t.push("player-weapon-"+this.WeaponID),t},i.prototype.validateHairForHat=function(t,i){if(null===t)return i;var n=h.a.getItem("hat",t);if(null!==n&&Array.isArray(n.metadata.hairHide)){var e=n.metadata.hideReplace;if(-1===e&&(e=null),1===n.metadata.hairHide.length&&-1===n.metadata.hairHide[0])return e;for(var s=0;s<n.metadata.hairHide.length;++s)if(i===n.metadata.hairHide[s])return e}return i},i.prototype.destroy=function(){this.onAppearanceLoaded.dispose(),t.prototype.destroy.call(this)},Object(e.__decorate)([Object(s.serializeSignal)(),Object(e.__metadata)("design:type",r.a)],i.prototype,"onAppearanceLoaded",void 0),Object(e.__decorate)([Object(s.serializeComponent)(a.a),Object(e.__metadata)("design:type",a.a)],i.prototype,"hair",void 0),Object(e.__decorate)([Object(s.serializeComponent)(u.a),Object(e.__metadata)("design:type",u.a)],i.prototype,"face",void 0),Object(e.__decorate)([Object(s.serializeComponent)(l.a),Object(e.__metadata)("design:type",l.a)],i.prototype,"head",void 0),Object(e.__decorate)([Object(s.serializeComponent)(c.a),Object(e.__metadata)("design:type",c.a)],i.prototype,"hat",void 0),Object(e.__decorate)([Object(s.serializeComponent)(f.a),Object(e.__metadata)("design:type",f.a)],i.prototype,"neck",void 0),Object(e.__decorate)([Object(s.serializeComponent)(b.a),Object(e.__metadata)("design:type",b.a)],i.prototype,"outfit",void 0),Object(e.__decorate)([Object(s.serializeComponent)(v.a),Object(e.__metadata)("design:type",v.a)],i.prototype,"weapon",void 0),Object(e.__decorate)([Object(s.serializeJSON)(),Object(e.__metadata)("design:type",Object)],i.prototype,"_appearanceData",void 0),i=Object(e.__decorate)([Object(s.componentable)("PlayerAppearanceSelector")],i)}(s.Component)},function(t,i,n){"use strict";n.d(i,"a",(function(){return c}));var e=n(0),s=n(1),r=n(2),h=n(7),o=n(78),u=n(3),a=n(231),c=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.isActive=!0,e.onDestroy.add(e.handleDestroy.bind(e)),e}return Object(e.__extends)(i,t),i.prototype.populate=function(i,n){t.prototype.populate.call(this,i);var e=r.a.instance.prodigy.gameContainer.get(s.GameIdentifiers.LocalizationService);u.b.isValid(i.textKey)&&(i.text=e.getText(i.textKey)),u.b.isValid(i.forceUpperCase)&&i.forceUpperCase&&(i.text=i.text.toUpperCase()),this.text=new a.a(this.game,0,0,""),this.text.wordWrap=!!u.b.isValid(i.wordWrap)&&i.wordWrap,this.text.wordWrapWidth=u.b.isValid(i.wordWrapWidth)?i.wordWrapWidth:this.width,this.text.align=u.b.isValid(i.align)?i.align:"center",this.text.lineSpacing=u.b.isValid(i.lineSpacing)?i.lineSpacing:0,this.text.setTextBounds(0,0,u.b.isValid(n)?n:this.width,this.height),this.text.boundsAlignH=u.b.isValid(i.boundsAlignH)?i.boundsAlignH:"left",this.text.boundsAlignV=u.b.isValid(i.boundsAlignV)?i.boundsAlignV:"top";var o=u.b.isValid(i.style)?h.a.getItem("fontStyle",i.style):h.a.getItem("fontStyle",1);if(u.b.isValid(o)){var c=o.data;for(var l in c)this.text[l]=c[l];u.b.isValid(c.gradientFill)&&c.gradientFill.length>1?this.createGradient(this.text,c):u.b.isValid(i.color)&&(this.text.fill=i.color)}u.b.isValid(i.fontSize)&&(this.text.fontSize=i.fontSize),u.b.isValid(i.text)&&this.text.setText(i.text,!0),this.add(this.text)},i.prototype.createGradient=function(t,i){for(var n=t.context.createLinearGradient(0,0,0,t.height),e=t.precalculateWordWrap(t.text).length,s=i.gradientFill.length,r=1/((s-1)*e),h=0,o=0;o<e;o++){for(var u=0;u<s;u++)n.addColorStop(h,i.gradientFill[u]),h+=r;h-=r}t.fill=n},i.prototype.setText=function(t){this.text.setText(t,!0),o.a.isEnabled()&&this.updateElementAttribute("data-text",t)},i.prototype.handleDestroy=function(){0},i.prototype.applyTint=function(t){this.text.tint=t},i.className="WebFontText",i}(n(42).a)},function(t,i,n){"use strict";n.d(i,"a",(function(){return s})),n.d(i,"c",(function(){return r})),n.d(i,"b",(function(){return h}));var e=n(0),s=function(t,i,n){if(Array.isArray(t))for(var e=0;e<t.length;++e)t[e].playAnimation(i,n);else t.playAnimation(i,n)},r=function(t){if(Array.isArray(t))for(var i=0;i<t.length;++i)t[i].stopAnimation();else t.stopAnimation()},h=function(t,i){return Object(e.__awaiter)(void 0,void 0,void 0,(function(){var n,s;return Object(e.__generator)(this,(function(r){if(Array.isArray(t)){for(n=[],s=0;s<t.length;++s)n.push(function(n){return Object(e.__awaiter)(void 0,void 0,void 0,(function(){return Object(e.__generator)(this,(function(e){return[2,new Promise((function(e){t[n].OnAnimationComplete.addOnce(e),t[n].playAnimation(i,!1)}))]}))}))}(s));return[2,Promise.all(n).then((function(){return Promise.resolve()}))]}return[2,new Promise((function(n){t.OnAnimationComplete.addOnce(n),t.playAnimation(i,!1)}))]}))}))}},function(t,i,n){"use strict";n.d(i,"a",(function(){return l}));var e=n(0),s=n(1),r=n(2),h=n(6),o=n(10),u=n(7),a=n(33),c=n(3),l=function(t){function i(n,e,s,r,h,o,a,l){var f=t.call(this,n,e,s,r,h,o)||this;return 2!==r||c.b.isValid(u.a.getItem("pet",s.data.ID).metadata.assets.default)||(f.sprites.scale.x=f.sprites.scale.y=2),f.forceSimple=a,f.assets=i.getAssets(f.source,f.setScale,f.forceSimple),f.onClick=l,f}return Object(e.__extends)(i,t),i.getAssets=function(t,i,n,e){var s=u.a.getItem("pet",t.data.ID).metadata.assets,r=null,h=[];if("default"===(r=1!==i&&c.b.isValid(s.default)?"default":"reduced")&&n&&!e&&(r="small"),c.b.isValid(s.default)&&"spine"===s.default.type)h.push("spine-"+s.default.ID);else{var o=t.getID();switch(h.push(r+"-pet-"+o),o){case 125:h=h.concat(["sfx-5"]);break;case 126:h=h.concat(["sfx-2"]);break;case 127:h=h.concat(["sfx-3"]);break;case 128:h=h.concat(["sfx-6"]);break;case 129:h=h.concat(["sfx-4"])}}return h},i.prototype.startLoad=function(n){var e=this;t.prototype.startLoad.call(this),this.loading=!0,this.assets=i.getAssets(this.source,this.setScale,this.forceSimple),c.b.isValid(n)&&(this.assets=this.assets.concat(n)),r.a.instance.prodigy.load.assets(this.assets,(function(){e.setup()}))},i.prototype.setup=function(t,i){if(c.b.isValid(this.game)&&(!c.b.isValid(i)||i)&&c.b.isValid(this.assets)){this.sprites.removeAll(!0);var n=this.assets[0],e=null,h=u.a.getItem("pet",this.source.data.ID).metadata.assets.default;c.b.isValid(h)&&(e=h.battleScale);var o=r.a.instance.prodigy.assets.getAsset(n);if(c.b.isValid(o)&&this.setHitbox(o.hitbox),c.b.isValid(o)&&c.b.isValid(o.battleScale)?this.battleScale=o.battleScale:c.b.isValid(e)?this.battleScale=e:this.battleScale=1,this.forceSimple){a=r.a.instance.prodigy.assets.getImageBounds(n);this.body=r.a.instance.prodigy.create.sprite(0,0,n),this.sprites.add(this.body),this.body.x=-a[0],this.body.y=-this.body.height,this.onClick&&(this.body.inputEnabled=!0,this.body.events.onInputDown.add(this.onClick))}else{var a,l=-(a=r.a.instance.prodigy.assets.getImageBounds(n))[0],f=-a[3];this.body=r.a.instance.prodigy.create.sprite(l,f,n),this.sprites.add(this.body),this.onClick&&(this.body.inputEnabled=!0,this.body.events.onInputDown.add(this.onClick)),this.sprites.callAll("animations.add","animations","walk",[0,1,2,3,4,5,6,7],10,!0,!0),this.sprites.callAll("animations.add","animations","stand",[8,9,10,11,12,13,14,15],10,!0,!0);try{this.body.animations.add("attack",[16,17,18,19,20,21,22,23],10).onComplete.add(this.stand,this)}catch(b){}this.sprites.callAll("play",null,"stand")}Math.abs(this.sprites.scale.x)<=1&&s.Utils.toggleDisplayObjSmooth(this.sprites,!0),this.complete=!0,this.loading=!1,c.b.isValid(this.loadedCallback)&&this.loadedCallback(this),this._onLoad.dispatch()}},i.prototype.attack=function(){t.prototype.attack.call(this),this.playAll("attack")},i.prototype.damaged=function(){this.game.add.tween(this).to({alpha:.5},100,h.a.Quadratic.InOut,!0,0,o.a.MAX_SAFE_INTEGER).start(),this.speed=0},i.prototype.getSource=function(){return this.source},i.prototype.cacheAssets=function(){a.a.cacheAssets(this.game,this.assets,a.a.commonAssetsCached)},i}(n(28).a)},function(t,i,n){"use strict";n.d(i,"a",(function(){return O}));var e=n(0),s=n(9),r=n(5),h=n(2),o=n(10),u=n(60),a=n(7),c=n(30),l=n(36),f=n(3),b=n(191),v=n(165),d=n(126),O=function(){function t(t,i,n,e,s,r){this.loggedInPlayer=null,this.deviceInfo=null,this.uuidProvider=null,this.timeManager=null,this._sessionTokenAuthProvider=null,this.loggedInPlayer=t,this.deviceInfo=i,this.uuidProvider=n,this.game=e,this.timeManager=s,this._sessionTokenAuthProvider=r}return t.prototype.buildEvent=function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var e=new t;return n?this.setAnonymousToken(e):this.setAuthorizedToken(e,i),e.setDeviceHeight(this.deviceInfo.getScreenHeight()),e.setDeviceWidth(this.deviceInfo.getScreenWidth()),e.setDevicePlatform(this.deviceInfo.getPlatformName()),e.setDeviceModel(c.a.getDeviceModel()),e.setDeviceHardwareType(c.a.getDeviceHardwareType()),e.setFrameRate(h.a.instance.prodigy.getAverageFPS()),e.setAverageFrameRate(h.a.instance.prodigy.getLongtermFPS()),e.setBrowser(c.a.getBrowserType()),e.setBrowserVersion(c.a.getBrowserVersion()),e.setTimestamp(n?this.timeManager.getLocalTimeMs():this.timeManager.getServerTimeMs()),e.setTimezoneOffset(this.timeManager.getUTCOffset()),e.setClientVersion(o.a.get("GameConstants.Build.VERSION")),e},t.prototype.setAnonymousToken=function(t){t.setUUID(this.uuidProvider.getUUID())},t.prototype.setAuthorizedToken=function(t,i){if(t.setUserId(r.get(this.loggedInPlayer.getPlayer(),"userID",0)),t.setToken(this._sessionTokenAuthProvider.getSessionToken()),t.setUUID(this.uuidProvider.getUUID()),i&&f.b.isValid(this.loggedInPlayer.getPlayer())){var n=this.loggedInPlayer.getPlayer(),e=n.data;if(t.setIsMember(!!this.loggedInPlayer.getPlayer().hasMembership()),t.setLevel(e.level),t.setGrade(n.grade),t.setLocation(n.locationSelectionType),t.setCurriculumTreeId(n.curriculumTreeID),f.b.isValid(n.backpack.data.currency)){for(var s={},o=h.a.instance.prodigy.gameContainer.get("447-4630").player,u=0;u<o.backpack.data.currency.length;++u){var c=o.backpack.data.currency[u],l=a.a.getItem("currency",c.ID);null!==l&&(s[l.data.name.toLowerCase().replace(" ","_")]=f.b.isValid(c.N)?c.N:0)}f.b.isValid(o)&&o.userID>0&&(s.gold=o.getGold()),t.setCurrencies(s)}if(f.b.isValid(e.zone)){var b=e.zone.split("-");t.setZone(f.b.isValid(b[0])?b[0]:""),t.setMap(f.b.isValid(b[1])?b[1]:"")}}},t=Object(e.__decorate)([Object(s.injectable)(),Object(e.__param)(0,Object(s.inject)("447-4630")),Object(e.__param)(1,Object(s.inject)("1ab-69e4")),Object(e.__param)(2,Object(s.inject)("979-aad6")),Object(e.__param)(3,Object(s.inject)("169-a709")),Object(e.__param)(4,Object(s.inject)("6e9-a610")),Object(e.__param)(5,Object(s.inject)("a21-04f9")),Object(e.__metadata)("design:paramtypes",[u.a,Object,b.a,l.a,d.a,v.a])],t)}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return s}));var e=n(3),s=function(){function t(t){this.seed=t,this.currentSeed=t}return t.prototype.next=function(){return this.currentSeed=this.currentSeed+t.CONSTANT,this.generate(this.currentSeed)},t.prototype.jumpFromStart=function(i){for(var n=0,e=0;e<=i;e++)n=this.generate(this.seed+e*t.CONSTANT);return n},t.prototype.jump=function(t){for(var i=this.generate(),n=0;n<t;n++)i=this.next();return i},t.prototype.generate=function(t){return(9301*(e.b.isValid(t)?t:this.seed)+49297)%233280/233280},t.CONSTANT=2949751391065249e4,t}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return s}));var e=n(0),s=function(t){function i(i,n,e,s,r,h,o,u,a,c){void 0===i&&(i="Quit"),void 0===n&&(n=null),void 0===e&&(e="Stay"),void 0===s&&(s=null),void 0===r&&(r=null);var l=t.call(this,h,o,u,a,c)||this;return l._confirmButtonText=i,l._confirmButtonCallback=n,l._dismissButtonText=e,l._dismissButtonCallback=s,l._headerIcon=r,l}return Object(e.__extends)(i,t),Object.defineProperty(i.prototype,"confirmButtonText",{get:function(){return this._confirmButtonText},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"confirmButtonCallback",{get:function(){return this._confirmButtonCallback},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dismissButtonText",{get:function(){return this._dismissButtonText},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dismissButtonCallback",{get:function(){return this._dismissButtonCallback},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"headerIcon",{get:function(){return this._headerIcon},enumerable:!0,configurable:!0}),i}(n(188).a)},function(t,i,n){"use strict";n.d(i,"a",(function(){return o}));var e=n(0),s=n(2),r=n(12),h=n(3),o=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.onClickCallback=null,e.onUpCallback=null,e.onOverCallback=null,e.onOutCallback=null,e.onClickDisabled=new r.a,e.defaultY=0,e.hoverLiftDistance=3,e.broadcasts=[],e.collisionBlock=null,e.disableInput=!1,e._state="up",e.isActive=!0,e.onDestroy.add((function(){e.handleDestroy()})),e}return Object(e.__extends)(i,t),Object.defineProperty(i.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),i.prototype.populate=function(i){t.prototype.populate.call(this,i),this.onClickCallback=null,this.onUpCallback=null,this.onOverCallback=null,this.onOutCallback=null,this.defaultY=this.y,this.hoverLiftDistance=h.b.isValid(i.hoverLiftDistance)?i.hoverLiftDistance:3,this.broadcasts=i.broadcasts,this.setupCollisionBlock(i)},i.prototype.setActive=function(i){t.prototype.setActive.call(this,i),this.y=this.defaultY},i.prototype.setDisableInput=function(t){this.disableInput=t},i.prototype.onDown=function(){this.disableInput||this.visible&&(this.isActive?(this.y=this.defaultY,s.a.instance.prodigy.audio.playSFX(18,"pop"),h.b.isValid(this.onClickCallback)&&this.onClickCallback(),this.broadcastAll(),this._state="down"):this.onClickDisabled.dispatch())},i.prototype.setInputBlockPriority=function(t){s.a.instance.prodigy.gameContainer.get("b46-038d").setBlockType(this.collisionBlock.input,t)},i.prototype.setupCollisionBlock=function(t){var i=this;this.collisionBlock=this.add(s.a.instance.prodigy.create.sprite(0,0,"atlas-18","empty")),this.collisionBlock.alpha=0,this.collisionBlock.width=t.width,this.collisionBlock.height=t.height,this.collisionBlock.inputEnabled=!0,this.collisionBlock.events.onInputDown.add((function(){i.onDown()})),this.collisionBlock.events.onInputUp.add((function(){i.onUp()})),this.collisionBlock.events.onInputOver.add((function(){i.onOver()})),this.collisionBlock.events.onInputOut.add((function(){i.onOut()}))},i.prototype.broadcastAll=function(){var t=this;h.b.isValid(this.broadcasts)&&this.broadcasts.forEach((function(i){t.game.broadcaster.broadcast(i.type,s.a.instance.prodigy.open.menus[s.a.instance.prodigy.open.menus.length-1],i.params)}))},i.prototype.onUp=function(){this.disableInput||this.visible&&this.isActive&&(this.y=this.defaultY-this.hoverLiftDistance,h.b.isValid(this.onUpCallback)&&this.onUpCallback(),this._state="up")},i.prototype.onOver=function(){this.disableInput||this.visible&&this.isActive&&(this.y=this.defaultY-this.hoverLiftDistance,h.b.isValid(this.onOverCallback)&&this.onOverCallback(),this._state="over")},i.prototype.onOut=function(){this.visible&&this.isActive&&(this.y=this.defaultY,h.b.isValid(this.onOutCallback)&&this.onOutCallback())},i.prototype.handleDestroy=function(){this.onClickDisabled.dispose()},i}(n(42).a)},function(t,i,n){"use strict";n.d(i,"a",(function(){return s}));var e=n(0),s=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Object(e.__extends)(i,t),i}(Phaser.Cache)},function(t,i,n){"use strict";n.d(i,"a",(function(){return u}));var e=n(0),s=n(9),r=n(244),h=n(74),o=n(3),u=function(){function t(t){this.environmentProvider=null,this.environmentProvider=t}return t.prototype.getAPIRootUrl=function(){switch(this.environmentProvider.getCurrentEnvironment()){case h.a.Production:return"https://api.prodigygame.com";case h.a.Staging:return"https://api.prodigygame.org";case h.a.Dev:return"https://api.prodigygame.net";case h.a.QABox:case h.a.Local:var t=r.parse(window.location.search);return o.b.isValid(t.env)&&t.env.indexOf("-qa")>-1?"https://"+t.env+".prodigygame."+(o.b.isValid(t.boxEnv)?t.boxEnv:"org"):"https://"+window.location.host;default:return""}},t.prototype.getCDNRootUrl=function(){return"https://cdn.prodigygame.com"},t.prototype.getLoaderUrl=function(){return this.getAPIRootUrl()},t.prototype.getWorkerPath=function(t){var i=this.environmentProvider.getCurrentEnvironmentByHost(),n=window.gameCodeFile?window.gameCodeFile.replace("code.prodigygame.",window.location.hostname.split(".")[0]+".prodigygame."):"../bin/",e=Math.max(n.lastIndexOf("/"),n.lastIndexOf("\\"));return""+((e>=0?n.substr(0,e+1):n)+"workers/")+t+"."+(i===h.a.Local||window.location.origin.indexOf("localhost")>-1?"js":"min.js")+(i===h.a.Production?"":"?v="+Date.now())},t=Object(e.__decorate)([Object(s.injectable)(),Object(e.__param)(0,Object(s.inject)("3e1-2ac3")),Object(e.__metadata)("design:paramtypes",[Object])],t)}()},function(t,i,n){"use strict";n.d(i,"a",(function(){return o}));var e=n(0),s=n(12),r=n(13),h=n(66),o=function(t){function i(i,n){var e=t.call(this)||this;return e.resetAfterDrag=!1,e.source=i,e.metadata=n,e.onLoaded=new s.a,e}return Object(e.__extends)(i,t),i.prototype.create=function(){t.prototype.create.call(this)},i.prototype.setAnchor=function(t,i){},i.prototype.setScale=function(t,i){},i.prototype.getScale=function(){return new r.a(1,1)},i.prototype.setAlpha=function(t){},i.prototype.getWorld=function(){return new r.a},i.prototype.getWidth=function(){return 0},i.prototype.getHeight=function(){return 0},i.prototype.getEvents=function(){return null},i.prototype.setInputEnabled=function(t){void 0===t&&(t=!0)},i.prot